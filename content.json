{"meta":{"title":"æ€’æ¶›å·éœœé›ª  å¤©å ‘æ— æ¶¯","subtitle":"","description":"test description","author":"å´æ¶›","url":"http://breadwinners.top","root":"/"},"pages":[{"title":"Page","date":"2013-12-26T14:52:56.000Z","updated":"2023-04-30T06:59:49.463Z","comments":true,"path":"page/index.html","permalink":"http://breadwinners.top/page/index.html","excerpt":"","text":"This is a page test."},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2023-04-30T08:10:36.359Z","updated":"2023-04-30T08:10:36.359Z","comments":true,"path":"tags/index.html","permalink":"http://breadwinners.top/tags/index.html","excerpt":"","text":""},{"title":"","date":"2023-04-30T08:10:03.888Z","updated":"2023-04-30T08:10:03.888Z","comments":true,"path":"about/index.html","permalink":"http://breadwinners.top/about/index.html","excerpt":"","text":"ä¸€åå°å°å¤§å­¦ç”Ÿçš„å°åšå®¢"},{"title":"æˆ‘çš„æœ‹å‹ä»¬","date":"2023-04-30T08:10:52.817Z","updated":"2023-04-30T08:10:52.817Z","comments":true,"path":"friends/index.html","permalink":"http://breadwinners.top/friends/index.html","excerpt":"è¿™é‡Œå†™å‹é“¾ä¸Šæ–¹çš„å†…å®¹ã€‚","text":"è¿™é‡Œå†™å‹é“¾ä¸Šæ–¹çš„å†…å®¹ã€‚ è¿™é‡Œå¯ä»¥å†™å‹é“¾é¡µé¢ä¸‹æ–¹çš„æ–‡å­—å¤‡æ³¨ï¼Œä¾‹å¦‚è‡ªå·±çš„å‹é“¾è§„èŒƒã€ç¤ºä¾‹ç­‰ã€‚"},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2023-04-30T08:10:22.183Z","updated":"2023-04-30T08:10:22.183Z","comments":true,"path":"categories/index.html","permalink":"http://breadwinners.top/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"pycharmæ‰¾ä¸åˆ°condaå¯æ‰§è¡Œæ–‡ä»¶æ€ä¹ˆåŠï¼Ÿ","slug":"å°æŠ€å·§/pycharmæ‰¾ä¸åˆ°condaå¯æ‰§è¡Œæ–‡ä»¶æ€ä¹ˆåŠï¼Ÿ","date":"2023-08-07T16:00:00.000Z","updated":"2023-08-11T07:22:01.426Z","comments":true,"path":"2023/08/08/å°æŠ€å·§/pycharmæ‰¾ä¸åˆ°condaå¯æ‰§è¡Œæ–‡ä»¶æ€ä¹ˆåŠï¼Ÿ/","link":"","permalink":"http://breadwinners.top/2023/08/08/%E5%B0%8F%E6%8A%80%E5%B7%A7/pycharm%E6%89%BE%E4%B8%8D%E5%88%B0conda%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F/","excerpt":"","text":"é—®é¢˜å¦‚å›¾ï¼šåœ¨é…ç½®pycharm condaç¯å¢ƒçš„è¿‡ç¨‹ä¸­ï¼Œpycharmæ‰¾ä¸åˆ°condaå¯æ‰§è¡Œæ–‡ä»¶ è§£å†³åŠæ³•ï¼šå®é™…ä¸Šåº”è¯¥é€‰æ‹© ç„¶åå°±å¯ä»¥çœ‹åˆ°é…ç½®å¥½çš„è™šæ‹Ÿç¯å¢ƒäº†","categories":[{"name":"å°æŠ€å·§","slug":"å°æŠ€å·§","permalink":"http://breadwinners.top/categories/%E5%B0%8F%E6%8A%80%E5%B7%A7/"}],"tags":[{"name":"_conda","slug":"conda","permalink":"http://breadwinners.top/tags/conda/"}]},{"title":"æ¨¡å‹è®­ç»ƒå¥—è·¯","slug":"å°åœŸå †pytorch/æ¨¡å‹è®­ç»ƒå¥—è·¯","date":"2023-08-05T16:00:00.000Z","updated":"2023-08-16T08:51:40.267Z","comments":true,"path":"2023/08/06/å°åœŸå †pytorch/æ¨¡å‹è®­ç»ƒå¥—è·¯/","link":"","permalink":"http://breadwinners.top/2023/08/06/%E5%B0%8F%E5%9C%9F%E5%A0%86pytorch/%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E5%A5%97%E8%B7%AF/","excerpt":"","text":"","categories":[{"name":"å°åœŸå †pytorch","slug":"å°åœŸå †pytorch","permalink":"http://breadwinners.top/categories/%E5%B0%8F%E5%9C%9F%E5%A0%86pytorch/"}],"tags":[]},{"title":"æ¨¡å‹çš„å­˜å–","slug":"å°åœŸå †pytorch/æ¨¡å‹çš„å­˜å–","date":"2023-08-04T16:00:00.000Z","updated":"2023-08-16T08:49:39.515Z","comments":true,"path":"2023/08/05/å°åœŸå †pytorch/æ¨¡å‹çš„å­˜å–/","link":"","permalink":"http://breadwinners.top/2023/08/05/%E5%B0%8F%E5%9C%9F%E5%A0%86pytorch/%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%AD%98%E5%8F%96/","excerpt":"","text":"å­˜æ¨¡å‹1234567891011121314151617181920212223import torchimport torchvisionfrom torch import nnvgg16 = torchvision.models.vgg16(pretrained=False)# ä¿å­˜æ–¹å¼1,æ¨¡å‹ç»“æ„+æ¨¡å‹å‚æ•°torch.save(vgg16, &quot;vgg16_method1.pth&quot;)# ä¿å­˜æ–¹å¼2ï¼Œæ¨¡å‹å‚æ•°ï¼ˆå®˜æ–¹æ¨èï¼‰torch.save(vgg16.state_dict(), &quot;vgg16_method2.pth&quot;)# é™·é˜±class Tudui(nn.Module): def __init__(self): super(Tudui, self).__init__() self.conv1 = nn.Conv2d(3, 64, kernel_size=3) def forward(self, x): x = self.conv1(x) return xtudui = Tudui()torch.save(tudui, &quot;tudui_method1.pth&quot;) å–æ¨¡å‹123456789101112131415161718192021222324252627import torchfrom model_save import * # ä¸€èˆ¬è¿™æ ·å†™# æ–¹å¼1-&gt;ä¿å­˜æ–¹å¼1ï¼ŒåŠ è½½æ¨¡å‹import torchvisionfrom torch import nnmodel = torch.load(&quot;vgg16_method1.pth&quot;)# print(model)# æ–¹å¼2ï¼ŒåŠ è½½æ¨¡å‹vgg16 = torchvision.models.vgg16(pretrained=False)vgg16.load_state_dict(torch.load(&quot;vgg16_method2.pth&quot;))# model = torch.load(&quot;vgg16_method2.pth&quot;)# print(vgg16)# é™·é˜±1# class Tudui(nn.Module):# def __init__(self):# super(Tudui, self).__init__()# self.conv1 = nn.Conv2d(3, 64, kernel_size=3)## def forward(self, x):# x = self.conv1(x)# return xmodel = torch.load(&#x27;tudui_method1.pth&#x27;)print(model)","categories":[{"name":"å°åœŸå †pytorch","slug":"å°åœŸå †pytorch","permalink":"http://breadwinners.top/categories/%E5%B0%8F%E5%9C%9F%E5%A0%86pytorch/"}],"tags":[]},{"title":"åŠ è½½é¢„è®­ç»ƒæ¨¡å‹åŠå‚æ•°ä¿®æ”¹","slug":"å°åœŸå †pytorch/åŠ è½½é¢„è®­ç»ƒæ¨¡å‹åŠå‚æ•°ä¿®æ”¹","date":"2023-08-04T16:00:00.000Z","updated":"2023-08-15T16:01:13.653Z","comments":true,"path":"2023/08/05/å°åœŸå †pytorch/åŠ è½½é¢„è®­ç»ƒæ¨¡å‹åŠå‚æ•°ä¿®æ”¹/","link":"","permalink":"http://breadwinners.top/2023/08/05/%E5%B0%8F%E5%9C%9F%E5%A0%86pytorch/%E5%8A%A0%E8%BD%BD%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B%E5%8F%8A%E5%8F%82%E6%95%B0%E4%BF%AE%E6%94%B9/","excerpt":"","text":"ä»£ç  æ·»åŠ ä¸€å±‚ ç›´æ¥ä¿®æ”¹æœ€åä¸€å±‚ä¸ºæ–°çš„å±‚ 123456789101112131415161718192021import torchvisionimport torch.nn as nn# åŠ è½½vgg16æ¨¡å‹ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºé¢„è®­ç»ƒæ¨¡å‹vgg16_false = torchvision.models.vgg16(pretrained=False)vgg16_true = torchvision.models.vgg16(pretrained=True)# æ‰“å°vgg16æ¨¡å‹print(vgg16_false)# å°†vgg16æ¨¡å‹æ·»åŠ ä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œè¾“å…¥ç»´åº¦ä¸º1000ï¼Œè¾“å‡ºç»´åº¦ä¸º10train_data = torchvision.datasets.CIFAR10( root=&quot;./data&quot;, train=True, download=True, transform=torchvision.transforms.ToTensor())vgg16_false.add_module(&quot;add_linear&quot;, nn.Linear(1000, 10))print(vgg16_false)# å°†vgg16æ¨¡å‹çš„ç¬¬å…­ä¸ªå…¨è¿æ¥å±‚æ”¹æˆä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œè¾“å…¥ç»´åº¦ä¸º4096ï¼Œè¾“å‡ºç»´åº¦ä¸º10vgg16_true.classifier[6] = nn.Linear(4096, 10)print(vgg16_true)","categories":[{"name":"å°åœŸå †pytorch","slug":"å°åœŸå †pytorch","permalink":"http://breadwinners.top/categories/%E5%B0%8F%E5%9C%9F%E5%A0%86pytorch/"}],"tags":[]},{"title":"Datasetå’ŒDataLoaderåˆæ­¥è®¤è¯†","slug":"å°åœŸå †pytorch/Datasetå’ŒDataLoader","date":"2023-08-03T16:00:00.000Z","updated":"2023-08-15T13:24:05.299Z","comments":true,"path":"2023/08/04/å°åœŸå †pytorch/Datasetå’ŒDataLoader/","link":"","permalink":"http://breadwinners.top/2023/08/04/%E5%B0%8F%E5%9C%9F%E5%A0%86pytorch/Dataset%E5%92%8CDataLoader/","excerpt":"","text":"datasetä½¿ç”¨12345678910111213141516171819202122232425262728293031from torch.utils.data import Datasetfrom PIL import Imageimport osclass MyData(Dataset): def __init__(self, root_dir, label_dir): self.root_dir = root_dir self.label_dir = label_dir self.path = os.path.join(self.root_dir, self.label_dir) self.img_path = os.listdir(self.path) def __getitem__(self, idx): img_name = self.img_path[idx] img_item_path = os.path.join(self.root_dir, self.label_dir, img_name) img = Image.open(img_item_path) label = self.label_dir return img, label def __len__(self): return len(self.img_path)root_dir = &quot;dataset/train&quot;ants_label_dir = &quot;ants&quot;bees_label_dir = &quot;bees&quot;ants_dataset = MyData(root_dir, ants_label_dir)bees_dataset = MyData(root_dir, bees_label_dir)train_dataset = ants_dataset + bees_dataset dataloaderä½¿ç”¨1234567891011121314151617181920212223242526272829import torchvision# å‡†å¤‡çš„æµ‹è¯•æ•°æ®é›†from torch.utils.data import DataLoaderfrom torch.utils.tensorboard import SummaryWritertest_data = torchvision.datasets.CIFAR10(&quot;./dataset&quot;, train=False, transform=torchvision.transforms.ToTensor())test_loader = DataLoader(dataset=test_data, batch_size=64, shuffle=True, num_workers=0, drop_last=True)# æµ‹è¯•æ•°æ®é›†ä¸­ç¬¬ä¸€å¼ å›¾ç‰‡åŠtargetimg, target = test_data[0]print(img.shape)print(target)writer = SummaryWriter(&quot;dataloader&quot;)for epoch in range(2): step = 0 for data in test_loader: imgs, targets = data # print(imgs.shape) # print(targets) writer.add_images(&quot;Epoch: &#123;&#125;&quot;.format(epoch), imgs, step) step = step + 1writer.close() torchvisionæ•°æ®é›†çš„ä½¿ç”¨å®˜æ–¹æ–‡æ¡£ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940import torchvisionfrom torch.utils.tensorboard import SummaryWriter# å®šä¹‰æ•°æ®é›†è½¬æ¢å™¨dataset_transform = torchvision.transforms.Compose([ torchvision.transforms.ToTensor()])# åˆ›å»ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†train_set = torchvision.datasets.CIFAR10( root=&#x27;./datasets&#x27;, train=True, download=True, transform=dataset_transform)test_set = torchvision.datasets.CIFAR10( root=&#x27;./datasets&#x27;, train=False, download=True, transform=dataset_transform)# æ‰“å°è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„ç±»åˆ«# print(test_set[0])# print(test_set.classes)# img, tatget = test_set[0]# print(img.shape)# print(tatget)# print(test_set.classes[tatget])writer = SummaryWriter()# åˆ›å»ºSummaryWriterå¯¹è±¡# writer = SummaryWriter()writer = SummaryWriter(&#x27;runs/test&#x27;)for i in range(10): img, target = test_set[i] writer.add_image(&#x27;test_set&#x27;, img, i)# å¾ªç¯æ·»åŠ å›¾ç‰‡# for i in range(10):# img, target = test_set[i]# writer.add_image(&#x27;test_set&#x27;, img, i)# å…³é—­SummaryWriterwriter.close()","categories":[{"name":"å°åœŸå †pytorch","slug":"å°åœŸå †pytorch","permalink":"http://breadwinners.top/categories/%E5%B0%8F%E5%9C%9F%E5%A0%86pytorch/"}],"tags":[]},{"title":"TensorBoardä½¿ç”¨","slug":"å°åœŸå †pytorch/TensorBoardä½¿ç”¨","date":"2023-08-03T16:00:00.000Z","updated":"2023-08-14T13:35:10.335Z","comments":true,"path":"2023/08/04/å°åœŸå †pytorch/TensorBoardä½¿ç”¨/","link":"","permalink":"http://breadwinners.top/2023/08/04/%E5%B0%8F%E5%9C%9F%E5%A0%86pytorch/TensorBoard%E4%BD%BF%E7%94%A8/","excerpt":"","text":"è¿è¡ŒTensorBoard123tensorboard --logdir=â€™logsâ€™ --port=6007# vscodeè¿œç¨‹å¼€å‘ä¼šè‡ªåŠ¨è¿›è¡Œç«¯å£è½¬å‘ï¼Œéå¸¸æ–¹ä¾¿ ä»£ç 1123456789from torch.utils.tensorboard import SummaryWriterwriter = SummaryWriter(&quot;logs&quot;)for i in range(100): writer.add_scalar(&quot;y=2x&quot;, 2 * i, i)writer.close()# è¿è¡Œè¿™ä¸ªä»£ç  ä»£ç 2ï¼Œæ˜¾ç¤ºå›¾åƒ12345678910111213141516from torch.utils.tensorboard import SummaryWriterimport numpy as npfrom PIL import Imagewriter = SummaryWriter(&quot;logs&quot;)img_path = &quot;dataset/train/bees/36900412_92b81831ad.jpg&quot;img_PIL = Image.open(img_path)img_array = np.array(img_PIL)# æ³¨æ„æ¥æ”¶çš„æ•°æ®ç±»å‹ä¸ºndarrayï¼Œä¹Ÿå¯ä»¥æ˜¯Tensorwriter.add_image(&quot;ants&quot;, img_array, 1, dataformats=&#x27;HWC&#x27;)for i in range(100): writer.add_scalar(&quot;y=x&quot;, i, i)writer.close()","categories":[{"name":"å°åœŸå †pytorch","slug":"å°åœŸå †pytorch","permalink":"http://breadwinners.top/categories/%E5%B0%8F%E5%9C%9F%E5%A0%86pytorch/"}],"tags":[]},{"title":"sequential","slug":"å°åœŸå †pytorch/sequential","date":"2023-08-03T16:00:00.000Z","updated":"2023-08-15T13:36:13.453Z","comments":true,"path":"2023/08/04/å°åœŸå †pytorch/sequential/","link":"","permalink":"http://breadwinners.top/2023/08/04/%E5%B0%8F%E5%9C%9F%E5%A0%86pytorch/sequential/","excerpt":"","text":"åŸæ¥çš„å†™æ³•1234567891011121314151617181920212223242526272829303132333435363738from torch import nnfrom torch.nn import Conv2d, MaxPool2d, Flatten, Linearclass Tudui(nn. Module): def __init__(self): super(Tudui, self). __init__() self.conv1 = Conv2d(3, 32, 5, padding=2) self.maxpool1 = MaxPool2d(2) self.conv2 = Conv2d(32, 32, 5, padding=2) self.maxpool2 = MaxPool2d(2) self.conv3 = Conv2d(32, 64, 5, padding=2) self.maxpool3 = MaxPool2d(2) self.flatten = Flatten() self.linear1 = Linear(1024, 64) self.linear2 = Linear(64, 10) def forward(self, x): x = self.conv1(x) x = self.maxpool1(x) x = self.conv2(x) x = self.maxpool2(x) x = self.conv3(x) x = self.maxpool3(x) x = self.flatten(x) # å¦‚æœä¸ç¡®å®šLinear1è¾“å…¥çš„ç»´åº¦ï¼Œå¯ä»¥æŠŠforwardå‡½æ•°ä¸­çš„ä»¥ä¸‹ä»£ç éƒ½æ³¨é‡Šäº†ï¼Œç„¶åæµ‹è¯•è¾“å‡ºï¼Œå°±å¯ä»¥å¾—åˆ°æ­£ç¡®çš„ç»´åº¦ x = self.linear1(x) x = self.linear2(x) return xtudui = Tudui()print(tudui)input = torch.ones((64, 3, 32, 32))output = tudui(input)print(output.shape)writer = SummaryWriter(&quot;../logs_seq&quot;)writer.add_graph(tudui, input)writer.close() åˆ é™¤åè¿è¡Œè¾“å‡ºçš„ç»“æœ sequentialå†™æ³•123456789101112131415161718192021222324252627282930313233343536import torchfrom torch import nnfrom torch.nn import Conv2d, MaxPool2d, Flatten, Linear, Sequentialfrom torch.utils.tensorboard import SummaryWriterclass Tudui(nn.Module): def __init__(self): super(Tudui, self).__init__() self.model1 = Sequential( Conv2d(3, 32, 5, padding=2), MaxPool2d(2), Conv2d(32, 32, 5, padding=2), MaxPool2d(2), Conv2d(32, 64, 5, padding=2), MaxPool2d(2), Flatten(), Linear(1024, 64), Linear(64, 10) ) def forward(self, x): x = self.model1(x) return xtudui = Tudui()print(tudui)input = torch.ones((64, 3, 32, 32))output = tudui(input)print(output.shape)writer = SummaryWriter(&quot;../logs_seq&quot;)# å°†æ¨¡å‹å›¾å†™å…¥tensorboardï¼Œæ”¾å…¥æ¨¡å‹å’Œè¾“å…¥writer.add_graph(tudui, input)writer.close() tensorboard Graph","categories":[{"name":"å°åœŸå †pytorch","slug":"å°åœŸå †pytorch","permalink":"http://breadwinners.top/categories/%E5%B0%8F%E5%9C%9F%E5%A0%86pytorch/"}],"tags":[]},{"title":"Transformsçš„ä½¿ç”¨","slug":"å°åœŸå †pytorch/Transformsçš„ä½¿ç”¨","date":"2023-08-03T16:00:00.000Z","updated":"2023-08-15T02:31:29.709Z","comments":true,"path":"2023/08/04/å°åœŸå †pytorch/Transformsçš„ä½¿ç”¨/","link":"","permalink":"http://breadwinners.top/2023/08/04/%E5%B0%8F%E5%9C%9F%E5%A0%86pytorch/Transforms%E7%9A%84%E4%BD%BF%E7%94%A8/","excerpt":"","text":"tramsformsçš„ç»“æ„åŠç”¨æ³•æˆ‘æ„Ÿè§‰transformsçš„åŠŸèƒ½å°±æ˜¯æŠŠå…¶ä»–ç±»å‹çš„æ•°æ®è½¬æˆTensorç±»å‹çš„æ•°æ® 1234567891011121314151617from torchvision import transformsfrom torch.utils.tensorboard import SummaryWriterfrom PIL import Image# åŠ è½½å›¾åƒimg_path = &quot;dataset/train/bees/36900412_92b81831ad.jpg&quot;img = Image.open(img_path)# åˆ›å»ºå·¥å…·ï¼Œè¿™é‡Œæ˜¯å°†å›¾åƒè½¬æ¢ä¸ºå¼ é‡tensor_trans = transforms.ToTensor()tensor_img = tensor_trans(img)# æ‰“å°å›¾åƒprint(tensor_img)writter = SummaryWriter(&quot;logs&quot;)# è¿™å›æ¥å—çš„æ•°æ®ç±»å‹æ˜¯Tensorwritter.add_image(&quot;tensor_img&quot;, tensor_img)writter.close() å¸¸ç”¨çš„transformså·¥å…· transforms.ToTensor() transforms.Normalization() transforms.Resize() â€“&gt;è¾“å…¥ä¸ºPIL imageï¼Œå›¾ç‰‡å¤§å°è½¬æ¢ compose â€“&gt;æŠŠä¹‹å‰ï¼ˆå¦‚ä¸Š1ï¼Œ2ï¼Œ3ï¼‰çš„å¤šç§æ“ä½œå†™åœ¨ä¸€èµ·ï¼Œæ›´åŠ çš„ç®€æ´ï¼Œä½†æ˜¯æ³¨æ„å‰é¢çš„è¾“å‡ºæ˜¯åé¢çš„è¾“å…¥ å½’ä¸€åŒ–æ˜¯ä¸ºäº†æ¶ˆé™¤å¥‡å¼‚å€¼ï¼ŒåŠæ ·æœ¬æ•°æ®ä¸­ä¸å…¶ä»–æ•°æ®ç›¸æ¯”ç‰¹åˆ«å¤§æˆ–ç‰¹åˆ«å°çš„æ•°æ® è¿™æ ·å¯ä»¥åŠ å¿«è®­ç»ƒé€Ÿåº¦ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869from torchvision import transformsfrom torch.utils.tensorboard import SummaryWriterfrom PIL import Image# åŠ è½½å›¾åƒimg_path = &quot;dataset/train/bees/36900412_92b81831ad.jpg&quot;img = Image.open(img_path)writter = SummaryWriter(&quot;logs&quot;)def toTensor(): # åˆ›å»ºå·¥å…·ï¼Œè¿™é‡Œæ˜¯å°†å›¾åƒè½¬æ¢ä¸ºå¼ é‡ tensor_trans = transforms.ToTensor() img_tensor = tensor_trans(img) # æ‰“å°å›¾åƒ print(img_tensor) writter.add_image(&quot;img_tensor&quot;, img_tensor, 1) writter.close()def normalize(): # å…ˆæŠŠå›¾ç‰‡è½¬æ¢è¯šTensor tensor_trans = transforms.ToTensor() img_tensor = tensor_trans(img) # å‚æ•°å¯ä»¥æ ¹æ®æƒ…å†µè‡ªå·±è®¾å®šï¼Œä¸€èˆ¬çš„å…¬å¼€æ•°æ®é›†æ˜¯è®¤ä¸ºè®¾å®šäº†çš„ normalize_trans = transforms.Normalize([0.5, 0.5, 0.5], [0.5, 0.5, 0.5]) img_normalize = normalize_trans(img_tensor) writter.add_image(&quot;img_normalize&quot;, img_normalize, 2) writter.close()def resize(): print(img.size) # Resize()æ¥æ”¶çš„å‚æ•°ç±»å‹æ˜¯PIL Imageçš„ resize_trans = transforms.Resize((224, 224)) img_resize = resize_trans(img) # æ”¾å…¥TensorBoardä¸­ï¼Œå†æ¬¡è½¬æ¢å›Tensor tensor_trans = transforms.ToTensor() img_tensor = tensor_trans(img_resize) print(img_resize.size) writter.add_image(&quot;img_resize&quot;, img_tensor, 3) writter.close()def compose(): resize_trans_2 = transforms.Resize(512) tensor_trans = transforms.ToTensor() trans_compose = transforms.Compose([resize_trans_2, tensor_trans]) img_compose = trans_compose(img) writter.add_image(&quot;img_compose&quot;, img_compose, 4) writter.close()def randomCrop(): crop_trans = transforms.RandomCrop(99) trans_compose_2 = transforms.Compose([crop_trans, transforms.ToTensor()]) for i in range(10): img_crop = trans_compose_2(img) writter.add_image(&quot;img_crop&quot;, img_crop, i) writter.close()if __name__ == &quot;__main__&quot;: # toTensor() # normalize() # resize() # compose() randomCrop()","categories":[{"name":"å°åœŸå †pytorch## transform","slug":"å°åœŸå †pytorch-transform","permalink":"http://breadwinners.top/categories/%E5%B0%8F%E5%9C%9F%E5%A0%86pytorch-transform/"}],"tags":[]},{"title":"ç›‘ç£å­¦ä¹ å’Œéç›‘ç£å­¦ä¹ ","slug":"å´æ©è¾¾æœºå™¨å­¦ä¹ /ç›‘ç£å­¦ä¹ å’Œéç›‘ç£å­¦ä¹ ","date":"2023-07-31T16:00:00.000Z","updated":"2023-08-11T12:48:38.396Z","comments":true,"path":"2023/08/01/å´æ©è¾¾æœºå™¨å­¦ä¹ /ç›‘ç£å­¦ä¹ å’Œéç›‘ç£å­¦ä¹ /","link":"","permalink":"http://breadwinners.top/2023/08/01/%E5%90%B4%E6%81%A9%E8%BE%BE%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E5%92%8C%E9%9D%9E%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0/","excerpt":"","text":"ç›‘ç£å­¦ä¹ Supervised Learningåˆ©ç”¨ç›‘ç£å­¦ä¹ é¢„æµ‹æ³¢å£«é¡¿æˆ¿ä»·ï¼ˆå›å½’é—®é¢˜ï¼‰ åˆ©ç”¨ç›‘ç£å­¦ä¹ æ¥æ¨æµ‹ä¹³è…ºç™Œè‰¯æ€§ä¸å¦ï¼ˆåˆ†ç±»é—®é¢˜ï¼‰ åˆ†ç±»é—®é¢˜æŒ‡çš„æ˜¯ï¼Œæˆ‘ä»¬è¯•ç€æ¨æµ‹å‡ºç¦»æ•£çš„è¾“å‡ºå€¼ï¼š0æˆ–1è‰¯æ€§æˆ–æ¶æ€§ï¼Œè€Œäº‹å®ä¸Šåœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼Œè¾“å‡ºå¯èƒ½ä¸æ­¢ä¸¤ä¸ªå€¼ã€‚ åˆ†ç±»é—®é¢˜æœ‰æ—¶ä¸æ­¢ä¸¤ç§ç±»åˆ«ï¼Œæ¯”å¦‚è‚¿ç˜¤å¯èƒ½éƒ½1ç±»è‚¿ç˜¤ï¼Œ2ç±»è‚¿ç˜¤ï¼Œ3ç±»è‚¿ç˜¤ï¼ŒæœŸå¾…æ¨¡å‹è¾“å‡º0ï¼Œ1ï¼Œ2ï¼Œ3ç­‰ æ— ç›‘ç£å­¦ä¹ Unsupervised Learning ä»£ä»·å‡½æ•°cost function ä»£ä»·æ˜¯æ¯ä¸€ä¸ªé¢„æµ‹å€¼å’Œå®é™…å€¼çš„å¹³æ–¹æ±‚å’Œ è¿™é‡Œçš„ä»£ä»·å‡½æ•°è®°ä¸º$J(w, b)$ï¼Œå‰é¢çš„åˆ†æ¯é™¤ä»¥2æ˜¯ä¸ºäº†åç»­çš„æ±‚å¯¼æ–¹ä¾¿ æ„å»ºä»£ä»·å‡½æ•°çš„ç›®æ ‡ï¼šé€‰æ‹©å‡ºå¯ä»¥ä½¿å¾—å»ºæ¨¡è¯¯å·®çš„å¹³æ–¹å’Œèƒ½å¤Ÿæœ€å°çš„æ¨¡å‹å‚æ•° ç›´è§‚è§£é‡Šä¸åŒå–å€¼çš„$w, b$çš„ä»£ä»·ä¸åŒï¼Œä»£ä»·æœ€å°çš„é‚£ä¸ª$w, b$å°±æ˜¯æˆ‘ä»¬é€‰æ‹©çš„ç›®æ ‡ å¦‚æœç”¨$Î¸0,Î¸1$è¡¨ç¤ºæƒé‡å’Œåç§»é‡ï¼Œä»£ä»·å‡½æ•°å¯ä»¥é€šè¿‡å¦‚ä¸‹ç­‰é«˜çº¿å›¾æè¿°ï¼š æ¢¯åº¦ä¸‹é™Gradient Descentæ¢¯åº¦ï¼šæ¢¯åº¦çš„æœ¬æ„æ˜¯ä¸€ä¸ªå‘é‡ï¼ˆçŸ¢é‡ï¼‰ï¼Œè¡¨ç¤ºæŸä¸€å‡½æ•°åœ¨è¯¥ç‚¹å¤„çš„æ–¹å‘å¯¼æ•°æ²¿ç€è¯¥æ–¹å‘å–å¾—æœ€å¤§å€¼ï¼Œå³å‡½æ•°åœ¨è¯¥ç‚¹å¤„æ²¿ç€è¯¥æ–¹å‘ï¼ˆæ­¤æ¢¯åº¦çš„æ–¹å‘ï¼‰å˜åŒ–æœ€å¿«ï¼Œå˜åŒ–ç‡æœ€å¤§ï¼ˆä¸ºè¯¥æ¢¯åº¦çš„æ¨¡ï¼‰ã€‚ æœ¬è´¨ä¸Šæ˜¯ä¸€ç§è´ªå¿ƒç®—æ³•ï¼Œä¸ä¸€å®šä¼šå¾—åˆ°å…¨å±€æœ€ä¼˜è§£ æ¢¯åº¦ä¸‹é™çš„å®ç°ï¼š å­¦ä¹ ç‡$Î±$ä¹Ÿå°±æ˜¯å¯è§†åŒ–å›¾ä¸­çš„æ­¥é•¿ åŒæ—¶è¦æ³¨æ„ï¼ŒåŒæ­¥æ›´æ–°$w, b$ æ¢¯åº¦ä¸‹é™åŸç†ç›´è§‚è§£é‡Šï¼š æ‹“å±•éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆstochastic gradient descentï¼ŒSGDï¼‰è¿™ä¸ªç®—æ³•çš„æµç¨‹å°±æ˜¯åœ¨æ¯æ¬¡æ›´æ–°çš„æ—¶å€™ä½¿ç”¨ä¸€ä¸ªæ ·æœ¬è¿›è¡Œæ¢¯åº¦ä¸‹é™ï¼Œæ‰€è°“çš„éšæœºäºŒå­—ï¼Œå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥éšæœºç”¨ä¸€ä¸ªæ ·æœ¬æ¥è¡¨ç¤ºæ‰€æœ‰çš„æ ·æœ¬ï¼Œæ¥è°ƒæ•´è¶…å‚æ•° $Î¸ $ï¼Œç®—æ³•çš„å…¬å¼å¦‚ä¸‹æ‰€ç¤ºï¼š å› ä¸ºè¿™ä¸ªæ ·æœ¬æ˜¯éšæœºçš„ï¼Œæ‰€ä»¥æ¯æ¬¡è¿­ä»£æ²¡æœ‰åŠæ³•å¾—åˆ°ä¸€ä¸ªå‡†ç¡®çš„æ¢¯åº¦ï¼Œè¿™æ ·ä¸€æ¥è™½ç„¶æ¯ä¸€æ¬¡è¿­ä»£å¾—åˆ°çš„æŸå¤±å‡½æ•°ä¸ä¸€å®šæ˜¯æœç€å…¨å±€æœ€ä¼˜æ–¹å‘ï¼Œä½†æ˜¯å¤§ä½“çš„æ–¹å‘è¿˜æ˜¯æœç€å…¨å±€æœ€ä¼˜è§£çš„æ–¹å‘é è¿‘ï¼Œç›´åˆ°æœ€åï¼Œå¾—åˆ°çš„ç»“æœé€šå¸¸å°±ä¼šåœ¨å…¨å±€æœ€ä¼˜è§£çš„é™„è¿‘ã€‚è¿™ç§ç®—æ³•ç›¸æ¯”æ™®é€šçš„æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œæ”¶æ•›çš„é€Ÿåº¦æ›´å¿«ï¼Œæ‰€ä»¥åœ¨ä¸€èˆ¬ç¥ç»ç½‘ç»œæ¨¡å‹è®­ç»ƒä¸­ï¼Œéšæœºæ¢¯åº¦ä¸‹é™ç®—æ³• SGD æ˜¯ä¸€ç§éå¸¸å¸¸è§çš„ä¼˜åŒ–ç®—æ³•ã€‚","categories":[{"name":"å´æ©è¾¾æœºå™¨å­¦ä¹ ","slug":"å´æ©è¾¾æœºå™¨å­¦ä¹ ","permalink":"http://breadwinners.top/categories/%E5%90%B4%E6%81%A9%E8%BE%BE%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"ç›‘ç£å­¦ä¹ ","slug":"ç›‘ç£å­¦ä¹ ","permalink":"http://breadwinners.top/tags/%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0/"},{"name":"éç›‘ç£å­¦ä¹ ","slug":"éç›‘ç£å­¦ä¹ ","permalink":"http://breadwinners.top/tags/%E9%9D%9E%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0/"}]},{"title":"å†³ç­–æ ‘çš„æ‹†åˆ†","slug":"å†³ç­–æ ‘","date":"2023-07-28T16:00:00.000Z","updated":"2023-07-29T07:09:38.789Z","comments":true,"path":"2023/07/29/å†³ç­–æ ‘/","link":"","permalink":"http://breadwinners.top/2023/07/29/%E5%86%B3%E7%AD%96%E6%A0%91/","excerpt":"","text":"å†³ç­–æ ‘æœ¬è´¨ä¸Šæ˜¯ä¸€ç§è´ªå¿ƒç®—æ³•ï¼Œæ‰€ä»¥æœ‰æ—¶å€™å®ƒå¯èƒ½å¾—ä¸åˆ°å…¨å±€æœ€ä¼˜è§£ å†³ç­–æ ‘ä¼šé€‰æ‹©ä¿¡æ¯å¢ç›Šå¤§çš„æ–¹å¼åˆ¤æ–­æ‹†åˆ†æ¡ä»¶ï¼Œä¿¡æ¯ç†µè®¡ç®—å…¬å¼ï¼š ä¸¾ä¾‹ï¼š ç¬¬äºŒç§æ–¹å¼çš„ä¿¡æ¯å¢ç›Šå¤§ï¼Œé€‰æ‹©ç¬¬äºŒç§å†³ç­–æ–¹å¼ï¼š","categories":[{"name":"pytorch","slug":"pytorch","permalink":"http://breadwinners.top/categories/pytorch/"}],"tags":[{"name":"å†³ç­–æ ‘","slug":"å†³ç­–æ ‘","permalink":"http://breadwinners.top/tags/%E5%86%B3%E7%AD%96%E6%A0%91/"}]},{"title":"å·ç§¯ç¥ç»ç½‘ç»œé«˜çº§","slug":"pytorch/pytorchå·ç§¯ç¥ç»ç½‘ç»œé«˜çº§","date":"2023-07-23T16:00:00.000Z","updated":"2023-08-01T01:31:10.025Z","comments":true,"path":"2023/07/24/pytorch/pytorchå·ç§¯ç¥ç»ç½‘ç»œé«˜çº§/","link":"","permalink":"http://breadwinners.top/2023/07/24/pytorch/pytorch%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E9%AB%98%E7%BA%A7/","excerpt":"","text":"GoogleNetGoogleNetè§£é‡Šä¸å®ç° GoogleNetç¥ç»å•å…ƒï¼š æŠŠæ•´ä¸ªå•å…ƒå°è£…æˆä¸€ä¸ªInception Moduleï¼Œåç»­çš„ä»£ç ç›´æ¥ä½¿ç”¨è¯¥ç±» è¦æ³¨æ„çš„æ˜¯ï¼Œæœ€åéœ€è¦ä½¿ç”¨æ¯ä¸€æ¡è·¯å¾„torch.cat(outputs, dim=1)èåˆæ¯ä¸€æ¡è·¯å¾„ï¼Œæ‰€ä»¥æ¯ä¸€æ¡è·¯å¾„è¾“å‡ºçš„é€šé“æ•°å¿…é¡»ä¸€è‡´ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116import torchimport torch.nn as nnfrom torchvision import transformsfrom torchvision import datasetsfrom torch.utils.data import DataLoaderimport torch.nn.functional as Fimport torch.optim as optim # prepare dataset batch_size = 64transform = transforms.Compose([transforms.ToTensor(), transforms.Normalize((0.1307,), (0.3081,))]) # å½’ä¸€åŒ–,å‡å€¼å’Œæ–¹å·® train_dataset = datasets.MNIST(root=&#x27;../dataset/mnist/&#x27;, train=True, download=True, transform=transform)train_loader = DataLoader(train_dataset, shuffle=True, batch_size=batch_size)test_dataset = datasets.MNIST(root=&#x27;../dataset/mnist/&#x27;, train=False, download=True, transform=transform)test_loader = DataLoader(test_dataset, shuffle=False, batch_size=batch_size) # design model using classclass InceptionA(nn.Module): def __init__(self, in_channels): super(InceptionA, self).__init__() self.branch1x1 = nn.Conv2d(in_channels, 16, kernel_size=1) self.branch5x5_1 = nn.Conv2d(in_channels, 16, kernel_size=1) self.branch5x5_2 = nn.Conv2d(16, 24, kernel_size=5, padding=2) self.branch3x3_1 = nn.Conv2d(in_channels, 16, kernel_size=1) self.branch3x3_2 = nn.Conv2d(16, 24, kernel_size=3, padding=1) self.branch3x3_3 = nn.Conv2d(24, 24, kernel_size=3, padding=1) self.branch_pool = nn.Conv2d(in_channels, 24, kernel_size=1) def forward(self, x): branch1x1 = self.branch1x1(x) branch5x5 = self.branch5x5_1(x) branch5x5 = self.branch5x5_2(branch5x5) branch3x3 = self.branch3x3_1(x) branch3x3 = self.branch3x3_2(branch3x3) branch3x3 = self.branch3x3_3(branch3x3) branch_pool = F.avg_pool2d(x, kernel_size=3, stride=1, padding=1) branch_pool = self.branch_pool(branch_pool) outputs = [branch1x1, branch5x5, branch3x3, branch_pool] return torch.cat(outputs, dim=1) # b,c,w,h cå¯¹åº”çš„æ˜¯dim=1 class Net(nn.Module): def __init__(self): super(Net, self).__init__() self.conv1 = nn.Conv2d(1, 10, kernel_size=5) self.conv2 = nn.Conv2d(88, 20, kernel_size=5) # 88 = 24x3 + 16 self.incep1 = InceptionA(in_channels=10) # ä¸conv1 ä¸­çš„10å¯¹åº” self.incep2 = InceptionA(in_channels=20) # ä¸conv2 ä¸­çš„20å¯¹åº” self.mp = nn.MaxPool2d(2) self.fc = nn.Linear(1408, 10) def forward(self, x): in_size = x.size(0) x = F.relu(self.mp(self.conv1(x))) x = self.incep1(x) x = F.relu(self.mp(self.conv2(x))) x = self.incep2(x) x = x.view(in_size, -1) x = self.fc(x) return x model = Net() # construct loss and optimizercriterion = torch.nn.CrossEntropyLoss()optimizer = optim.SGD(model.parameters(), lr=0.01, momentum=0.5) # training cycle forward, backward, update def train(epoch): running_loss = 0.0 for batch_idx, data in enumerate(train_loader, 0): inputs, target = data optimizer.zero_grad() outputs = model(inputs) loss = criterion(outputs, target) loss.backward() optimizer.step() running_loss += loss.item() if batch_idx % 300 == 299: print(&#x27;[%d, %5d] loss: %.3f&#x27; % (epoch+1, batch_idx+1, running_loss/300)) running_loss = 0.0 def test(): correct = 0 total = 0 with torch.no_grad(): for data in test_loader: images, labels = data outputs = model(images) _, predicted = torch.max(outputs.data, dim=1) total += labels.size(0) correct += (predicted == labels).sum().item() print(&#x27;accuracy on test set: %d %% &#x27; % (100*correct/total)) if __name__ == &#x27;__main__&#x27;: for epoch in range(10): train(epoch) test() æ¢¯åº¦æ¶ˆå¤± &amp; Residual Net ä¸€ä¸ªæ•°ä¹˜ä»¥å¤šä¸ªä¸€ä¸ªå¾ˆå°çš„æ¥è¿‘0çš„æ•°ï¼Œå¯èƒ½ä¼šå¼•å‘æ¢¯åº¦æ¶ˆå¤±ï¼Œè¿™é‡Œè§£å†³çš„åŠæ³•æ˜¯ä½¿ç”¨è·³è¿æ¥ï¼Œæ„é€ å‡ºH(x) = F(x) + xï¼Œè¿™æ ·å¯¹xæ±‚å¯¼æ—¶ï¼Œå¯¼æ•°å°±ä¸å‡ºè¶‹è¿‘äº0 Residual Blockçš„å®ç°ï¼š Residual Networkçš„å®ç°ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899import torchimport torch.nn as nnfrom torchvision import transformsfrom torchvision import datasetsfrom torch.utils.data import DataLoaderimport torch.nn.functional as Fimport torch.optim as optim # prepare dataset batch_size = 64transform = transforms.Compose([transforms.ToTensor(), transforms.Normalize((0.1307,), (0.3081,))]) # å½’ä¸€åŒ–,å‡å€¼å’Œæ–¹å·® train_dataset = datasets.MNIST(root=&#x27;../dataset/mnist/&#x27;, train=True, download=True, transform=transform)train_loader = DataLoader(train_dataset, shuffle=True, batch_size=batch_size)test_dataset = datasets.MNIST(root=&#x27;../dataset/mnist/&#x27;, train=False, download=True, transform=transform)test_loader = DataLoader(test_dataset, shuffle=False, batch_size=batch_size) # design model using classclass ResidualBlock(nn.Module): def __init__(self, channels): super(ResidualBlock, self).__init__() self.channels = channels self.conv1 = nn.Conv2d(channels, channels, kernel_size=3, padding=1) self.conv2 = nn.Conv2d(channels, channels, kernel_size=3, padding=1) def forward(self, x): y = F.relu(self.conv1(x)) y = self.conv2(y) return F.relu(x + y) class Net(nn.Module): def __init__(self): super(Net, self).__init__() self.conv1 = nn.Conv2d(1, 16, kernel_size=5) self.conv2 = nn.Conv2d(16, 32, kernel_size=5) # 88 = 24x3 + 16 self.rblock1 = ResidualBlock(16) self.rblock2 = ResidualBlock(32) self.mp = nn.MaxPool2d(2) self.fc = nn.Linear(512, 10) # æš‚æ—¶ä¸çŸ¥é“1408å’‹èƒ½è‡ªåŠ¨å‡ºæ¥çš„ def forward(self, x): in_size = x.size(0) x = self.mp(F.relu(self.conv1(x))) x = self.rblock1(x) x = self.mp(F.relu(self.conv2(x))) x = self.rblock2(x) x = x.view(in_size, -1) x = self.fc(x) return x model = Net() # construct loss and optimizercriterion = torch.nn.CrossEntropyLoss()optimizer = optim.SGD(model.parameters(), lr=0.01, momentum=0.5) # training cycle forward, backward, update def train(epoch): running_loss = 0.0 for batch_idx, data in enumerate(train_loader, 0): inputs, target = data optimizer.zero_grad() outputs = model(inputs) loss = criterion(outputs, target) loss.backward() optimizer.step() running_loss += loss.item() if batch_idx % 300 == 299: print(&#x27;[%d, %5d] loss: %.3f&#x27; % (epoch+1, batch_idx+1, running_loss/300)) running_loss = 0.0 def test(): correct = 0 total = 0 with torch.no_grad(): for data in test_loader: images, labels = data outputs = model(images) _, predicted = torch.max(outputs.data, dim=1) total += labels.size(0) correct += (predicted == labels).sum().item() print(&#x27;accuracy on test set: %d %% &#x27; % (100*correct/total)) if __name__ == &#x27;__main__&#x27;: for epoch in range(10): train(epoch) test()","categories":[{"name":"pytorch","slug":"pytorch","permalink":"http://breadwinners.top/categories/pytorch/"}],"tags":[{"name":"cnn","slug":"cnn","permalink":"http://breadwinners.top/tags/cnn/"},{"name":"GoogleNet","slug":"GoogleNet","permalink":"http://breadwinners.top/tags/GoogleNet/"},{"name":"Inception Module","slug":"Inception-Module","permalink":"http://breadwinners.top/tags/Inception-Module/"},{"name":"æ¢¯åº¦æ¶ˆå¤±","slug":"æ¢¯åº¦æ¶ˆå¤±","permalink":"http://breadwinners.top/tags/%E6%A2%AF%E5%BA%A6%E6%B6%88%E5%A4%B1/"},{"name":"Residual Network","slug":"Residual-Network","permalink":"http://breadwinners.top/tags/Residual-Network/"}]},{"title":"RNNä¸­çš„éšå±‚","slug":"pytorch/RNNéšè—å±‚","date":"2023-07-22T16:00:00.000Z","updated":"2023-07-25T11:55:53.965Z","comments":true,"path":"2023/07/23/pytorch/RNNéšè—å±‚/","link":"","permalink":"http://breadwinners.top/2023/07/23/pytorch/RNN%E9%9A%90%E8%97%8F%E5%B1%82/","excerpt":"","text":"RNN(å¾ªç¯ç¥ç»ç½‘ç»œ)ä¸­çš„éšå±‚å¯ä»¥ç†è§£ä¸ºRNNå•å…ƒä¹‹é—´ä¼ é€’ä¿¡æ¯çš„é€šé“ã€‚å…·ä½“æ¥è¯´: RNNç”±å¤šä¸ªç›¸åŒçš„RNNå•å…ƒå †å ç»„æˆ,æ¯ä¸ªRNNå•å…ƒéƒ½åŒ…å«è¾“å…¥ã€éšå±‚å’Œè¾“å‡ºã€‚ éšå±‚è®°å½•å½“å‰æ—¶åˆ»RNNå•å…ƒçš„çŠ¶æ€ä¿¡æ¯,å®ƒå°†ä¸Šä¸€ä¸ªæ—¶åˆ»çš„çŠ¶æ€å’Œå½“å‰æ—¶åˆ»çš„è¾“å…¥èåˆåè¾“å‡ºåˆ°ä¸‹ä¸€ä¸ªæ—¶åˆ»ã€‚ é€šè¿‡è¿™ç§æ–¹å¼,éšå±‚åƒæ˜¯ä¸€ä¸ªä¿¡æ¯çš„é€šé“,å¯ä»¥è®°ä½å†å²ä¿¡æ¯,å¹¶ä¼ é€’ç»™å½“å‰å’Œæœªæ¥çš„æ—¶åˆ»ã€‚ éšå±‚å­˜å‚¨çš„çŠ¶æ€ä¿¡æ¯,å®¹è®¸RNNå±•å¼€å‰åå…³è”,æ•æ‰æ—¶é—´åºåˆ—æ•°æ®ä¸­çš„é•¿ç¨‹ä¾èµ–å…³ç³»ã€‚ ç›¸æ¯”äºå‰é¦ˆç¥ç»ç½‘ç»œåªèƒ½å¤„ç†å›ºå®šå¤§å°çš„è¾“å…¥,RNNé€šè¿‡éšå±‚çš„çŠ¶æ€ä¼ é€’,å¯ä»¥å¤„ç†ä»»æ„é•¿åº¦çš„åºåˆ—,è¿™æ˜¯RNNç‹¬ç‰¹çš„ä¼˜åŠ¿ã€‚ æ‰€ä»¥ç®€å•æ¥è¯´,RNNéšå±‚æ˜¯ RNNå•å…ƒä¹‹é—´ç”¨äºä¼ é€’çŠ¶æ€ä¿¡æ¯çš„é€šé“,å®ƒå­˜å‚¨å†å²,è®°å¿†é•¿ç¨‹ä¾èµ–,ä½¿RNNæˆä¸ºå¤„ç†æ—¶é—´åºåˆ—æ•°æ®çš„ç»ä½³æ¨¡å‹ã€‚ç†è§£éšå±‚çš„è¿™ä¸ªä½œç”¨,æ˜¯æŒæ¡RNNçš„å…³é”®ã€‚","categories":[{"name":"pytorch","slug":"pytorch","permalink":"http://breadwinners.top/categories/pytorch/"}],"tags":[{"name":"hidden","slug":"hidden","permalink":"http://breadwinners.top/tags/hidden/"}]},{"title":"RNN","slug":"pytorch/RNN","date":"2023-07-22T16:00:00.000Z","updated":"2023-08-01T01:46:54.757Z","comments":true,"path":"2023/07/23/pytorch/RNN/","link":"","permalink":"http://breadwinners.top/2023/07/23/pytorch/RNN/","excerpt":"","text":"1 ä»€ä¹ˆæ˜¯RNNï¼ŸRNNæ˜¯å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRecurrent Neural Networkï¼‰çš„ç¼©å†™ã€‚å®ƒæ˜¯ä¸€ç§ç¥ç»ç½‘ç»œç»“æ„ï¼Œå¯ä»¥å¤„ç†åºåˆ—æ•°æ®ï¼Œä¾‹å¦‚æ—¶é—´åºåˆ—æ•°æ®æˆ–è‡ªç„¶è¯­è¨€æ–‡æœ¬æ•°æ®ã€‚ç›¸æ¯”äºä¼ ç»Ÿçš„å‰é¦ˆç¥ç»ç½‘ç»œï¼ŒRNNå¯ä»¥åˆ©ç”¨å½“å‰çš„è¾“å…¥å’Œä¹‹å‰çš„çŠ¶æ€æ¥å†³å®šå½“å‰çš„è¾“å‡ºï¼Œå› æ­¤å®ƒå¯ä»¥æ•æ‰åˆ°åºåˆ—æ•°æ®ä¸­çš„æ—¶é—´ä¾èµ–å…³ç³»ã€‚ åœ¨RNNä¸­ï¼Œæ¯ä¸ªæ—¶é—´æ­¥éƒ½æœ‰ä¸€ä¸ªéšè—çŠ¶æ€ï¼ˆhidden stateï¼‰ï¼Œè¿™ä¸ªéšè—çŠ¶æ€å¯ä»¥æ•æ‰åˆ°ä¹‹å‰æ—¶é—´æ­¥çš„ä¿¡æ¯ï¼Œå¹¶ä¸”ä¼šåœ¨å½“å‰æ—¶é—´æ­¥ä¸­è¢«ç”¨äºè®¡ç®—è¾“å‡ºã€‚RNNçš„è®­ç»ƒè¿‡ç¨‹é€šå¸¸ä½¿ç”¨åå‘ä¼ æ’­ç®—æ³•å’Œæ¢¯åº¦ä¸‹é™ä¼˜åŒ–ç®—æ³•ï¼Œç›®æ ‡æ˜¯æœ€å°åŒ–æ¨¡å‹é¢„æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„è¯¯å·®ã€‚ RNNåœ¨è‡ªç„¶è¯­è¨€å¤„ç†ã€è¯­éŸ³è¯†åˆ«ã€æ—¶é—´åºåˆ—é¢„æµ‹ç­‰é¢†åŸŸéƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚ 1.1 åŸç†RNNçš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨å½“å‰çš„è¾“å…¥å’Œä¹‹å‰çš„çŠ¶æ€æ¥å†³å®šå½“å‰çš„è¾“å‡ºï¼Œè¿™ä½¿å¾—RNNå¯ä»¥å¤„ç†åºåˆ—æ•°æ®ä¸­çš„æ—¶é—´ä¾èµ–å…³ç³»ã€‚RNNçš„ç»“æ„å¯ä»¥çœ‹ä½œæ˜¯åœ¨æ—¶é—´è½´ä¸Šå±•å¼€çš„å¤šä¸ªç¥ç»ç½‘ç»œå±‚ï¼Œæ¯ä¸ªæ—¶é—´æ­¥éƒ½æœ‰ä¸€ä¸ªéšè—çŠ¶æ€ï¼Œè¿™ä¸ªéšè—çŠ¶æ€å¯ä»¥ä¼ é€’åˆ°ä¸‹ä¸€ä¸ªæ—¶é—´æ­¥ï¼Œå¹¶å‚ä¸å½“å‰æ—¶é—´æ­¥çš„è®¡ç®—ã€‚ å…·ä½“æ¥è¯´ï¼ŒRNNçš„è®¡ç®—å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š è¾“å…¥å±‚å’Œéšè—å±‚ä¹‹é—´çš„è®¡ç®—ã€‚å‡è®¾å½“å‰æ—¶é—´æ­¥çš„è¾“å…¥æ˜¯ x t x_t xtï¼Œä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€æ˜¯ h t âˆ’ 1 h_{t-1} htâˆ’1ï¼Œé‚£ä¹ˆå½“å‰æ—¶é—´æ­¥çš„éšè—çŠ¶æ€ h t h_t htå¯ä»¥é€šè¿‡ä¸‹é¢çš„å…¬å¼è®¡ç®—å¾—åˆ°ï¼š h t &#x3D; f ( W i h x t + b i h + W h h h t âˆ’ 1 + b h h ) h_t &#x3D; f(W_{ih} x_t + b_{ih} + W_{hh} h_{t-1} + b_{hh}) ht=f(Wihxt+bih+Whhhtâˆ’1+bhh) å…¶ä¸­ W i h W_{ih} Wihæ˜¯è¾“å…¥å±‚åˆ°éšè—å±‚çš„æƒé‡çŸ©é˜µï¼Œ W h h W_{hh} Whhæ˜¯éšè—å±‚åˆ°éšè—å±‚çš„æƒé‡çŸ©é˜µï¼Œ b i h b_{ih} bihå’Œ b h h b_{hh} bhhæ˜¯éšè—å±‚çš„åç½®å‘é‡ï¼Œ f f fæ˜¯æ¿€æ´»å‡½æ•°ï¼ˆé€šå¸¸æ˜¯tanhæˆ–ReLUï¼Œä¸Šå›¾ä¸­æ˜¯tanhï¼Œå³åŒæ›²æ­£åˆ‡å‡½æ•°ï¼‰ã€‚ éšè—å±‚å’Œè¾“å‡ºå±‚ä¹‹é—´çš„è®¡ç®—ã€‚å‡è®¾å½“å‰æ—¶é—´æ­¥çš„éšè—çŠ¶æ€æ˜¯ h t h_t htï¼Œé‚£ä¹ˆå½“å‰æ—¶é—´æ­¥çš„è¾“å‡º y t y_t ytå¯ä»¥é€šè¿‡ä¸‹é¢çš„å…¬å¼è®¡ç®—å¾—åˆ°ï¼š y t &#x3D; g ( W h y h t + b y ) y_t&#x3D;g(W_{hy}h_t+b_y) yt=g(Whyht+by) å…¶ä¸­ W h y W_{hy} Whyæ˜¯éšè—å±‚åˆ°è¾“å‡ºå±‚çš„æƒé‡çŸ©é˜µï¼Œ b y b_y byæ˜¯è¾“å‡ºå±‚çš„åç½®å‘é‡ï¼Œ g g gæ˜¯è¾“å‡ºå±‚çš„æ¿€æ´»å‡½æ•°ï¼ˆé€šå¸¸æ˜¯softmaxï¼‰ã€‚ æŸå¤±å‡½æ•°è®¡ç®—å’Œåå‘ä¼ æ’­ã€‚æ ¹æ®ä»»åŠ¡ç±»å‹ï¼Œå¯ä»¥é€‰æ‹©ä¸åŒçš„æŸå¤±å‡½æ•°ï¼Œä¾‹å¦‚äº¤å‰ç†µæŸå¤±å‡½æ•°ç”¨äºåˆ†ç±»ä»»åŠ¡ï¼Œå‡æ–¹è¯¯å·®æŸå¤±å‡½æ•°ç”¨äºå›å½’ä»»åŠ¡ã€‚ç„¶åä½¿ç”¨åå‘ä¼ æ’­ç®—æ³•å’Œæ¢¯åº¦ä¸‹é™ä¼˜åŒ–ç®—æ³•æ¥æ›´æ–°æƒé‡å’Œåç½®ï¼Œç›®æ ‡æ˜¯æœ€å°åŒ–æ¨¡å‹é¢„æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„è¯¯å·®ã€‚ RNNçš„ä¸»è¦ä¼˜ç‚¹æ˜¯å¯ä»¥å¤„ç†ä»»æ„é•¿åº¦çš„åºåˆ—æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥æ•æ‰åºåˆ—æ•°æ®ä¸­çš„æ—¶é—´ä¾èµ–å…³ç³»ã€‚ç„¶è€Œï¼ŒRNNä¹Ÿå­˜åœ¨ä¸€äº›ç¼ºç‚¹ï¼Œä¾‹å¦‚éš¾ä»¥å¤„ç†é•¿æœŸä¾èµ–å…³ç³»ã€è®­ç»ƒé€Ÿåº¦æ…¢ã€æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸ç­‰é—®é¢˜ã€‚å› æ­¤ï¼Œç ”ç©¶äººå‘˜æå‡ºäº†è®¸å¤šæ”¹è¿›çš„RNNæ¨¡å‹ï¼Œä¾‹å¦‚LSTMå’ŒGRUç­‰ã€‚ 1.2 ç»´åº¦è¯´æ˜åœ¨RNNä¸­ï¼Œè¾“å…¥ã€è¾“å‡ºå’Œéšè—å±‚çš„ç»´åº¦å¯ä»¥æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯å’Œæ•°æ®é›†æ¥ç¡®å®šã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè¾“å…¥å’Œè¾“å‡ºçš„ç»´åº¦æ˜¯å›ºå®šçš„ï¼Œè€Œéšè—å±‚çš„ç»´åº¦åˆ™æ˜¯ç”±ç”¨æˆ·è‡ªå·±æŒ‡å®šçš„è¶…å‚æ•°ã€‚ ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ç»´åº¦é…ç½®ï¼š åºåˆ—åˆ†ç±»ä»»åŠ¡ä¸­ï¼Œè¾“å…¥é€šå¸¸æ˜¯ä¸€ä¸ªåºåˆ—çš„ç‰¹å¾å‘é‡ï¼Œè¾“å‡ºæ˜¯ä¸€ä¸ªç±»åˆ«æ ‡ç­¾ã€‚å‡è®¾è¾“å…¥åºåˆ—çš„é•¿åº¦ä¸ºseq_lenï¼Œæ¯ä¸ªæ—¶é—´æ­¥çš„ç‰¹å¾å‘é‡ç»´åº¦ä¸ºinput_sizeï¼Œè¾“å‡ºç±»åˆ«æ•°ä¸ºnum_classesï¼Œé‚£ä¹ˆè¾“å…¥å’Œè¾“å‡ºçš„ç»´åº¦åˆ†åˆ«ä¸º[batch_size, seq_len, input_size]å’Œ[batch_size, num_classes]ï¼Œå…¶ä¸­batch_sizeä¸ºæ‰¹æ¬¡å¤§å°ã€‚ åºåˆ—ç”Ÿæˆä»»åŠ¡ä¸­ï¼Œè¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯ä¸€ä¸ªåºåˆ—ã€‚å‡è®¾è¾“å…¥åºåˆ—çš„é•¿åº¦ä¸ºseq_lenï¼Œæ¯ä¸ªæ—¶é—´æ­¥çš„ç‰¹å¾å‘é‡ç»´åº¦ä¸ºinput_sizeï¼Œè¾“å‡ºåºåˆ—çš„é•¿åº¦ä¹Ÿä¸ºseq_lenï¼Œæ¯ä¸ªæ—¶é—´æ­¥çš„ç‰¹å¾å‘é‡ç»´åº¦ä¸ºoutput_sizeï¼Œé‚£ä¹ˆè¾“å…¥å’Œè¾“å‡ºçš„ç»´åº¦éƒ½ä¸º[batch_size, seq_len, input_size]æˆ–[batch_size, seq_len, output_size]ï¼Œå…·ä½“è¦çœ‹æ˜¯ä»€ä¹ˆä»»åŠ¡ã€‚ åºåˆ—æ ‡æ³¨ä»»åŠ¡ä¸­ï¼Œè¾“å…¥é€šå¸¸æ˜¯ä¸€ä¸ªåºåˆ—çš„ç‰¹å¾å‘é‡ï¼Œè¾“å‡ºæ˜¯æ¯ä¸ªæ—¶é—´æ­¥çš„æ ‡æ³¨ä¿¡æ¯ã€‚å‡è®¾è¾“å…¥åºåˆ—çš„é•¿åº¦ä¸ºseq_lenï¼Œæ¯ä¸ªæ—¶é—´æ­¥çš„ç‰¹å¾å‘é‡ç»´åº¦ä¸ºinput_sizeï¼Œè¾“å‡ºæ ‡æ³¨ç±»åˆ«æ•°ä¸ºnum_classesï¼Œé‚£ä¹ˆè¾“å…¥å’Œè¾“å‡ºçš„ç»´åº¦åˆ†åˆ«ä¸º[batch_size, seq_len, input_size]å’Œ[batch_size, seq_len, num_classes]ã€‚ åœ¨éšè—å±‚ç»´åº¦æ–¹é¢ï¼Œå¯ä»¥æ ¹æ®ä»»åŠ¡å’Œæ•°æ®é›†çš„å¤æ‚ç¨‹åº¦æ¥é€‰æ‹©åˆé€‚çš„å€¼ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œéšè—å±‚çš„ç»´åº¦è¶Šå¤§ï¼Œæ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›å°±è¶Šå¼ºï¼Œä½†ä¹Ÿä¼šå¢åŠ æ¨¡å‹çš„è®¡ç®—å¤æ‚åº¦å’Œè®­ç»ƒéš¾åº¦ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œéšè—å±‚çš„ç»´åº¦åœ¨å‡ ååˆ°å‡ ç™¾ä¹‹é—´ã€‚ 2 ä¸€äº›çç¢ä»£ç 2.1 RNNCell è¿™æ®µä»£ç æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨PyTorchçš„RNNCellæ¨¡å—æ„å»ºä¸€ä¸ªç®€å•çš„RNNï¼Œå¹¶å¯¹ä¸€ä¸ªç®€å•çš„åºåˆ—è¿›è¡Œå‰å‘ä¼ é€’è®¡ç®—ã€‚ åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆæ„å»ºäº†ä¸€ä¸ªRNNCellå¯¹è±¡ï¼Œä½¿ç”¨äº†è¾“å…¥ç»´åº¦ä¸ºinput_sizeã€è¾“å‡ºç»´åº¦ä¸ºhidden_sizeçš„éšè—å±‚ã€‚æ¥ç€ï¼Œæˆ‘ä»¬æ„é€ äº†ä¸€ä¸ªå¤§å°ä¸º(seq_len, batch_size, input_size)çš„è¾“å…¥æ•°æ®é›†datasetï¼Œå¹¶å°†éšè—çŠ¶æ€hiddenåˆå§‹åŒ–ä¸ºå…¨é›¶å¼ é‡ï¼Œå¤§å°ä¸º(batch_size, hidden_size)ã€‚ ç„¶åï¼Œæˆ‘ä»¬å°†æ•°æ®é›†æŒ‰åºåˆ—é•¿åº¦ä¾æ¬¡è¾“å…¥åˆ°RNNCellä¸­ï¼Œå¹¶åœ¨æ¯ä¸€æ­¥æ›´æ–°éšè—çŠ¶æ€hiddenã€‚åœ¨æ¯ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬æ‰“å°å‡ºéšè—çŠ¶æ€hiddençš„å½¢çŠ¶å’Œå€¼ï¼Œä»¥ä¾¿äº†è§£RNNåœ¨æ¯ä¸ªæ—¶é—´æ­¥çš„è¾“å‡ºæƒ…å†µã€‚ å…·ä½“æ¥è¯´ï¼Œå¾ªç¯ä»seq_lençš„ç¬¬0ä¸ªæ—¶é—´æ­¥å¼€å§‹ï¼Œä¾æ¬¡å°†å¤§å°ä¸º(batch_size, input_size)çš„è¾“å…¥æ•°æ®inputè¾“å…¥åˆ°RNNCellä¸­ï¼Œå¹¶ç”¨å½“å‰çš„éšè—çŠ¶æ€hiddenè®¡ç®—ä¸‹ä¸€ä¸ªéšè—çŠ¶æ€ã€‚ç”±äºè¿™æ˜¯ä¸€ä¸ªç®€å•çš„å¾ªç¯ï¼Œæ¯æ¬¡æ›´æ–°éšè—çŠ¶æ€æ—¶ï¼Œè¾“å‡ºçš„hiddenå¤§å°ä¿æŒä¸å˜ï¼Œéƒ½æ˜¯(batch_size, hidden_size)ã€‚ ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122import torchbatch_size = 1seq_len = 3input_size = 4hidden_size = 2# Construction of RNNCellcell = torch.nn.RNNCell(input_size=input_size, hidden_size=hidden_size)# Wrapping the sequence into:(seqLen,batchSize,InputSize)dataset = torch.randn(seq_len, batch_size, input_size) # (3,1,4)# Initializing the hidden to zerohidden = torch.zeros(batch_size, hidden_size) # (1,2)for idx, input in enumerate(dataset): print(&#x27;=&#x27; * 20, idx, &#x27;=&#x27; * 20) #åˆ†å‰²çº¿ï¼Œ20ä¸ª=å· print(&#x27;Input size:&#x27;, input.shape) # (batch_size, input_size) # æŒ‰åºåˆ—ä¾æ¬¡è¾“å…¥åˆ°cellä¸­ï¼Œseq_len=3ï¼Œæ•…å¾ªç¯3æ¬¡ hidden = cell(input, hidden) # è¿”å›çš„hiddenæ˜¯ä¸‹ä¸€æ¬¡çš„è¾“å…¥ä¹‹ä¸€ï¼Œå¾ªç¯ä½¿ç”¨åŒä¸€ä¸ªcell print(&#x27;output size:&#x27;, hidden.shape) # (batch_size, hidden_size) print(hidden) è¿è¡Œç»“æœï¼š 123456789101112==================== 0 ====================Input size: torch.Size([1, 4])output size: torch.Size([1, 2])tensor([[-0.4140, 0.1517]], grad_fn=&lt;TanhBackward0&gt;)==================== 1 ====================Input size: torch.Size([1, 4])output size: torch.Size([1, 2])tensor([[-0.4725, -0.7875]], grad_fn=&lt;TanhBackward0&gt;)==================== 2 ====================Input size: torch.Size([1, 4])output size: torch.Size([1, 2])tensor([[-0.8257, -0.2262]], grad_fn=&lt;TanhBackward0&gt;) å¯ä»¥çœ‹åˆ°ï¼Œæ¯æ¬¡è®¡ç®—åçš„éšè—çŠ¶æ€hiddenéƒ½æ˜¯2ç»´çš„å¼ é‡ï¼Œå¤§å°ä¸º(batch_size, hidden_size) &#x3D; (1, 2)ã€‚åœ¨æ¯ä¸ªæ—¶é—´æ­¥éª¤ä¸­ï¼Œè¾“å‡ºçš„hiddenå€¼éƒ½ä¸åŒï¼Œå› ä¸ºè¾“å…¥æ•°æ®é›†datasetä¸åŒï¼Œè€Œéšè—çŠ¶æ€hiddenæ˜¯éšç€æ—¶é—´æ­¥éª¤çš„æ¨è¿›è€Œæ›´æ–°çš„ã€‚ 2.2 RNN è¿™æ®µä»£ç æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨PyTorchçš„RNNæ¨¡å—æ„å»ºä¸€ä¸ªç®€å•çš„RNNï¼Œå¹¶å¯¹ä¸€ä¸ªç®€å•çš„åºåˆ—è¿›è¡Œå‰å‘ä¼ é€’è®¡ç®—ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆæ„å»ºäº†ä¸€ä¸ªRNNå¯¹è±¡ï¼Œä½¿ç”¨äº†è¾“å…¥ç»´åº¦ä¸ºinput_sizeã€è¾“å‡ºç»´åº¦ä¸ºhidden_sizeçš„éšè—å±‚ï¼Œå¹¶è®¾ç½®äº†RNNçš„å±‚æ•°num_layersä¸º1ï¼ˆä¸Šå›¾æ˜¯num_layersä¸º3çš„åŸç†å›¾ï¼Œæˆ‘ä»¬è¿™é‡Œåªä½¿ç”¨äº†1å±‚RNNï¼‰ã€‚æ¥ç€ï¼Œæˆ‘ä»¬æ„é€ äº†ä¸€ä¸ªå¤§å°ä¸º(seq_len, batch_size, input_size)çš„è¾“å…¥æ•°æ®inputsï¼Œå¹¶å°†éšè—çŠ¶æ€hiddenåˆå§‹åŒ–ä¸ºå…¨é›¶å¼ é‡ï¼Œå¤§å°ä¸º(num_layers, batch_size, hidden_size)ã€‚ ç„¶åï¼Œæˆ‘ä»¬å°†æ•´ä¸ªè¾“å…¥åºåˆ—inputsè¾“å…¥åˆ°RNNä¸­å¹¶å¾—åˆ°è¾“å‡ºoutputå’Œæœ€åä¸€ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€hiddenã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”±äºæˆ‘ä»¬åªæœ‰ä¸€ä¸ªRNNå±‚ï¼Œå› æ­¤hiddençš„å¤§å°ä¸åˆå§‹å¤§å°ç›¸åŒï¼Œä»…ä»…æ˜¯åœ¨ç¬¬ä¸€ç»´ä¸Šæ·»åŠ äº†ä¸€ä¸ªé¢å¤–çš„ç»´åº¦ã€‚ æœ€åï¼Œæˆ‘ä»¬æ‰“å°è¾“å‡ºoutputå’Œéšè—çŠ¶æ€hiddençš„å½¢çŠ¶å’Œå€¼ï¼Œä»¥ä¾¿äº†è§£RNNåœ¨æ•´ä¸ªåºåˆ—ä¸Šçš„è¾“å‡ºæƒ…å†µã€‚ å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªè¾“å…¥åºåˆ—çš„è¾“å‡ºoutputæ˜¯ä¸€ä¸ªå¤§å°ä¸º(seq_len, batch_size, hidden_size) &#x3D; (3, 1, 2)çš„å¼ é‡ã€‚å…¶ä¸­ï¼Œç¬¬ä¸€ç»´è¡¨ç¤ºåºåˆ—é•¿åº¦ï¼Œç¬¬äºŒç»´è¡¨ç¤ºæ‰¹æ¬¡å¤§å°ï¼Œç¬¬ä¸‰ç»´è¡¨ç¤ºéšè—å±‚è¾“å‡ºçš„ç»´åº¦ã€‚è€Œæœ€åä¸€ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€hiddenæ˜¯ä¸€ä¸ªå¤§å°ä¸º(num_layers, batch_size, hidden_size) &#x3D; (1, 1, 2)çš„å¼ é‡ã€‚å…¶ä¸­ï¼Œç¬¬ä¸€ç»´è¡¨ç¤ºRNNçš„å±‚æ•°ï¼Œç¬¬äºŒç»´è¡¨ç¤ºæ‰¹æ¬¡å¤§å°ï¼Œç¬¬ä¸‰ç»´è¡¨ç¤ºéšè—å±‚è¾“å‡ºçš„ç»´åº¦ã€‚ ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021import torchbatch_size = 1seq_len = 3input_size = 4hidden_size = 2num_layers = 1 # RNNå±‚æ•°# Construction of RNNrnn = torch.nn.RNN(input_size=input_size, hidden_size=hidden_size, num_layers=num_layers)# Wrapping the sequence into:(seqLen,batchSize,InputSize)inputs = torch.randn(seq_len, batch_size, input_size) # (3,1,4)# Initializing the hidden to zerohidden = torch.zeros(num_layers, batch_size, hidden_size) # (1,1,2)output, hidden = rnn(inputs, hidden) # RNNå†…éƒ¨åŒ…å«äº†å¾ªç¯ï¼Œæ•…è¿™é‡Œåªéœ€æŠŠæ•´ä¸ªåºåˆ—è¾“å…¥å³å¯print(&#x27;Output size:&#x27;, output.shape) # (seq_len, batch_size, hidden_size)print(&#x27;Output:&#x27;, output)print(&#x27;Hidden size:&#x27;, hidden.shape) # (num_layers, batch_size, hidden_size)print(&#x27;Hidden:&#x27;, hidden) è¿è¡Œç»“æœï¼š 12345678Output size: torch.Size([3, 1, 2])Output: tensor([[[-0.9880, -0.8818]], [[ 0.6066, 0.9090]], [[-0.3108, 0.7957]]], grad_fn=&lt;StackBackward0&gt;)Hidden size: torch.Size([1, 1, 2])Hidden: tensor([[[-0.3108, 0.7957]]], grad_fn=&lt;StackBackward0&gt;) å¯ä»¥çœ‹åˆ°ï¼Œè¾“å‡ºoutputæ˜¯ä¸€ä¸ª3ç»´çš„å¼ é‡ï¼Œå¤§å°ä¸º(seq_len, batch_size, hidden_size) &#x3D; (3, 1, 2)ï¼Œåœ¨æ¯ä¸ªæ—¶é—´æ­¥çš„è¾“å‡ºå€¼éƒ½ä¸åŒã€‚æœ€åä¸€ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€hiddenæ˜¯ä¸€ä¸ª3ç»´çš„å¼ é‡ï¼Œå¤§å°ä¸º(num_layers, batch_size, hidden_size) &#x3D; (1, 1, 2)ï¼Œæ˜¯æ•´ä¸ªåºåˆ—çš„æœ€åä¸€ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€ã€‚ è¿™ä¸ªè·Ÿä¹‹å‰çš„RNNCellæœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ å‰é¢çš„ä¾‹å­ä¸­ä½¿ç”¨äº†RNNCellï¼Œå®ƒåªæ˜¯RNNçš„ä¸€ä¸ªå•å…ƒï¼Œç”¨äºå¤„ç†ä¸€ä¸ªæ—¶é—´æ­¥çš„è¾“å…¥æ•°æ®ï¼Œéœ€è¦åœ¨å¾ªç¯ä¸­æ‰‹åŠ¨å¤„ç†æ—¶é—´æ­¥ã€‚è€Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å®Œæ•´çš„RNNæ¨¡å‹ï¼Œå®ƒå†…éƒ¨åŒ…å«äº†å¾ªç¯ç»“æ„ï¼Œå¯ä»¥ä¸€æ¬¡æ€§å¤„ç†æ•´ä¸ªåºåˆ—çš„è¾“å…¥ï¼Œä»è€Œé¿å…äº†æ‰‹åŠ¨å¤„ç†æ—¶é—´æ­¥çš„ç¹çè¿‡ç¨‹ã€‚ åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨torch.nn.RNNæ„é€ äº†ä¸€ä¸ªRNNæ¨¡å‹ï¼Œå¹¶å°†æ•´ä¸ªåºåˆ—inputsè¾“å…¥åˆ°æ¨¡å‹ä¸­ï¼Œæ¨¡å‹å†…éƒ¨å®Œæˆäº†æ‰€æœ‰çš„å¾ªç¯è®¡ç®—ï¼Œå¹¶è¿”å›äº†æ•´ä¸ªåºåˆ—çš„è¾“å‡ºoutputå’Œæœ€åä¸€ä¸ªæ—¶é—´æ­¥çš„éšçŠ¶æ€hiddenã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ¨¡å‹ä¸­çš„hiddençŠ¶æ€æ˜¯åœ¨ä¸åŒçš„æ—¶é—´æ­¥å…±äº«çš„ï¼Œå³å½“å‰æ—¶é—´æ­¥çš„éšçŠ¶æ€hiddenæ˜¯ç”±ä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„è¾“å‡ºå’ŒéšçŠ¶æ€è®¡ç®—å¾—åˆ°çš„ï¼Œè¿™ä¸å‰é¢çš„RNNCellæ˜¯ç±»ä¼¼çš„ã€‚ä½†æ˜¯ï¼Œå®Œæ•´çš„RNNæ¨¡å‹ä¼šè‡ªåŠ¨å®Œæˆæ—¶é—´æ­¥ä¹‹é—´çš„å¾ªç¯ï¼Œå› æ­¤æ›´åŠ æ–¹ä¾¿ã€‚ 2.3 RNNå‚æ•°ï¼šbatch_firståœ¨PyTorchä¸­ï¼ŒRNNæ¨¡å‹çš„è¾“å…¥é€šå¸¸æ˜¯(seq_len, batch_size, input_size)è¿™æ ·çš„å½¢å¼ï¼Œå³æ—¶é—´æ­¥åºåˆ—æ’åˆ—åœ¨ç¬¬ä¸€ç»´ï¼Œæ‰¹é‡æ•°æ®æ’åˆ—åœ¨ç¬¬äºŒç»´ã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½æ›´å€¾å‘äºä½¿ç”¨(batch_size, seq_len, input_size)çš„è¾“å…¥å½¢å¼ã€‚ä¸ºäº†æ»¡è¶³è¿™ç§éœ€è¦ï¼ŒPyTorchæä¾›äº†batch_firstå‚æ•°ã€‚ å½“batch_first&#x3D;Trueæ—¶ï¼Œè¾“å…¥å’Œè¾“å‡ºçš„å½¢çŠ¶å°±å˜æˆäº†(batch_size, seq_len, input_size)ï¼Œè¿™æ ·å°±æ›´ç¬¦åˆä¸€èˆ¬çš„æ•°æ®æ ¼å¼ã€‚åœ¨æ„é€ RNNæ¨¡å‹æ—¶ï¼Œåªéœ€å°†batch_firstå‚æ•°è®¾ç½®ä¸ºTrueå³å¯ã€‚ ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªRNNæ¨¡å‹ï¼Œå½“batch_first&#x3D;Falseæ—¶ï¼Œè¾“å…¥çš„å½¢çŠ¶ä¸º(seq_len, batch_size, input_size)ï¼Œè€Œ**å½“batch_first&#x3D;Trueæ—¶ï¼Œè¾“å…¥çš„å½¢çŠ¶ä¸º(batch_size, seq_len, input_size)**ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š 123456789101112131415161718192021import torchbatch_size = 1seq_len = 3input_size = 4hidden_size = 2num_layers = 1 # RNNå±‚æ•°# Construction of RNN, batch_first=Truernn = torch.nn.RNN(input_size=input_size, hidden_size=hidden_size, num_layers=num_layers, batch_first=True)# ä»…è¿™é‡Œåšäº†æ›´æ”¹ Wrapping the sequence into:(batchSize,seqLen,InputSize)inputs = torch.randn(batch_size, seq_len, input_size) # (1,3,4)# Initializing the hidden to zerohidden = torch.zeros(num_layers, batch_size, hidden_size) # (1,1,2)output, hidden = rnn(inputs, hidden) # RNNå†…éƒ¨åŒ…å«äº†å¾ªç¯ï¼Œæ•…è¿™é‡Œåªéœ€æŠŠæ•´ä¸ªåºåˆ—è¾“å…¥å³å¯print(&#x27;Output size:&#x27;, output.shape) # è¾“å‡ºç»´åº¦å‘ç”Ÿå˜åŒ–(batch_size, seq_len, hidden_size)print(&#x27;Output:&#x27;, output)print(&#x27;Hidden size:&#x27;, hidden.shape) # (num_layers, batch_size, hidden_size)print(&#x27;Hidden:&#x27;, hidden) 123456Output size: torch.Size([1, 3, 2])Output: tensor([[[ 0.6276, -0.1454], [ 0.0294, 0.3148], [-0.3239, 0.4692]]], grad_fn=&lt;TransposeBackward1&gt;)Hidden size: torch.Size([1, 1, 2])Hidden: tensor([[[-0.3239, 0.4692]]], grad_fn=&lt;StackBackward0&gt;) åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªRNNæ¨¡å‹ï¼Œå°†batch_firstå‚æ•°è®¾ç½®ä¸ºTrueï¼Œå¹¶å°†è¾“å…¥æ•°æ®inputsçš„å½¢çŠ¶è®¾ç½®ä¸º(batch_size, seq_len, input_size)ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–¹ä¾¿åœ°å¤„ç†è¾“å…¥æ•°æ®ï¼Œè€Œä¸ç”¨æ‹…å¿ƒæ—¶é—´æ­¥å’Œæ‰¹é‡ä¹‹é—´çš„é¡ºåºé—®é¢˜ã€‚ 3 ä¾‹å­ï¼šåºåˆ—å˜æ¢æŠŠ â€œhelloâ€ â€“&gt; â€œohlolâ€ 3.1 ä½¿ç”¨RNNCellè¾“å…¥çš„ç‹¬çƒ­ç¼–ç ç¤ºæ„å›¾ï¼š è¾“å‡ºç¤ºæ„å›¾ï¼š è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªåŸºäºRNNCellçš„ç®€å•çš„å­—ç¬¦çº§åˆ«çš„è¯­è¨€æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ã€‚å…·ä½“çš„è®­ç»ƒè¿‡ç¨‹å¦‚ä¸‹ï¼š å®šä¹‰äº†ä¸€ä¸ªå¤§å°ä¸ºinput_sizeçš„è¾“å…¥å‘é‡ï¼Œå¤§å°ä¸ºhidden_sizeçš„éšè—å‘é‡å’Œæ‰¹æ¬¡å¤§å°ä¸ºbatch_sizeçš„Modelç±»ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªç±»çš„åˆå§‹åŒ–å‡½æ•°ä¸­ï¼Œæ„å»ºäº†ä¸€ä¸ªRNNCellã€‚ ä½¿ç”¨ç»™å®šçš„ç´¢å¼•ï¼Œå°†è¾“å…¥åºåˆ—è½¬æ¢ä¸º one-hot å‘é‡ï¼Œå¹¶å°†è¾“å…¥åºåˆ—å’Œæ ‡ç­¾åºåˆ—éƒ½è¿›è¡Œç»´åº¦å˜æ¢ï¼Œä½¿å…¶å˜ä¸º (sequence_length, batch_size, input_size) å’Œ (sequence_length, 1)ã€‚ å®šä¹‰æŸå¤±å‡½æ•°ä¸ºäº¤å‰ç†µæŸå¤±å‡½æ•°ï¼Œä¼˜åŒ–å™¨ä¸º Adamã€‚ åœ¨å¾ªç¯è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡è¾“å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œå³æŒ‰åºåˆ—æ¬¡åºè¿›è¡Œå¾ªç¯ã€‚æ¯æ¬¡è®­ç»ƒå‰å…ˆå°†ä¼˜åŒ–å™¨çš„æ¢¯åº¦æ¸…é›¶ï¼Œç„¶åä½¿ç”¨ net.init_hidden() åˆå§‹åŒ–éšè—å±‚ï¼Œå¹¶åœ¨å¾ªç¯ä¸­ä½¿ç”¨ net(input, hidden) å¾—åˆ°ä¸‹ä¸€ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€ã€‚æ¥ç€è®¡ç®—æŸå¤±ï¼Œè¿›è¡Œåå‘ä¼ æ’­ï¼Œæ›´æ–°å‚æ•°ã€‚æ¯æ¬¡å¾ªç¯ä¸­è¿˜ä¼šæ‰“å°å‡ºé¢„æµ‹çš„å­—ç¬¦å’Œå½“å‰æŸå¤±ã€‚ å¾ªç¯è®­ç»ƒ15æ¬¡ï¼Œç›´åˆ°è®­ç»ƒå®Œæˆã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758import torch# 1ã€ç¡®å®šå‚æ•°input_size = 4hidden_size = 4batch_size = 1# 2ã€å‡†å¤‡æ•°æ®index2char = [&#x27;e&#x27;, &#x27;h&#x27;, &#x27;l&#x27;, &#x27;o&#x27;] #å­—å…¸x_data = [1, 0, 2, 2, 3] #ç”¨å­—å…¸ä¸­çš„ç´¢å¼•ï¼ˆæ•°å­—ï¼‰è¡¨ç¤ºæ¥è¡¨ç¤ºhelloy_data = [3, 1, 2, 3, 2] #æ ‡ç­¾ï¼šohlolone_hot_lookup = [[1, 0, 0, 0], # ç”¨æ¥å°†x_dataè½¬æ¢ä¸ºone-hotå‘é‡çš„å‚ç…§è¡¨ [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]]x_one_hot = [one_hot_lookup[x] for x in x_data] #å°†x_dataè½¬æ¢ä¸ºone-hotå‘é‡inputs = torch.Tensor(x_one_hot).view(-1, batch_size, input_size) #(ğ’”ğ’†ğ’’ğ‘³ğ’†ğ’,ğ’ƒğ’‚ğ’•ğ’„ğ’‰ğ‘ºğ’Šğ’›ğ’†,ğ’Šğ’ğ’‘ğ’–ğ’•ğ‘ºğ’Šğ’›ğ’†)labels = torch.LongTensor(y_data).view(-1, 1) # (seqLen*batchSize,ğŸ).è®¡ç®—äº¤å‰ç†µæŸå¤±æ—¶æ ‡ç­¾ä¸éœ€è¦æˆ‘ä»¬è¿›è¡Œone-hotç¼–ç ï¼Œå…¶å†…éƒ¨ä¼šè‡ªåŠ¨è¿›è¡Œå¤„ç†# 3ã€æ„å»ºæ¨¡å‹class Model(torch.nn.Module): def __init__(self, input_size, hidden_size, batch_size): super(Model, self).__init__() self.batch_size = batch_size self.input_size = input_size self.hidden_size = hidden_size self.rnncell = torch.nn.RNNCell(input_size=self.input_size, hidden_size=self.hidden_size) def forward(self, input, hidden): hidden = self.rnncell(input, hidden) return hidden def init_hidden(self): #åˆå§‹åŒ–éšè—å±‚ï¼Œéœ€è¦batch_size return torch.zeros(self.batch_size, self.hidden_size)net = Model(input_size, hidden_size, batch_size)# 4ã€æŸå¤±å’Œä¼˜åŒ–å™¨criterion = torch.nn.CrossEntropyLoss()optimizer = torch.optim.Adam(net.parameters(), lr=0.1) # Adamä¼˜åŒ–å™¨# 5ã€è®­ç»ƒfor epoch in range(15): loss = 0 optimizer.zero_grad() #æ¢¯åº¦æ¸…é›¶ hidden = net.init_hidden() # åˆå§‹åŒ–éšè—å±‚ print(&#x27;Predicted string:&#x27;, end=&#x27;&#x27;) for input, label in zip(inputs, labels): #æ¯æ¬¡è¾“å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œå³æŒ‰åºåˆ—æ¬¡åºè¿›è¡Œå¾ªç¯ hidden = net(input, hidden) loss += criterion(hidden, label) # è®¡ç®—æŸå¤±ï¼Œä¸ç”¨item()ï¼Œå› ä¸ºåé¢è¿˜è¦åå‘ä¼ æ’­ _, idx = hidden.max(dim=1) # é€‰å–æœ€å¤§å€¼çš„ç´¢å¼• print(index2char[idx.item()], end=&#x27;&#x27;) # æ‰“å°é¢„æµ‹çš„å­—ç¬¦ loss.backward() # åå‘ä¼ æ’­ optimizer.step() # æ›´æ–°å‚æ•° print(&#x27;, Epoch [%d/15] loss: %.4f&#x27; % (epoch + 1, loss.item())) è¿è¡Œç»“æœï¼š 123456789101112131415Predicted string:hehee, Epoch [1/15] loss: 8.2711Predicted string:olhll, Epoch [2/15] loss: 6.2931Predicted string:ollll, Epoch [3/15] loss: 5.3395Predicted string:ollll, Epoch [4/15] loss: 4.7223Predicted string:ohlll, Epoch [5/15] loss: 4.2614Predicted string:ohlll, Epoch [6/15] loss: 3.9137Predicted string:ohlol, Epoch [7/15] loss: 3.6579Predicted string:ohlol, Epoch [8/15] loss: 3.4601Predicted string:ohlol, Epoch [9/15] loss: 3.2896Predicted string:ohlol, Epoch [10/15] loss: 3.1306Predicted string:ohlol, Epoch [11/15] loss: 2.9806Predicted string:ohlol, Epoch [12/15] loss: 2.8476Predicted string:ohlol, Epoch [13/15] loss: 2.7450Predicted string:ohlol, Epoch [14/15] loss: 2.6792Predicted string:ohlol, Epoch [15/15] loss: 2.6347 3.2 ä½¿ç”¨RNNåœ¨ä»£ç ä¸­ï¼Œé¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªRNNæ¨¡å‹çš„ç±»Modelï¼Œç»§æ‰¿è‡ªtorch.nn.Moduleã€‚è¿™ä¸ªæ¨¡å‹æ¥å—ä¸€ä¸ªinput_sizeè¡¨ç¤ºè¾“å…¥çš„å‘é‡ç»´åº¦ï¼Œä¸€ä¸ªhidden_sizeè¡¨ç¤ºéšè—å±‚çš„å‘é‡ç»´åº¦ï¼Œä¸€ä¸ªbatch_sizeè¡¨ç¤ºæ¯æ‰¹æ¬¡è¾“å…¥æ•°æ®çš„æ ·æœ¬æ•°é‡ï¼Œä»¥åŠä¸€ä¸ªå¯é€‰çš„num_layersè¡¨ç¤ºRNNçš„å±‚æ•°ã€‚ åœ¨è¿™ä¸ªç±»ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ªRNNå±‚self.rnnï¼Œè¾“å…¥ä¸ºinput_sizeå’Œhidden_sizeï¼Œå¹¶æŒ‡å®šå±‚æ•°ä¸ºnum_layersã€‚åœ¨å‰å‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œå°†è¾“å…¥æ•°æ®inputå’Œä¸€ä¸ªå…¨é›¶å¼ é‡hiddenè¾“å…¥åˆ°RNNå±‚ä¸­ï¼Œç„¶åå°†è¾“å‡ºå¼ é‡outä»ä¸‰ç»´å¼ é‡è½¬æ¢ä¸ºäºŒç»´å¼ é‡ï¼Œå¹¶è¿”å›è¾“å‡ºå¼ é‡ã€‚ åœ¨è®­ç»ƒæ—¶ï¼Œé¦–å…ˆå°†ä¼˜åŒ–å™¨çš„æ¢¯åº¦æ¸…é›¶ï¼Œç„¶åå°†è¾“å…¥æ•°æ®inputsé€å…¥æ¨¡å‹ä¸­å¾—åˆ°è¾“å‡ºoutputsã€‚å°†è¾“å‡ºoutputså’Œæ ‡ç­¾labelsè¾“å…¥åˆ°äº¤å‰ç†µæŸå¤±å‡½æ•°ä¸­è®¡ç®—æŸå¤±ï¼Œç„¶åé€šè¿‡åå‘ä¼ æ’­è®¡ç®—æ¢¯åº¦ï¼Œå¹¶è°ƒç”¨ä¼˜åŒ–å™¨çš„stepæ–¹æ³•æ›´æ–°æ¨¡å‹å‚æ•°ã€‚ æœ€åï¼Œå°†è¾“å‡ºoutputsä¸­æ¯ä¸ªæ—¶é—´æ­¥çš„é¢„æµ‹ç»“æœå–å‡ºæ¥ï¼Œè½¬æ¢ä¸ºå¯¹åº”çš„å­—ç¬¦ï¼Œæ‰“å°å‡ºæ¥ã€‚åŒæ—¶ï¼Œè¾“å‡ºå½“å‰çš„æŸå¤±å’Œè®­ç»ƒè½®æ•°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960import torch# 1ã€ç¡®å®šå‚æ•°seq_len = 5input_size = 4hidden_size = 4batch_size = 1# 2ã€å‡†å¤‡æ•°æ®index2char = [&#x27;e&#x27;, &#x27;h&#x27;, &#x27;l&#x27;, &#x27;o&#x27;] #å­—å…¸x_data = [1, 0, 2, 2, 3] #ç”¨å­—å…¸ä¸­çš„ç´¢å¼•ï¼ˆæ•°å­—ï¼‰è¡¨ç¤ºæ¥è¡¨ç¤ºhelloy_data = [3, 1, 2, 3, 2] #æ ‡ç­¾ï¼šohlolone_hot_lookup = [[1, 0, 0, 0], # ç”¨æ¥å°†x_dataè½¬æ¢ä¸ºone-hotå‘é‡çš„å‚ç…§è¡¨ [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]]x_one_hot = [one_hot_lookup[x] for x in x_data] #å°†x_dataè½¬æ¢ä¸ºone-hotå‘é‡inputs = torch.Tensor(x_one_hot).view(seq_len, batch_size, input_size) #(ğ’”ğ’†ğ’’ğ‘³ğ’†ğ’,ğ’ƒğ’‚ğ’•ğ’„ğ’‰ğ‘ºğ’Šğ’›ğ’†,ğ’Šğ’ğ’‘ğ’–ğ’•ğ‘ºğ’Šğ’›ğ’†)labels = torch.LongTensor(y_data)# 3ã€æ„å»ºæ¨¡å‹class Model(torch.nn.Module): def __init__(self, input_size, hidden_size, batch_size, num_layers=1): super(Model, self).__init__() self.num_layers = num_layers self.batch_size = batch_size self.input_size = input_size self.hidden_size = hidden_size self.rnn = torch.nn.RNN(input_size=self.input_size, hidden_size=self.hidden_size, num_layers=num_layers) def forward(self, input): hidden = torch.zeros(self.num_layers, self.batch_size, self.hidden_size) out, _ = self.rnn(input, hidden) # out: tensor of shape (seq_len, batch, hidden_size) return out.view(-1, self.hidden_size) # å°†è¾“å‡ºçš„ä¸‰ç»´å¼ é‡è½¬æ¢ä¸ºäºŒç»´å¼ é‡,(ğ’”ğ’†ğ’’ğ‘³ğ’†ğ’Ã—ğ’ƒğ’‚ğ’•ğ’„ğ’‰ğ‘ºğ’Šğ’›ğ’†,ğ’‰ğ’Šğ’…ğ’…ğ’†ğ’ğ‘ºğ’Šğ’›ğ’†) def init_hidden(self): #åˆå§‹åŒ–éšè—å±‚ï¼Œéœ€è¦batch_size return torch.zeros(self.batch_size, self.hidden_size)net = Model(input_size, hidden_size, batch_size, num_layers)# 4ã€æŸå¤±å’Œä¼˜åŒ–å™¨criterion = torch.nn.CrossEntropyLoss()optimizer = torch.optim.Adam(net.parameters(), lr=0.05) # Adamä¼˜åŒ–å™¨# 5ã€è®­ç»ƒfor epoch in range(15): optimizer.zero_grad() outputs = net(inputs) loss = criterion(outputs, labels) loss.backward() optimizer.step() _, idx = outputs.max(dim=1) idx = idx.data.numpy() print(&#x27;Predicted string: &#x27;, &#x27;&#x27;.join([index2char[x] for x in idx]), end=&#x27;&#x27;) print(&#x27;, Epoch [%d/15] loss: %.4f&#x27; % (epoch + 1, loss.item())) è¿è¡Œç»“æœï¼š 123456789101112131415Predicted string: hhhhh, Epoch [1/15] loss: 1.4325Predicted string: hhhhh, Epoch [2/15] loss: 1.2532Predicted string: ohhoh, Epoch [3/15] loss: 1.1057Predicted string: ohlol, Epoch [4/15] loss: 0.9970Predicted string: ohlol, Epoch [5/15] loss: 0.9208Predicted string: oolol, Epoch [6/15] loss: 0.8669Predicted string: oolol, Epoch [7/15] loss: 0.8250Predicted string: oolol, Epoch [8/15] loss: 0.7863Predicted string: oolol, Epoch [9/15] loss: 0.7453Predicted string: oolol, Epoch [10/15] loss: 0.7024Predicted string: oolol, Epoch [11/15] loss: 0.6625Predicted string: oolol, Epoch [12/15] loss: 0.6291Predicted string: ohlol, Epoch [13/15] loss: 0.6026Predicted string: ohlol, Epoch [14/15] loss: 0.5812Predicted string: ohlol, Epoch [15/15] loss: 0.5630 åœ¨è¿™æ®µä»£ç ä¸­ï¼Œlabelsä¸éœ€è¦è¿›è¡Œ.view(-1, 1)å¤„ç†çš„åŸå› æ˜¯å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªä¸€ç»´çš„LongTensorå¼ é‡ï¼Œå½¢çŠ¶ä¸º(seq_len,)ã€‚åœ¨ PyTorch çš„äº¤å‰ç†µæŸå¤±å‡½æ•° torch.nn.CrossEntropyLoss() ä¸­ï¼Œæ ‡ç­¾éœ€è¦è¢«è¡¨ç¤ºæˆä¸€ç»´çš„é•¿æ•´å‹å¼ é‡ã€‚è¿™æ˜¯å› ä¸ºäº¤å‰ç†µæŸå¤±å‡½æ•°åœ¨å†…éƒ¨å°†æ ‡ç­¾è¿›è¡Œäº†one-hotç¼–ç ï¼Œå¹¶ä½¿ç”¨è¿™äº›ç¼–ç æ¥è®¡ç®—é¢„æµ‹å€¼å’Œæ ‡ç­¾ä¹‹é—´çš„æŸå¤±ã€‚ åœ¨è¿™æ®µä»£ç ä¸­ï¼Œç”±äº labels æ˜¯ä¸€ä¸ªä¸€ç»´å¼ é‡ï¼Œå› æ­¤æ— éœ€è¿›è¡Œå½¢çŠ¶å˜æ¢ã€‚å½“ç„¶ï¼Œå¦‚æœä½ å°† labels è½¬æ¢ä¸º (seq_len, 1) çš„å½¢çŠ¶ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œtorch.nn.CrossEntropyLoss() ä¼šè‡ªåŠ¨å°†å…¶è½¬æ¢å›ä¸€ç»´å¼ é‡ï¼Œæ‰€ä»¥ä¸å¿…è¿›è¡Œæ­¤æ“ä½œã€‚ 3.3 ä½¿ç”¨embedding and linear layeråœ¨ä½¿ç”¨ç‹¬çƒ­ç¼–ç ä½œä¸ºRNNè¾“å…¥æ—¶ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªç¼ºç‚¹ï¼š ç»´åº¦ç¾éš¾ï¼šå¯¹äºå¤§è§„æ¨¡çš„æ•°æ®é›†å’Œå¤šç±»åˆ†ç±»é—®é¢˜ï¼Œç‹¬çƒ­ç¼–ç ä¼šå¯¼è‡´è¾“å…¥æ•°æ®ç»´åº¦æåº¦è†¨èƒ€ï¼Œä»è€Œå¯¼è‡´æ¨¡å‹å‚æ•°å˜å¾—éå¸¸åºå¤§ï¼Œè®­ç»ƒå’Œæ¨ç†æ—¶é—´å˜æ…¢ã€‚ æ•°æ®ç¨€ç–æ€§ï¼šç‹¬çƒ­ç¼–ç ä¼šä½¿å¾—å¤§éƒ¨åˆ†è¾“å…¥éƒ½æ˜¯0ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªä½ç½®æ˜¯1ï¼Œè¿™å¯¼è‡´è¾“å…¥æ•°æ®éå¸¸ç¨€ç–ï¼Œæµªè´¹äº†å¤§é‡çš„å­˜å‚¨ç©ºé—´å’Œè®¡ç®—èµ„æºã€‚ æ— æ³•è¡¨è¾¾åºåˆ—ä¿¡æ¯ï¼šåœ¨RNNä¸­ï¼Œåºåˆ—çš„é¡ºåºå¾ˆé‡è¦ï¼Œä½†æ˜¯ç‹¬çƒ­ç¼–ç æ— æ³•è¡¨è¾¾åºåˆ—ä¿¡æ¯ï¼Œåªèƒ½è¡¨è¾¾æ¯ä¸ªè¾“å…¥åœ¨ç±»åˆ«ä¸Šçš„å·®å¼‚ã€‚å› æ­¤ï¼Œåœ¨å¤„ç†åºåˆ—æ•°æ®æ—¶ï¼Œç‹¬çƒ­ç¼–ç å¯èƒ½æ— æ³•æ•æ‰åˆ°åºåˆ—ä¸­çš„æ¨¡å¼å’Œè§„å¾‹ã€‚ æ— æ³•å¤„ç†æœªçŸ¥ç±»åˆ«ï¼šç‹¬çƒ­ç¼–ç éœ€è¦é¢„å…ˆçŸ¥é“ç±»åˆ«çš„æ•°é‡ï¼Œå¦‚æœé‡åˆ°æ–°çš„ç±»åˆ«ï¼Œéœ€è¦é‡æ–°æ‰©å±•ç¼–ç å‘é‡ï¼Œè¿™ä¼šå¸¦æ¥é¢å¤–çš„å¼€é”€å’Œå¤æ‚åº¦ã€‚ å› æ­¤ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å…¶ä»–çš„ç¼–ç æ–¹å¼æ¥è§£å†³è¿™äº›é—®é¢˜ï¼Œä¾‹å¦‚ä½¿ç”¨åµŒå…¥ï¼ˆembeddingï¼‰å‘é‡æ¥è¡¨ç¤ºè¾“å…¥æ•°æ®ï¼Œæˆ–è€…ä½¿ç”¨ç‰¹å¾å“ˆå¸Œï¼ˆfeature hashingï¼‰ç­‰æŠ€æœ¯æ¥é™ä½ç»´åº¦ã€‚ åµŒå…¥ï¼ˆembeddingï¼‰å‘é‡åµŒå…¥ï¼ˆembeddingï¼‰å‘é‡æ˜¯ä¸€ç§å°†ç¦»æ•£å‹æ•°æ®ï¼ˆå¦‚è¯è¯­ã€ç”¨æˆ·IDç­‰ï¼‰æ˜ å°„åˆ°è¿ç»­å‹å‘é‡ç©ºé—´ä¸­çš„æŠ€æœ¯ï¼Œå¸¸ç”¨äºè‡ªç„¶è¯­è¨€å¤„ç†ã€æ¨èç³»ç»Ÿç­‰é¢†åŸŸã€‚ åµŒå…¥å‘é‡çš„åŸç†æ˜¯åˆ©ç”¨ç¥ç»ç½‘ç»œä¸­çš„ä¸€å±‚æˆ–å¤šå±‚è¿›è¡Œæ˜ å°„ã€‚å‡è®¾æœ‰nä¸ªç¦»æ•£åŒ–çš„å…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ ç”¨ä¸€ä¸ªå”¯ä¸€çš„æ•´æ•°è¿›è¡Œç¼–ç ã€‚åµŒå…¥å±‚çš„è¾“å…¥æ˜¯è¿™äº›ç¼–ç ï¼Œè¾“å‡ºæ˜¯æ¯ä¸ªç¼–ç å¯¹åº”çš„kç»´åµŒå…¥å‘é‡ï¼Œé€šå¸¸kçš„å€¼ä¼šè¿œå°äºnï¼Œå› æ­¤å°†æ•°æ®ä»ä¸€ä¸ªå¤§çš„é«˜ç»´ç©ºé—´å‹ç¼©åˆ°ä¸€ä¸ªè¾ƒå°çš„ä½ç»´ç©ºé—´ã€‚ åœ¨åµŒå…¥å±‚ä¸­ï¼Œæ¯ä¸ªå…ƒç´ çš„ç¼–ç éƒ½è¢«æ˜ å°„ä¸ºä¸€ä¸ªå›ºå®šé•¿åº¦çš„å‘é‡ï¼Œä¸”ä¸åŒå…ƒç´ çš„å‘é‡ä¹‹é—´å¯ä»¥è®¡ç®—ç›¸ä¼¼åº¦ï¼Œè¿™ä¸ªç›¸ä¼¼åº¦åœ¨ä¸€å®šç¨‹åº¦ä¸Šåæ˜ äº†å®ƒä»¬åœ¨åŸå§‹æ•°æ®ä¸­çš„å…³ç³»ã€‚ä¾‹å¦‚ï¼Œåœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­ï¼Œç›¸ä¼¼çš„å•è¯ï¼ˆå¦‚â€œcatâ€å’Œâ€œdogâ€ï¼‰åœ¨åµŒå…¥ç©ºé—´ä¸­çš„å‘é‡ä¼šæ›´åŠ æ¥è¿‘ï¼Œå› ä¸ºå®ƒä»¬åœ¨è¯­ä¹‰ä¸Šæœ‰ä¸€å®šçš„ç›¸å…³æ€§ã€‚ åµŒå…¥å‘é‡åœ¨è®¸å¤šåº”ç”¨ä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼Œä¾‹å¦‚è¯­è¨€æ¨¡å‹ã€æƒ…æ„Ÿåˆ†æã€æ¨èç³»ç»Ÿç­‰ã€‚åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­ï¼Œé€šè¿‡ä½¿ç”¨åµŒå…¥å‘é‡å¯ä»¥å°†æ–‡æœ¬è½¬æ¢ä¸ºæ•°å­—ï¼Œä»è€Œæ–¹ä¾¿æœºå™¨å­¦ä¹ ç®—æ³•å¤„ç†ã€‚åŒæ—¶ï¼Œç”±äºåµŒå…¥å‘é‡çš„ä½ç»´åº¦è¡¨ç¤ºï¼Œè®¡ç®—é€Ÿåº¦è¾ƒå¿«ï¼Œå¯ä»¥å¤„ç†å¤§è§„æ¨¡æ•°æ®é›†ã€‚ ç›¸å…³å‡½æ•° ä»£ç è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªåŸºäºRNNçš„å­—ç¬¦çº§åˆ«çš„è¯­è¨€æ¨¡å‹ï¼Œç”¨äºé¢„æµ‹ç»™å®šè¾“å…¥å­—ç¬¦åºåˆ—çš„ä¸‹ä¸€ä¸ªå­—ç¬¦ã€‚ä¸‹é¢æ˜¯å¯¹ä»£ç çš„è§£é‡Šå’Œè¯´æ˜ï¼š åœ¨ç¡®å®šå‚æ•°çš„éƒ¨åˆ†ï¼Œå®šä¹‰äº†RNNçš„è¾“å…¥å’Œè¾“å‡ºå¤§å°ã€éšè—çŠ¶æ€çš„ç»´åº¦ã€Embeddingå‘é‡çš„å¤§å°ã€RNNå±‚æ•°ç­‰å‚æ•°ï¼Œè¿™äº›å‚æ•°å°†ä¼šåœ¨æ¨¡å‹çš„æ„å»ºä¸­ä½¿ç”¨ã€‚ åœ¨å‡†å¤‡æ•°æ®çš„éƒ¨åˆ†ï¼Œå®šä¹‰äº†ä¸€ä¸ªå­—å…¸index2charç”¨äºå°†æ•°å­—ç´¢å¼•æ˜ å°„åˆ°å­—ç¬¦ï¼Œè¾“å…¥æ•°æ®x_dataæ˜¯ä¸€æ®µè‹±æ–‡å­—ç¬¦ä¸²â€helloâ€ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºæ•°å­—ç´¢å¼•çš„å½¢å¼ã€‚ åœ¨æ„å»ºæ¨¡å‹çš„éƒ¨åˆ†ï¼Œä½¿ç”¨äº†PyTorchä¸­çš„Embeddingå±‚å°†è¾“å…¥å­—ç¬¦çš„æ•°å­—ç´¢å¼•è½¬æ¢ä¸ºå›ºå®šé•¿åº¦çš„å‘é‡è¡¨ç¤ºï¼Œè¯¥å‘é‡è¡¨ç¤ºå°†åœ¨RNNä¸­ä¼ é€’ã€‚ä½¿ç”¨RNNå±‚å°†Embeddingå‘é‡ä½œä¸ºè¾“å…¥ï¼Œè®¡ç®—RNNçš„è¾“å‡ºã€‚æœ€åï¼Œé€šè¿‡ä¸€ä¸ªå…¨è¿æ¥å±‚fcå°†RNNçš„è¾“å‡ºæ˜ å°„åˆ°æ¯ä¸ªå­—ç¬¦çš„æ¦‚ç‡åˆ†å¸ƒã€‚åœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œå…¨è¿æ¥å±‚çš„ä½œç”¨æ˜¯å¯¹RNNçš„è¾“å‡ºåšä¸€ä¸ªçº¿æ€§å˜æ¢ï¼Œä»è€Œå°†è¾“å‡ºçš„ç»´åº¦ä»éšè—çŠ¶æ€çš„ç»´åº¦å˜ä¸ºæ¯ä¸ªå­—ç¬¦çš„æ•°é‡ã€‚ åœ¨å®šä¹‰æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨çš„éƒ¨åˆ†ï¼Œä½¿ç”¨äº†äº¤å‰ç†µæŸå¤±å‡½æ•°ä½œä¸ºæ¨¡å‹çš„æŸå¤±å‡½æ•°ï¼ŒAdamä¼˜åŒ–å™¨æ¥æ›´æ–°æ¨¡å‹çš„å‚æ•°ã€‚ åœ¨è®­ç»ƒæ¨¡å‹çš„éƒ¨åˆ†ï¼Œä½¿ç”¨ä¸€ä¸ªç®€å•çš„å¾ªç¯è¿›è¡Œæ¨¡å‹çš„è®­ç»ƒï¼Œæ¯æ¬¡è®­ç»ƒè¾“å‡ºå½“å‰è®­ç»ƒæ¬¡æ•°å’ŒæŸå¤±å€¼ï¼Œå¹¶æ‰“å°å‡ºæ¨¡å‹é¢„æµ‹çš„å­—ç¬¦ä¸²ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªå­—ç¬¦çš„Embeddingå‘é‡ä¼šéšç€è®­ç»ƒä¸æ–­è°ƒæ•´ï¼Œæœ€ç»ˆä½¿æ¨¡å‹èƒ½å¤Ÿå¯¹å­—ç¬¦åºåˆ—åšå‡ºå‡†ç¡®çš„é¢„æµ‹ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455import torch# 1ã€ç¡®å®šå‚æ•°num_class = 4input_size = 4hidden_size = 8embedding_size = 10num_layers = 2batch_size = 1seq_len = 5# 2ã€å‡†å¤‡æ•°æ®index2char = [&#x27;e&#x27;, &#x27;h&#x27;, &#x27;l&#x27;, &#x27;o&#x27;] #å­—å…¸x_data = [[1, 0, 2, 2, 3]] # (batch_size, seq_len) ç”¨å­—å…¸ä¸­çš„ç´¢å¼•ï¼ˆæ•°å­—ï¼‰è¡¨ç¤ºæ¥è¡¨ç¤ºhelloy_data = [3, 1, 2, 3, 2] # (batch_size * seq_len) æ ‡ç­¾ï¼šohlolinputs = torch.LongTensor(x_data) # (batch_size, seq_len)labels = torch.LongTensor(y_data) # (batch_size * seq_len)# 3ã€æ„å»ºæ¨¡å‹class Model(torch.nn.Module): def __init__(self): super(Model, self).__init__() self.emb = torch.nn.Embedding(num_class, embedding_size) self.rnn = torch.nn.RNN(input_size=embedding_size, hidden_size=hidden_size, num_layers=num_layers, batch_first=True) self.fc = torch.nn.Linear(hidden_size, num_class) def forward(self, x): hidden = torch.zeros(num_layers, x.size(0), hidden_size) # (num_layers, batch_size, hidden_size) x = self.emb(x) # è¿”å›(batch_size, seq_len, embedding_size) x, _ = self.rnn(x, hidden) # è¿”å›(batch_size, seq_len, hidden_size) x = self.fc(x) # è¿”å›(batch_size, seq_len, num_class) return x.view(-1, num_class) # (batch_size * seq_len, num_class)net = Model()# 4ã€æŸå¤±å’Œä¼˜åŒ–å™¨criterion = torch.nn.CrossEntropyLoss()optimizer = torch.optim.Adam(net.parameters(), lr=0.05) # Adamä¼˜åŒ–å™¨# 5ã€è®­ç»ƒfor epoch in range(15): optimizer.zero_grad() outputs = net(inputs) loss = criterion(outputs, labels) loss.backward() optimizer.step() _, idx = outputs.max(dim=1) idx = idx.data.numpy() print(&#x27;Predicted string: &#x27;, &#x27;&#x27;.join([index2char[x] for x in idx]), end=&#x27;&#x27;) print(&#x27;, Epoch [%d/15] loss: %.4f&#x27; % (epoch + 1, loss.item())) è¿è¡Œç»“æœï¼š 123456789101112131415Predicted string: eeeee, Epoch [1/15] loss: 1.5407Predicted string: oolol, Epoch [2/15] loss: 1.1158Predicted string: oolol, Epoch [3/15] loss: 0.9047Predicted string: ohlol, Epoch [4/15] loss: 0.7391Predicted string: lhlol, Epoch [5/15] loss: 0.6006Predicted string: ohlol, Epoch [6/15] loss: 0.4833Predicted string: ohlol, Epoch [7/15] loss: 0.3581Predicted string: ohlol, Epoch [8/15] loss: 0.2540Predicted string: ohlol, Epoch [9/15] loss: 0.1921Predicted string: ohlol, Epoch [10/15] loss: 0.1351Predicted string: ohlol, Epoch [11/15] loss: 0.0972Predicted string: ohlol, Epoch [12/15] loss: 0.0752Predicted string: ohlol, Epoch [13/15] loss: 0.0594Predicted string: ohlol, Epoch [14/15] loss: 0.0465Predicted string: ohlol, Epoch [15/15] loss: 0.0363 4 LSTMå’ŒGRUä¸Šé¢ RNN æ¨¡å‹ä¹Ÿå­˜åœ¨ä¸€äº›å±€é™æ€§ï¼š æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸é—®é¢˜ï¼šå½“åºåˆ—éå¸¸é•¿æ—¶ï¼Œæ¢¯åº¦å¯èƒ½ä¼šé€æ¸æ¶ˆå¤±æˆ–çˆ†ç‚¸ï¼Œå¯¼è‡´ç½‘ç»œæ— æ³•å­¦ä¹ é•¿åºåˆ—çš„ä¾èµ–å…³ç³»ã€‚ åªèƒ½å­¦ä¹ å›ºå®šé•¿åº¦çš„åºåˆ—ï¼šç”±äº RNN çš„è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯å›ºå®šé•¿åº¦çš„ï¼Œå› æ­¤æ¨¡å‹åªèƒ½å­¦ä¹ å›ºå®šé•¿åº¦çš„åºåˆ—ã€‚ å¤„ç†ä¸åŒæ—¶é—´æ­¥çš„è¾“å…¥æ—¶å­˜åœ¨æ•°æ®å¯¹é½é—®é¢˜ï¼šåœ¨è®­ç»ƒ RNN æ—¶ï¼Œéœ€è¦å°†ä¸åŒé•¿åº¦çš„åºåˆ—å¯¹é½åˆ°ç›¸åŒçš„é•¿åº¦ï¼Œè¿™é€šå¸¸éœ€è¦ä¸€äº›é¢„å¤„ç†å’Œåå¤„ç†ï¼Œè€Œä¸”å¯èƒ½ä¼šå¯¼è‡´ä¿¡æ¯ä¸¢å¤±æˆ–å™ªå£°å¼•å…¥ã€‚ æ— æ³•å¾ˆå¥½åœ°å¤„ç†é•¿æœŸä¾èµ–å…³ç³»ï¼šå°½ç®¡ RNN å¯ä»¥å­¦ä¹ ä¸€å®šçš„åºåˆ—ä¾èµ–æ€§ï¼Œä½†æ˜¯å½“åºåˆ—çš„æ—¶é—´è·¨åº¦å¾ˆå¤§æ—¶ï¼ŒRNN å¯èƒ½ä¼šå‡ºç°é•¿æœŸä¾èµ–é—®é¢˜ã€‚æ­¤å¤–ï¼Œç”±äº RNN çš„å¾ªç¯ç»“æ„ï¼Œæ¯ä¸ªæ—¶é—´æ­¥çš„è¾“å‡ºéƒ½ä¾èµ–äºå‰ä¸€æ—¶é—´æ­¥çš„çŠ¶æ€ï¼Œå› æ­¤æ¨¡å‹å¯èƒ½ä¼šå—åˆ°æŸäº›æ—¶é—´æ­¥çš„ä¿¡æ¯å¹²æ‰°ã€‚ æœ‰å‡ ç§æ–¹æ³•å¯ä»¥å°è¯•è§£å†³RNNæ¨¡å‹çš„ä¸€äº›å±€é™æ€§ï¼š ä½¿ç”¨æ›´é«˜çº§åˆ«çš„æ¨¡å‹ï¼šå¯ä»¥ä½¿ç”¨ä¸€äº›æ›´å…ˆè¿›çš„æ¨¡å‹ï¼Œå¦‚LSTMï¼ˆé•¿çŸ­æœŸè®°å¿†ç½‘ç»œï¼‰å’ŒGRUï¼ˆé—¨æ§å¾ªç¯å•å…ƒï¼‰ç­‰ï¼Œè¿™äº›æ¨¡å‹åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†RNNæ¨¡å‹å­˜åœ¨çš„ä¸€äº›é—®é¢˜ã€‚ æ·»åŠ æ³¨æ„åŠ›æœºåˆ¶ï¼šæ³¨æ„åŠ›æœºåˆ¶å¯ä»¥å¸®åŠ©æ¨¡å‹åœ¨è¾“å…¥åºåˆ—ä¸­å…³æ³¨ä¸åŒçš„éƒ¨åˆ†ï¼Œå¹¶å¯¹é‡è¦çš„éƒ¨åˆ†è¿›è¡ŒåŠ æƒï¼Œä»è€Œæé«˜æ¨¡å‹çš„å‡†ç¡®æ€§ã€‚ ä½¿ç”¨æ›´å¤šçš„æ•°æ®ï¼šå¢åŠ æ•°æ®é‡å¯ä»¥å¸®åŠ©æ¨¡å‹æ›´å¥½åœ°å­¦ä¹ è¾“å…¥åºåˆ—çš„è§„å¾‹ï¼Œä»è€Œæé«˜æ¨¡å‹çš„å‡†ç¡®æ€§ã€‚ å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼šå¯¹è¾“å…¥æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œå¦‚å½’ä¸€åŒ–ã€é™å™ªã€å¹³æ»‘ç­‰ï¼Œå¯ä»¥æé«˜æ¨¡å‹çš„é²æ£’æ€§å’Œå‡†ç¡®æ€§ã€‚ ç»“åˆå…¶ä»–æŠ€æœ¯ï¼šå¯ä»¥ç»“åˆå…¶ä»–æŠ€æœ¯æ¥è§£å†³æ¨¡å‹å­˜åœ¨çš„é—®é¢˜ï¼Œå¦‚é›†æˆå­¦ä¹ ã€æ­£åˆ™åŒ–ã€Dropoutç­‰ã€‚ LSTMï¼ˆLong Short-Term Memoryï¼Œé•¿çŸ­æœŸè®°å¿†ç½‘ç»œï¼‰å’ŒGRUï¼ˆGated Recurrent Unitï¼Œé—¨æ§å¾ªç¯å•å…ƒï¼‰æ˜¯å¸¸ç”¨çš„å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰çš„å˜ç§ï¼Œç›¸æ¯”äºä¼ ç»Ÿçš„RNNï¼Œå®ƒä»¬èƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†é•¿åºåˆ—æ•°æ®ï¼Œè§£å†³äº†ä¼ ç»ŸRNNä¸­çš„æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸é—®é¢˜ã€‚ LSTMçš„ä¸»è¦æ€æƒ³æ˜¯å¼•å…¥ä¸€ä¸ªç§°ä¸ºâ€œç»†èƒçŠ¶æ€â€ï¼ˆcell stateï¼‰çš„è®°å¿†å•å…ƒï¼Œä»¥åŠä¸‰ä¸ªé—¨ï¼ˆè¾“å…¥é—¨ã€é—å¿˜é—¨å’Œè¾“å‡ºé—¨ï¼‰æ¥æ§åˆ¶å¯¹ç»†èƒçŠ¶æ€çš„è®¿é—®å’Œæ›´æ–°ã€‚å…¶ä¸­ï¼Œè¾“å…¥é—¨å†³å®šäº†æ–°çš„è¾“å…¥å¦‚ä½•å½±å“ç»†èƒçŠ¶æ€ï¼Œé—å¿˜é—¨å†³å®šäº†ä½•æ—¶å¿˜è®°æ—§çš„ç»†èƒçŠ¶æ€ï¼Œè¾“å‡ºé—¨å†³å®šäº†è¾“å‡ºä»€ä¹ˆæ ·çš„ä¿¡æ¯ã€‚LSTMçš„ç»“æ„ç›¸å¯¹å¤æ‚ï¼Œéœ€è¦è¾ƒé«˜çš„è®¡ç®—èµ„æºå’Œè®­ç»ƒæ—¶é—´ã€‚ GRUæ˜¯ç”±Choç­‰äººäº2014å¹´æå‡ºçš„ä¸€ç§è½»é‡çº§çš„é—¨æ§å¾ªç¯å•å…ƒï¼Œå®ƒåªåŒ…å«ä¸¤ä¸ªé—¨ï¼ˆæ›´æ–°é—¨å’Œé‡ç½®é—¨ï¼‰ï¼Œé€šè¿‡æ§åˆ¶è¾“å…¥å’Œå†å²çŠ¶æ€çš„æƒé‡æ¥æ§åˆ¶ä¿¡æ¯æµåŠ¨ã€‚GRUçš„ç»“æ„æ¯”LSTMç®€å•ï¼Œè®¡ç®—é‡ä¹Ÿç›¸å¯¹è¾ƒå°ï¼ŒåŒæ—¶åœ¨å¤„ç†é•¿åºåˆ—æ•°æ®æ—¶ä¹Ÿå…·æœ‰ä¸é”™çš„æ•ˆæœã€‚ æ€»çš„æ¥è¯´ï¼ŒLSTMå’ŒGRUæ˜¯ç›®å‰åœ¨å¾ªç¯ç¥ç»ç½‘ç»œé¢†åŸŸä¸­è¡¨ç°ä¼˜å¼‚çš„æ¨¡å‹ï¼Œä½†å…·ä½“é€‰æ‹©å“ªç§æ¨¡å‹éœ€è¦æ ¹æ®å…·ä½“çš„ä»»åŠ¡å’Œæ•°æ®é›†æ¥å†³å®šã€‚ LSTMåŸç†ç¤ºæ„å›¾ ç›¸å…³é“¾æ¥ï¼šå¦‚ä½•ä»RNNèµ·æ­¥ï¼Œä¸€æ­¥ä¸€æ­¥é€šä¿—ç†è§£LSTM GRUåŸç†ç¤ºæ„å›¾ ç›¸å…³é“¾æ¥ï¼šäººäººéƒ½èƒ½çœ‹æ‡‚çš„GRU åŸæ–‡åœ°å€","categories":[{"name":"pytorch","slug":"pytorch","permalink":"http://breadwinners.top/categories/pytorch/"}],"tags":[{"name":"rnn","slug":"rnn","permalink":"http://breadwinners.top/tags/rnn/"}]},{"title":"pytorchå·ç§¯ç¥ç»ç½‘ç»œåŸºç¡€","slug":"pytorch/pytorchå·ç§¯ç¥ç»ç½‘ç»œåŸºç¡€","date":"2023-07-21T16:00:00.000Z","updated":"2023-07-23T08:01:34.011Z","comments":true,"path":"2023/07/22/pytorch/pytorchå·ç§¯ç¥ç»ç½‘ç»œåŸºç¡€/","link":"","permalink":"http://breadwinners.top/2023/07/22/pytorch/pytorch%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/","excerpt":"","text":"è¯´æ˜ 0ã€å‰ä¸€éƒ¨åˆ†å«åšFeature Extractionï¼Œåä¸€éƒ¨åˆ†å«åšclassification â€‹ 1ã€æ¯ä¸€ä¸ªå·ç§¯æ ¸å®ƒçš„é€šé“æ•°é‡è¦æ±‚å’Œè¾“å…¥é€šé“æ˜¯ä¸€æ ·çš„ã€‚è¿™ç§å·ç§¯æ ¸çš„æ€»æ•°æœ‰å¤šå°‘ä¸ªå’Œä½ è¾“å‡ºé€šé“çš„æ•°é‡æ˜¯ä¸€æ ·çš„ã€‚ â€‹ 2ã€å·ç§¯(convolution)åï¼ŒC(Channels)å˜ï¼ŒW(width)å’ŒH(Height)å¯å˜å¯ä¸å˜ï¼Œå–å†³äºæ˜¯å¦paddingã€‚subsampling(æˆ–pooling)åï¼ŒCä¸å˜ï¼ŒWå’ŒHå˜ã€‚ â€‹ 3ã€å·ç§¯å±‚ï¼šä¿ç•™å›¾åƒçš„ç©ºé—´ä¿¡æ¯ã€‚ â€‹ 4ã€å·ç§¯å±‚è¦æ±‚è¾“å…¥è¾“å‡ºæ˜¯å››ç»´å¼ é‡(B,C,W,H)ï¼Œå…¨è¿æ¥å±‚çš„è¾“å…¥ä¸è¾“å‡ºéƒ½æ˜¯äºŒç»´å¼ é‡(B,Input_feature)ã€‚ â€‹ ä¼ é€é—¨ PyTorchçš„nn.Linearï¼ˆï¼‰è¯¦è§£ 5ã€å·ç§¯(çº¿æ€§å˜æ¢)ï¼Œæ¿€æ´»å‡½æ•°(éçº¿æ€§å˜æ¢)ï¼Œæ± åŒ–ï¼›è¿™ä¸ªè¿‡ç¨‹è‹¥å¹²æ¬¡åï¼Œviewæ‰“å¹³ï¼Œè¿›å…¥å…¨è¿æ¥å±‚~ å·ç§¯å°±æ˜¯ç‰¹å¾æå–å™¨ æ± åŒ–å±‚æ˜¯ä¸ºäº†æå–ç‰¹å¾ï¼Œæ˜¯éçº¿æ€§çš„ ä»£ç è¯´æ˜ï¼š 1ã€torch.nn.Conv2d(1,10,kernel_size&#x3D;3,stride&#x3D;2,bias&#x3D;False) 1æ˜¯æŒ‡è¾“å…¥çš„Channelï¼Œç°è‰²å›¾åƒæ˜¯1ç»´çš„ï¼›10æ˜¯æŒ‡è¾“å‡ºçš„Channelï¼Œä¹Ÿå¯ä»¥è¯´ç¬¬ä¸€ä¸ªå·ç§¯å±‚éœ€è¦10ä¸ªå·ç§¯æ ¸ï¼›kernel_size&#x3D;3,å·ç§¯æ ¸å¤§å°æ˜¯3x3ï¼›stride&#x3D;2è¿›è¡Œå·ç§¯è¿ç®—æ—¶çš„æ­¥é•¿ï¼Œé»˜è®¤ä¸º1ï¼›bias&#x3D;Falseå·ç§¯è¿ç®—æ˜¯å¦éœ€è¦åç½®biasï¼Œé»˜è®¤ä¸ºFalseã€‚padding &#x3D; 0ï¼Œå·ç§¯æ“ä½œæ˜¯å¦è¡¥0ã€‚ 2ã€self.fc &#x3D; torch.nn.Linear(320, 10)ï¼Œè¿™ä¸ª320è·å–çš„æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡x &#x3D; x.view(batch_size, -1) # print(x.shape)å¯å¾—åˆ°(64,320),64æŒ‡çš„æ˜¯batchï¼Œ320å°±æ˜¯æŒ‡è¦è¿›è¡Œå…¨è¿æ¥æ“ä½œæ—¶ï¼Œè¾“å…¥çš„ç‰¹å¾ç»´åº¦ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283import torchimport timefrom torchvision import transformsfrom torchvision import datasetsfrom torch.utils.data import DataLoaderimport torch.nn.functional as Fimport torch.optim as optim# prepare datasetbatch_size = 64transform = transforms.Compose([transforms.ToTensor(), transforms.Normalize((0.1307,), (0.3081,))])train_dataset = datasets.MNIST(root=&#x27;../dataset/mnist/&#x27;, train=True, download=True, transform=transform)train_loader = DataLoader(train_dataset, shuffle=True, batch_size=batch_size)test_dataset = datasets.MNIST(root=&#x27;../dataset/mnist/&#x27;, train=False, download=True, transform=transform)test_loader = DataLoader(test_dataset, shuffle=False, batch_size=batch_size)class Net(torch.nn.Module): def __init__(self): super(Net, self).__init__() self.conv1 = torch.nn.Conv2d(1, 10, kernel_size=5) self.conv2 = torch.nn.Conv2d(10, 20, kernel_size=5) self.pooling = torch.nn.MaxPool2d(2) self.fc = torch.nn.Linear(320, 10) def forward(self, x): # flatten data from (n,1,28,28) to (n, 784) &quot;&quot;&quot;ä¸¾ä¸ªä¾‹å­,å‡è®¾xçš„shapeæ˜¯(128, 20, 12, 12),å–å‡ºx.size(0) = 128,ç”¨äºreshapeçš„batch size å¦‚æœä¸æå‰è·å–batch size,ç›´æ¥x.view(-1, 201212),reshapeçš„æ•ˆæœå°†å–å†³äºæ¯ä¸ªbatchçš„æ ·æœ¬æ•°,æ— æ³•ç¡®å®šã€‚ å¥½åƒæ¯ä¸ªç”¨åˆ°batchçš„åœ°æ–¹éƒ½éœ€è¦è·å–batch_size?????????&quot;&quot;&quot; batch_size = x.size(0) x = F.relu(self.pooling(self.conv1(x))) x = F.relu(self.pooling(self.conv2(x))) &quot;&quot;&quot; è¿™æ ·åšçš„ç›®çš„æ˜¯å°†å·ç§¯å±‚å¾—åˆ°çš„å››ç»´ç‰¹å¾æ˜ å°„,reshapeä¸ºå…¨è¿æ¥å±‚æ›´æ˜“å¤„ç†çš„äºŒç»´å½¢å¼ã€‚-1ä¼šè‡ªåŠ¨è®¡ç®—æ‰€éœ€çš„é‚£ä¸ªç»´åº¦çš„å€¼ã€‚ ä¹Ÿå°±æ˜¯å°†å››ç»´å¼ é‡reshapeä¸ºäºŒç»´å¼ é‡,åŒæ—¶ä¿æŒbatch_sizeç»´åº¦ä¸å˜,è¿™æ ·å°±å¯ä»¥é€‚é…å…¨è¿æ¥å±‚çš„è¾“å…¥ã€‚&quot;&quot;&quot; x = x.view(batch_size, -1) # å¹²å•¥ç”¨çš„ï¼Œä¸å¤ªæ‡‚ ---&gt; -1 æ­¤å¤„è‡ªåŠ¨ç®—å‡ºçš„æ˜¯320 x = self.fc(x) return xmodel = Net()criterion = torch.nn.CrossEntropyLoss()optimizer = torch.optim.SGD(model.parameters(), lr=0.01, momentum=0.5)def train(epoch): running_loss = 0.0 for batch_idx, data in enumerate(train_loader, 0): inputs, target = data optimizer.zero_grad() output = model(inputs) loss = criterion(output, target) loss.backward() optimizer.step() running_loss += loss.item() if batch_idx % 300 == 299: print(&quot;[%d %5d] loss : %.3f&quot; % (epoch + 1, batch_idx + 1, running_loss)) running_loss = 0.0def test(): correct = 0 total = 0 for batch_idx, data in enumerate(test_loader, 0): images, labels = data y_pred = model(images) _, predicted = torch.max(y_pred.data, dim=1) total += labels.size(0) correct += (y_pred == predicted).sum().item() print(&#x27;[å‡†ç¡®ç‡ï¼š%d %%&#x27; % (correct / total))if __name__ == &quot;__main__&quot;: for i in range(10): train(i) test() GPUç‰ˆæœ¬ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102import torchfrom torchvision import transformsfrom torchvision import datasetsfrom torch.utils.data import DataLoaderimport torch.nn.functional as Fimport torch.optim as optimimport matplotlib.pyplot as plt # prepare dataset batch_size = 64transform = transforms.Compose([transforms.ToTensor(), transforms.Normalize((0.1307,), (0.3081,))]) train_dataset = datasets.MNIST(root=&#x27;../dataset/mnist/&#x27;, train=True, download=True, transform=transform)train_loader = DataLoader(train_dataset, shuffle=True, batch_size=batch_size)test_dataset = datasets.MNIST(root=&#x27;../dataset/mnist/&#x27;, train=False, download=True, transform=transform)test_loader = DataLoader(test_dataset, shuffle=False, batch_size=batch_size) # design model using class class Net(torch.nn.Module): def __init__(self): super(Net, self).__init__() self.conv1 = torch.nn.Conv2d(1, 10, kernel_size=5) self.conv2 = torch.nn.Conv2d(10, 20, kernel_size=5) self.pooling = torch.nn.MaxPool2d(2) self.fc = torch.nn.Linear(320, 10) def forward(self, x): # flatten data from (n,1,28,28) to (n, 784) batch_size = x.size(0) x = F.relu(self.pooling(self.conv1(x))) x = F.relu(self.pooling(self.conv2(x))) x = x.view(batch_size, -1) # -1 æ­¤å¤„è‡ªåŠ¨ç®—å‡ºçš„æ˜¯320 # print(&quot;x.shape&quot;,x.shape) x = self.fc(x) return x model = Net()device = torch.device(&quot;cuda&quot; if torch.cuda.is_available() else &quot;cpu&quot;)model.to(device) # construct loss and optimizercriterion = torch.nn.CrossEntropyLoss()optimizer = optim.SGD(model.parameters(), lr=0.01, momentum=0.5) # training cycle forward, backward, update def train(epoch): running_loss = 0.0 for batch_idx, data in enumerate(train_loader, 0): inputs, target = data inputs, target = inputs.to(device), target.to(device) optimizer.zero_grad() outputs = model(inputs) loss = criterion(outputs, target) loss.backward() optimizer.step() running_loss += loss.item() if batch_idx % 300 == 299: print(&#x27;[%d, %5d] loss: %.3f&#x27; % (epoch+1, batch_idx+1, running_loss/300)) running_loss = 0.0 def test(): correct = 0 total = 0 with torch.no_grad(): for data in test_loader: images, labels = data images, labels = images.to(device), labels.to(device) outputs = model(images) _, predicted = torch.max(outputs.data, dim=1) total += labels.size(0) correct += (predicted == labels).sum().item() print(&#x27;accuracy on test set: %d %% &#x27; % (100*correct/total)) return correct/total if __name__ == &#x27;__main__&#x27;: epoch_list = [] acc_list = [] for epoch in range(10): train(epoch) acc = test() epoch_list.append(epoch) acc_list.append(acc) plt.plot(epoch_list,acc_list) plt.ylabel(&#x27;accuracy&#x27;) plt.xlabel(&#x27;epoch&#x27;) plt.show()","categories":[{"name":"pytorch","slug":"pytorch","permalink":"http://breadwinners.top/categories/pytorch/"}],"tags":[{"name":"cnn","slug":"cnn","permalink":"http://breadwinners.top/tags/cnn/"}]},{"title":"centos7å®‰è£…æ˜¾å¡é©±åŠ¨é…ç½®ç¯å¢ƒç­‰","slug":"pytorch/centos7å®‰è£…æ˜¾å¡é©±åŠ¨é…ç½®ç¯å¢ƒç­‰","date":"2023-07-19T16:00:00.000Z","updated":"2023-07-22T07:49:51.751Z","comments":true,"path":"2023/07/20/pytorch/centos7å®‰è£…æ˜¾å¡é©±åŠ¨é…ç½®ç¯å¢ƒç­‰/","link":"","permalink":"http://breadwinners.top/2023/07/20/pytorch/centos7%E5%AE%89%E8%A3%85%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E7%AD%89/","excerpt":"","text":"é©±åŠ¨å®‰è£…1. æŸ¥çœ‹æ˜¾å¡ä¿¡æ¯LinuxæŸ¥çœ‹æ˜¾å¡ä¿¡æ¯ï¼š 1lspci | grep -i vga ä½¿ç”¨nvidia GPUå¯ä»¥ï¼š 1lspci | grep -i nvidia 2. å®‰è£…ç¯å¢ƒä¾èµ–1yum install kernel-devel gcc -y 3. æ£€æŸ¥å†…æ ¸ç‰ˆæœ¬å’Œæºç ç‰ˆæœ¬ï¼Œä¿è¯ä¸€è‡´12ls /boot | grep vmlinurpm -aq | grep kernel-devel 4. å±è”½ç³»ç»Ÿè‡ªå¸¦çš„nouveau123456789101112æŸ¥çœ‹å‘½ä»¤ï¼š lsmod | grep nouveauä¿®æ”¹dist-blacklist.confæ–‡ä»¶ï¼švim /lib/modprobe.d/dist-blacklist.confå°†nvidiafbæ³¨é‡Šæ‰:blacklist nvidiafbç„¶åæ·»åŠ ä»¥ä¸‹è¯­å¥ï¼šblacklist nouveauoptions nouveau modeset=0 å±è”½å‰ï¼š å±è”½åï¼š 5.é‡å»ºinitramfs imageæ­¥éª¤123mv /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r).img.bakdracut /boot/initramfs-$(uname -r).img $(uname -r) 6. ä¿®æ”¹è¿è¡Œçº§åˆ«ä¸ºæ–‡æœ¬æ¨¡å¼1systemctl set-default multi-user.target 7. é‡æ–°å¯åŠ¨1reboot 8. åœ¨NVIDIAå®˜ç½‘ä¸‹è½½é©±åŠ¨ç½‘å€ 9. å®‰è£…123chmod +x NVIDIA-Linux-x86_64-440.64.run./NVIDIA-Linux-x86_64-440.64.run æ³¨æ„ï¼š å¦‚æœæŠ¥é”™ï¼š unable to find the kernel source tree for the currently running kernelâ€¦â€¦â€¦ï¼Œä½¿ç”¨ä¸‹é¢å‘½ä»¤å®‰è£…ï¼Œ3.10.0-1160.92.1.el7.x86_64éœ€è¦æ”¹æˆè‡ªå·±çš„ç›®å½• 1NVIDIA-Linux-x86_64-535.86.05.run --kernel-source-path=/usr/src/kernels/3.10.0-1160.92.1.el7.x86_64 -k $(uname -r) 10. å®‰è£…æˆåŠŸ1nvidia-smi pytorchç¯å¢ƒé…ç½®é—®é¢˜é—®é¢˜ï¼š æˆ‘ä¹‹å‰å®‰è£…çš„pytorchæ˜¯1.2çš„ï¼Œé»˜è®¤å®‰è£…çš„cudaç‰ˆæœ¬å¤ªé«˜äº†ï¼Œåˆä¸å¥½é™ç‰ˆæœ¬ï¼Œå°ç™½æ— å¥ˆï¼Œå‡ ç»æŠ˜è…¾æ‰¾åˆ°äº†è§£å†³åŠæ³• pytorchå®˜ç½‘ä¸Šä¹Ÿæ²¡æœ‰æ”¯æŒåˆ°cuda12.2ï¼Œä½†æ˜¯ç¤¾åŒºæ˜ç¡®è¡¨æ˜äº†å…¼å®¹é«˜ç‰ˆæœ¬Cudaã€‚ è§£å†³é—®é¢˜ï¼š å¯ä»¥ç”¨torch.cuda.is_available()çš„æ–¹æ³•æ£€éªŒè‡ªå·±çš„torchæ˜¯ä¸æ˜¯GPUç‰ˆæœ¬ æ‰€ä»¥æˆ‘å†³å®šç›´æ¥å…¨éƒ¨å¸è½½ï¼Œé‡æ–°å®‰è£…GPUç‰ˆæœ¬çš„torchå…¨å®¶æ¡¶ 1pip uninstall torch torchvision torchaudio ç„¶åæ‰§è¡Œå®‰è£…è¿™æ˜¯æœ¬ç¯‡æ–‡ç« ç¼–å†™æ—¶æœ€æ–°ç‰ˆæœ¬çš„å®‰è£…æ–¹æ³• 1pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118 æ£€éªŒæ˜¯å¦å®‰è£…æˆåŠŸ å‚è€ƒå¥½æ–‡ç«  å‚è€ƒå¥½æ–‡ç«  å‚è€ƒæ–‡ç« ","categories":[{"name":"Linux","slug":"Linux","permalink":"http://breadwinners.top/categories/Linux/"}],"tags":[{"name":"Nvidia","slug":"Nvidia","permalink":"http://breadwinners.top/tags/Nvidia/"},{"name":"cuda","slug":"cuda","permalink":"http://breadwinners.top/tags/cuda/"},{"name":"cuda12.2","slug":"cuda12-2","permalink":"http://breadwinners.top/tags/cuda12-2/"}]},{"title":"centos7ç£ç›˜åˆ†åŒº","slug":"Linux/centos7ç£ç›˜åˆ†åŒº","date":"2023-07-19T16:00:00.000Z","updated":"2023-07-22T07:53:23.584Z","comments":true,"path":"2023/07/20/Linux/centos7ç£ç›˜åˆ†åŒº/","link":"","permalink":"http://breadwinners.top/2023/07/20/Linux/centos7%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA/","excerpt":"","text":"å‚è€ƒæ–‡ç« ","categories":[{"name":"Linux","slug":"Linux","permalink":"http://breadwinners.top/categories/Linux/"}],"tags":[{"name":"ç£ç›˜åˆ†åŒº","slug":"ç£ç›˜åˆ†åŒº","permalink":"http://breadwinners.top/tags/%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA/"},{"name":"lsbsk","slug":"lsbsk","permalink":"http://breadwinners.top/tags/lsbsk/"}]},{"title":"æ¢¯åº¦ä¸‹é™","slug":"pytorch/deeplearingå­¦ä¹ æ€»ç»“1","date":"2023-07-19T16:00:00.000Z","updated":"2023-07-23T04:42:20.890Z","comments":true,"path":"2023/07/20/pytorch/deeplearingå­¦ä¹ æ€»ç»“1/","link":"","permalink":"http://breadwinners.top/2023/07/20/pytorch/deeplearing%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%931/","excerpt":"","text":"æ¢¯åº¦ä¸‹é™ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849import matplotlib.pyplot as plt# prepare the training setx_data = [1.0, 2.0, 3.0]y_data = [2.0, 4.0, 6.0]# initial guess of weightw = 1.0# define the model linear model y = w*xdef forward(x): return x * w# define the cost function MSEdef cost(xs, ys): cost = 0 for x, y in zip(xs, ys): y_pred = forward(x) cost += (y_pred - y) ** 2 return cost / len(xs)# define the gradient function gddef gradient(xs, ys): grad = 0 for x, y in zip(xs, ys): grad += 2 * x * (x * w - y) return grad / len(xs)epoch_list = []cost_list = []print(&#x27;predict (before training)&#x27;, 4, forward(4))for epoch in range(100): cost_val = cost(x_data, y_data) grad_val = gradient(x_data, y_data) w -= 0.01 * grad_val # 0.01 learning rate print(&#x27;epoch:&#x27;, epoch, &#x27;w=&#x27;, w, &#x27;loss=&#x27;, cost_val) epoch_list.append(epoch) cost_list.append(cost_val) # è®°å½•å‡æ–¹æ ¹è¯¯å·®print(&#x27;predict (after training)&#x27;, 4, forward(4))plt.plot(epoch_list, cost_list)plt.ylabel(&#x27;cost&#x27;)plt.xlabel(&#x27;epoch&#x27;)plt.show() éšæœºæ¢¯åº¦ä¸‹é™ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142import matplotlib.pyplot as pltx_data = [1.0, 2.0, 3.0]y_data = [2.0, 4.0, 6.0]w = 1.0def forward(x): return x * w# calculate loss functiondef loss(x, y): y_pred = forward(x) return (y_pred - y) ** 2# define the gradient function sgddef gradient(x, y): return 2 * x * (x * w - y)epoch_list = []loss_list = []print(&#x27;predict (before training)&#x27;, 4, forward(4))for epoch in range(100): for x, y in zip(x_data, y_data): grad = gradient(x, y) w = w - 0.01 * grad # update weight by every grad of sample of training set print(&quot;\\tgrad:&quot;, x, y, grad) l = loss(x, y) print(&quot;progress:&quot;, epoch, &quot;w=&quot;, w, &quot;loss=&quot;, l) epoch_list.append(epoch) loss_list.append(l)print(&#x27;predict (after training)&#x27;, 4, forward(4))plt.plot(epoch_list, loss_list)plt.ylabel(&#x27;loss&#x27;)plt.xlabel(&#x27;epoch&#x27;)plt.show() åŒºåˆ«ï¼š1ã€æ¢¯åº¦ä¸‹é™ç®—æ³•ç§çš„costæ˜¯è®¡ç®—æ‰€æœ‰è®­ç»ƒæ•°æ®çš„æŸå¤±ï¼Œéšæœºæ¢¯åº¦ä¸‹é™ç§çš„lossæ˜¯è®¡ç®—ä¸€ä¸ªè®­ç»ƒæ•°æ®çš„æŸå¤±ã€‚ 2ã€æ¢¯åº¦å‡½æ•°gradient()ç”±è®¡ç®—æ‰€æœ‰è®­ç»ƒæ•°æ®çš„æ¢¯åº¦æ›´æ”¹ä¸ºè®¡ç®—ä¸€ä¸ªè®­ç»ƒæ•°æ®çš„æ¢¯åº¦ã€‚ 3ã€æœ¬ç®—æ³•ä¸­çš„éšæœºæ¢¯åº¦ä¸»è¦æ˜¯æŒ‡ï¼Œæ¯æ¬¡æ‹¿ä¸€ä¸ªè®­ç»ƒæ•°æ®æ¥è®­ç»ƒï¼Œç„¶åæ›´æ–°æ¢¯åº¦å‚æ•°ã€‚æœ¬ç®—æ³•ä¸­æ¢¯åº¦æ€»å…±æ›´æ–°100(epoch)x3 &#x3D; 300æ¬¡ã€‚æ¢¯åº¦ä¸‹é™æ³•ä¸­æ¢¯åº¦æ€»å…±æ›´æ–°100(epoch)æ¬¡ã€‚","categories":[{"name":"pytorch","slug":"pytorch","permalink":"http://breadwinners.top/categories/pytorch/"}],"tags":[{"name":"æ¢¯åº¦ä¸‹é™","slug":"æ¢¯åº¦ä¸‹é™","permalink":"http://breadwinners.top/tags/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D/"},{"name":"éšæœºæ¢¯åº¦ä¸‹é™","slug":"éšæœºæ¢¯åº¦ä¸‹é™","permalink":"http://breadwinners.top/tags/%E9%9A%8F%E6%9C%BA%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D/"}]},{"title":"pytorchLogisticå›å½’","slug":"pytorch/pytorchLogisticå›å½’","date":"2023-07-19T16:00:00.000Z","updated":"2023-07-23T05:24:45.271Z","comments":true,"path":"2023/07/20/pytorch/pytorchLogisticå›å½’/","link":"","permalink":"http://breadwinners.top/2023/07/20/pytorch/pytorchLogistic%E5%9B%9E%E5%BD%92/","excerpt":"","text":"æŸå¤±å‡½æ•°ï¼š è§†é¢‘ä¸­ä»£ç F.sigmoid(self.linear(x))ä¼šå¼•å‘warningï¼Œæ­¤å¤„æ›´æ”¹ä¸ºtorch.sigmoid(self.linear(x)) torch.sigmoid() ä¸ torch.nn.Sigmoid() å¯¹æ¯” BCELoss æ˜¯CrossEntropyLossçš„ä¸€ä¸ªç‰¹ä¾‹ï¼Œåªç”¨äºäºŒåˆ†ç±»é—®é¢˜ï¼Œè€ŒCrossEntropyLosså¯ä»¥ç”¨äºäºŒåˆ†ç±»ï¼Œä¹Ÿå¯ä»¥ç”¨äºå¤šåˆ†ç±»ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243import torch# import torch.nn.functional as F# prepare datasetx_data = torch.Tensor([[1.0], [2.0], [3.0]])y_data = torch.Tensor([[0], [0], [1]])class LogisticRegressionModel(torch.nn.Module): def __init__(self): super(LogisticRegressionModel, self).__init__() self.linear = torch.nn.Linear(1, 1) def forward(self, x): # y_pred = F.sigmoid(self.linear(x)) y_pred = torch.sigmoid(self.linear(x)) return y_predmodel = LogisticRegressionModel()# é»˜è®¤æƒ…å†µä¸‹ï¼Œlossä¼šåŸºäºelementå¹³å‡ï¼Œå¦‚æœsize_average=Falseçš„è¯ï¼Œlossä¼šè¢«ç´¯åŠ ã€‚criterion = torch.nn.BCELoss(size_average=False)optimizer = torch.optim.SGD(model.parameters(), lr=0.01)# training cycle forward, backward, updatefor epoch in range(1000): y_pred = model(x_data) loss = criterion(y_pred, y_data) # print(epoch, loss.item()) optimizer.zero_grad() loss.backward() optimizer.step()print(&#x27;w = &#x27;, model.linear.weight.item())print(&#x27;b = &#x27;, model.linear.bias.item())x_test = torch.Tensor([[4.0]])y_test = model(x_test)print(&#x27;y_pred = &#x27;, y_test.data)","categories":[{"name":"pytorch","slug":"pytorch","permalink":"http://breadwinners.top/categories/pytorch/"}],"tags":[]},{"title":"pytorchTitanicå­˜æ´»ç‡é¢„æµ‹","slug":"pytorch/pytorchTitanicå­˜æ´»ç‡é¢„æµ‹","date":"2023-07-19T16:00:00.000Z","updated":"2023-07-23T08:15:23.493Z","comments":true,"path":"2023/07/20/pytorch/pytorchTitanicå­˜æ´»ç‡é¢„æµ‹/","link":"","permalink":"http://breadwinners.top/2023/07/20/pytorch/pytorchTitanic%E5%AD%98%E6%B4%BB%E7%8E%87%E9%A2%84%E6%B5%8B/","excerpt":"","text":"ä½¿ç”¨pandasé€‰å–äº†æ•°æ®é›†ä¸­çš„å‡ ä¸ªç‰¹å¾ï¼Œæ¥è®­ç»ƒæ¨¡å‹ï¼Œtestæ•°æ®é›†ä¸­æ²¡æœ‰survivedçš„é¢„æµ‹å€¼ç”±äºself.y_data = torch.from_numpy(np.array(self.dev_data[&quot;Survived&quot;]).astype(np.float32))è¿™ç§æ–¹å¼è¯»å–å‡ºæ¥çš„æ•°æ®æ˜¯ä¸€ç»´çš„ï¼Œæ‰€ä»¥åœ¨é¢„æµ‹å€¼y_predçš„å‡ºæ¥åï¼Œéœ€è¦è¿›è¡Œé™ç»´å¤„ç†ï¼Œæ‰èƒ½è®¡ç®—æŸå¤± 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126import torchimport pandas as pdimport numpy as npfrom torch.utils.data import Datasetfrom torch.utils.data import DataLoaderbatch_size = 32class TitanicDatasets(Dataset): def __init__(self, filepath): data = pd.read_csv(filepath, encoding=&#x27;big5&#x27;) features = [&quot;Pclass&quot;, &quot;Sex&quot;, &quot;SibSp&quot;, &quot;Parch&quot;, &quot;Fare&quot;] self.data_len = data.shape[0] self.train_data = data[:int(self.data_len * 0.8)] &quot;&quot;&quot; è¿™é‡Œçš„featuresåŒ…æ‹¬&quot;Pclass&quot;,&quot;Sex&quot;,&quot;SibSp&quot;,&quot;Parch&quot;,&quot;Fare&quot;ã€‚ å…¶ä¸­&quot;Sex&quot;ç‰¹å¾æœ‰ä¸¤ä¸ªç±»åˆ«â€œç”·â€å’Œâ€œå¥³â€,å¦‚æœç›´æ¥è¾“å…¥åˆ†ç±»æ¨¡å‹,éœ€è¦å…ˆè½¬åŒ–ä¸ºæ•°å€¼ç‰¹å¾ã€‚ pd.get_dummieså¯ä»¥è‡ªåŠ¨å°†&quot;Sex&quot;åˆ—è½¬åŒ–ä¸ºä¸¤åˆ—&quot;Sex_male&quot;å’Œ&quot;Sex_female&quot;,ç”¨äºè¡¨ç¤ºè¯¥æ ·æœ¬çš„æ€§åˆ«ã€‚ åŒæ—¶,è¯¥è¯­å¥ä¹Ÿä¼šå°†å…¶ä»–æ•°å€¼ç‰¹å¾ç›´æ¥è½¬åŒ–ä¸ºæ•°å€¼tensorã€‚ æ‰€ä»¥,æ€»ä½“ä¸Špd.get_dummiesçš„ä½œç”¨æ˜¯: å°†åˆ†ç±»ç‰¹å¾å¦‚â€œSexâ€è½¬åŒ–ä¸ºonehotç¼–ç ,ä¾¿äºæ¨¡å‹å¤„ç† ç›´æ¥è¿”å›æ•°å€¼ç‰¹å¾çš„æ•°å€¼tensor å°†æ‰€æœ‰ç‰¹å¾è½¬åŒ–ä¸ºç¬¦åˆæ¨¡å‹è¾“å…¥è¦æ±‚çš„tensoræ ¼å¼ è¿™æ ·,å°±å¯ä»¥ç›´æ¥å°†å¤„ç†çš„ç‰¹å¾tensorè¾“å…¥åˆ°ç¥ç»ç½‘ç»œæ¨¡å‹ä¸­è¿›è¡Œè®­ç»ƒã€‚&quot;&quot;&quot; self.x_data = torch.from_numpy(np.array(pd.get_dummies(self.train_data[features]).astype(np.float32))) self.y_data = torch.from_numpy(np.array(self.train_data[&quot;Survived&quot;]).astype(np.float32)) self.train_len = self.train_data.shape[0] def __getitem__(self, item): return self.x_data[item], self.y_data[item] def __len__(self): return self.train_lenclass Dev_Titanic(Dataset): def __init__(self, filepath): data = pd.read_csv(filepath, encoding=&#x27;big5&#x27;) features = [&quot;Pclass&quot;, &quot;Sex&quot;, &quot;SibSp&quot;, &quot;Parch&quot;, &quot;Fare&quot;] self.data_len = data.shape[0] self.dev_data = data[int(self.data_len * 0.8):] # éªŒè¯é›†å 20% self.x_data = torch.from_numpy(np.array(pd.get_dummies(self.dev_data[features])).astype(np.float32)) self.y_data = torch.from_numpy(np.array(self.dev_data[&quot;Survived&quot;]).astype(np.float32)) self.dev_len = self.dev_data.shape[0] def __getitem__(self, index): return self.x_data[index], self.y_data[index] def __len__(self): return self.dev_lentitanic = TitanicDatasets(&#x27;titanic/train.csv&#x27;)dev_dataset = Dev_Titanic(&quot;titanic/train.csv&quot;)titanicLoader = DataLoader(dataset=titanic, batch_size=batch_size, shuffle=True, num_workers=2)dev_loader = DataLoader(dataset=dev_dataset, batch_size=batch_size, shuffle=False, num_workers=2)class TitanicModel(torch.nn.Module): def __init__(self): super(TitanicModel, self).__init__() self.l1 = torch.nn.Linear(6, 16) self.l2 = torch.nn.Linear(16, 12) self.l3 = torch.nn.Linear(12, 8) self.l4 = torch.nn.Linear(8, 1) self.criterion = torch.nn.Sigmoid() def forward(self, x): x = self.criterion(self.l1(x)) x = self.criterion(self.l2(x)) x = self.criterion(self.l3(x)) x = self.criterion(self.l4(x)) return xmodel = TitanicModel()criterion = torch.nn.BCELoss(reduction=&#x27;mean&#x27;)optimizer = torch.optim.Adam(model.parameters(), lr=0.01)if __name__ == &quot;__main__&quot;: for epoch in range(40): running_loss = 0.0 for i, data in enumerate(titanicLoader, 1): inputs, target = data y_pred = model(inputs) y_pred = y_pred.squeeze(-1) loss = criterion(y_pred, target) running_loss += loss.item() optimizer.zero_grad() loss.backward() optimizer.step() with torch.no_grad(): correct = 0 total = 0 for batch_idx, data in enumerate(dev_loader, 1): inputs, target = data y_pred = model(inputs) y_pred = y_pred.squeeze(-1) # é™ç»´ loss = criterion(y_pred, target) correct += (np.round(y_pred) == target).sum().item() total += target.size(0) print(&#x27;æµ‹è¯•é›†å‡†ç¡®ç‡: %d %%&#x27; % (100 * correct / total)) test_data = pd.read_csv(&quot;titanic/test.csv&quot;) features = [&quot;Pclass&quot;, &quot;Sex&quot;, &quot;SibSp&quot;, &quot;Parch&quot;, &quot;Fare&quot;] test = torch.from_numpy(np.array(pd.get_dummies(test_data[features])).astype(np.float32)) with torch.no_grad(): y_pred = model(test) y_pred = y_pred.squeeze(-1) y = y_pred.round().int().tolist() # Tensorå¾ˆå¤šç§å››èˆäº”å…¥è½¬intçš„æ–¹å¼ï¼Œä½†æ˜¯æˆ‘åªæ‰¾åˆ°è¿™ç§æ–¹å¼èƒ½å¤Ÿå®ç°ä¸”åœ¨kaggleä¸Šèƒ½é€šè¿‡ # print(y) # y = [] # for i in y_pred: # # w = int(torch.round(i)) # # print(w) # y.append(np.round(i)) # y.append(int(torch.round(i))) output = pd.DataFrame(&#123;&quot;PassengerId&quot;: test_data.PassengerId, &quot;Survived&quot;: y&#125;) output.to_csv(&quot;predicted.csv&quot;, index=False)","categories":[{"name":"pytorch","slug":"pytorch","permalink":"http://breadwinners.top/categories/pytorch/"}],"tags":[{"name":"titanic","slug":"titanic","permalink":"http://breadwinners.top/tags/titanic/"}]},{"title":"pytorchå¤„ç†å¤šç»´ç‰¹å¾","slug":"pytorch/potorchå¤„ç†å¤šç»´ç‰¹å¾è¾“å…¥","date":"2023-07-19T16:00:00.000Z","updated":"2023-07-23T07:44:59.038Z","comments":true,"path":"2023/07/20/pytorch/potorchå¤„ç†å¤šç»´ç‰¹å¾è¾“å…¥/","link":"","permalink":"http://breadwinners.top/2023/07/20/pytorch/potorch%E5%A4%84%E7%90%86%E5%A4%9A%E7%BB%B4%E7%89%B9%E5%BE%81%E8%BE%93%E5%85%A5/","excerpt":"","text":"è¯´æ˜ï¼š1ã€ä¹˜çš„æƒé‡(w)éƒ½ä¸€æ ·ï¼ŒåŠ çš„åç½®(b)ä¹Ÿä¸€æ ·ã€‚bå˜æˆçŸ©é˜µæ—¶ä½¿ç”¨å¹¿æ’­æœºåˆ¶ã€‚ç¥ç»ç½‘ç»œçš„å‚æ•°wå’Œbæ˜¯ç½‘ç»œéœ€è¦å­¦ä¹ çš„ï¼Œå…¶ä»–æ˜¯å·²çŸ¥çš„ã€‚ 2ã€å­¦ä¹ èƒ½åŠ›è¶Šå¼ºï¼Œæœ‰å¯èƒ½ä¼šæŠŠè¾“å…¥æ ·æœ¬ä¸­å™ªå£°çš„è§„å¾‹ä¹Ÿå­¦åˆ°ã€‚æˆ‘ä»¬è¦å­¦ä¹ æ•°æ®æœ¬èº«çœŸå®æ•°æ®çš„è§„å¾‹ï¼Œå­¦ä¹ èƒ½åŠ›è¦æœ‰æ³›åŒ–èƒ½åŠ›ã€‚ 3ã€è¯¥ç¥ç»ç½‘ç»œå…±3å±‚ï¼›ç¬¬ä¸€å±‚æ˜¯8ç»´åˆ°6ç»´çš„éçº¿æ€§ç©ºé—´å˜æ¢ï¼Œç¬¬äºŒå±‚æ˜¯6ç»´åˆ°4ç»´çš„éçº¿æ€§ç©ºé—´å˜æ¢ï¼Œç¬¬ä¸‰å±‚æ˜¯4ç»´åˆ°1ç»´çš„éçº¿æ€§ç©ºé—´å˜æ¢ã€‚ 4ã€æœ¬ç®—æ³•ä¸­torch.nn.Sigmoid() # å°†å…¶çœ‹ä½œæ˜¯ç½‘ç»œçš„ä¸€å±‚ï¼Œè€Œä¸æ˜¯ç®€å•çš„å‡½æ•°ä½¿ç”¨ 5ã€torch.sigmoidã€torch.nn.Sigmoidå’Œtorch.nn.functional.sigmoidçš„åŒºåˆ« 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081&quot;&quot;&quot;å¤„ç†å¤šç»´ç‰¹å¾çš„è¾“å…¥ ä»¥ç³–å°¿ç—…æµ‹è¯•æ•°æ®ä¸ºä¾‹å­&quot;&quot;&quot;import numpy as npimport torchimport matplotlib.pyplot as plt# prepare datasetxy = np.loadtxt(&#x27;diabetes.csv&#x27;, delimiter=&#x27;,&#x27;, dtype=np.float32)x_data = torch.from_numpy(xy[:, :-1]) # ç¬¬ä¸€ä¸ªâ€˜ï¼šâ€™æ˜¯æŒ‡è¯»å–æ‰€æœ‰è¡Œï¼Œç¬¬äºŒä¸ªâ€˜ï¼šâ€™æ˜¯æŒ‡ä»ç¬¬ä¸€åˆ—å¼€å§‹ï¼Œæœ€åä¸€åˆ—ä¸è¦y_data = torch.from_numpy(xy[:, [-1]]) # [-1] æœ€åå¾—åˆ°çš„æ˜¯ä¸ªçŸ©é˜µ# design model using classclass Model(torch.nn.Module): def __init__(self): super(Model, self).__init__() self.linear1 = torch.nn.Linear(8, 32) # è¾“å…¥æ•°æ®xçš„ç‰¹å¾æ˜¯8ç»´ï¼Œxæœ‰8ä¸ªç‰¹å¾ self.linear2 = torch.nn.Linear(32, 8) self.linear3 = torch.nn.Linear(8, 4) self.linear4 = torch.nn.Linear(4, 1) self.sigmoid = torch.nn.Sigmoid() # å°†å…¶çœ‹ä½œæ˜¯ç½‘ç»œçš„ä¸€å±‚ï¼Œè€Œä¸æ˜¯ç®€å•çš„å‡½æ•°ä½¿ç”¨ &quot;&quot;&quot;&quot;å»ºç«‹ä¸‰å±‚ç½‘ç»œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨torc.nn.Lineralï¼ˆ8ï¼Œ1ï¼‰çš„åŸå› æ˜¯å¼•å…¥éçº¿æ€§å¹¶å¢åŠ æ¨¡å‹å­¦ä¹ æ•°æ®ä¸­å¤ æ‚æ¨¡å¼çš„èƒ½åŠ›ã€‚å•ä¸ªçº¿æ€§å±‚å°†åªèƒ½å­¦ä¹ è¾“å…¥ç‰¹å¾å’Œè¾“å‡ºä¹‹é—´çš„çº¿æ€§å…³ç³»ã€‚é€šè¿‡æ·»åŠ å…·æœ‰éçº¿æ€§æ¿€æ´»å‡½æ•°çš„å¤š å±‚ï¼Œè¯¥æ¨¡å‹å¯ä»¥å­¦ä¹ æ›´å¤æ‚çš„å…³ç³»ï¼Œå¹¶æ•æ‰æ•°æ®ä¸­æ›´é«˜çº§åˆ«çš„ç‰¹å¾ã€‚ ç»™ç¥ç»ç½‘ç»œæ·»åŠ æ›´å¤šçš„å±‚å¯ä»¥è®©å®ƒå­¦ä¹ æ•°æ®ä¸­æ›´é«˜å±‚æ¬¡çš„ç‰¹å¾ã€‚ç¥ç»ç½‘ç»œä¸­çš„æ¯ä¸€å±‚éƒ½å­¦ä¹ ä¸åŒçº§åˆ«çš„æŠ½è±¡ã€‚ é€šè¿‡å †å å¤šå±‚ï¼Œç½‘ç»œå¯ä»¥å­¦ä¹ æ•°æ®ä¸­è¶Šæ¥è¶Šå¤æ‚çš„æ¨¡å¼å’Œå…³ç³»ã€‚è¿™æ˜¯å› ä¸ºæ¯ä¸€å±‚éƒ½å¯ä»¥æ•è·å’Œè¡¨ç¤ºè¾“å…¥æ•° æ®çš„ä¸åŒæ–¹é¢ã€‚å› æ­¤ï¼Œç½‘ç»œå˜å¾—æ›´æœ‰èƒ½åŠ›å­¦ä¹ å’Œè¡¨ç¤ºæ›´é«˜å±‚æ¬¡çš„ç‰¹å¾ï¼Œè¿™å¯ä»¥åœ¨åˆ†ç±»æˆ–å›å½’ç­‰ä»»åŠ¡ä¸­å¸¦æ¥æ›´ å¥½çš„æ€§èƒ½å’Œå‡†ç¡®æ€§ã€‚&quot;&quot;&quot; # ä½†æ˜¯ä¸ºä»€ä¹ˆèƒ½å‘¢ï¼Œæˆ‘åªçŸ¥é“è¿™æ ·å†™äº†ä¹‹åä»–ç¡®å®èƒ½äº†ï¼Œç¡®å®æ¯”8-&gt;1çš„å­¦ä¹ æ•ˆç‡è¦æ›´å¥½ def forward(self, x): x = self.sigmoid(self.linear1(x)) x = self.sigmoid(self.linear2(x)) x = self.sigmoid(self.linear3(x)) # y hat x = self.sigmoid(self.linear4(x)) return xmodel = Model()# construct loss and optimizer# criterion = torch.nn.BCELoss(size_average = True)criterion = torch.nn.BCELoss(reduction=&#x27;sum&#x27;)optimizer = torch.optim.Adam(model.parameters(), lr=0.1)epoch_list = []loss_list = []# training cycle forward, backward, update# t = Truefor epoch in range(100): y_pred = model(x_data) # if t: # æŸ¥çœ‹æ¨¡å‹çš„è¾“å‡ºå€¼ # print(y_pred) # break loss = criterion(y_pred, y_data) # print(epoch, loss.item()) epoch_list.append(epoch) loss_list.append(loss.item()) optimizer.zero_grad() loss.backward() optimizer.step()plt.plot(epoch_list, loss_list)plt.ylabel(&#x27;loss&#x27;)plt.xlabel(&#x27;epoch&#x27;)plt.show()# x_test = torch.Tensor([-0.294118, 0.487437, 0.180328, -0.292929, 0, 0.00149028, -0.53117, -0.0333333])# x_test = torch.Tensor([-0.882353, -0.145729, 0.0819672, -0.414141, 0, -0.207153, -0.766866, -0.666667])x_test = torch.from_numpy(xy[0, :-1]) # æµ‹è¯•æ•°æ®è®°å¾—ä¸€å®šè¦ç”¨tensorï¼Œå¦åˆ™ä¼šæŠ¥é”™x_test1 = torch.from_numpy(xy[1, :-1])y_test = model(x_test)y_test1 = model(x_test1)print(f&quot;x_test = &#123;x_test&#125;&quot;)print(f&quot;x_test1 = &#123;x_test1&#125;&quot;)print(f&quot;y = &#123;y_test.data&#125;&quot;)print(f&quot;y = &#123;y_test1.data&#125;&quot;)","categories":[{"name":"pytorch","slug":"pytorch","permalink":"http://breadwinners.top/categories/pytorch/"}],"tags":[{"name":"å¤šç»´åº¦ç‰¹å¾","slug":"å¤šç»´åº¦ç‰¹å¾","permalink":"http://breadwinners.top/tags/%E5%A4%9A%E7%BB%B4%E5%BA%A6%E7%89%B9%E5%BE%81/"}]},{"title":"pytorchå¤šåˆ†ç±»é—®é¢˜","slug":"pytorch/pytorchå¤šåˆ†ç±»é—®é¢˜","date":"2023-07-19T16:00:00.000Z","updated":"2023-07-23T07:48:26.297Z","comments":true,"path":"2023/07/20/pytorch/pytorchå¤šåˆ†ç±»é—®é¢˜/","link":"","permalink":"http://breadwinners.top/2023/07/20/pytorch/pytorch%E5%A4%9A%E5%88%86%E7%B1%BB%E9%97%AE%E9%A2%98/","excerpt":"","text":"è¯´æ˜ï¼š 1ã€softmaxçš„è¾“å…¥ä¸éœ€è¦å†åšéçº¿æ€§å˜æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´softmaxä¹‹å‰ä¸å†éœ€è¦æ¿€æ´»å‡½æ•°(relu)ã€‚softmaxä¸¤ä¸ªä½œç”¨ï¼Œå¦‚æœåœ¨è¿›è¡Œsoftmaxå‰çš„inputæœ‰è´Ÿæ•°ï¼Œé€šè¿‡æŒ‡æ•°å˜æ¢ï¼Œå¾—åˆ°æ­£æ•°ã€‚æ‰€æœ‰ç±»çš„æ¦‚ç‡æ±‚å’Œä¸º1ã€‚ â€‹ 2ã€yçš„æ ‡ç­¾ç¼–ç æ–¹å¼æ˜¯one-hotã€‚æˆ‘å¯¹one-hotçš„ç†è§£æ˜¯åªæœ‰ä¸€ä½æ˜¯1ï¼Œå…¶ä»–ä½ä¸º0ã€‚(ä½†æ˜¯æ ‡ç­¾çš„one-hotç¼–ç æ˜¯ç®—æ³•å®Œæˆçš„ï¼Œç®—æ³•çš„è¾“å…¥ä»ä¸ºåŸå§‹æ ‡ç­¾) â€‹ 3ã€å¤šåˆ†ç±»é—®é¢˜ï¼Œæ ‡ç­¾yçš„ç±»å‹æ˜¯LongTensorã€‚æ¯”å¦‚è¯´0-9åˆ†ç±»é—®é¢˜ï¼Œå¦‚æœy &#x3D; torch.LongTensor([3])ï¼Œå¯¹åº”çš„one-hotæ˜¯[0,0,0,1,0,0,0,0,0,0].(è¿™é‡Œè¦æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨äº†one-hotï¼Œæ ‡ç­¾yçš„ç±»å‹æ˜¯LongTensorï¼Œç³–å°¿ç—…æ•°æ®é›†ä¸­çš„targetçš„ç±»å‹æ˜¯FloatTensor) â€‹ 4ã€CrossEntropyLoss &lt;&#x3D;&#x3D;&gt; LogSoftmax + NLLLossã€‚ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨CrossEntropyLossæœ€åä¸€å±‚(çº¿æ€§å±‚)æ˜¯ä¸éœ€è¦åšå…¶ä»–å˜åŒ–çš„ï¼›ä½¿ç”¨NLLLossä¹‹å‰ï¼Œéœ€è¦å¯¹æœ€åä¸€å±‚(çº¿æ€§å±‚)å…ˆè¿›è¡ŒSoftMaxå¤„ç†ï¼Œå†è¿›è¡Œlogæ“ä½œã€‚ ä»£ç è¯´æ˜ï¼š1ã€ç¬¬8è®² from torch.utils.data import Datasetï¼Œç¬¬9è®² from torchvision import datasetsã€‚è¯¥datasetsé‡Œé¢initï¼Œgetitem,lené­”æ³•å‡½æ•°å·²å®ç°ã€‚ â€‹ 2ã€torch.maxçš„è¿”å›å€¼æœ‰ä¸¤ä¸ªï¼Œç¬¬ä¸€ä¸ªæ˜¯æ¯ä¸€è¡Œçš„æœ€å¤§å€¼æ˜¯å¤šå°‘ï¼Œç¬¬äºŒä¸ªæ˜¯æ¯ä¸€è¡Œæœ€å¤§å€¼çš„ä¸‹æ ‡(ç´¢å¼•)æ˜¯å¤šå°‘ã€‚ â€‹ 3ã€å…¨è¿æ¥ç¥ç»ç½‘ç»œ â€‹ 4ã€torch.no_grad() Pythonä¸­withçš„ç”¨æ³• â€‹ 5ã€ä»£ç ä¸­â€_â€çš„è¯´æ˜ Pythonä¸­å„ç§ä¸‹åˆ’çº¿çš„æ“ä½œ â€‹ 6ã€torch.max( )çš„ç”¨æ³• torch.max( )ä½¿ç”¨è®²è§£ 1 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192import torchfrom torchvision import transformsfrom torchvision import datasetsfrom torch.utils.data import DataLoaderimport torch.nn.functional as Fimport torch.optim as optim# prepare datasetbatch_size = 64transform = transforms.Compose([transforms.ToTensor(), transforms.Normalize((0.1307,), (0.3081,))]) # å½’ä¸€åŒ–,å‡å€¼å’Œæ–¹å·®train_dataset = datasets.MNIST(root=&#x27;../dataset/mnist/&#x27;, train=True, download=True, transform=transform)train_loader = DataLoader(train_dataset, shuffle=True, batch_size=batch_size)test_dataset = datasets.MNIST(root=&#x27;../dataset/mnist/&#x27;, train=False, download=True, transform=transform)test_loader = DataLoader(test_dataset, shuffle=False, batch_size=batch_size)# design model using classclass Net(torch.nn.Module): def __init__(self): super(Net, self).__init__() self.l1 = torch.nn.Linear(784, 512) self.l2 = torch.nn.Linear(512, 256) self.l3 = torch.nn.Linear(256, 128) self.l4 = torch.nn.Linear(128, 64) self.l5 = torch.nn.Linear(64, 10) def forward(self, x): x = x.view(-1, 784) # -1å…¶å®å°±æ˜¯è‡ªåŠ¨è·å–mini_batch x = F.relu(self.l1(x)) x = F.relu(self.l2(x)) x = F.relu(self.l3(x)) x = F.relu(self.l4(x)) return self.l5(x) # æœ€åä¸€å±‚ä¸åšæ¿€æ´»ï¼Œä¸è¿›è¡Œéçº¿æ€§å˜æ¢model = Net()# construct loss and optimizercriterion = torch.nn.CrossEntropyLoss()optimizer = optim.SGD(model.parameters(), lr=0.01, momentum=0.5)# training cycle forward, backward, updatedef train(epoch): running_loss = 0.0 for batch_idx, data in enumerate(train_loader, 0): # è·å¾—ä¸€ä¸ªæ‰¹æ¬¡çš„æ•°æ®å’Œæ ‡ç­¾ inputs, target = data optimizer.zero_grad() # è·å¾—æ¨¡å‹é¢„æµ‹ç»“æœ(64, 10) outputs = model(inputs) # äº¤å‰ç†µä»£ä»·å‡½æ•°outputs(64,10),targetï¼ˆ64ï¼‰ loss = criterion(outputs, target) loss.backward() optimizer.step() running_loss += loss.item() if batch_idx % 300 == 299: print(&#x27;[%d, %5d] loss: %.3f&#x27; % (epoch + 1, batch_idx + 1, running_loss / 300)) running_loss = 0.0def te1st(): correct = 0 total = 0 flag = True with torch.no_grad(): for data in test_loader: images, labels = data outputs = model(images) if flag: print(type(outputs)) print(outputs) flag = False # dim = 1 åˆ—æ˜¯ç¬¬0ä¸ªç»´åº¦ï¼Œè¡Œæ˜¯ç¬¬1ä¸ªç»´åº¦ è¿”å›çš„ç»“æœå€¼ï¼Œä¸€ä¸ªæ˜¯ä¸‹æ ‡ï¼Œä¸€ä¸ªæ˜¯å€¼ åŒæ—¶ä»–è¾“å‡ºçš„æ˜¯ä¸€ä¸ªbatchçš„é¢„æµ‹å€¼ï¼Œæ¯ä¸ªå•å…ƒçš„æ¦‚ç‡ä¸ºä¸€ä¸ªä¸€è¡Œï¼Œä¸€è¡Œæœ‰10åˆ—ï¼Œéœ€è¦åœ¨è¿™10åˆ—ä¸­æ‰¾å‡ºæœ€å¤§å¯èƒ½çš„é‚£ä¸ª _, predicted = torch.max(outputs.data, dim=1) total += labels.size(0) # ä¸ºä»€ä¹ˆä¸ç”¨size[0] correct += (predicted == labels).sum().item() # å¼ é‡ä¹‹é—´çš„æ¯”è¾ƒè¿ç®— print(&#x27;accuracy on test set: %d %% &#x27; % (100 * correct / total))if __name__ == &#x27;__main__&#x27;: for epoch in range(10): train(epoch) te1st() å‚è€ƒæ–‡ç« ","categories":[{"name":"pytorch","slug":"pytorch","permalink":"http://breadwinners.top/categories/pytorch/"}],"tags":[{"name":"å¤šåˆ†ç±»","slug":"å¤šåˆ†ç±»","permalink":"http://breadwinners.top/tags/%E5%A4%9A%E5%88%86%E7%B1%BB/"},{"name":"softmax","slug":"softmax","permalink":"http://breadwinners.top/tags/softmax/"},{"name":"ontHot","slug":"ontHot","permalink":"http://breadwinners.top/tags/ontHot/"}]},{"title":"pytorchå®ç°çº¿æ€§å›å½’","slug":"pytorch/pytorchå®ç°çº¿æ€§å›å½’","date":"2023-07-19T16:00:00.000Z","updated":"2023-07-23T05:16:11.052Z","comments":true,"path":"2023/07/20/pytorch/pytorchå®ç°çº¿æ€§å›å½’/","link":"","permalink":"http://breadwinners.top/2023/07/20/pytorch/pytorch%E5%AE%9E%E7%8E%B0%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/","excerpt":"","text":"pytorchæ„å»ºé£æ ¼ï¼š ä»£ç è¯´æ˜ï¼š 1ã€Moduleå®ç°äº†é­”æ³•å‡½æ•°__call__()ï¼Œcall()é‡Œé¢æœ‰ä¸€æ¡è¯­å¥æ˜¯è¦è°ƒç”¨forward()ã€‚å› æ­¤æ–°å†™çš„ç±»ä¸­éœ€è¦é‡å†™forward()è¦†ç›–æ‰çˆ¶ç±»ä¸­çš„forward() 2ã€callå‡½æ•°çš„å¦ä¸€ä¸ªä½œç”¨æ˜¯å¯ä»¥ç›´æ¥åœ¨å¯¹è±¡åé¢åŠ ()ï¼Œä¾‹å¦‚å®ä¾‹åŒ–çš„modelå¯¹è±¡ï¼Œå’Œå®ä¾‹åŒ–çš„linearå¯¹è±¡ 3ã€æœ¬ç®—æ³•çš„forwardä½“ç°æ˜¯é€šè¿‡ä»¥ä¸‹è¯­å¥å®ç°çš„ï¼š 1y_pred = model(x_data) ç”±äºé­”æ³•å‡½æ•°callçš„å®ç°,model(x\\_data)å°†ä¼šè°ƒç”¨model.forward(x\\_data)å‡½æ•°ï¼Œmodel.forward(x\\_data)å‡½æ•°ä¸­çš„ 1y_pred = self.linear(x) self.linear(x)ä¹Ÿç”±äºé­”æ³•å‡½æ•°callçš„å®ç°å°†ä¼šè°ƒç”¨torch.nn.Linearç±»ä¸­çš„forwardï¼Œè‡³æ­¤å®Œæˆå°è£…ï¼Œä¹Ÿå°±æ˜¯è¯´forwardæœ€ç»ˆæ˜¯åœ¨torch.nn.Linearç±»ä¸­å®ç°çš„ï¼Œå…·ä½“æ€ä¹ˆå®ç°ï¼Œå¯ä»¥ä¸ç”¨å…³å¿ƒï¼Œå¤§æ¦‚å°±æ˜¯y= wx + bã€‚ pytorch ä¹‹ __call__, __init__,forward pytorchç³»åˆ—nn.Modlueä¸­callçš„è¿›ä¸€æ­¥è§£é‡Š æœ¬å®ä¾‹æ˜¯æ‰¹é‡æ•°æ®å¤„ç†ï¼Œå°ä¼™ä¼´ä»¬ä¸è¦è¢«optimizer = torch.optim.SGD(model.parameters(), lr = 0.01)è¯¯å¯¼äº†ï¼Œä»¥ä¸ºè§äº†SGDå°±æ˜¯éšæœºæ¢¯åº¦ä¸‹é™ã€‚è¦çœ‹ä¼ è¿›æ¥çš„æ•°æ®æ˜¯å•ä¸ªçš„è¿˜æ˜¯æ‰¹é‡çš„ã€‚è¿™é‡Œçš„x_dataæ˜¯3ä¸ªæ•°æ®ï¼Œæ˜¯ä¸€ä¸ªbatchï¼Œè°ƒç”¨çš„PyTorch APIæ˜¯ torch.optim.SGDï¼Œä½†è¿™é‡Œçš„SGDä¸æ˜¯éšæœºæ¢¯åº¦ä¸‹é™ï¼Œè€Œæ˜¯æ‰¹é‡æ¢¯åº¦ä¸‹é™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¢¯åº¦ä¸‹é™ç®—æ³•ä½¿ç”¨çš„æ˜¯éšæœºæ¢¯åº¦ä¸‹é™ï¼Œè¿˜æ˜¯æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼Œè¿˜æ˜¯mini-batchæ¢¯åº¦ä¸‹é™ï¼Œç”¨çš„APIéƒ½æ˜¯ torch.optim.SGDã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344import torch# prepare dataset# x,yæ˜¯çŸ©é˜µï¼Œ3è¡Œ1åˆ— ä¹Ÿå°±æ˜¯è¯´æ€»å…±æœ‰3ä¸ªæ•°æ®ï¼Œæ¯ä¸ªæ•°æ®åªæœ‰1ä¸ªç‰¹å¾x_data = torch.tensor([[1.0], [2.0], [3.0]])y_data = torch.tensor([[2.0], [4.0], [6.0]])class LinearModel(torch.nn.Module): def __init__(self): super(LinearModel, self).__init__() # (1,1)æ˜¯æŒ‡è¾“å…¥xå’Œè¾“å‡ºyçš„ç‰¹å¾ç»´åº¦ï¼Œè¿™é‡Œæ•°æ®é›†ä¸­çš„xå’Œyçš„ç‰¹å¾éƒ½æ˜¯1ç»´çš„ # è¯¥çº¿æ€§å±‚éœ€è¦å­¦ä¹ çš„å‚æ•°æ˜¯wå’Œb è·å–w/bçš„æ–¹å¼åˆ†åˆ«æ˜¯~linear.weight/linear.bias self.linear = torch.nn.Linear(1, 1) def forward(self, x): y_pred = self.linear(x) return y_predmodel = LinearModel()# construct loss and optimizercriterion = torch.nn.MSELoss(reduction=&#x27;sum&#x27;)optimizer = torch.optim.SGD(model.parameters(), lr=0.01) # model.parameters()æ›´æ–°éœ€è¦æ›´æ–°çš„å‚æ•°ï¼Œè¿™é‡Œçš„wå’Œbéƒ½éœ€è¦æ›´æ–°# training cycle forward, backward, updatefor epoch in range(100): y_pred = model(x_data) # forward:predict loss = criterion(y_pred, y_data) # forward: loss print(epoch, loss.item()) # Is it possible to set gradients to zero when calling loss.backward() in Pytorch? optimizer.zero_grad() # åå‘ä¼ æ’­ä¹‹å‰ï¼Œè¦è¿›è¡Œæ¢¯åº¦å½’é›¶ loss.backward() # backward: autogradï¼Œè‡ªåŠ¨è®¡ç®—æ¢¯åº¦ optimizer.step() # update å‚æ•°ï¼Œå³æ›´æ–°wå’Œbçš„å€¼print(&#x27;w = &#x27;, model.linear.weight.item())print(&#x27;b = &#x27;, model.linear.bias.item())x_test = torch.tensor([[4.0]])y_test = model(x_test)print(&#x27;y_pred = &#x27;, y_test.data)","categories":[{"name":"pytorch","slug":"pytorch","permalink":"http://breadwinners.top/categories/pytorch/"}],"tags":[{"name":"Linear","slug":"Linear","permalink":"http://breadwinners.top/tags/Linear/"}]},{"title":"pytorchåå‘ä¼ æ’­","slug":"pytorch/pytorchåå‘ä¼ æ’­","date":"2023-07-19T16:00:00.000Z","updated":"2023-07-23T05:06:10.194Z","comments":true,"path":"2023/07/20/pytorch/pytorchåå‘ä¼ æ’­/","link":"","permalink":"http://breadwinners.top/2023/07/20/pytorch/pytorch%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD/","excerpt":"","text":"åªæ›´æ–°å€¼è€Œä¸æ„å»ºè®¡ç®—å›¾ï¼Œä½¿ç”¨w.dataï¼Œå–å€¼ç”¨w.item() 1ã€wæ˜¯Tensor(å¼ é‡ç±»å‹)ï¼ŒTensorä¸­åŒ…å«dataå’Œgradï¼Œdataå’Œgradä¹Ÿæ˜¯Tensorã€‚gradåˆå§‹ä¸ºNoneï¼Œè°ƒç”¨l.backward()æ–¹æ³•åw.gradä¸ºTensorï¼Œæ•…æ›´æ–°w.dataæ—¶éœ€ä½¿ç”¨w.grad.dataã€‚å¦‚æœwéœ€è¦è®¡ç®—æ¢¯åº¦ï¼Œé‚£æ„å»ºçš„è®¡ç®—å›¾ä¸­ï¼Œè·Ÿwç›¸å…³çš„tensoréƒ½é»˜è®¤éœ€è¦è®¡ç®—æ¢¯åº¦ã€‚ 2ã€wæ˜¯Tensorï¼Œ forwardå‡½æ•°çš„è¿”å›å€¼ä¹Ÿæ˜¯Tensorï¼Œlosså‡½æ•°çš„è¿”å›å€¼ä¹Ÿæ˜¯Tensor 3ã€æœ¬ç®—æ³•ä¸­åå‘ä¼ æ’­ä¸»è¦ä½“ç°åœ¨ï¼Œl.backward()ã€‚è°ƒç”¨è¯¥æ–¹æ³•åw.gradç”±Noneæ›´æ–°ä¸ºTensorç±»å‹ï¼Œä¸”w.grad.dataçš„å€¼ç”¨äºåç»­w.dataçš„æ›´æ–°ã€‚ l.backward()ä¼šæŠŠè®¡ç®—å›¾ä¸­æ‰€æœ‰éœ€è¦æ¢¯åº¦(grad)çš„åœ°æ–¹éƒ½ä¼šæ±‚å‡ºæ¥ï¼Œç„¶åæŠŠæ¢¯åº¦éƒ½å­˜åœ¨å¯¹åº”çš„å¾…æ±‚çš„å‚æ•°ä¸­ï¼Œæœ€ç»ˆè®¡ç®—å›¾è¢«é‡Šæ”¾ã€‚å–tensorä¸­çš„dataæ˜¯ä¸ä¼šæ„å»ºè®¡ç®—å›¾çš„ã€‚ 123456789101112131415161718192021222324252627282930313233import torchx_data = [1.0, 2.0, 3.0]y_data = [2.0, 4.0, 6.0]w = torch.tensor([1.0]) # wçš„åˆå€¼ä¸º1.0w.requires_grad = True # éœ€è¦è®¡ç®—æ¢¯åº¦def forward(x): return x * w # wæ˜¯ä¸€ä¸ªTensordef loss(x, y): y_pred = forward(x) return (y_pred - y) ** 2print(&quot;predict (before training)&quot;, 4, forward(4).item())for epoch in range(100): for x, y in zip(x_data, y_data): l = loss(x, y) # læ˜¯ä¸€ä¸ªå¼ é‡ï¼Œtensorä¸»è¦æ˜¯åœ¨å»ºç«‹è®¡ç®—å›¾ forward, compute the loss l.backward() # backward,compute grad for Tensor whose requires_grad set to True print(&#x27;\\tgrad:&#x27;, x, y, w.grad.item()) w.data = w.data - 0.01 * w.grad.data # æƒé‡æ›´æ–°æ—¶ï¼Œæ³¨æ„gradä¹Ÿæ˜¯ä¸€ä¸ªtensorï¼Œåªæ›´æ–°å€¼è€Œä¸æ„å»ºè®¡ç®—å›¾ï¼Œä½¿ç”¨w.dataï¼Œå–å€¼ç”¨w.item() w.grad.data.zero_() # after update, remember set the grad to zero print(&#x27;progress:&#x27;, epoch, l.item()) # å–å‡ºlossä½¿ç”¨l.itemï¼Œä¸è¦ç›´æ¥ä½¿ç”¨lï¼ˆlæ˜¯tensorä¼šæ„å»ºè®¡ç®—å›¾ï¼‰print(&quot;predict (after training)&quot;, 4, forward(4).item())","categories":[{"name":"pytorch","slug":"pytorch","permalink":"http://breadwinners.top/categories/pytorch/"}],"tags":[{"name":"åå‘ä¼ æ’­","slug":"åå‘ä¼ æ’­","permalink":"http://breadwinners.top/tags/%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD/"}]},{"title":"åŠ è½½æ•°æ®é›†","slug":"pytorch/åŠ è½½æ•°æ®é›†","date":"2023-07-19T16:00:00.000Z","updated":"2023-07-23T07:44:18.606Z","comments":true,"path":"2023/07/20/pytorch/åŠ è½½æ•°æ®é›†/","link":"","permalink":"http://breadwinners.top/2023/07/20/pytorch/%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE%E9%9B%86/","excerpt":"","text":"è¯´æ˜ï¼š1ã€DataSet æ˜¯æŠ½è±¡ç±»ï¼Œä¸èƒ½å®ä¾‹åŒ–å¯¹è±¡ï¼Œä¸»è¦æ˜¯ç”¨äºæ„é€ æˆ‘ä»¬çš„æ•°æ®é›† â€‹ 2ã€DataLoader éœ€è¦è·å–DataSetæä¾›çš„ç´¢å¼•[i]å’Œlen;ç”¨æ¥å¸®åŠ©æˆ‘ä»¬åŠ è½½æ•°æ®ï¼Œæ¯”å¦‚è¯´åšshuffle(æé«˜æ•°æ®é›†çš„éšæœºæ€§)ï¼Œbatch_size,èƒ½æ‹¿å‡ºMini-Batchè¿›è¡Œè®­ç»ƒã€‚å®ƒå¸®æˆ‘ä»¬è‡ªåŠ¨å®Œæˆè¿™äº›å·¥ä½œã€‚DataLoaderå¯å®ä¾‹åŒ–å¯¹è±¡ã€‚DataLoader is a class to help us loading data in Pytorch. â€‹ 3ã€__getitem__ç›®çš„æ˜¯ä¸ºæ”¯æŒä¸‹æ ‡(ç´¢å¼•)æ“ä½œ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889import torchimport numpy as npfrom torch.utils.data import Datasetfrom torch.utils.data import DataLoader# æš‚æ—¶å…ˆå­¦ä¼šDatesetsä¸­mini-batchçš„ç”¨æ³•# prepare datasetclass DiabetesDataset(Dataset): def __init__(self, filepath): xy = np.loadtxt(filepath, delimiter=&#x27;,&#x27;, dtype=np.float32) self.len = xy.shape[0] # shape(å¤šå°‘è¡Œï¼Œå¤šå°‘åˆ—) self.x_data = torch.from_numpy(xy[:, :-1]) self.y_data = torch.from_numpy(xy[:, [-1]]) &quot;&quot;&quot; pytorchä¾‹å­ï¼Œå› ä¸ºä½ å®šä¹‰çš„datasetå¯¹è±¡è¦ä¼ ç»™dataloaderï¼Œdataloaderåœ¨â€œload dataâ€çš„æ—¶å€™ï¼Œéœ€è¦datasetå¯¹è±¡æœ‰è¿™ä¸ªgetitemæ–¹æ³•å–æ•°æ®ã€‚ æ‰€ä»¥__getitem__(self, index): å’Œ __len__(self):å¿…é¡»è¦å†™ï¼Œè¦å®ç° &quot;&quot;&quot; def __getitem__(self, index): return self.x_data[index], self.y_data[index] def __len__(self): return self.lendataset = DiabetesDataset(&#x27;diabetes.csv&#x27;)train_loader = DataLoader(dataset=dataset, batch_size=32, shuffle=True, num_workers=0) # num_workers å¤šçº¿ç¨‹# design model using classclass Model(torch.nn.Module): def __init__(self): super(Model, self).__init__() self.linear1 = torch.nn.Linear(8, 6) self.linear2 = torch.nn.Linear(6, 4) self.linear3 = torch.nn.Linear(4, 1) self.sigmoid = torch.nn.Sigmoid() def forward(self, x): x = self.sigmoid(self.linear1(x)) x = self.sigmoid(self.linear2(x)) x = self.sigmoid(self.linear3(x)) return xmodel = Model()# construct loss and optimizercriterion = torch.nn.BCELoss(reduction=&#x27;mean&#x27;)optimizer = torch.optim.SGD(model.parameters(), lr=0.01)# training cycle forward, backward, updateif __name__ == &#x27;__main__&#x27;: for epoch in range(100): for i, data in enumerate(train_loader, 0): # train_loader æ˜¯å…ˆshuffleåmini_batch inputs, labels = data y_pred = model(inputs) loss = criterion(y_pred, labels) print(epoch, i, loss.item()) optimizer.zero_grad() loss.backward() optimizer.step()&quot;&quot;&quot;ä¸ºä»€ä¹ˆtrain_loaderé‡Œé¢çš„æ•°æ®æ­£å¥½æ˜¯DiabetesDatasetä¸­çš„self.x_dataå’Œself.y_data?train_loaderé‡Œé¢çš„æ•°æ®æ˜¯ä»DiabetesDatasetä¸­é‡‡æ ·è€Œæ¥çš„,è¿™æ˜¯ç”±DataLoaderçš„å·¥ä½œæœºåˆ¶å†³å®šçš„ã€‚å…·ä½“æ¥è¯´,åœ¨åˆ›å»ºDataLoaderæ—¶,ä¼ å…¥äº†DiabetesDatasetä½œä¸ºdatasetå‚æ•°ã€‚åœ¨æ¯æ¬¡è¿­ä»£æ—¶,DataLoaderä¼šæŒ‰batch_size=32ä»DiabetesDataseté‡Œé‡‡æ ·æ•°æ®,è°ƒç”¨å…¶__getitem__æ–¹æ³•è·å–æ ·æœ¬ã€‚è€Œåœ¨DiabetesDatasetçš„__getitem__æ–¹æ³•ä¸­,æ­£æ˜¯è¿”å›äº†self.x_dataå’Œself.y_dataä¸­çš„æ•°æ®:def __getitem__(self, index): return self.x_data[index], self.y_data[index] self.x_dataå’Œself.y_dataåˆæ˜¯åœ¨DiabetesDatasetæ„é€ å‡½æ•°ä¸­ä»csvæ–‡ä»¶ä¸­è¯»å–å¹¶å¤„ç†å¾—åˆ°çš„:xy = np.loadtxt(filepath, delimiter=&#x27;,&#x27;, dtype=np.float32)self.x_data = torch.from_numpy(xy[:, :-1])self.y_data = torch.from_numpy(xy[:, [-1]])æ‰€ä»¥train_loaderæ¯æ¬¡é‡‡æ ·çš„æ ·æœ¬å°±æ˜¯æ¥è‡ªDiabetesDatasetä¸­é¢„å¤„ç†åçš„self.x_dataå’Œself.y_dataã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆtrain_loaderèƒ½å¤Ÿå¾—åˆ°DiabetesDatasetä¸­çš„æ•°æ®çš„åŸå› ã€‚DataLoaderé€šè¿‡æ•°æ®é›†çš„__getitem__æ–¹æ³•å¯ä»¥æ‰¹é‡é‡‡æ ·æ•°æ®,è¿™åœ¨Pytorchä¸­æ˜¯è®­ç»ƒæ¨¡å‹è·å–æ‰¹é‡æ•°æ®çš„å¸¸ç”¨æ–¹å¼ã€‚&quot;&quot;&quot;","categories":[{"name":"pytorch","slug":"pytorch","permalink":"http://breadwinners.top/categories/pytorch/"}],"tags":[{"name":"DataLoader","slug":"DataLoader","permalink":"http://breadwinners.top/tags/DataLoader/"},{"name":"datasets","slug":"datasets","permalink":"http://breadwinners.top/tags/datasets/"}]},{"title":"","slug":"pytorch/408/è®¡ç½‘","date":"2023-07-19T16:00:00.000Z","updated":"2023-08-08T08:16:08.903Z","comments":true,"path":"2023/07/20/pytorch/408/è®¡ç½‘/","link":"","permalink":"http://breadwinners.top/2023/07/20/pytorch/408/%E8%AE%A1%E7%BD%91/","excerpt":"","text":"è®¡ç®—æœºç½‘ç»œ:æ˜¯ä¸€ä¸ªå°†åˆ†æ•£çš„ã€å…·æœ‰ç‹¬ç«‹åŠŸèƒ½çš„è®¡ç®—æœºç³»ç»Ÿï¼Œé€šè¿‡é€šä¿¡è®¾å¤‡ä¸çº¿è·¯è¿æ¥èµ·æ¥ç”±åŠŸèƒ½å®Œå–„çš„è½¯ä»¶å®ç°èµ„æºå…±äº«å’Œä¿¡æ¯ä¼ é€’çš„ç³»ç»Ÿã€‚ RTT åªç®¡ä¿¡é“ä¸Šçš„æ—¶é—´ï¼Œä¸ç®¡å‘é€ç«¯çš„å‘é€æ—¶å»¶ä¹‹ç±»çš„ äº¤æ¢æ–¹å¼ï¼š","categories":[{"name":"pytorch","slug":"pytorch","permalink":"http://breadwinners.top/categories/pytorch/"}],"tags":[]},{"title":"ä¸­ç§‘å¤§æœªæ¥å®éªŒå®¤winåˆæ­¥é…ç½®","slug":"å°æŠ€å·§/ä¸­ç§‘å¤§æœªæ¥å®éªŒå®¤winåˆæ­¥é…ç½®","date":"2023-07-15T16:00:00.000Z","updated":"2023-08-11T07:17:36.861Z","comments":true,"path":"2023/07/16/å°æŠ€å·§/ä¸­ç§‘å¤§æœªæ¥å®éªŒå®¤winåˆæ­¥é…ç½®/","link":"","permalink":"http://breadwinners.top/2023/07/16/%E5%B0%8F%E6%8A%80%E5%B7%A7/%E4%B8%AD%E7%A7%91%E5%A4%A7%E6%9C%AA%E6%9D%A5%E5%AE%9E%E9%AA%8C%E5%AE%A4win%E5%88%9D%E6%AD%A5%E9%85%8D%E7%BD%AE/","excerpt":"","text":"å…ˆä¸‹è½½todeskï¼Œæ–¹ä¾¿æ“ä½œï¼Œå†å®‰è£…gooleæµè§ˆå™¨æ–¹ä¾¿ä¸‹è½½è¦ç”¨çš„å·¥å…· ç„¶åå¼€å¯è¿œç¨‹æ¡Œé¢æœåŠ¡ å¦‚æœæ˜¯å…ˆå…³é—­äº†é˜²ç«å¢™å’Œwindows defenderç­‰æœåŠ¡ï¼Œåç»­ä¼šæ— æ³•å¼€å¯è¿œç¨‹æœåŠ¡ å…³é—­é˜²ç«å¢™ ç»„ç­–ç•¥å…³é—­ å¼€å§‹&gt;è¿è¡Œ&gt;gpedit.mscï¼Œæˆ–è€…ç›´æ¥è¾“å…¥â€œç»„ç­–ç•¥â€ è®¡ç®—æœºé…ç½®&gt;Windowsè®¾ç½®&gt;å®‰å…¨è®¾ç½®&gt;é«˜çº§å®‰å…¨Windowsé˜²ç«å¢™&gt;é«˜çº§å®‰å…¨Windowsé˜²ç«å¢™æœ¬åœ°ç­–ç•¥å¯¹è±¡&gt;Windowé˜²ç«å¢™å±æ€§ å°†åŸŸé…ç½®æ–‡ä»¶ã€ä¸“ç”¨é…ç½®æ–‡ä»¶ã€å…¬ç”¨é…ç½®æ–‡ä»¶çš„é˜²ç«å¢™çŠ¶æ€éƒ½è®¾ç½®ä¸ºã€ç¦ç”¨ã€‘ï¼› æ§åˆ¶é¢æ¿â€“&gt;ç³»ç»Ÿå’Œå®‰å…¨â€“&gt;æ‰¾åˆ°é˜²ç«å¢™å…³é—­ è®¾ç½®é‡Œé¢ä¹Ÿå…³é—­Windows defender Windowsæœç´¢â€æœåŠ¡â€ï¼Œæ‰¾åˆ°Windows Firwallï¼Œå…³é—­ æŒ‰WIN + R ï¼Œè¾“å…¥ gpedit.msc æ‰¾åˆ°å›¾ç¤ºçš„ä½ç½® è‡³æ­¤å°±å¯ä»¥å®‰è£…frpä¸”ä¸ä¼šè¢«Windows defenderå¼€æœºå¯åŠ¨åˆ é™¤äº† frpçš„å¼€æœºå¯åŠ¨é…ç½®å¯ä»¥è§æˆ‘çš„å¦å¤–ä¸€ç¯‡åšå®¢ æœ‰å…³å­˜é•œåƒçš„é—®é¢˜ç”±äºç”¨çš„æ˜¯ç§‘å¤§çš„å®éªŒå®¤ï¼Œä¸å¥½ä¸€ç›´å ç”¨åˆ«äººçš„èµ„æºï¼Œåšå®Œå®éªŒæœ€å¥½è¦é‡Šæ”¾ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å­˜é•œåƒæ¥ä¿å­˜ä¸Šä¸€æ¬¡å®éªŒçš„å†…å®¹ ä½†æ˜¯ç”¨é•œåƒé‡æ–°åˆ›å»ºçš„ä¸»æœºå¾€å¾€ä¼šæœ‰ä¸Šä¸äº†ç½‘çš„é—®é¢˜ï¼Œè¿™é‡Œç»™å‡ºæˆ‘çš„å¦‚ä¸‹æ–¹æ³• é€‰æ‹©äº†è‡ªåŠ¨è·å–ipåå†å­˜é•œåƒï¼Œä¸€èˆ¬æ¥è¯´å°±å¯ä»¥æ­£å¸¸è®¿é—®å¤–ç½‘äº† å¦‚æœä¸è¡Œï¼Œé‚£ä¹ˆè¿›è¡Œé…ç½®IPï¼š åœ¨è¿›å…¥ç½‘ç«™æ§åˆ¶å°çš„æ—¶å€™æœ‰ä¸ªæˆ‘çš„å®éªŒè®°ä½é‚£ä¸ªipåœ°å€ï¼Œç­‰ä¸‹è¦ç”¨ å³å‡»å¸¦æ„Ÿå¹å·çš„ç”µè„‘å›¾æ ‡ï¼Œä¿®æ”¹ç½‘ç»œé…ç½®ï¼š ä¸€ç›´ç‚¹ç¡®å®šé€€å‡ºå³å¯ æŒ‰ç†æ¥è¯´è¿™æ—¶å€™å›¾æ ‡å·²ç»å˜äº† è¿™æ—¶å°±å¯ä»¥æ­£å¸¸è®¿é—®å¤–ç½‘äº† &#x3D;&#x3D;å»ºè®®é¦–å…ˆåˆ°ç£ç›˜ç®¡ç†ä¸­æŠŠDç›˜æ ¼å¼åŒ–ï¼Œå†Cç›˜çš„å®¹é‡æ‰©å¤§ä¸€äº›ï¼ˆå»ºè®®80Gï¼‰ï¼Œå¦‚æœåé¢æ•°æ®å¤ªå¤šCç›˜æ»¡äº†ï¼Œç³»ç»Ÿä¼šå¾ˆå¡ï¼Œè€Œä¸”åç»­åˆ†åŒºå¾ˆéº»çƒ¦&#x3D;&#x3D;","categories":[{"name":"å°æŠ€å·§","slug":"å°æŠ€å·§","permalink":"http://breadwinners.top/categories/%E5%B0%8F%E6%8A%80%E5%B7%A7/"}],"tags":[{"name":"ç§‘å¤§æœªæ¥","slug":"ç§‘å¤§æœªæ¥","permalink":"http://breadwinners.top/tags/%E7%A7%91%E5%A4%A7%E6%9C%AA%E6%9D%A5/"}]},{"title":"numpyå­¦ä¹ ","slug":"pytorch/numpyå­¦ä¹ ","date":"2023-07-15T16:00:00.000Z","updated":"2023-07-21T14:55:08.865Z","comments":true,"path":"2023/07/16/pytorch/numpyå­¦ä¹ /","link":"","permalink":"http://breadwinners.top/2023/07/16/pytorch/numpy%E5%AD%A6%E4%B9%A0/","excerpt":"","text":"1234a = np.array([[1,2,3,4,5], [5,6,7,8,9]])print(a.sum(axis=0))print(a.sum(axis=1))","categories":[{"name":"numpy","slug":"numpy","permalink":"http://breadwinners.top/categories/numpy/"}],"tags":[{"name":"axis","slug":"axis","permalink":"http://breadwinners.top/tags/axis/"}]},{"title":"ä¸­ç§‘å¤§æœªæ¥å®éªŒå®¤ç½‘ç»œé•œåƒé…ç½®","slug":"å°æŠ€å·§/ä¸­ç§‘å¤§æœªæ¥å®éªŒå®¤ä½¿ç”¨","date":"2023-07-14T16:00:00.000Z","updated":"2023-07-19T09:29:53.858Z","comments":true,"path":"2023/07/15/å°æŠ€å·§/ä¸­ç§‘å¤§æœªæ¥å®éªŒå®¤ä½¿ç”¨/","link":"","permalink":"http://breadwinners.top/2023/07/15/%E5%B0%8F%E6%8A%80%E5%B7%A7/%E4%B8%AD%E7%A7%91%E5%A4%A7%E6%9C%AA%E6%9D%A5%E5%AE%9E%E9%AA%8C%E5%AE%A4%E4%BD%BF%E7%94%A8/","excerpt":"","text":"è¿›å…¥ä¸­ç§‘å¤§æœªæ¥å®éªŒå®¤ï¼Œç‚¹å‡»å®éªŒæ§åˆ¶å°ç§‘å¤§æœªæ¥ 1. åˆ›å»ºæ–°å®éªŒ 2.é€‰æ‹©é…ç½®å…¬æœ‰é•œåƒé€‰æ‹©æˆ‘è¿™é‡Œé€‰æ‹©ä¹‹å‰ä½¿ç”¨win10åˆ¶ä½œå®Œæˆçš„é•œåƒ 3. åˆ›å»ºå®éªŒï¼š 4. åˆ›å»ºå®Œæˆï¼š 5. å¯åŠ¨æˆåŠŸåï¼š ç”¨æˆ·åï¼šustc å¯†ç ï¼šustc1958 1. è¿›å…¥ä¹‹åå¦‚æœå³ä¸‹è§’æ˜¯ä¸ªå¸¦æ„Ÿå¹å·çš„ç”µè„‘å›¾æ ‡ï¼Œè¯´æ˜ç½‘ç»œä¸å¯ç”¨ï¼Œéœ€è¦é…ç½®ï¼š2. åœ¨è¿›å…¥ç½‘ç«™æ§åˆ¶å°çš„æ—¶å€™æœ‰ä¸ªæˆ‘çš„å®éªŒè®°ä½é‚£ä¸ªipåœ°å€ï¼Œç­‰ä¸‹è¦ç”¨ 3. å³å‡»å¸¦æ„Ÿå¹å·çš„ç”µè„‘å›¾æ ‡ï¼Œä¿®æ”¹ç½‘ç»œé…ç½®ï¼š ä¸€ç›´ç‚¹ç¡®å®šé€€å‡ºå³å¯ æŒ‰ç†æ¥è¯´è¿™æ—¶å€™å›¾æ ‡å·²ç»å˜äº† ä»£è¡¨å¯ä»¥ä¸Šç½‘äº†ï¼Œè¿™æ—¶å€™å¯ä»¥ç”¨RDå®¢æˆ·ç«¯ï¼Œæˆ–è€…æ¡Œé¢çš„todeskè½¯ä»¶è¿›è¡Œè¿œç¨‹æ“ä½œï¼Œä¹Ÿå¯ç›´æ¥åœ¨ç½‘ç«™æ§åˆ¶å°è¾“å¯†ç è¿›å…¥çš„é¡µé¢é‡Œæ“ä½œï¼Œä½†æ˜¯æ„Ÿè§‰æ¯”è¾ƒå¡","categories":[{"name":"å°æŠ€å·§","slug":"å°æŠ€å·§","permalink":"http://breadwinners.top/categories/%E5%B0%8F%E6%8A%80%E5%B7%A7/"}],"tags":[{"name":"ç§‘å¤§æœªæ¥","slug":"ç§‘å¤§æœªæ¥","permalink":"http://breadwinners.top/tags/%E7%A7%91%E5%A4%A7%E6%9C%AA%E6%9D%A5/"}]},{"title":"Pandaså…¥é—¨","slug":"pytorch/Pandaså…¥é—¨","date":"2023-07-14T16:00:00.000Z","updated":"2023-07-16T03:12:26.864Z","comments":true,"path":"2023/07/15/pytorch/Pandaså…¥é—¨/","link":"","permalink":"http://breadwinners.top/2023/07/15/pytorch/Pandas%E5%85%A5%E9%97%A8/","excerpt":"","text":"å¸¸ç”¨çš„å‡½æ•°123import pandas as pdtitanic = pd.read_excel(&#x27;titanic.xlsx&#x27;) # æ–‡ä»¶åœ¨notebookæ–‡ä»¶åŒä¸€ç›®å½•ä¸‹ è¯»å–æ•°æ®123titanic.head() # æŸ¥çœ‹å‰5æ¡ï¼Œæ‹¬å·é‡Œå¯ä»¥å†™æ˜ä½ æƒ³çœ‹çš„æ¡æ•°titanic.tail() # æŸ¥çœ‹å°¾éƒ¨5æ¡titanic.sample(5) # éšæœºæŸ¥çœ‹5æ¡ éªŒè¯æ•°æ®123456titanic.shape # (100, 6) æŸ¥çœ‹è¡Œæ•°å’Œåˆ—æ•°titanic.info() # æŸ¥çœ‹ç´¢å¼•ã€æ•°æ®ç±»å‹å’Œå†…å­˜ä¿¡æ¯titanic.describe() # æŸ¥çœ‹æ•°å€¼å‹åˆ—çš„æ±‡æ€»ç»Ÿè®¡titanic.dtypes # æŸ¥çœ‹å„å­—æ®µç±»å‹titanic.axes # æ˜¾ç¤ºæ•°æ®è¡Œå’Œåˆ—åtitanic.columns # åˆ—å è¯»å–å‡ºçš„æ•´ä¸ªtitanicçš„æ•°æ®ç±»å‹æ˜¯dataFrameï¼Œä¸€ä¸ªåˆ—çš„æ•°æ®ç±»å‹æ˜¯pandas.core.series.Series é€‰æ‹©æ•°æ®12345ages = titanic[&quot;age&quot;] # é€‰æ‹©ä¸€åˆ—ages.head(10)ages = titanic[[&quot;ages&quot;, &quot;sex&quot;]] # é€‰æ‹©ä¸¤åˆ—æ•°æ®ï¼Œä½†æ˜¯æ³¨æ„ä¸€å®šæ˜¯è¦åŠ ä¸¤ä¸ªä¸­æ‹¬å·[[]]ages.head(20) æ•°æ®ç­›é€‰ é€‰å‡º35å²ä»¥ä¸‹çš„ä¹˜å®¢çš„æ‰€æœ‰ä¿¡æ¯ 1above_35 = titanic[titanic[&quot;age&quot;] &lt; 35] é€‰å‡ºçº§åˆ«ä¸º2ndå’Œ3ndçš„æ‰€æœ‰ä¹˜å®¢ä¿¡æ¯ 12class_23 = titanic[titanic[&quot;Pclass&quot;].isin([&quot;2nd&quot;, &quot;3nd&quot;])]class_23 = titanic[(titanic[&quot;Pclass&quot;] = &quot;2nd&quot;) | (titanic[&quot;Pclass&quot;&quot;] = &quot;3nd&quot;)] é€‰å‡ºå·²çŸ¥å¹´é¾„çš„ä¹˜å®¢æ•°æ®ï¼ˆé€‰å‡ºå¹´é¾„ä¸ä¸ºç¼ºå¤±å€¼çš„ä¹˜å®¢æ•°æ®ï¼‰ 1age_no_nan = titanic[dateset[&quot;age&quot;].notna()] é€‰å‡º35å²ä»¥ä¸Šçš„ä¹˜å®¢çš„å§“å 1above_35 = titanic[titanic[&quot;age&quot;] &gt; 35][&quot;name&quot;] # ä¸¤æ¬¡ç´¢å¼• åªé€‰å‡ºç¬¬10è¡Œåˆ°25è¡Œå’Œç¬¬3åˆ°5åˆ—çš„æ•°æ®ï¼ˆilocå‡½æ•°ï¼‰ 12titanic.iloc[9:25, 2:5]titanic.iloc[0:3, 3] = &quot;anonymous&quot; # 1åˆ°3è¡Œçš„ç¬¬4åˆ—æ•°æ®èµ‹å€¼ä¸º&quot;anonymous&quot; åˆ›å»ºæ–°åˆ—1titanic = [&#x27;æ–°åˆ—&#x27;] = titanic[&#x27;age&#x27;] * 2 # åˆ›å»ºæ–°çš„åˆ—ï¼Œå¹¶ä¸”èµ‹å€¼ ä¿®æ”¹åˆ—å 12345678titanic_renamed = titanic.rename( columns=&#123; &quot;age&quot;: &quot;å¹´é¾„&quot;ï¼Œ &quot;pclass&quot;: &quot;èˆ¹èˆ±ç­‰çº§&quot;ï¼Œ &quot;survived&quot;: &quot;ç”Ÿå­˜&quot;ï¼Œ &#125;) titanic_renamed # æ˜¾ç¤ºæ–°çš„æ•°æ® ç»Ÿè®¡ æ±‚å¹³å‡å€¼ã€ä¸­ä½æ•°æœ€å¤§æœ€å°å€¼ç­‰ä¿¡æ¯ 123456titanic[&quot;age&quot;].mean() # å•åˆ—å¹³å‡å€¼titanic[&quot;age&quot;ï¼Œ&quot;survived&quot;].mean() # æ±‚å¤šåˆ—çš„å¹³å‡å€¼titanic[&quot;age&quot;].median() # ä¸­ä½æ•°titanic[&quot;age&quot;ï¼Œ&quot;survived&quot;].max() # å¤šåˆ—çš„æœ€å¤§å€¼titanic[&quot;age&quot;].min() describe æ˜¯ç»Ÿè®¡å‡ºæ•°æ®çš„å„ç§ä¿¡æ¯ 1titanic[&quot;age&quot;].describe() åˆ†ç»„ç»Ÿè®¡ groupby() 1titanic.groupby(&quot;sex&quot;)[&quot;age&quot;].mean() # é€‰å‡ºageè¿™ä¸€åˆ—ï¼ŒæŒ‰ç…§sexåˆ†ç±»ï¼Œæ±‚å¹³å‡å€¼ 1titanic.groupby(&quot;sex&quot;,&quot;pclass&quot;)[&quot;survived&quot;].mean() # é€‰å‡ºsurvivedè¿™ä¸€åˆ—æŒ‰ç…§sexå’Œpclassè¿›è¡Œåˆ†ç±»ï¼Œæ±‚ é¢ å€’é”®å€¼å†™æ³•ï¼š æŒ‰ç…§ç±»åˆ«è®¡æ•° 12titanic[&quot;pclass&quot;].value_counts()titanic.groupby(&quot;pclass&quot;)[&quot;pclass&quot;].count() å»ºç«‹ç´¢å¼•1titanic.set_index(&#x27;name&#x27;, inplace=True) # å»ºç«‹ç´¢å¼•å¹¶ç”Ÿæ•ˆ å…¶ä¸­å¯é€‰å‚æ•°inplace&#x3D;Trueä¼šå°†æŒ‡å®šå¥½ç´¢å¼•çš„æ•°æ®å†èµ‹å€¼ç»™titanicä½¿ç´¢å¼•ç”Ÿæ•ˆï¼Œå¦åˆ™ç´¢å¼•ä¸ä¼šç”Ÿæ•ˆã€‚æ³¨æ„ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰ä¿®æ”¹åŸExcelï¼Œä»æˆ‘ä»¬è¯»å–æ•°æ®åå°±å·²ç»å’Œå®ƒæ²¡æœ‰å…³ç³»äº†ï¼Œæˆ‘ä»¬å¤„ç†çš„æ˜¯å†…å­˜ä¸­çš„titanicå˜é‡ã€‚ å°†nameå»ºç«‹ç´¢å¼•åï¼Œå°±æ²¡æœ‰ä»0å¼€å§‹çš„æ•°å­—ç´¢å¼•äº†ï¼Œå¦‚å›¾ 12# ç”¨æŒ‡å®šç´¢å¼•é€‰å–titanic[titanic.index == &#x27;Liver&#x27;] # æŒ‡å®šå§“å æ’åºPandasçš„æ’åºéå¸¸æ–¹ä¾¿ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234titanic.sort_values(by=&#x27;Q1&#x27;) # æŒ‰Q1åˆ—æ•°æ®å‡åºæ’åˆ—titanic.sort_values(by=&#x27;Q1&#x27;, ascending=False) # é™åºtitanic.sort_values([&#x27;team&#x27;, &#x27;Q1&#x27;], ascending=[True, False]) # teamå‡åºï¼ŒQ1é™åº çŸ¥ä¹å‚è€ƒé“¾æ¥","categories":[{"name":"pandas","slug":"pandas","permalink":"http://breadwinners.top/categories/pandas/"}],"tags":[{"name":"titanic","slug":"titanic","permalink":"http://breadwinners.top/tags/titanic/"}]},{"title":"Pythonä¹‹Shape()å‡½æ•°","slug":"pytorch/Pythonä¹‹Shape()å‡½æ•°","date":"2023-07-10T16:00:00.000Z","updated":"2023-07-15T12:47:07.008Z","comments":true,"path":"2023/07/11/pytorch/Pythonä¹‹Shape()å‡½æ•°/","link":"","permalink":"http://breadwinners.top/2023/07/11/pytorch/Python%E4%B9%8BShape()%E5%87%BD%E6%95%B0/","excerpt":"","text":"shapeå‡½æ•°æ˜¯numpy.core.fromnumericä¸­çš„å‡½æ•°ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯è¯»å–çŸ©é˜µçš„é•¿åº¦ï¼Œæ¯”å¦‚shape[0]å°±æ˜¯è¯»å–çŸ©é˜µç¬¬ä¸€ç»´åº¦çš„é•¿åº¦ã€‚ shapeçš„è¾“å…¥å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªæ•´æ•°ï¼ˆè¡¨ç¤ºç»´åº¦ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªçŸ©é˜µã€‚ä»¥ä¸‹ä¾‹å­å¯èƒ½ä¼šå¥½ç†è§£ä¸€äº›ï¼š ï¼ˆ1ï¼‰å‚æ•°æ˜¯ä¸€ä¸ªæ•°æ—¶ï¼Œè¿”å›ç©ºï¼š ï¼ˆ2ï¼‰å‚æ•°æ˜¯ä¸€ç»´çŸ©é˜µï¼š ï¼ˆ3ï¼‰å‚æ•°æ˜¯äºŒç»´çŸ©é˜µï¼š ä»¥ä¸Šåˆ†åˆ«ä¸ºä¸¤è¡Œä¸€åˆ—ï¼›ä¸‰è¡Œä¸¤åˆ— ï¼ˆ4ï¼‰ç›´æ¥ç”¨.shapeå¯ä»¥å¿«é€Ÿè¯»å–çŸ©é˜µçš„å½¢çŠ¶ï¼Œä½¿ç”¨shape[0]è¯»å–çŸ©é˜µç¬¬ä¸€ç»´åº¦çš„é•¿åº¦ ï¼ˆ5ï¼‰ä½†æ˜¯å½“æŸä¸€ç»´åº¦é•¿åº¦ä¸ä¸€è‡´æ—¶ï¼Œè¯»å–æ‰€æœ‰ç»´åº¦æ—¶åˆ™ä¸èƒ½è¯»å‡ºé•¿çŸ­ä¸ä¸€è‡´çš„ç»´åº¦ åŸæ–‡ï¼šhttps://blog.csdn.net/qq\\_28618765/article/details/78081959","categories":[{"name":"Python","slug":"Python","permalink":"http://breadwinners.top/categories/Python/"}],"tags":[{"name":"shape()","slug":"shape","permalink":"http://breadwinners.top/tags/shape/"}]},{"title":"frpå¼€æœºè‡ªå¯åŠ¨","slug":"å°æŠ€å·§/frpå¼€æœºè‡ªå¯åŠ¨","date":"2023-06-05T16:00:00.000Z","updated":"2023-07-18T07:10:39.286Z","comments":true,"path":"2023/06/06/å°æŠ€å·§/frpå¼€æœºè‡ªå¯åŠ¨/","link":"","permalink":"http://breadwinners.top/2023/06/06/%E5%B0%8F%E6%8A%80%E5%B7%A7/frp%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8/","excerpt":"","text":"åœ¨Windowsä»»åŠ¡è®¡åˆ’ç¨‹åºè¿›è¡Œè®¾ç½® æ‰“å¼€ä»»åŠ¡è®¡åˆ’ç¨‹åº æ‰“å¼€å¼€å§‹èœå•ï¼Œè¾“å…¥ â€œä»»åŠ¡è®¡åˆ’ç¨‹åºâ€ å°†ä¼šè‡ªåŠ¨æœç´¢ï¼Œæ¥ç€æ‰“å¼€å®ƒã€‚ åˆ›å»ºè®¡åˆ’ä»»åŠ¡ 2.1 ç‚¹å‡»å³ä¾§çš„ â€œåˆ›å»ºä»»åŠ¡â€ï¼Œåç§°éšæ„å¡«å†™ï¼Œå®‰å…¨é€‰é¡¹é€‰æ‹© â€œä¸ç®¡ç”¨æˆ·æ˜¯å¦ç™»å½•éƒ½è¦è¿è¡Œâ€ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é€‰æ‹© â€œåªåœ¨ç”¨æˆ·ç™»å½•æ—¶è¿è¡Œâ€ã€‚ 2.2ã€å¸¸è§„ã€‘é€‰é¡¹å¡è®¾ç½® é€‰æ‹© â€œä¸ç®¡ç”¨æˆ·æ˜¯å¦ç™»å½•éƒ½è¦è¿è¡Œâ€ å¯ä»¥è®©ä½ çš„ç”µè„‘åœ¨æ–­ç”µè‡ªåŠ¨å¯åŠ¨åè‡ªåŠ¨è¿è¡Œ frpï¼Œä½ å°±å¯ä»¥è¿œç¨‹æ¡Œé¢è¿æ¥ç”µè„‘äº†ã€‚ â€œä½¿ç”¨æœ€é«˜æƒé™è¿è¡Œâ€ ä¹Ÿæ˜¯å¯é€‰çš„ï¼Œæ ¹æ®ä¸ªäººéœ€è¦å¯ä»¥é€‰ä¸Šã€‚ æœ€åå‹¾é€‰ â€œéšè—â€ï¼Œå°±ä¸ä¼šåœ¨å¯åŠ¨æ—¶å¼¹å‡ºå‘½ä»¤è¡Œçª—å£äº†ã€‚ 2.3 ã€è§¦å‘å™¨ã€‘é€‰é¡¹å¡è®¾ç½® é¡µï¼Œç‚¹å‡»æ–°å»ºï¼Œé€‰æ‹© â€œå¯åŠ¨æ—¶â€ 2.4 æ¥ç€è½¬åˆ° ã€æ“ä½œã€‘é€‰é¡¹å¡ ç‚¹å‡»æ–°å»ºï¼Œé€‰æ‹© â€œå¯åŠ¨ç¨‹åºâ€ åœ¨ç¨‹åºæˆ–è„šæœ¬ä¸€æ é€‰æ‹©ç¬¬ä¸€æ­¥åˆ›å»ºçš„ start.batï¼Œä¸‹é¢çš„ â€œèµ·å§‹äºâ€ å¡«å†™ start.bat çš„è·¯å¾„ï¼ˆä¸è¦åŒ…å« start.batï¼‰ ä¾‹å¦‚ä½ çš„ start.bat åœ¨ E:frpstart.batï¼Œé‚£ä¹ˆä½ åªéœ€è¦åœ¨ â€œèµ·å§‹äºâ€ å¡«å†™ E:frp æ¥ç€è¿”å› â€œå¸¸è§„â€ é¡µï¼Œç‚¹å‡»ç¡®å®šï¼Œæ­¤æ—¶ä¼šè¦æ±‚è¾“å…¥å¯†ç ï¼Œè¾“å…¥ä½ çš„ç”µè„‘å¯†ç ï¼Œç„¶åç‚¹å‡»ç¡®å®šå³å¯ã€‚ ä»¥åå°±ä¼šå¼€æœºè‡ªåŠ¨å¯åŠ¨ frp äº†ï¼Œå¹¶ä¸”ä¸ä¼šå¼¹å‡ºå‘½ä»¤æç¤ºç¬¦çª—å£~ åˆ°æ­¤ä¸ºæ­¢ã€‚ å‚è€ƒæ–‡ç« ","categories":[{"name":"å°æŠ€å·§","slug":"å°æŠ€å·§","permalink":"http://breadwinners.top/categories/%E5%B0%8F%E6%8A%80%E5%B7%A7/"}],"tags":[{"name":"frp","slug":"frp","permalink":"http://breadwinners.top/tags/frp/"}]},{"title":"mavenå¸¦ä¾èµ–æ‰“åŒ…","slug":"mavenå¸¦ä¾èµ–æ‰“åŒ…","date":"2023-05-31T16:00:00.000Z","updated":"2023-06-12T01:59:20.628Z","comments":true,"path":"2023/06/01/mavenå¸¦ä¾èµ–æ‰“åŒ…/","link":"","permalink":"http://breadwinners.top/2023/06/01/maven%E5%B8%A6%E4%BE%9D%E8%B5%96%E6%89%93%E5%8C%85/","excerpt":"","text":"å½“ä½ éœ€è¦åœ¨æŸä¸ªç¯å¢ƒä¸‹ä½¿ç”¨ java -jar xxx.jarçš„å‘½ä»¤è¿è¡ŒjaråŒ…ç¨‹åºï¼Œè€Œä¸”è¯¥jaråŒ…åˆéœ€è¦å¼•ç”¨å…¶ä»–ç¨‹åºä¾èµ–çš„æ—¶å€™ï¼Œå°±å¯ä»¥é‡‡ç”¨ä»¥ä¸‹çš„æ–¹æ³•ã€‚ æ·»åŠ ä¾èµ– 12345678910111213141516171819&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt; &lt;version&gt;2.5.5&lt;/version&gt; &lt;configuration&gt; &lt;archive&gt; &lt;manifest&gt; &lt;mainClass&gt;com.xxx.xxx.xxx&lt;/mainClass&gt; &lt;/manifest&gt; &lt;/archive&gt; &lt;descriptorRefs&gt; &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt; &lt;/descriptorRefs&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; 3. è¿è¡Œç”Ÿæˆçš„å¸¦ä¾èµ–çš„jarå°±è¡Œäº† java -jar ...","categories":[{"name":"å°æŠ€å·§","slug":"å°æŠ€å·§","permalink":"http://breadwinners.top/categories/%E5%B0%8F%E6%8A%80%E5%B7%A7/"}],"tags":[{"name":"maven","slug":"maven","permalink":"http://breadwinners.top/tags/maven/"},{"name":"æ‰“åŒ…ä¾èµ–","slug":"æ‰“åŒ…ä¾èµ–","permalink":"http://breadwinners.top/tags/%E6%89%93%E5%8C%85%E4%BE%9D%E8%B5%96/"}]},{"title":"windowså®‰è£…WSL","slug":"WSL2","date":"2023-05-27T16:00:00.000Z","updated":"2023-07-11T02:19:39.651Z","comments":true,"path":"2023/05/28/WSL2/","link":"","permalink":"http://breadwinners.top/2023/05/28/WSL2/","excerpt":"","text":"Windowsä¸‹å®‰è£…wsl å¼€å¯ç³»ç»Ÿçš„ä¸€ä¸‹è®¾ç½® è™šæ‹ŸåŒ–è®¾ç½® ç³»ç»Ÿè®¾ç½® â€‹ æ§åˆ¶é¢æ¿-&gt;ç¨‹åº-&gt;å¯ç”¨æˆ–å…³é—­ windows åŠŸèƒ½ï¼Œå¼€å¯ Windows è™šæ‹ŸåŒ–å’Œ Linux å­ç³»ç»Ÿï¼ˆWSL2)ä»¥åŠHyper-V â€‹ å‹¾é€‰å®Œæˆåï¼ŒWindows11 ä¼šè‡ªå·±ä¸‹è½½äº›ä¸œè¥¿ï¼Œå¹¶æç¤ºä½ é‡å¯ã€‚ç­‰ç”µè„‘å½»åº•é‡å¯å®Œä»¥åï¼Œè¿›è¡Œåç»­æ“ä½œ æ‰“å¼€Power Shell ä»¥ç®¡ç†å‘˜èº«ä»½è¾“å…¥ä¸‹æ–¹ä»£ç ï¼š bcdedit /set hypervisorlaunchtype auto å®‰è£…Ubuntu â€‹ å¾®è½¯å•†åº—å¤ªæ…¢äº†ï¼Œè¿™é‡Œæ¨èå¦ä¸€ç§å¥½æ–¹æ³• â€‹ 1. æ‰“å¼€Microsoft Storeçš„ç½‘é¡µç‰ˆhttps://apps.microsoft.com/store/apps â€‹ æœç´¢ä½ æƒ³è¦çš„åº”ç”¨ï¼Œæ¯”å¦‚ubuntu é€‰æ‹©ä¸€ä¸ª å¤åˆ¶é“¾æ¥ æ‰“å¼€ç½‘ç«™https://store.rg-adguard.netï¼Œä¸“é—¨ä¸‹è½½Microsoft Storeä¸Šçš„åº”ç”¨ è¾“å…¥ä½ åˆšæ‰å¤åˆ¶çš„è¦ä¸‹è½½çš„åº”ç”¨é“¾æ¥ï¼Œæœç´¢ åœ¨ç»“æœé‡Œé¢æ‰¾åˆ°æƒ³è¦çš„åº”ç”¨ï¼Œæœ‰äº›æ–‡ä»¶çš„åç§°é‡Œé¢ä¼šæœ‰å¹³å°ï¼Œæ¯”å¦‚x64ï¼Œx86ï¼Œarm64ç­‰ç­‰ï¼Œæ ¹æ®è‡ªå·±ç”µè„‘çš„å¹³å°ä¸‹è½½ï¼Œæ³¨æ„é€‰æ‹©åç¼€ä¸º.appxæˆ–è€….AppxBundleçš„ä¸‹è½½ï¼Œ.EAppxBundleåªé€‚ç”¨äºWindows Xboxå¹³å°ã€‚ ç­‰å¾…ä¸‹è½½å®Œæˆå ä¸‹è½½å®Œä¹‹åè¿›å…¥ä½ çš„ä¸‹è½½ç›®å½•ï¼Œè¿è¡Œå‘½ä»¤ï¼š 1Add-AppxPackage .\\CanonicalGroupLimited.Ubuntu22.04LTS_2204.2.47.0_neutral_~_79rhkp1fndgsc.AppxBundle PSï¼šAdd-AppxPackageæ˜¯power shellå‘½ä»¤ï¼Œåœ¨cmdä¸­å¿…é¡»çº¿è¾“å…¥powershellæ‰èƒ½ç»§ç»­è¿è¡Œ å¯åŠ¨Ubuntu â€‹ ç›´æ¥ç‚¹å‡»ubuntuå›¾æ ‡å¯åŠ¨ â€‹ PSï¼šWindows11 WSL æ‰“å¼€Ubuntu æŠ¥é”™ WslRegisterDistribution failed with error: 0x800701bc è¿™ä¸ªæ˜¯éœ€è¦ä¸‹è½½é€‚ç”¨äº x64 è®¡ç®—æœºçš„ WSL2 Linux å†…æ ¸æ›´æ–°åŒ…ï¼š https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi å®‰è£…å‡çº§åï¼Œé‡æ–°æ‰“å¼€ Ubuntuï¼Œå³å¯æ­£å¸¸è®¿é—®ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š ä¿®æ”¹rootç”¨æˆ·å¯†ç  WSL é»˜è®¤æ˜¯æ²¡æœ‰è®¾ç½® root å¯†ç çš„ è®¾ç½® root ç”¨æˆ·å¯†ç , è¿™æ ·è¦è¾“ä¸‰æ¬¡å‘½ä»¤, ç¬¬ä¸€æ¬¡å½“å‰ç”¨æˆ·å¯†ç , åä¸¤æ¬¡å°±æ˜¯è®¾ç½®å¯†ç ä»¥åŠç¡®è®¤å¯†ç  1sudo passwd root è®¾ç½®é»˜è®¤ç”¨æˆ· æŸ¥çœ‹å‘½ä»¤ 1ubuntu2204 /? 2. è®¾ç½®é»˜è®¤ç™»å½•ç”¨æˆ· 1ubuntu2204 config --default-user root é‡æ–°å¯åŠ¨æŸ¥çœ‹ç»“æœ ![image-20230602125308631](https://tt-1316429231.cos.ap-nanjing.myqcloud.com/imgs/linux/202306021253674.png)","categories":[{"name":"Linux","slug":"Linux","permalink":"http://breadwinners.top/categories/Linux/"}],"tags":[{"name":"wsl","slug":"wsl","permalink":"http://breadwinners.top/tags/wsl/"},{"name":"wsl2","slug":"wsl2","permalink":"http://breadwinners.top/tags/wsl2/"}]},{"title":"flume è¿è¡Œæ—¶æŠ¥NoSuchMethodError com.google.common.base.Preconditions.checkArgument","slug":"flume è¿è¡Œæ—¶æŠ¥NoSuchMethodError","date":"2023-05-25T16:00:00.000Z","updated":"2023-06-28T14:55:13.349Z","comments":true,"path":"2023/05/26/flume è¿è¡Œæ—¶æŠ¥NoSuchMethodError/","link":"","permalink":"http://breadwinners.top/2023/05/26/flume%20%E8%BF%90%E8%A1%8C%E6%97%B6%E6%8A%A5NoSuchMethodError/","excerpt":"","text":"1ã€é‡åˆ°é—®é¢˜ä»Šå¤©åœ¨é…ç½®å¥½flumeï¼Œåœ¨è¿è¡Œflumeæ—¶æŠ¥äº†ä»¥ä¸‹é”™è¯¯ã€‚ 12023-05-26 16:39:56,359 (SinkRunner-PollingRunner-DefaultSinkProcessor) [ERROR - org.apache.flume.sink.hdfs.HDFSEventSink.process(HDFSEventSink.java:459)] process failedjava.lang.NoSuchMethodError: com.google.common.base.Preconditions.checkArgument(ZLjava/lang/String;Ljava/lang/Object;)V at org.apache.hadoop.conf.Configuration.set(Configuration.java:1357) at org.apache.hadoop.conf.Configuration.set(Configuration.java:1338) at org.apache.hadoop.conf.Configuration.setBoolean(Configuration.java:1679) at org.apache.flume.sink.hdfs.BucketWriter.open(BucketWriter.java:221) at org.apache.flume.sink.hdfs.BucketWriter.append(BucketWriter.java:572) at org.apache.flume.sink.hdfs.HDFSEventSink.process(HDFSEventSink.java:412) at org.apache.flume.sink.DefaultSinkProcessor.process(DefaultSinkProcessor.java:67) at org.apache.flume.SinkRunner$PollingRunner.run(SinkRunner.java:145) at java.lang.Thread.run(Thread.java:748)Exception in thread &quot;SinkRunner-PollingRunner-DefaultSinkProcessor&quot; java.lang.NoSuchMethodError: com.google.common.base.Preconditions.checkArgument(ZLjava/lang/String;Ljava/lang/Object;)V at org.apache.hadoop.conf.Configuration.set(Configuration.java:1357) at org.apache.hadoop.conf.Configuration.set(Configuration.java:1338) at org.apache.hadoop.conf.Configuration.setBoolean(Configuration.java:1679) at org.apache.flume.sink.hdfs.BucketWriter.open(BucketWriter.java:221) at org.apache.flume.sink.hdfs.BucketWriter.append(BucketWriter.java:572) at org.apache.flume.sink.hdfs.HDFSEventSink.process(HDFSEventSink.java:412) at org.apache.flume.sink.DefaultSinkProcessor.process(DefaultSinkProcessor.java:67) at org.apache.flume.SinkRunner$PollingRunner.run(SinkRunner.java:145) at java.lang.Thread.run(Thread.java:748) 2ã€è§£å†³é—®é¢˜ é‡åˆ°è¿™ç§é—®é¢˜ï¼Œæ— éä¸¤ç§æƒ…å†µï¼Œä¸€æ˜¯ ä¸¢å¤±jaråŒ…ï¼ŒäºŒæ˜¯ jaråŒ…å†²çªã€‚ ç”±äºå¯¹hadoopä»¥åŠflumeç‰ˆæœ¬é€‰æ‹©æ¯”è¾ƒéšæ„ã€‚çŒœæµ‹æ˜¯jaråŒ…å­˜åœ¨å†²çªã€‚æ‰¾åˆ°æŠ¥é”™çš„ç±» com.google.common.base.Preconditions ï¼Œé€šè¿‡æŸ¥è¯¢ è¯¥ç±»å­˜åœ¨ guava jaråŒ…ä¸­ã€‚flumeçš„libä¸­ &#x2F;opt&#x2F;flume&#x2F;apache-flume-1.9.0-bin&#x2F;lib ï¼ˆguava-11.0.2.jarï¼‰è€Œ hadoop çš„ lib ä¸­ &#x2F;opt&#x2F;hadoop&#x2F;hadoop-3.2.1&#x2F;share&#x2F;hadoop&#x2F;common&#x2F;lib&#x2F; ï¼ˆguava-27.0-jre.jarï¼‰ï¼Œåˆ é™¤ç‰ˆæœ¬ä½çš„ï¼Œå¹¶æ‹·è´é«˜ç‰ˆæœ¬çš„ã€‚ é—®é¢˜è§£å†³ã€‚ Google Guava","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"http://breadwinners.top/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"}],"tags":[{"name":"flume","slug":"flume","permalink":"http://breadwinners.top/tags/flume/"}]},{"title":"Sparkå®‰è£…éƒ¨ç½²","slug":"Sparkå®‰è£…éƒ¨ç½²","date":"2023-05-24T16:00:00.000Z","updated":"2023-06-01T07:08:13.866Z","comments":true,"path":"2023/05/25/Sparkå®‰è£…éƒ¨ç½²/","link":"","permalink":"http://breadwinners.top/2023/05/25/Spark%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/","excerpt":"","text":"1.å®‰è£…Sparkå°†æ–‡ä»¶ä¸Šä¼ åˆ°&#x2F;opt&#x2F;module&#x2F;ï¼Œè§£å‹å¹¶é‡å‘½å 123wget https://archive.apache.org/dist/spark/spark-3.0.0/spark-3.0.0-bin-hadoop3.2.tgztar -zxvf spark-3.0.0-bin-hadoop3.2.tgzmv spark-3.0.0-bin-hadoop3.2 spark-3.0.0 2.ç¼–è¾‘slaveså’Œspark-env.shæ–‡ä»¶123cd /opt/module/spark-3.0.0/conf/mv slaves.template slavesmv spark-env.sh.template spark-env.sh 1vi slaves åœ¨æ–‡ä»¶ä¸­æ·»åŠ é›†ç¾¤çš„ä¸»æœºåç§° 123hadoop102hadoop103hadoop104 1vi spark-env.sh 12å¯¼å…¥javaåœ°å€export JAVA_HOME=/home/jdk1.8.0_77 æ·»åŠ ç¯å¢ƒå˜é‡ 1vi /etc/profile 12export SPARK_HOME=/opt/module/spark-3.0.0export PATH=$PATH:$SPARK_HOME/sbin:$SPARK_HOME/bin æ¯å°è™šæ‹Ÿæœºéƒ½éœ€è¦é…ç½® 3.åˆ†å‘Spark1xsync /opt/module/spark-3.0.0 4.å¯åŠ¨Sparkå¯åŠ¨sparkå‰éœ€å…ˆå¯åŠ¨hadoopé›†ç¾¤ 123cd /opt/module/spark-3.0.0/sbin/start-all.sh jpsall æŸ¥çœ‹å„èŠ‚ç‚¹è¿›ç¨‹ï¼šä¸»èŠ‚ç‚¹:ä»èŠ‚ç‚¹ï¼šæµè§ˆå™¨è®¿é—®webé¡µé¢ï¼šä¸»æœºå:8080 ok!!","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"http://breadwinners.top/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"}],"tags":[{"name":"spark","slug":"spark","permalink":"http://breadwinners.top/tags/spark/"}]},{"title":"Sparkå®‰è£…sbt","slug":"sparkå®‰è£…sbt","date":"2023-05-24T16:00:00.000Z","updated":"2023-05-31T11:32:43.087Z","comments":true,"path":"2023/05/25/sparkå®‰è£…sbt/","link":"","permalink":"http://breadwinners.top/2023/05/25/spark%E5%AE%89%E8%A3%85sbt/","excerpt":"","text":"Sparkä¸­æ²¡æœ‰è‡ªå¸¦sbtï¼Œéœ€è¦[æ‰‹åŠ¨å®‰è£…sbtï¼Œæˆ‘çš„æ–¹æ³•æ˜¯ä¸‹è½½sbt-launch.jarï¼Œç„¶åå°†æºæ”¹ä¸ºå›½å†…æºï¼ˆaliyunï¼‰ï¼Œæˆ‘é€‰æ‹©å°†sbtå®‰è£…åœ¨&#x2F;usr&#x2F;local&#x2F;sbtä¸­ã€‚1234sudo mkdir /usr/local/sbtsudo chown -R hadoop /usr/local/sbt #username is hadoop.cd /usr/local/sbtmkdir sbtlaunch #store sbt-launch.jar 1.ä¸‹è½½sbt-launch.jar,å¹¶å­˜æ”¾è‡³&#x2F;usr&#x2F;local&#x2F;sbt&#x2F;sbtlaunch123cd /usr/local/sbt/sbtlaunchwget https://repo.typesafe.com/typesafe/ivy-releases/org.scala-sbt/sbt-launch/0.13.9/sbt-launch.jar -O ./sbt-launch.jar #download sbt-launch.jarunzip -q ./sbt-launch.jar #è§£å‹ 2.éœ€è¦ä¿®æ”¹å…¶ä¸­çš„.&#x2F;sbt&#x2F;sbt.boot.propertiesæ–‡ä»¶,å°†[repositories]å¤„ä¿®æ”¹ä¸ºå¦‚ä¸‹å†…å®¹ï¼šå³å¢åŠ ä¸€æ¡aliyun-nexusçš„é•œåƒã€‚12cd /usr/local/sbt/sbtlaunchvim ./sbt/sbt.boot.properties ä¿®æ”¹ä¸ºå¦‚ä¸‹123456[repositories] local aliyun-nexus: http://maven.aliyun.com/nexus/content/groups/public/ jcenter: https://jcenter.bintray.com/ typesafe-ivy-releases: https://repo.typesafe.com/typesafe/ivy-releases/, [organization]/[module]/[revision]/[type]s/[artifact](-[classifier]).[ext], bootOnly maven-central 3.åˆ é™¤åŸæ¥çš„sbt-launch.æ–‡ä»¶ï¼Œç„¶åé‡æ–°æ‰“åŒ…12rm ./sbt-launch.jar #delete the old jarjar -cfM ./sbt-launch.jar . #create new jar 4.åœ¨&#x2F;usr&#x2F;local&#x2F;sbtç›®å½•ä¸‹åˆ›å»ºsbtè„šæœ¬æ–‡ä»¶å¹¶èµ‹äºˆå¯æ‰§è¡Œæƒé™ï¼Œæ¥æ‰§è¡Œsbt-launch.jar12cd /usr/lcoal/sbtvim ./sbt #create sbt script æ·»åŠ å¦‚ä¸‹å†…å®¹:12SBT_OPTS=&quot;-Xms512M -Xmx1536M -Xss1M -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=256M&quot;java $SBT_OPTS -jar `dirname`/sbt-launch.jar &quot;$@&quot; #dirnameä¸ºè·¯å¾„å my dirname ï¼š &#x2F;usr&#x2F;local&#x2F;sbt&#x2F;sbtlaunch5.ä¿å­˜åï¼Œä¸º.&#x2F;sbtå¢åŠ å¯æ‰§è¡Œæƒé™:1chmod u+x ./sbt 6.æœ€åæ£€éªŒsbtæ˜¯å¦å¯ç”¨1./sbt sbt-version è¿™ä¸€æ­¥è¯·è€å¿ƒç­‰å¾… å‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/microsoft2014/article/details/54572502","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"http://breadwinners.top/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"}],"tags":[{"name":"spark","slug":"spark","permalink":"http://breadwinners.top/tags/spark/"},{"name":"sbt","slug":"sbt","permalink":"http://breadwinners.top/tags/sbt/"}]},{"title":"Linuxä¸­çš„å„ç§binç›®å½•","slug":"Linux/Linuxä¸­çš„å„ç§binç›®å½•","date":"2023-05-24T16:00:00.000Z","updated":"2023-05-31T11:16:43.747Z","comments":true,"path":"2023/05/25/Linux/Linuxä¸­çš„å„ç§binç›®å½•/","link":"","permalink":"http://breadwinners.top/2023/05/25/Linux/Linux%E4%B8%AD%E7%9A%84%E5%90%84%E7%A7%8Dbin%E7%9B%AE%E5%BD%95/","excerpt":"","text":"usrå®é™…ä¸Šæ˜¯Unix System Resource /usr/binç³»ç»Ÿé¢„è£…çš„ä¸€äº›å¯æ‰§è¡Œç¨‹åºï¼Œéšç³»ç»Ÿå‡çº§ä¼šæ”¹å˜ /usr/local/binç”¨æˆ·å®‰è£…çš„å¯æ‰§è¡Œç¨‹åºï¼Œä¸å—ç³»ç»Ÿå‡çº§å½±å“ï¼Œç”¨æˆ·ç¼–è¯‘å®‰è£…è½¯ä»¶æ—¶ï¼Œä¸€èˆ¬æ”¾åˆ°&#x2F;usr&#x2F;localç›®å½•ä¸‹ å¦‚æœä¸¤ä¸ªç›®å½•ä¸‹æœ‰ç›¸åŒçš„å¯æ‰§è¡Œç¨‹åºï¼Œè°ä¼˜å…ˆæ‰§è¡Œä¼šå—åˆ°PATHç¯å¢ƒå˜é‡çš„å½±å“ï¼Œä¸¾ä¸ªæ —å­ï¼šecho $PATHæŸ¥çœ‹å½“å‰ PATH ç¯å¢ƒå˜é‡/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/.local/bin:/root/bin:/usr/local/src/nodejs/bin:/usr/local/git/bin:/usr/bin/git/binè¿™é‡Œ/usr/local/git/binä¼˜å…ˆäº /usr/bin/git/bin /bin å­˜æ”¾æ‰€æœ‰ç”¨æˆ·çš†å¯ç”¨çš„ç³»ç»Ÿç¨‹åºï¼Œç³»ç»Ÿå¯åŠ¨æˆ–è€…ç³»ç»Ÿä¿®å¤æ—¶å¯ç”¨ï¼ˆåœ¨æ²¡æœ‰æŒ‚è½½ &#x2F;usr ç›®å½•æ—¶å°±å¯ä»¥ä½¿ç”¨ï¼‰ /sbin å­˜æ”¾è¶…çº§ç”¨æˆ·æ‰èƒ½ä½¿ç”¨çš„ç³»ç»Ÿç¨‹åº /usr/bin å­˜æ”¾æ‰€æœ‰ç”¨æˆ·éƒ½å¯ç”¨çš„åº”ç”¨ç¨‹åº /usr/sbin å­˜æ”¾è¶…çº§ç”¨æˆ·æ‰èƒ½ä½¿ç”¨çš„åº”ç”¨ç¨‹åº /usr/local/bin å­˜æ”¾æ‰€æœ‰ç”¨æˆ·éƒ½å¯ç”¨çš„ä¸æœ¬åœ°æœºå™¨æ— å…³çš„ç¨‹åº /usr/local/sbin å­˜æ”¾è¶…çº§ç”¨æˆ·æ‰èƒ½ä½¿ç”¨çš„ä¸æœ¬åœ°æœºå™¨æ— å…³çš„ç¨‹åº Linuxä¸­çš„æŸäº›é‡è¦çš„ç›®å½•ï¼š â€¢ä¸»ç›®å½•ï¼š/rootã€/home/username â€¢ç”¨æˆ·å¯æ‰§è¡Œæ–‡ä»¶ï¼š/binã€/usr/binã€/usr/local/bin â€¢ç³»ç»Ÿå¯æ‰§è¡Œæ–‡ä»¶ï¼š/sbinã€/usr/sbinã€/usr/local/sbin â€¢å…¶ä»–æŒ‚è½½ç‚¹ï¼š/mediaã€/mnt â€¢é…ç½®ï¼š/etc â€¢ä¸´æ—¶æ–‡ä»¶ï¼š/tmp â€¢å†…æ ¸å’ŒBootloaderï¼š/boot â€¢æœåŠ¡å™¨æ•°æ®ï¼š/varã€/srv â€¢ç³»ç»Ÿä¿¡æ¯ï¼š/procã€/sys â€¢å…±äº«åº“ï¼š/libã€/usr/libã€/usr/local/lib","categories":[{"name":"Linux","slug":"Linux","permalink":"http://breadwinners.top/categories/Linux/"}],"tags":[{"name":"binç›®å½•","slug":"binç›®å½•","permalink":"http://breadwinners.top/tags/bin%E7%9B%AE%E5%BD%95/"}]},{"title":".bashrcå’Œprofileå’Œprofile.dä¸é…ç½®ç¯å¢ƒå˜é‡","slug":"Linux/profileå’Œ.bashrcå’Œprofile.d","date":"2023-05-24T16:00:00.000Z","updated":"2023-05-31T10:56:30.566Z","comments":true,"path":"2023/05/25/Linux/profileå’Œ.bashrcå’Œprofile.d/","link":"","permalink":"http://breadwinners.top/2023/05/25/Linux/profile%E5%92%8C.bashrc%E5%92%8Cprofile.d/","excerpt":"","text":".bashrc æ–‡ä»¶è¯¦è§£ä½ç½®ï¼š ç³»ç»Ÿçº§çš„ä½äº/etc/bashrcï¼Œå¯¹æ‰€æœ‰ç”¨æˆ·ç”Ÿæ•ˆã€‚ ç”¨æˆ·çº§çš„ä½äº~/.bashrcæˆ–è€…/home/ç”¨æˆ·å/.bashrcï¼Œä»…å¯¹å½“å‰ç”¨æˆ·ç”Ÿæ•ˆã€‚ ä½œç”¨ï¼š bash æç¤ºç¬¦å…è®¸ä½ è‡ªå®šä¹‰ä½ çš„ç»ˆç«¯ï¼Œå¹¶è®©å®ƒåœ¨ä½ è¿è¡Œå‘½ä»¤æ—¶æ˜¾ç¤ºæç¤ºã€‚è‡ªå®šä¹‰çš„ bash æç¤ºç¬¦ç€å®èƒ½æé«˜ä½ åœ¨ç»ˆç«¯çš„å·¥ä½œæ•ˆç‡ã€‚ ç»™å‘½ä»¤èµ·åˆ«åï¼š 1alias catt=&quot;cat -n&quot; ä½¿å¤šä¸ªå‘½ä»¤å¯ä»¥ç»„åˆä½¿ç”¨ 1234md () &#123;mkdir -p $1cd $1&#125; å˜åŠ¨ bashrc æ˜¯éå¸¸ç›´æ¥ä¸”ä½é£é™©çš„ã€‚å³ä½¿ä½ ä¸€ä¸å°å¿ƒå…¨æç ¸äº†ï¼Œä½ ä¹Ÿå¯ä»¥éšæ—¶åˆ æ‰ bashrc æ–‡ä»¶ç„¶åé‡æ–°æ¥ä¸€éã€‚ profileä½ç½®ï¼š ç³»ç»Ÿçº§çš„ä½äº/etc/profileï¼Œç”¨äºè®¾ç½®ç³»ç»Ÿçº§çš„ç¯å¢ƒå˜é‡å’Œå¯åŠ¨ç¨‹åºï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸‹é…ç½®ä¼šå¯¹æ‰€æœ‰ç”¨æˆ·ç”Ÿæ•ˆã€‚ ç”¨æˆ·çº§çš„ä½äº~/.bash_profileï¼Œç”¨äºè®¾ç½®ç”¨æˆ·çº§çš„ç¯å¢ƒå˜é‡å’Œå¯åŠ¨ç¨‹åºï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸‹é…ç½®ä¼šå¯¹å•ä¸ªç”¨æˆ·ç”Ÿæ•ˆã€‚ å½“ç”¨æˆ·ç™»å½•ï¼ˆloginï¼‰æ—¶ï¼Œæ–‡ä»¶ä¼šè¢«æ‰§è¡Œï¼Œå¹¶ä»/etc/profile.dç›®å½•çš„é…ç½®æ–‡ä»¶ä¸­æŸ¥æ‰¾shellè®¾ç½®ã€‚ åœ¨profileä¸­è®¾ç½®ç¯å¢ƒå˜é‡ä¸€èˆ¬ä¸å»ºè®®åœ¨**/etc/profile**æ–‡ä»¶ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œå› ä¸ºåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æ·»åŠ çš„è®¾ç½®ä¼šå¯¹æ‰€æœ‰ç”¨æˆ·èµ·ä½œç”¨ã€‚ ä¸€èˆ¬åœ¨/etc/profile.dä¸­æ·»åŠ ç¯å¢ƒå˜é‡ /etc/profile.d/æ¯”/etc/profileå¥½ç»´æŠ¤ï¼Œä¸æƒ³è¦ä»€ä¹ˆå˜é‡ç›´æ¥åˆ é™¤/etc/profile.d/ä¸‹å¯¹åº”çš„shellè„šæœ¬å³å¯ï¼Œä¸ç”¨åƒ/etc/profileéœ€è¦æ”¹åŠ¨æ­¤æ–‡ä»¶ å½“æ·»åŠ ç¯å¢ƒå˜é‡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼æ·»åŠ ï¼š 1234567891011ä¸‹é¢ä»¥jdkçš„å®‰è£…ä¸ºä¾‹vim /etc/profile.d/java.shåœ¨æ–°çš„java.shä¸­è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š#set java environmentJAVA_HOME=/opt/module/jdk1.8.0_212PATH=ï¼„JAVA_HOME/bin:ï¼„PATHexport JAVA_HOME PATH 12345#JAVA_HOMEæ˜¯ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œç”¨äºæŒ‡å®šJavaçš„å®‰è£…ç›®å½•export JAVA_HOME=/opt/module/jdk1.8.0_212æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œç”¨äºè®¾ç½®JAVA_HOMEçš„å€¼ä¸º/opt/module/jdk1.8.0_212ï¼Œä¹Ÿå°±æ˜¯Javaçš„å®‰è£…ç›®å½•export PATH=$PATH:$JAVA_HOME/binæ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œç”¨äºå°†$JAVA_HOME/binæ·»åŠ åˆ°PATHç¯å¢ƒå˜é‡ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä»»ä½•ç›®å½•ä¸‹æ‰§è¡ŒJavaçš„å¯æ‰§è¡Œç¨‹åºï¼Œå¦‚javaå’Œjavac æ·»åŠ æ—¶ï¼Œå¯ä»¥åœ¨è¡Œå°¾ä½¿ç”¨;å·ï¼Œä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ã€‚ ä¸€ä¸ªå˜é‡åå¯ä»¥å¯¹åº”å¤šä¸ªå˜é‡å€¼ï¼Œå¤šä¸ªå˜é‡å€¼éœ€è¦ä½¿ç”¨:è¿›è¡Œåˆ†éš”ã€‚ æ·»åŠ ç¯å¢ƒå˜é‡åï¼Œéœ€è¦é‡æ–°ç™»å½•æ‰èƒ½ç”Ÿæ•ˆï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ source å‘½ä»¤åˆ·æ–°ç«‹å³ç”Ÿæ•ˆï¼š 1source /etc/profile æŸ¥çœ‹æ˜¯å¦ç”Ÿæ•ˆå¯ä»¥ä½¿ç”¨ echo å‘½ä»¤ï¼š 12echo $JAVA_HOME/opt/module/jdk1.8.0_212 å·®å¼‚/etc/profileï¼Œ/etc/bashrc æ˜¯ç³»ç»Ÿå…¨å±€ç¯å¢ƒå˜é‡è®¾å®šï¼› ~/.profileï¼Œ~/.bashrcç”¨æˆ·å®¶ç›®å½•ä¸‹çš„ç§æœ‰ç¯å¢ƒå˜é‡è®¾å®šã€‚ å½“ç™»å…¥ç³»ç»Ÿæ—¶å€™è·å¾—ä¸€ä¸ª shell è¿›ç¨‹æ—¶ï¼Œå…¶è¯»å–ç¯å¢ƒè®¾å®šæ¡£å¦‚ä¸‹ï¼š é¦–å…ˆè¯»å…¥å…¨å±€ç¯å¢ƒå˜é‡è®¾å®šæ¡£/etc/profileï¼Œç„¶åæ ¹æ®å…¶å†…å®¹è¯»å–é¢å¤–çš„è®¾å®šçš„æ–‡æ¡£ï¼Œå¦‚/etc/profile.då’Œ/etc/inputrcï¼› æ ¹æ®ä¸åŒä½¿ç”¨è€…å¸å·ï¼Œäºå…¶å®¶ç›®å½•å†…è¯»å–~/.bash_profileï¼› è¯»å–å¤±è´¥åˆ™ä¼šè¯»å–~/.bash_loginï¼› å†æ¬¡å¤±è´¥åˆ™è¯»å–~/.profileï¼ˆè¿™ä¸‰ä¸ªæ–‡æ¡£è®¾å®šåŸºæœ¬ä¸Šæ— å·®åˆ«ï¼Œä»…è¯»å–ä¸Šæœ‰ä¼˜å…ˆå…³ç³»ï¼‰ï¼› æœ€åï¼Œæ ¹æ®ç”¨æˆ·å¸å·è¯»å–~/.bashrcã€‚ è‡³äº~/.profileä¸~/.bashrcéƒ½å…·æœ‰ä¸ªæ€§åŒ–å®šåˆ¶åŠŸèƒ½ï¼Œä½†~/.profileå¯ä»¥è®¾å®šæœ¬ç”¨æˆ·ä¸“æœ‰çš„è·¯å¾„ã€ç¯å¢ƒå˜é‡ç­‰ï¼Œå®ƒåªèƒ½ç™»å…¥çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ã€‚ ~/.bashrcä¹Ÿæ˜¯æŸç”¨æˆ·ä¸“æœ‰è®¾å®šæ–‡æ¡£ï¼Œå¯ä»¥è®¾å®šè·¯å¾„ã€å‘½ä»¤åˆ«åï¼Œæ¯æ¬¡ shell script çš„æ‰§è¡Œéƒ½ä¼šä½¿ç”¨å®ƒä¸€æ¬¡ã€‚ è®¾ç½®ç¨‹åºä¸ºä»»æ„ç›®å½•å¯ä»¥æ‰§è¡Œ å¯ä»¥åƒä¸Šæ–‡é…ç½®javaç¯å¢ƒå˜é‡ä¸€æ ·é…ç½® åœ¨/usr/binæˆ–è€…~/binç›®å½•ä¸‹å†™shellè„šæœ¬ï¼ŒæŒ‡å‘éœ€è¦æ‰§è¡Œçš„æ–‡ä»¶ è®°å¾—source","categories":[{"name":"Linux","slug":"Linux","permalink":"http://breadwinners.top/categories/Linux/"}],"tags":[{"name":".bashrc","slug":"bashrc","permalink":"http://breadwinners.top/tags/bashrc/"}]},{"title":"CentOs7å®‰è£…Redis","slug":"Linux/linuxå®‰è£…redis","date":"2023-05-22T16:00:00.000Z","updated":"2023-05-23T14:30:39.812Z","comments":true,"path":"2023/05/23/Linux/linuxå®‰è£…redis/","link":"","permalink":"http://breadwinners.top/2023/05/23/Linux/linux%E5%AE%89%E8%A3%85redis/","excerpt":"","text":"å‰ææ¡ä»¶ï¼šLinuxè£…æœ‰gccç¼–è¯‘å™¨ ###1. å®˜ç½‘ä¸‹è½½redis 1wget http://download.redis.io/releases/redis-5.0.14.tar.gz 2. å®‰è£…è§£å‹ï¼š 123tar -xzvf redis-5.0.14.tar.gzcd redis-5.0.14make PREFIX=/usr/local/redis install //å®‰è£… 3.ä½¿ç”¨12redis-server // å¯åŠ¨redis-cli // è¿æ¥ è¾“å…¥ping è¾“å‡ºä¸ºï¼š ä»£è¡¨å®‰è£…æˆåŠŸ 4.Javaè¿œç¨‹è¿æ¥ä½¿ç”¨éœ€è¦å…³é—­redisçš„é˜²è¿œç¨‹è¿æ¥ï¼Œå¦åˆ™ä¼šæŠ¥é”™redisè¿è¡Œåœ¨protectedæ¨¡å¼ä¸‹ æ‰¾åˆ°redis.confæ–‡ä»¶ â€‹ æ‰¾åˆ°bind 127.0.0.1ï¼Œæ³¨é‡Šæ‰ è¿æ¥ä¸Šredisåï¼Œè¾“å…¥config get daemonizeå’Œconfig get protected-mode éƒ½ä¿®æ”¹ä¸ºno 12config set daemonize noconfig set protected-mode no åœ¨pomæ–‡ä»¶ä¸­æ·»åŠ redisçš„ç›¸å…³ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;redis.clients&lt;/groupId&gt; &lt;artifactId&gt;jedis&lt;/artifactId&gt; &lt;version&gt;2.9.0&lt;/version&gt;&lt;/dependency&gt; å®éªŒæ“ä½œéƒ¨åˆ†ï¼š 123456789101112131415161718package redis;import java.util.Map;import redis.clients.jedis.Jedis;public class Redis1 &#123; public static void main(String[] args) &#123; Jedis jedis = new Jedis(&quot;hadoop102&quot;, 6379); jedis.hset(&quot;student.scofield&quot;, &quot;English&quot;, &quot;45&quot;); jedis.hset(&quot;student.scofield&quot;, &quot;Math&quot;, &quot;89&quot;); jedis.hset(&quot;student.scofield&quot;, &quot;Computer&quot;, &quot;100&quot;); Map&lt;String, String&gt; value = jedis.hgetAll(&quot;student.scofield&quot;); for (Map.Entry&lt;String, String&gt; entry : value.entrySet()) &#123; System.out.println(entry.getKey() + &quot;:&quot; + entry.getValue()); &#125; &#125;&#125; 12345678910111213package redis;import redis.clients.jedis.Jedis;public class Redis2 &#123; public static void main(String[] args) &#123; Jedis jedis = new Jedis(&quot;hadoop102&quot;, 6379); String value = jedis.hget(&quot;student.scofield&quot;, &quot;English&quot;); System.out.println(&quot;scofield&#x27;s English score is: &quot; + value); &#125;&#125;","categories":[{"name":"Linux","slug":"Linux","permalink":"http://breadwinners.top/categories/Linux/"}],"tags":[{"name":"redis","slug":"redis","permalink":"http://breadwinners.top/tags/redis/"}]},{"title":"centosè®¾ç½®é™æ€IP","slug":"Linux/centosè®¾å®šé™æ€IP","date":"2023-05-15T16:00:00.000Z","updated":"2023-06-23T08:24:07.367Z","comments":true,"path":"2023/05/16/Linux/centosè®¾å®šé™æ€IP/","link":"","permalink":"http://breadwinners.top/2023/05/16/Linux/centos%E8%AE%BE%E5%AE%9A%E9%9D%99%E6%80%81IP/","excerpt":"","text":"é…ç½®ç½‘å¡ 1vim /etc/sysconfig/network-scripts/ifcfg-ens33 æ ¹æ®æƒ…å†µè¾“å…¥ä»¥ä¸‹å†…å®¹ 123456789101112131415161718192021TYPE=&quot;Ethernet&quot;PROXY_METHOD=&quot;none&quot;BROWSER_ONLY=&quot;no&quot;BOOTPROTO=&quot;static&quot;DEFROUTE=&quot;yes&quot;IPV4_FAILURE_FATAL=&quot;no&quot;IPV6INIT=&quot;yes&quot;IPV6_AUTOCONF=&quot;yes&quot;IPV6_DEFROUTE=&quot;yes&quot;IPV6_FAILURE_FATAL=&quot;no&quot;IPV6_ADDR_GEN_MODE=&quot;stable-privacy&quot;NAME=&quot;ens33&quot;UUID=&quot;46cddd88-b100-416c-ab9c-5c19f1e3a7ef&quot;DEVICE=&quot;ens33&quot;ONBOOT=&quot;yes&quot;IPADDR=192.168.153.102GATEWAY=192.168.153.2DNS1=114.114.114.114NETMASK=255.255.255.0","categories":[{"name":"Linux","slug":"Linux","permalink":"http://breadwinners.top/categories/Linux/"}],"tags":[{"name":"é™æ€ip","slug":"é™æ€ip","permalink":"http://breadwinners.top/tags/%E9%9D%99%E6%80%81ip/"}]},{"title":"typora+picgoä¸Šä¼ å›¾ç‰‡æŠ¥é”™","slug":"typora+picgoå›¾åºŠ","date":"2023-05-09T16:00:00.000Z","updated":"2023-05-22T11:42:43.017Z","comments":true,"path":"2023/05/10/typora+picgoå›¾åºŠ/","link":"","permalink":"http://breadwinners.top/2023/05/10/typora+picgo%E5%9B%BE%E5%BA%8A/","excerpt":"","text":"error1&quot;success&quot;.false, &quot;message&quot;.&quot;upload error. see C.Users\\lAdministratorlAppDatallRoamingllpicgollpicgo.log for more picgoæ—¥å¿—ï¼š 1234567891011------Error Stack Begin------Error: read file E:\\Boke\\source\\_posts\\C:\\Users\\wutao\\AppData\\Roaming\\Typora\\typora-user-images\\image-20230521041042868.png error at D:\\application\\tools\\PicGo\\resources\\app.asar\\node_modules\\picgo\\dist\\index.cjs.js:1:38189 at async Promise.all (index 0) at async Object.handle (D:\\application\\tools\\PicGo\\resources\\app.asar\\node_modules\\picgo\\dist\\index.cjs.js:1:37138) at async $e.doTransform (D:\\application\\tools\\PicGo\\resources\\app.asar\\node_modules\\picgo\\dist\\index.cjs.js:1:16679) at async $e.start (D:\\application\\tools\\PicGo\\resources\\app.asar\\node_modules\\picgo\\dist\\index.cjs.js:1:15916) at async Tt.upload (D:\\application\\tools\\PicGo\\resources\\app.asar\\node_modules\\picgo\\dist\\index.cjs.js:1:71270) at async Object.upload (D:\\application\\tools\\PicGo\\resources\\app.asar\\background.js:2:653584) at async jn (D:\\application\\tools\\PicGo\\resources\\app.asar\\background.js:2:656251) at async D:\\application\\tools\\PicGo\\resources\\app.asar\\background.js:2:657340 è§£å†³åŠæ³•ï¼š ç›´æ¥åœ¨hexoçš„_postæ–‡ä»¶å¤¹ä¸­å†™markdownä¼šä¼ ä¸ä¸Šå»å›¾ç‰‡ï¼Œä½†æ˜¯åœ¨å¤–é¢å†™å¯ä»¥æ­£å¸¸ä¸Šä¼ å›¾ç‰‡ï¼Œæ‰€ä»¥å¯ä»¥åœ¨å¤–é¢å†™å¥½äº†åœ¨æ”¾ä¿¡hexoä¸­","categories":[{"name":"bugs","slug":"bugs","permalink":"http://breadwinners.top/categories/bugs/"}],"tags":[{"name":"picgo","slug":"picgo","permalink":"http://breadwinners.top/tags/picgo/"}]},{"title":"nginxç»‘å®šå­åŸŸå","slug":"Linux/nginxç»‘å®šå­åŸŸå","date":"2023-05-04T16:00:00.000Z","updated":"2023-05-22T13:01:22.125Z","comments":true,"path":"2023/05/05/Linux/nginxç»‘å®šå­åŸŸå/","link":"","permalink":"http://breadwinners.top/2023/05/05/Linux/nginx%E7%BB%91%E5%AE%9A%E5%AD%90%E5%9F%9F%E5%90%8D/","excerpt":"","text":"æ£€æŸ¥ nginx é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆé‡è¦ï¼‰æ³¨æ„ï¼šè¿™ä¸€æ­¥éå¸¸å…³é”®ï¼Œå¦‚æœä¿®æ”¹äº†é”™è¯¯çš„ nginx é…ç½®æ–‡ä»¶ï¼Œå°†å¯¼è‡´æ‰€æœ‰ä¿®æ”¹å‡æ— æ•ˆï¼Œç”šè‡³ä¼šè®©æ‚¨åœ¨æ¢ç´¢äº†æ•°ä¸ªå°æ—¶åä»æ— æ³•å¾—çŸ¥ä¿®æ”¹æ— æ•ˆçš„åŸå› æ˜¯ä»€ä¹ˆã€‚ ä½¿ç”¨å‘½ä»¤ 1$ nginx -V æ¥æŸ¥çœ‹ nginx çš„ä¸€äº›é…ç½®ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼ˆæ‚¨çš„å’Œåšä¸»çš„æ˜¾ç¤ºå†…å®¹å¯èƒ½ä¸åŒï¼Œä¸å½±å“ï¼‰ï¼š 12345nginx version: nginx/1.12.2built by gcc 4.8.5 20150623 (Red Hat 4.8.5-16) (GCC)built with OpenSSL 1.0.2k-fips 26 Jan 2017TLS SNI support enabledconfigure arguments: --prefix=/usr/share/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --http-client-body-temp-path=/var/lib/nginx/tmp/client_body --http-proxy-temp-path=/var/lib/nginx/tmp/proxy --http-fastcgi-temp-path=/var/lib/nginx/tmp/fastcgi --http-uwsgi-temp-path=/var/lib/nginx/tmp/uwsgi --http-scgi-temp-path=/var/lib/nginx/tmp/scgi --pid-path=/run/nginx.pid --lock-path=/run/lock/subsys/nginx --user=nginx --group=nginx --with-file-aio --with-ipv6 --with-http_auth_request_module --with-http_ssl_module --with-http_v2_module --with-http_realip_module --with-http_addition_module --with-http_xslt_module=dynamic --with-http_image_filter_module=dynamic --with-http_geoip_module=dynamic --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_degradation_module --with-http_slice_module --with-http_stub_status_module --with-http_perl_module=dynamic --with-mail=dynamic --with-mail_ssl_module --with-pcre --with-pcre-jit --with-stream=dynamic --with-stream_ssl_module --with-google_perftools_module --with-debug --with-cc-opt=&#x27;-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic&#x27; --with-ld-opt=&#x27;-Wl,-z,relro -specs=/usr/lib/rpm/redhat/redhat-hardened-ld -Wl,-E&#x27; å…¶ä¸­åªéœ€è¦å…³æ³¨åˆ° --conf-path=/etc/nginx/nginx.conf è¿™ä¸ªæ¡ç›®ï¼Œè¿™ä¸ªæ¡ç›®æŒ‡æ˜äº†å½“å‰ nginx çš„ç¨‹åºä½¿ç”¨çš„é»˜è®¤é…ç½®æ–‡ä»¶ã€‚ æ–°å»ºä¸€ä¸ªç«™ç‚¹é…ç½®æ–‡ä»¶æ ¹æ®ä¸Šé¢çš„é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œé¦–å…ˆåˆ‡æ¢ç›®å½•åˆ° nginx çš„é…ç½®è·¯å¾„ä¸‹ï¼š 1$ cd /etc/nginx ç„¶åæ–°å»ºä¸€ä¸ªç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œå»ºè®®æ”¾ç½®åœ¨ nginx é…ç½®ç›®å½•ä¸‹çš„ vhost ç›®å½•å†…ï¼Œå¦‚æœæ‚¨å½“å‰æ²¡æœ‰æ­¤ç›®å½•ï¼Œå¯æ–°å»ºä¸€ä¸ªï¼š 12345678$ pwd/etc/nginx$ sudo mkdir vhost$ lsconf.d fastcgi_params mime.types scgi_params vhostdefault.d fastcgi_params.default mime.types.default scgi_params.default win-utffastcgi.conf koi-utf nginx.conf uwsgi_paramsfastcgi.conf.default koi-win nginx.conf.default uwsgi_params.default æ³¨æ„ï¼š/etc æ˜¯ç³»ç»Ÿç›®å½•ï¼Œä¸€èˆ¬ç”¨æˆ·ä¸å…·æœ‰ä¿®æ”¹æƒé™ï¼Œéœ€è¦ä½¿ç”¨ sudo ä»¥ç®¡ç†å‘˜æƒé™åœ¨è¯¥ç›®å½•ä¸­è¿›è¡Œä¿®æ”¹ï¼Œå¦‚åˆ›å»ºã€ä¿®æ”¹æ–‡ä»¶ï¼Œåˆ›å»ºæ–‡ä»¶å¤¹ç­‰æ“ä½œã€‚ è¿›å…¥åˆšåˆšåˆ›å»ºçš„ vhost ç›®å½•ï¼Œæ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚ mysite.confï¼Œè¯¥é…ç½®æ–‡ä»¶æ–‡ä»¶åæ— é™åˆ¶ï¼Œæœ€å¥½æ˜¯ä½ çš„ç½‘ç«™åç§°ä¹‹ç±»çš„ï¼Œä¾¿äºè¾¨è®¤ï¼Œä½†ä¸€å®šæ˜¯ä»¥ .conf ä¸ºåç¼€ã€‚ 12345678$ pwd/etc/nginx$ cd vhost/$ pwd/etc/nginx/vhost$ sudo touch mysite.conf$ lsmysite.conf trans.conf å…¶ä¸­ï¼Œtouch å‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ªåä¸º mysite.conf çš„é…ç½®æ–‡ä»¶ï¼ˆç©ºæ–‡ä»¶ï¼‰ï¼Œæ˜¯æœ¬æ–‡ä¸­è¦ä»‹ç»çš„é…ç½®æ–‡ä»¶ï¼Œå¦ä¸€ä¸ªæ˜¯åšä¸»æ­£åœ¨è¿è¡Œçš„ç½‘ç«™ï¼Œæ— éœ€åœ¨æ„ã€‚ ä¿®æ”¹ç½‘ç«™é…ç½®æ–‡ä»¶ä¿¡æ¯æœ¬æ–‡ä¸­å°†å»ºç«‹ä¸€ä¸ªåä¸º mysite çš„ç½‘ç«™ï¼Œç½‘ç«™æ ¹ç›®å½•ä¸º /home/www/mysiteï¼Œç½‘ç«™ç»‘å®šåŸŸå mysite.jinhangdev.cnã€‚ ä½¿ç”¨ä»»æ„æ–‡å­—ç¼–è¾‘å™¨æ‰“å¼€ mysite.confï¼Œè¾“å…¥å¦‚ä¸‹å†…å®¹å¹¶ä¿å­˜ï¼ˆæ³¨æ„éœ€ç®¡ç†å‘˜æƒé™ï¼‰ï¼š 1234567server &#123; listen 80; # ç½‘ç«™çš„ç«¯å£ä¸€èˆ¬ä¸º 80ï¼Œå¯ä»¥ä¸å…¶ä»–ç½‘ç«™ä¸€èµ·ä½¿ç”¨è¯¥ç«¯å£ server_name mysite.jinhangdev.cn; # è¦ç»‘å®šçš„åŸŸåï¼ˆæˆ–å­åŸŸåï¼‰ root /home/www/mysite; # è¯¥ç½‘ç«™çš„æ ¹ç›®å½• location / &#123; # ä¸ç”¨ç®¡ &#125;&#125; ä»¥ä¸Šå†…å®¹ä¸ºä¸€ä¸ª server çš„å†…å®¹ï¼Œä¸‹é¢è®² nginx.conf é…ç½®çš„æ—¶å€™ä¼šå†åŒºåˆ†æŠŠä¸€è¡Œé…ç½®å†™åœ¨ server æˆ–å†™åœ¨ server å¤–çš„åŒºåˆ«ã€‚ 12345678910111213$ pwd/etc/nginx/vhost$ lsmysite.conf trans.conf$ sudo vim mysite.conf$ cat mysite.confserver &#123; listen 80; server_name mysite.jinhangdev.cn; root /home/www/mysite; location /&#123; &#125;&#125; ä¸Šé¢æˆ‘ä»¬å·²ç»æ–°å»ºå¥½äº†ä¸€ä¸ªç½‘ç«™ï¼Œè¯¥ç½‘ç«™ä½¿ç”¨æœåŠ¡å™¨çš„ 80 ç«¯å£ï¼Œç»‘å®šçš„åŸŸåä¸º mysite.jinhangdev.cnï¼Œç½‘ç«™æ ¹ç›®å½•ä½¿ç”¨ /home/www/mysiteã€‚ ä¿®æ”¹ nginx é…ç½®æ–‡ä»¶ä¸‹é¢å¯¹å…³é”®æ–‡ä»¶ nginx.conf è¿›è¡Œé…ç½®ï¼Œå»ºè®®åœ¨ä¿®æ”¹å‰å…ˆå¤‡ä»½ï¼Œå…»æˆå¥½çš„ä¹ æƒ¯ï¼š 123$ pwd/etc/nginx$ sudo cp nginx.conf nginx.conf.bak å°†åŸæœ‰é…ç½®å­˜å‚¨åˆ° nginx.conf.bak åï¼Œç»§ç»­ä¸‹é¢æ“ä½œï¼Œè‹¥åé¢å‘ç°ä¿®æ”¹å‡ºé”™ï¼Œå¯å°† nginx.conf.bak æ”¹åå› nginx.conf ä½¿ç”¨ã€‚ ä»¥è¶…çº§ç”¨æˆ·æƒé™ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ nginx.confï¼š 1$ sudo vim nginx.conf å¹¶è¿›è¡Œç¼–è¾‘ã€‚ Nginx é…ç½®æ–‡ä»¶çš„ç»“æ„æˆ‘ä»¬è¿™é‡Œåªä»‹ç»å’Œé…ç½®åŸŸåç»‘å®šç›¸å…³çš„éƒ¨åˆ†ç»“æ„ï¼Œå³ http å°èŠ‚ï¼š 123http &#123; ï¼ˆå„ç§é…ç½®ï¼‰&#125; è®¾ç½®åœ¨æ­¤å¤„çš„é…ç½®éƒ½æ˜¯ http çš„å…¨å±€é…ç½®ï¼Œå¦‚æœè¦å¯¹æŸä¸ªç½‘ç«™å•ç‹¬é…ç½®ï¼Œåˆ™éœ€è¦å¯¹æ¯ä¸ª server åˆ†åˆ«è®¾ç½®ï¼š 12345678910http &#123; (æ­¤å¤„çš„é…ç½®æ˜¯å…¨å±€çš„é…ç½®å‚æ•°) server &#123; (æ­¤å¤„çš„é…ç½®æ˜¯æœ¬ server çš„é…ç½®å‚æ•°) &#125; server &#123; (æ­¤å¤„çš„é…ç½®æ˜¯æœ¬ server çš„é…ç½®å‚æ•°) &#125; (æ­¤å¤„çš„é…ç½®æ˜¯å…¨å±€çš„é…ç½®å‚æ•°)&#125; ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸æå€¡æŠŠæ‰€æœ‰ server éƒ½å±•å¼€å†™åœ¨ nginx.conf ä¸­ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨ä¸€å¥ include è¯­å¥ï¼ŒæŠŠ vhost ä¸‹æ‰€æœ‰ç½‘ç«™çš„é…ç½®éƒ½å¼•ç”¨è¿›æ¥ã€‚æ³¨æ„ï¼šinclude å‘½ä»¤åªæ˜¯ç®€å•åœ°è¿›è¡Œæ–‡æœ¬æ›¿æ¢ã€‚ äºæ˜¯æˆ‘ä»¬åœ¨ nginx.conf çš„ http èŠ‚å†…éƒ¨çš„æœ«å°¾å†™ä¸Šä¸€å¥ï¼š 1234http &#123; ï¼ˆå‰é¢çš„è‹¥å¹²é…ç½®ï¼‰ include /etc/nginx/vhost/*.conf;&#125; è¿™æ ·ä¸€æ¥ï¼Œvhost ä¸‹çš„æ‰€æœ‰ .conf æ–‡ä»¶å‡è¢«æ–‡æœ¬æ›¿æ¢å¼åœ°å¼•å…¥åˆ° nginx.conf é‡Œé¢äº†ã€‚ é‡å¯ nginx æœåŠ¡","categories":[{"name":"è®ºæ–‡","slug":"è®ºæ–‡","permalink":"http://breadwinners.top/categories/%E8%AE%BA%E6%96%87/"}],"tags":[{"name":"nginx","slug":"nginx","permalink":"http://breadwinners.top/tags/nginx/"}]},{"title":"ææ²è¯´è¯»è®ºæ–‡","slug":"ææ²è¯»è®ºæ–‡","date":"2023-05-02T16:00:00.000Z","updated":"2023-05-02T16:18:51.776Z","comments":true,"path":"2023/05/03/ææ²è¯»è®ºæ–‡/","link":"","permalink":"http://breadwinners.top/2023/05/03/%E6%9D%8E%E6%B2%90%E8%AF%BB%E8%AE%BA%E6%96%87/","excerpt":"","text":"title abstract introduction method experiments conclusion ç¬¬ä¸€éï¼šæ ‡é¢˜ã€æ‘˜è¦ã€ç»“è®ºã€‚å¯ä»¥çœ‹ä¸€çœ‹æ–¹æ³•å’Œå®éªŒéƒ¨åˆ†é‡è¦çš„å›¾å’Œè¡¨ã€‚è¿™æ ·å¯ä»¥èŠ±è´¹åå‡ åˆ†é’Ÿæ—¶é—´äº†è§£åˆ°è®ºæ–‡æ˜¯å¦é€‚åˆä½ çš„ç ”ç©¶æ–¹å‘ã€‚ç¬¬äºŒéï¼šç¡®å®šè®ºæ–‡å€¼å¾—è¯»ä¹‹åï¼Œå¯ä»¥å¿«é€Ÿçš„æŠŠæ•´ä¸ªè®ºæ–‡è¿‡ä¸€éï¼Œä¸éœ€è¦çŸ¥é“æ‰€æœ‰çš„ç»†èŠ‚ï¼Œéœ€è¦äº†è§£é‡è¦çš„å›¾å’Œè¡¨ï¼ŒçŸ¥é“æ¯ä¸€ä¸ªéƒ¨åˆ†åœ¨å¹²ä»€ä¹ˆï¼Œåœˆå‡ºç›¸å…³æ–‡çŒ®ã€‚è§‰å¾—æ–‡ç« å¤ªéš¾ï¼Œå¯ä»¥è¯»å¼•ç”¨çš„æ–‡çŒ®ã€‚ç¬¬ä¸‰éï¼šæå‡ºä»€ä¹ˆé—®é¢˜ï¼Œç”¨ä»€ä¹ˆæ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®éªŒæ˜¯æ€ä¹ˆåšçš„ã€‚åˆä¸Šæ–‡ç« ï¼Œå›å¿†æ¯ä¸€ä¸ªéƒ¨åˆ†åœ¨è®²ä»€ä¹ˆã€‚","categories":[{"name":"è®ºæ–‡","slug":"è®ºæ–‡","permalink":"http://breadwinners.top/categories/%E8%AE%BA%E6%96%87/"},{"name":"ç®—æ³•","slug":"è®ºæ–‡/ç®—æ³•","permalink":"http://breadwinners.top/categories/%E8%AE%BA%E6%96%87/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"è®ºæ–‡","slug":"è®ºæ–‡","permalink":"http://breadwinners.top/tags/%E8%AE%BA%E6%96%87/"}]},{"title":"éƒ¨ç½²hexoåˆ°CentOs7","slug":"éƒ¨ç½²hexoåˆ°centos","date":"2023-05-02T16:00:00.000Z","updated":"2023-05-22T12:00:55.155Z","comments":true,"path":"2023/05/03/éƒ¨ç½²hexoåˆ°centos/","link":"","permalink":"http://breadwinners.top/2023/05/03/%E9%83%A8%E7%BD%B2hexo%E5%88%B0centos/","excerpt":"","text":"git å®‰è£… 1yum install git æµ‹è¯• 1git --version è¾“å‡ºç±»ä¼¼ä¸‹é¢çš„ç»“æœåˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸ 1git version 1.8.3.1 åˆ›å»º git ç”¨æˆ· 1adduser git å»ºç«‹è£¸ä»“ 12345su gitcd /home/git # è¿›å…¥ git ç”¨æˆ·ç›®å½•mkdir blog &amp;&amp; chown -R git:git &amp;&amp; cd git# åˆ›å»ºåšå®¢æ–‡ä»¶å¤¹ï¼Œï¼Œè®¾ç½®æƒé™,ä½œä¸º nginx web ç›®å½•mkdir projects &amp;&amp; chown -R git:git &amp;&amp; cd project # åˆ›å»ºé¡¹ç›®ç›®å½•ï¼Œè®¾ç½®æƒé™å¹¶è¿›å…¥git init --bare hexo.git &amp;&amp; chown -R git:git # åˆ›å»ºåšå®¢è£¸ä»“ï¼Œè®¾ç½®æƒé™ æ·»åŠ  SSH Keyï¼Œé€šè¿‡ ssh é“¾æ¥ä»“åº“ 12cd /home/git # å›åˆ° git ç”¨æˆ·ç›®å½•mkdir .ssh # å­˜æ”¾ ssh key åœ¨æœ¬åœ°æœºå™¨ï¼ˆå†™åšå®¢çš„ç”µè„‘ï¼‰ä¸Šåˆ›å»ºçš„ ssh å…¬é’¥ï¼ˆå·²æœ‰è¯·å¿½ç•¥ï¼‰ 1ssh-keygen -o -t rsa -b 4096 -C &quot;email@example.com&quot; # æ›¿æ¢é‚®ç®± å¤åˆ¶å…¬é’¥ 1pbcopy &lt; ~/.ssh/id_rsa.pub åœ¨è¿œç¨‹æœåŠ¡å™¨ï¼Œä½¿ç”¨ vim ç¼–è¾‘æ–‡ä»¶ï¼Œvim ç”¨æ³•è¯·å‚è€ƒï¼š 1vi /home/git/.ssh/authorized_keys æŒ‰ i è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œç²˜è´´å…¬é’¥ï¼ŒæŒ‰ escï¼Œè¾“å…¥ :wq ä¿å­˜å¹¶é€€å‡ºã€‚ hexo é…ç½®å‘å¸ƒé€‰é¡¹ ä¿®æ”¹ _config.yml ï¼ˆæœ¬çº§ hexo é…ç½®æ–‡ä»¶ï¼‰ 1234deploy: type: git repo: git@ip:/home/git/projects/hexo.git # ip ä¸ºæœåŠ¡å™¨ip branch: master è‡ªåŠ¨éƒ¨ç½²ï¼ˆæœåŠ¡å™¨ï¼‰ 123cd /home/git/projects/hexo.git/hooks # è¿›å…¥ hook ç›®å½•mv post-update.sample post-update # é‡å‘½å post-updatevi post-update # vim è¿›è¡Œç¼–è¾‘ æŒ‰ i è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œåœ¨æœ€åä¸€è¡Œä¸Šé¢ç²˜è´´ä¸‹é¢æ–‡å­—ï¼ŒæŒ‰ escï¼Œè¾“å…¥ :wq ä¿å­˜å¹¶é€€å‡ºã€‚ 1git --work-tree=/home/git/blog --git-dir=/home/git/projects/hexo.git checkout -f åœ¨æœ¬åœ° hexo ç›®å½•æ‰§è¡Œå‘å¸ƒå‘½ä»¤ 1hexo g -d æŸ¥çœ‹æœåŠ¡å™¨ blog ç›®å½•ä¸­æ˜¯å¦æœ‰æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰è¯·æ£€æŸ¥æ­¥éª¤æ˜¯å¦é”™è¯¯ã€‚ æºä»£ç å­˜æ”¾ åœ¨æˆ‘ä»¬æœåŠ¡å™¨ä¸Šå­˜æ”¾çš„æ˜¯ç¼–è¯‘åçš„æ–‡ä»¶ï¼Œæºæ–‡ä»¶æˆ‘å»ºè®®å­˜æ”¾åœ¨ github ç§æœ‰ä»“åº“ã€‚ nginxä»¥ centos ä¸ºä¾‹ï¼š å®‰è£… 1yum install -y nginx å¯åŠ¨ 1service nginx start æµ‹è¯• 1wget http://127.0.0.1 å¯ä»¥æ­£å¸¸ä¸‹è½½ index.html æ–‡ä»¶åˆ™è¯´æ˜å¯åŠ¨æˆåŠŸã€‚ é…ç½® 1vi /etc/nginx/nginx.conf æŠŠ user nginx ä¿®æ”¹ä¸ºuser rootï¼Œ server æŒ‰ç…§ä¿®æ”¹ä¸¤å¤„é…ç½®ï¼š 1234root /home/git/blog;location / &#123; index index.html;&#125; é‡å¯ nginx 1service nginx restart åœ¨æµè§ˆå™¨é”®å…¥ä½ çš„æœåŠ¡å™¨ ip åœ°å€æˆ–åŸŸåï¼Œå³å¯æ­£å¸¸è®¿é—®ã€‚ httpsä½¿ç”¨ certbot è‡ªåŠ¨è·å–è¯ä¹¦ï¼Œå‚è€ƒ https://certbot.eff.org/ å®‰è£… Certbot 1sudo yum install certbot python2-certbot-nginx è·å–è¯ä¹¦å¹¶è‡ªåŠ¨é…ç½® 1sudo certbot --nginx æŒ‰ç…§æç¤ºè¾“å…¥å³å¯ è‡ªåŠ¨ç»­ç­¾ 1echo &quot;0 0,12 * * * root python -c &#x27;import random; import time; time.sleep(random.random() * 3600)&#x27; &amp;&amp; certbot renew -q&quot; | sudo tee -a /etc/crontab &gt; /dev/null ç»“æŸ","categories":[],"tags":[]},{"title":"centos7å®‰è£…Mysqlåˆå§‹å¯†ç é—®é¢˜","slug":"Linux/centos7å®‰è£…Mysqlåˆå§‹å¯†ç é—®é¢˜","date":"2023-05-02T16:00:00.000Z","updated":"2023-05-20T21:13:30.249Z","comments":true,"path":"2023/05/03/Linux/centos7å®‰è£…Mysqlåˆå§‹å¯†ç é—®é¢˜/","link":"","permalink":"http://breadwinners.top/2023/05/03/Linux/centos7%E5%AE%89%E8%A3%85Mysql%E5%88%9D%E5%A7%8B%E5%AF%86%E7%A0%81%E9%97%AE%E9%A2%98/","excerpt":"","text":"ä¸€èˆ¬æ¥è¯´ï¼Œcentos7æš—è½¬MySQLï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨yum -y install mysqlæ¥å®ç°ï¼Œä½†æ˜¯çªç„¶ç¢°åˆ°äº†ä¸çŸ¥é“åˆå§‹rootå¯†ç çš„é—®é¢˜ï¼Œè®°å½•ä¸€ä¸‹è§£å†³è¿‡ç¨‹ ç½‘ä¸Šéƒ½ä¼šè¯´grep â€˜temporary passwordâ€™ /var/log/mysqld.logå°±å¯ä»¥æŸ¥çœ‹ä¸´æ—¶å¯†ç ï¼Œä½†æ˜¯ç³»ç»Ÿå´è¯´ No such file of directory è§£å†³æ–¹æ³• æŸ¥çœ‹æ˜¯å¦å®‰è£…äº†mysqlæœåŠ¡ï¼ˆæœ‰åˆ™è‡ªè¡Œå¸è½½åˆ é™¤ï¼‰ã€‚ 12yum list installed mysql* rpm â€“qa|grep mysql* æŸ¥çœ‹æœåŠ¡å™¨ä¸Šæ˜¯å¦æœ‰ç°æˆçš„å®‰è£…åŒ…ã€‚ 1yum list mysql* å»mysqlå®˜ç½‘çš„yumèµ„æºåº“æ‰¾åˆ°å¯¹åº”çš„rpmæ–‡ä»¶çš„ä¸‹è½½é“¾æ¥ åœ¨linuxä¸­ä¸‹è½½ã€å®‰è£…yumèµ„æºã€‚ 1rpm -ivh èµ„æºä¸‹è½½é“¾æ¥(https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm) æŸ¥çœ‹å½“å‰mysqlçš„å½“å‰ç‰ˆæœ¬ 1yum info mysql-community-server å®‰è£…mysql 1yum -y install mysql-community-server æ³¨ï¼šå¦‚æœå‡ºç° åŸå› æ˜¯Mysqlçš„GPGå‡çº§äº†ï¼Œéœ€è¦é‡æ–°è·å– 1rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022 MySQLå®‰è£…å®Œæˆå¦‚ä¸‹ï¼š å®‰è£…å®Œæˆåï¼Œå¯åŠ¨MySQL 12systemctl start mysqldsystemctl status mysqld // æ£€æŸ¥MySQLçŠ¶æ€ æŸ¥è¯¢mysqlåˆå§‹å¯†ç  1grep â€˜temporary passwordâ€™ /var/log/mysqld.log ä¿®æ”¹å¯†ç  1mysqladmin -u root -p password Access denied for user â€˜rootâ€˜@â€™localhostâ€™ (using password: YES)æŠ¥é”™ 1ã€å…³é—­mysqlæœåŠ¡ service mysqld stop 2ã€æ‰¾åˆ°&#x2F;etc&#x2F;my.cnf ,åœ¨æœ€åä¸€è¡Œæ·»åŠ skip-grant-tablesï¼ˆç”¨äºå…å¯†ç ç™»å½•ï¼‰ vim &#x2F;etc&#x2F;my.cnf 3ã€é‡å¯mysqlæœåŠ¡ service mysqld start 4ã€æ­£å¸¸ç™»å½•mysqlï¼ˆä¸ä½¿ç”¨å¯†ç ï¼‰ mysql -u root 123456789mysql&gt; show databases;mysql&gt; use mysql;mysql&gt; ALTER USER &#x27;ç”¨æˆ·å&#x27;@&#x27;localhost&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;æ–°å¯†ç &#x27;;mysql&gt; flush privileges; --åˆ·æ–°MySQLçš„ç³»ç»Ÿæƒé™ç›¸å…³è¡¨mysql&gt; exit; 5ã€æ‰¾åˆ°&#x2F;etc&#x2F;my.cnf ,åˆ é™¤skip-grant-table6ã€é‡å¯mysqlæœåŠ¡service mysqld restart7ã€æ­£å¸¸ç™»å½•æµ‹è¯•mysql -u root -p å°±å¯ä»¥äº† å¤‡æ³¨ï¼šrootè´¦å·ä¸€èˆ¬åªæ·»åŠ äº†localhostè®¿é—®(è¿™æ˜¯æ¨èçš„)ï¼Œå¦‚è‹¥è°ƒè¯•é˜¶æ®µä¸æƒ³é€šè¿‡sshè·³æ¿è¿æ¥ï¼Œå»ºè®®å¼€ä¸ªæ–°è´¦å·ã€‚ æ­¥éª¤1ï¼šæŸ¥çœ‹rootè´¦å·çš„ipè®¿é—®æƒé™ï¼ˆæ‰§è¡Œç»“æœï¼šlocalhostå’Œ127.0.0.1ï¼Œæ˜¯æ— æ³•ä»å¤–éƒ¨è¿æ¥çš„ï¼‰ 1select user,host,plugin from user; 1SELECT host FROM mysql.user WHERE User = &#x27;root&#x27;; æ­¥éª¤2ï¼šæ–°å»ºè´¦å·å¹¶æŒ‡å®šå¯†ç å’Œipï¼ˆä½¿ç”¨ % é€šé…ç¬¦è¡¨ç¤ºå…è®¸ä»»ä½•ipè®¿é—®ï¼‰ 1CREATE USER &#x27;my_name&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;my_password&#x27;;GRANT ALL PRIVILEGES ON *.* TO &#x27;my_name&#x27;@&#x27;%&#x27;; æ­¥éª¤3ï¼šåˆ·æ–°é…ç½® 1FLUSH PRIVILEGES; è¿™æ ·my_nameå°±å¯ä»¥ä¸é€šè¿‡sshè·³æ¿ç›´æ¥è¿æ¥äº†ã€‚","categories":[{"name":"bugs","slug":"bugs","permalink":"http://breadwinners.top/categories/bugs/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://breadwinners.top/tags/mysql/"}]},{"title":"è§£å†³åˆ‡æ¢ç”¨æˆ·å‡ºç°bash-4.2$é—®é¢˜","slug":"Linux/è§£å†³Linuxç”¨æˆ·å‡ºç°bash-4.2$é—®é¢˜","date":"2023-05-02T16:00:00.000Z","updated":"2023-06-13T15:32:49.979Z","comments":true,"path":"2023/05/03/Linux/è§£å†³Linuxç”¨æˆ·å‡ºç°bash-4.2$é—®é¢˜/","link":"","permalink":"http://breadwinners.top/2023/05/03/Linux/%E8%A7%A3%E5%86%B3Linux%E7%94%A8%E6%88%B7%E5%87%BA%E7%8E%B0bash-4.2$%E9%97%AE%E9%A2%98/","excerpt":"","text":"##ã€é—®é¢˜æè¿°ã€‘ linuxä¸­åˆ›å»ºäº†ä¸€ä¸ªxhhç”¨æˆ·ï¼Œç„¶åä½¿ç”¨suå‘½ä»¤åˆ‡æ¢ç”¨æˆ·åï¼Œç»ˆç«¯æç¤ºç¬¦æ˜¾ç¤ºæˆâ€œbash-4.2$â€è€Œä¸æ˜¯[root@localhost xhh]#ï¼Œå¯¼è‡´llç­‰å‘½ä»¤æ— æ³•æ‰§è¡Œã€‚ 123[root@localhost hadoop] # su hadoopbash-4.2$ llbash: ll: æœªæ‰¾åˆ°å‘½ä»¤ ã€åŸå› ã€‘æ²¡æœ‰åœ¨homeç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„ç›®å½•å¯¼è‡´ã€‚ ã€è§£å†³æ–¹æ³•ã€‘ä½¿ç”¨rootç”¨æˆ·ç™»å½•ï¼Œå†homeç›®å½•ä¸­åˆ›å»ºç”¨æˆ·å¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œmkdir &#x2F;home&#x2F;userï¼Œè¿™é‡Œçš„useræ˜¯ç”¨æˆ·çš„åå­—ï¼Œç„¶åæ‰§è¡Œå¦‚ä¸‹ä¸¤ä¸ªå‘½ä»¤ï¼š 12cp /etc/skel/.bashrc /home/hadoopcp /etc/skel/.bash_profile /home/hadoop æ‰§è¡ŒæˆåŠŸåï¼Œå†æ¬¡ä½¿ç”¨suå‘½ä»¤åˆ‡æ¢ç”¨æˆ·ï¼Œå‘ç°ä¸€åˆ‡æ­£å¸¸ã€‚","categories":[{"name":"Linux","slug":"Linux","permalink":"http://breadwinners.top/categories/Linux/"}],"tags":[{"name":"bash-4.2$","slug":"bash-4-2","permalink":"http://breadwinners.top/tags/bash-4-2/"}]},{"title":"æ ‡é¢˜æ¨¡æ¿","slug":"test","date":"2023-05-01T02:08:40.150Z","updated":"2023-05-02T16:18:26.746Z","comments":true,"path":"2023/05/01/test/","link":"","permalink":"http://breadwinners.top/2023/05/01/test/","excerpt":"","text":"1hexo g -d This is a video test post. Youtube Vimeo Headers1234567891011121314# H1## H2### H3#### H4##### H5###### H6Alternatively, for H1 and H2, an underline-ish style:Alt-H1======Alt-H2------ H1H2H3H4H5H6Alternatively, for H1 and H2, an underline-ish style: Alt-H1Alt-H2Emphasis","categories":[{"name":"åˆ†ç±»","slug":"åˆ†ç±»","permalink":"http://breadwinners.top/categories/%E5%88%86%E7%B1%BB/"}],"tags":[{"name":"æ ‡ç­¾å","slug":"æ ‡ç­¾å","permalink":"http://breadwinners.top/tags/%E6%A0%87%E7%AD%BE%E5%90%8D/"}]},{"title":"æ•°è®º","slug":"æ•°è®º","date":"2023-04-25T16:00:00.000Z","updated":"2023-07-11T01:45:53.092Z","comments":true,"path":"2023/04/26/æ•°è®º/","link":"","permalink":"http://breadwinners.top/2023/04/26/%E6%95%B0%E8%AE%BA/","excerpt":"","text":"p,qæ˜¯æ­£æ•´æ•°ä¸”äº’è´¨ï¼Œé‚£ä¹ˆä¸èƒ½å‡‘å‡ºçš„æœ€å¤§æ•´æ•°ä¸º(p - 1)(q - 1) - 1","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"æ•°è®º","slug":"æ•°è®º","permalink":"http://breadwinners.top/tags/%E6%95%B0%E8%AE%BA/"},{"name":"ä¸èƒ½å‡‘å‡ºçš„æœ€å¤§æ•´æ•°","slug":"ä¸èƒ½å‡‘å‡ºçš„æœ€å¤§æ•´æ•°","permalink":"http://breadwinners.top/tags/%E4%B8%8D%E8%83%BD%E5%87%91%E5%87%BA%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B4%E6%95%B0/"}]},{"title":"DPåŠ¨æ€è§„åˆ’é—®é¢˜","slug":"DP","date":"2023-04-24T16:00:00.000Z","updated":"2023-07-11T01:37:44.960Z","comments":true,"path":"2023/04/25/DP/","link":"","permalink":"http://breadwinners.top/2023/04/25/DP/","excerpt":"","text":"å…¨æ–°åˆ†æDPé—®é¢˜æ–¹å¼ä»é›†åˆè§’åº¦æ¥è€ƒè™‘DPé—®é¢˜ï¼šé—«å¼æ€è€ƒæ³• ä¾æ®æœ€åä¸€æ­¥æ¥åˆ’åˆ† ä»å®šä¹‰å‡ºå‘ ï¼Œåˆ†åˆ«æ±‚å‡ºé›†åˆå·¦å³ä¸¤è¾¹çš„æœ€å¤§å€¼ æ‘˜èŠ±ç”Ÿ 123456789101112131415161718192021222324252627282930#include &lt;iostream&gt;using namespace std;const int N = 105;int a[N][N], f[N][N];int T, R, C;int main() &#123; cin &gt;&gt; T; while (T--) &#123; cin &gt;&gt; R &gt;&gt; C; for (int i = 1; i &lt;= R; i++) &#123; for (int j = 1; j &lt;= C; j++) &#123; cin &gt;&gt; a[i][j]; &#125; &#125; // f[i][j]æŒ‡çš„æ˜¯åˆ°(i, j)çš„æœ€å¤§èŠ±ç”Ÿæ•° for (int i = 1; i &lt;= R; i++) &#123; for (int j = 1; j &lt;= C; j++) &#123; f[i][j] = max(f[i - 1][j], f[i][j - 1]) + a[i][j]; &#125; &#125; cout &lt;&lt; f[R][C] &lt;&lt; endl; &#125; return 0;&#125; æ•°å¡”é—®é¢˜123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051#include &lt;algorithm&gt;#include &lt;cstdio&gt;#include &lt;iostream&gt;using namespace std;const int N = 20;int n;int a[N][N], dp[N][N], step[N][N];void findRounte() &#123; for (int i = 1;i &lt;= n;i++) &#123; dp[n][i] = a[n][i]; &#125; for (int i = n - 1; i &gt;= 1; i--) &#123; for (int j = 1; j &lt;= i; j++) &#123; if (dp[i + 1][j] &lt; dp[i + 1][j + 1]) &#123; step[i][j] = 0; dp[i][j] = a[i][j] + dp[i + 1][j]; &#125; else &#123; step[i][j] = 1; dp[i][j] = a[i][j] + dp[i + 1][j + 1]; &#125; &#125; &#125;&#125;void printRounte() &#123; cout &lt;&lt; &quot;æœ€å°æ•°å€¼ä¸ºï¼š&quot; &lt;&lt; dp[1][1] &lt;&lt; endl; int i, j = 1; for (i = 1; i &lt; n; i++) &#123; if (step[i][j] == 1) &#123; cout &lt;&lt; a[i][j] &lt;&lt; &quot; -R-&gt; &quot;; j++; &#125; else &#123; cout &lt;&lt; a[i][j] &lt;&lt; &quot; -L-&gt; &quot;; &#125; &#125; cout &lt;&lt; a[i][j];&#125;int main() &#123; // DP æ•°å¡”é—®é¢˜ cin &gt;&gt; n; for (int i = 1; i &lt;= n; i++) &#123; for (int j = 1; j &lt;= i; j++) &#123; cin &gt;&gt; a[i][j]; &#125; &#125; findRounte(); printRounte(); return 0;&#125; â€‹ ä»ä¸Šå¾€ä¸‹DP1 èƒŒåŒ…é—®é¢˜ç‰©å“æ¡ä»¶ï¼š 1dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - w[i]] + v[i]); è§£é‡Šï¼šåœ¨è£…å…¥w[i]é‡é‡çš„ç‰©å“åå‰©ä¸‹çš„[j - w[i]]çš„ç©ºé—´èƒ½è£…çš„ç‰©å“ä»·å€¼ï¼ˆå¯ä»¥æŸ¥è¡¨å¾—åˆ°ï¼‰åŠ ä¸Šw[i]ç‰©å“çš„ä»·å€¼v[i] 12345678910111213141516171819202122232425262728293031323334353637383940414243444546#include &lt;iostream&gt;using namespace std;#include &lt;algorithm&gt;const int N = 100;int main() &#123; // dpèƒŒåŒ… int n, bagV; // n = 4, bagV = 8; int w[N] = &#123;0&#125;; int v[N] = &#123;0&#125;; int dp[N][N] = &#123;&#123;0&#125;&#125;; cin &gt;&gt; n &gt;&gt; bagV; for (int i = 1; i &lt;= n; i++) &#123; cin &gt;&gt; w[i]; &#125; for (int i = 1; i &lt;= n; i++) &#123; cin &gt;&gt; v[i]; &#125; for (int i = 1; i &lt;= n; i++) &#123; for (int j = 1; j &lt;= bagV; j++) &#123; if (j &lt; w[i]) dp[i][j] = dp[i - 1][j]; else dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - w[i]] + v[i]); &#125; &#125; // æ ¸å¿ƒä»£ç å¯ä»¥å†™æˆï¼š /* dp[i][j] = dp[i - 1][j]; if (j &gt;= w[i]) dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - w[i]] + v[i]); */ // åŠ¨æ€è§„åˆ’è¡¨çš„è¾“å‡º for (int i = 0; i &lt;= n; i++) &#123; for (int j = 0; j &lt;= bagV; j++) &#123; cout &lt;&lt; dp[i][j] &lt;&lt; &#x27; &#x27;; &#125; cout &lt;&lt; endl; &#125; puts(&quot;***************************&quot;); cout &lt;&lt; dp[n][bagV]; return 0;&#125; å®Œå…¨èƒŒåŒ…é—®é¢˜&#x3D;&#x3D;æ¯ç§ç‰©å“å¯ä»¥é€‰æ— é™å¤šä»¶&#x3D;&#x3D; 123456789101112131415161718192021222324#include&lt;iostream&gt;using namespace std;const int N = 1010;int f[N][N];int v[N],w[N];int main()&#123; int n,m; cin&gt;&gt;n&gt;&gt;m; for(int i = 1 ; i &lt;= n ;i ++) &#123; cin&gt;&gt;v[i]&gt;&gt;w[i]; &#125; for(int i = 1 ; i&lt;=n ;i++) for(int j = 0 ; j&lt;=m ;j++) &#123; for(int k = 0 ; k*v[i]&lt;=j ; k++) f[i][j] = max(f[i][j],f[i-1][j-k*v[i]]+k*w[i]); &#125; cout&lt;&lt;f[n][m]&lt;&lt;endl;&#125; å¤šé‡èƒŒåŒ…é—®é¢˜æœ‰ N ç§ç‰©å“å’Œä¸€ä¸ªå®¹é‡æ˜¯ V çš„èƒŒåŒ…ã€‚ ç¬¬ i ç§ç‰©å“æœ€å¤šæœ‰ si ä»¶ï¼Œæ¯ä»¶ä½“ç§¯æ˜¯ viï¼Œä»·å€¼æ˜¯ wiã€‚ æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä½¿ç‰©å“ä½“ç§¯æ€»å’Œä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”ä»·å€¼æ€»å’Œæœ€å¤§ã€‚è¾“å‡ºæœ€å¤§ä»·å€¼ã€‚ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°ï¼ŒNï¼ŒVç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç‰©å“ç§æ•°å’ŒèƒŒåŒ…å®¹ç§¯ã€‚ æ¥ä¸‹æ¥æœ‰ N è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•° vi,wi,siï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç¬¬ iii ç§ç‰©å“çš„ä½“ç§¯ã€ä»·å€¼å’Œæ•°é‡ã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§ä»·å€¼ã€‚ æ•°æ®èŒƒå›´ 0&lt;N,Vâ‰¤10000&lt;vi,wi,siâ‰¤100 è¾“å…¥æ ·ä¾‹ 123454 51 2 32 4 13 4 34 5 2 è¾“å‡ºæ ·ä¾‹ï¼š 110 &#x3D;&#x3D;å¯ä»¥å–å¤šä»¶ä¸‹&#x3D;&#x3D; 12345678910111213141516171819202122#include &lt;iostream&gt;#include &lt;algorithm&gt;using namespace std;const int N = 110;int n,m;int v[N],w[N],s[N];int f[N][N];int main()&#123; cin&gt;&gt;n&gt;&gt;m; for(int i = 1;i &lt;= n;i ++) cin&gt;&gt;v[i]&gt;&gt;w[i]&gt;&gt;s[i]; for(int i = 1;i &lt;= n;i ++)&#123; for(int j = 0;j &lt;= m;j ++)&#123; for(int k = 0;k &lt;= s[i];k ++)&#123; if(j &gt;= v[i] * k) f[i][j] = max(f[i][j],f[i - 1][j - k * v[i]] + w[i] * k); &#125; &#125; &#125; cout&lt;&lt;f[n][m]&lt;&lt;endl; return 0;&#125; åˆ†ç»„èƒŒåŒ…é—®é¢˜1234567891011121314151617181920212223242526272829#include &lt;bits/stdc++.h&gt;using namespace std;const int N = 110;int f[N][N]; // åªä»å‰iç»„ç‰©å“ä¸­é€‰ï¼Œå½“å‰ä½“ç§¯å°äºç­‰äºjçš„æœ€å¤§å€¼int v[N][N], w[N][N], s[N]; // vä¸ºä½“ç§¯ï¼Œwä¸ºä»·å€¼ï¼Œsä»£è¡¨ç¬¬iç»„ç‰©å“çš„ä¸ªæ•°int n, m, k;int main() &#123; cin &gt;&gt; n &gt;&gt; m; for (int i = 1; i &lt;= n; i++) &#123; cin &gt;&gt; s[i]; for (int j = 0; j &lt; s[i]; j++) &#123; cin &gt;&gt; v[i][j] &gt;&gt; w[i][j]; // è¯»å…¥ &#125; &#125; for (int i = 1; i &lt;= n; i++) &#123; // æšä¸¾ç‰©å“çš„ç§ç±» for (int j = 0; j &lt;= m; j++) &#123; // æšä¸¾èƒŒåŒ…çš„å®¹é‡ f[i][j] = f[i - 1][j]; // ä¸é€‰ for (int k = 0; k &lt; s[i]; k++) &#123; if (j &gt;= v[i][k]) f[i][j] = max(f[i][j], f[i - 1][j - v[i][k]] + w[i][k]); &#125; &#125; &#125; cout &lt;&lt; f[n][m] &lt;&lt; endl;&#125; çŸ©é˜µè¿ä¹˜å‚è€ƒ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071#include &lt;iostream&gt;using namespace std;/*è‡ªåº•å‘ä¸Šçš„æ¨å‡ºçŸ©é˜µè¿ä¹˜çš„æœ€ä¼˜è§£å…ˆä»ä¸¤ä¸ªçŸ©é˜µç›¸ä¹˜å¼€å§‹ï¼Œè€Œåä¸‰ä¸ªçŸ©é˜µç›¸ä¹˜ï¼Œå››ä¸ª......ç›´åˆ°æ¨å‡ºç›®æ ‡é•¿åº¦çš„æœ€ä¼˜è§£ ï¼Œå³å‡è®¾ä¸€ä¸ªçŸ©é˜µé“¾ï¼Œåˆå§‹é•¿åº¦ä¸º2ï¼Œç®—å‡ºæ‰€æœ‰ç›¸é‚»çŸ©é˜µç›¸ä¹˜çš„è®¡ç®—æ¬¡æ•°ï¼Œè€Œåä½¿å…¶é•¿åº¦ä¸º3...4...ç›´åˆ°ç›®æ ‡é•¿åº¦çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š m[i][j] = min&#123;m[i][k]+m[k+1][j]+p[i-1]*p[k]*p[j]&#125; i&lt;=k&lt;j i&lt;j m[i][j] = 0 i == j;*/#define LEN 5 // çŸ©é˜µä¸ªæ•°// çŸ©é˜µè¿ä¹˜å‡½æ•°ï¼Œæ‰¾åˆ°æœ€ä¼˜è§£void MatrixChain(int *p, int m[][LEN + 1], int s[][LEN + 1]) &#123; for (int i = 0; i &lt; LEN + 1; i++) m[i][i] = 0; // åˆå§‹åŒ–ï¼Œå¯¹è§’çº¿å…ƒç´ ç½®é›¶ï¼Œå³å½“çŸ©é˜µé“¾é•¿åº¦ä¸º1æ—¶ï¼ˆåªæœ‰ä¸€ä¸ªçŸ©é˜µï¼‰ä¸ç”¨ä¹˜ï¼Œä¸ºé›¶ for (int r = 2; r &lt;= LEN; r++) &#123; // rè¡¨ç¤ºçŸ©é˜µé“¾çš„é•¿åº¦ï¼Œä»2å¼€å§‹,ä¸¤ä¸ªçŸ©é˜µç›¸ä¹˜ï¼Œè€Œå3...4...5... for (int i = 1; i &lt;= LEN - r + 1; i++) &#123; // iæ˜¯çŸ©é˜µé“¾çš„é¦–ä¸ªçŸ©é˜µï¼Œå°äºçŸ©é˜µä¸ªæ•°å‡çŸ©é˜µé“¾é•¿åº¦åŠ ä¸€ int j = i + r - 1; // jæ˜¯çŸ©é˜µé“¾çš„æœ€åä¸€ä¸ªå…ƒç´  m[i][j] = m[i][i] + m[i + 1][j] + p[i - 1] * p[i] * p[j]; // m[i][j]æ˜¯å­ç»“æ„ï¼Œä»æœ€å·¦è¾¹å¼€å§‹æ¨ s[i][j] = i; // æ ‡è®°æ–­å¼€çš„ä½ç½® for (int k = i + 1; k &lt; j; k++) &#123; // kæ˜¯iå’Œjç›´æ¥çš„æ–­å¼€ç‚¹ï¼Œæ˜¯åœ¨iå’Œjä¹‹é—´çš„å­ç»“æ„ ï¼Œé€šè¿‡kçš„å¾ªç¯æ‰¾åˆ°æœ€ä¼˜çš„è§£ int t = m[i][k] + m[k + 1][j] + p[i - 1] * p[k] * p[j]; // çŠ¶æ€è½¬ç§»æ–¹ç¨‹ if (t &lt; m[i][j]) &#123; m[i][j] = t; // æ›´æ–°æœ€ä¼˜è§£ s[i][j] = k; // æ›´æ–°æ–­å¼€ç‚¹ &#125; &#125; &#125; &#125;&#125;// å›æº¯å‡½æ•°ï¼Œæ ¹æ®s[i][j]æ•°ç»„æ ‡è®°çš„ä½ç½®ï¼Œå›æº¯æ‰¾åˆ°æ–­å¼€çš„ä½ç½®void Traceback(int i, int j, int s[][LEN + 1]) &#123; if (i == j) &#123; // å½“iä¸jç›¸ç­‰ è¯´æ˜å›æº¯åˆ°è¯¥çŸ©é˜µçš„ä½ç½®äº† cout &lt;&lt; &quot;A&quot; &lt;&lt; i; &#125; else &#123; cout &lt;&lt; &quot;(&quot;; Traceback(i, s[i][j], s); // ä»å°¾å¾€å¤´å›æº¯ Traceback(s[i][j] + 1, j, s); // ä»æ–­ç‚¹å¾€åå›æº¯ cout &lt;&lt; &quot;)&quot;; &#125;&#125;// è¾“å‡ºå‡½æ•°void output(int t[][LEN + 1]) &#123; for (int i = 1; i &lt;= LEN; i++) &#123; for (int j = 1; j &lt;= LEN; j++) &#123; // cout &lt;&lt; &quot; &quot; &lt;&lt; t[i][j] &lt;&lt; &quot; &quot;; printf(&quot;%6d&quot;, t[i][j]); &#125; cout &lt;&lt; endl; &#125;&#125;int main(void) &#123; int p[LEN + 1] = &#123;8, 6, 22, 3, 4, 10&#125;; // çŸ©é˜µçš„ç»´åº¦åˆ†åˆ«æ˜¯2*3,3*4,4*5,5*6,6*7ï¼ŒLEN+1ä¸ªæ•°è¡¨ç¤ºLENä¸ªçŸ©é˜µ int m[LEN + 1][LEN + 1] = &#123;0&#125;; // è®°å½•æœ€ä¼˜å­ç»“æ„çš„äºŒç»´æ•°ç»„ int s[LEN + 1][LEN + 1] = &#123;0&#125;; // è®°å½•æœ€ä¼˜è§£å¯¹åº”çš„æ‹¬å·çš„ä½ç½® MatrixChain(p, m, s); cout &lt;&lt; endl; output(m); cout &lt;&lt; endl; output(s); cout &lt;&lt; endl; cout &lt;&lt; &quot;outcome:&quot; &lt;&lt; endl; Traceback(1, LEN, s); cout &lt;&lt; endl; return 0;&#125; æ‹”æ²³é—®é¢˜é¢˜ç›®ï¼šn ä¸ªäººå‚åŠ æ‹”æ²³æ¯”èµ›ï¼Œæ¯ä¸ªäººæœ‰è‡ªå·±çš„é‡é‡ï¼Œç°åœ¨éœ€è¦æŠŠä»–ä»¬åˆ†æˆä¸¤ç»„è¿›è¡Œæ¯”èµ›ï¼Œæ¯ä¸ªäººå±äºå…¶ä¸­çš„ä¸€ä¸ªç»„ã€‚ä¸ºä½¿æ¯”èµ›å…¬å¹³ï¼Œæ±‚ä½¿å¾—ä¸¤ç»„é‡é‡å·®æœ€å°çš„åˆ†é…ã€‚ è¿™ä¸€é¢˜æ˜¯ä¸€é“äºŒç»´è´¹ç”¨çš„åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·è½¬åŒ–è¿™ä¸ªé—®é¢˜ï¼šå°†nä¸ªç‰©å“æ”¾åˆ°ä¸€ä¸ªå®¹é‡ä¸ºn&#x2F;2çš„èƒŒåŒ…ï¼Œæ¯ä¸ªç‰©å“å ä¸€ä¸ªç©ºé—´ï¼Œè¿™ä¸ªèƒŒåŒ…æ‰€èƒ½æ‰¿å—çš„é‡é‡æ˜¯ï¼ˆæ‰€æœ‰ç‰©å“æ€»å’Œï¼‰&#x2F;2 ï¼Œç„¶åæ±‚è¿™ä¸ªèƒŒåŒ…æœ€å¤šèƒ½æ”¾å¤šé‡çš„ç‰©å“ï¼Œè¿™æ ·å°±æˆåŠŸè½¬åŒ–æˆä¸€ä¸ªèƒŒåŒ…é—®é¢˜äº†ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸º 1dp[i][j]=max(dp[i-1][j],dp[i-1][j-array[i]]+array[i]) 1234567891011121314151617181920212223// çœ‹ä¸æ‡‚çš„ä»£ç ï¼Œä¸€ç»´dpæ•°æ®è§£å†³äº†åˆ«äººç”¨äºŒç»´dpæ•°ç»„çš„é—®é¢˜#include &lt;algorithm&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;int w[10050], dp[10050];int main() &#123; int n, t; cin &gt;&gt; n; int sum = 0; for (int i = 1; i &lt;= n; i++) &#123; cin &gt;&gt; w[i]; sum += w[i]; &#125; t = sum / 2; for (int i = 1; i &lt;= n; i++) for (int j = t; j &gt;= w[i]; j--) dp[j] = max(dp[j], dp[j - w[i]] + w[i]); cout &lt;&lt; dp[t] &lt;&lt; &quot; &quot; &lt;&lt; sum - dp[t] &lt;&lt; &quot;\\n&quot;; return 0;&#125; æœ€é•¿ä¸Šå‡å­åºåˆ—ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º N çš„æ•°åˆ—ï¼Œæ±‚æ•°å€¼ä¸¥æ ¼å•è°ƒé€’å¢çš„å­åºåˆ—çš„é•¿åº¦æœ€é•¿æ˜¯å¤šå°‘ã€‚ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•° Nã€‚ ç¬¬äºŒè¡ŒåŒ…å« N ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå®Œæ•´åºåˆ—ã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§é•¿åº¦ã€‚ æ•°æ®èŒƒå›´ 1â‰¤Nâ‰¤100âˆ’10^9^â‰¤æ•°åˆ—ä¸­çš„æ•°â‰¤10^9^ è¾“å…¥æ ·ä¾‹ï¼š 1273 1 2 1 8 5 6 è¾“å‡ºæ ·ä¾‹ 14 1234567891011121314151617181920212223242526272829303132#include &lt;algorithm&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;const int N = 1010;int a[N], f[N];int main() &#123; // https://www.acwing.com/problem/content/897/ int n; cin &gt;&gt; n; for (int i = 1; i &lt;= n; i++) &#123; cin &gt;&gt; a[i]; &#125; for (int i = 1; i &lt;= n; i++) &#123; f[i] = 1; // åˆå§‹åŒ–ï¼Œåªæœ‰ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œé•¿åº¦ä¸º1 for (int j = 0; j &lt; i; j++) &#123; if (a[i] &gt; a[j]) // åªæœ‰å½“åä¸€ä¸ªå…ƒç´ å¤§äºå…¶å‰ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ‰éœ€è¦æ±‚æœ€é•¿ä¸Šå‡çš„å­åºåˆ—ï¼Œå¦åˆ™ä¸æ˜¯ä¸Šå‡å­åºåˆ— f[i] = max(f[j] + 1, f[i]); &#125; &#125; int res = 0; for (int i = 1; i &lt;= n; i++) &#123; res = max(res, f[i]); &#125; cout &lt;&lt; res; return 0;&#125; åœ°å®«å–å®X å›½ç‹æœ‰ä¸€ä¸ªåœ°å®«å®åº“ï¼Œæ˜¯ nÃ—m ä¸ªæ ¼å­çš„çŸ©é˜µï¼Œæ¯ä¸ªæ ¼å­æ”¾ä¸€ä»¶å®è´ï¼Œæ¯ä¸ªå®è´è´´ç€ä»·å€¼æ ‡ç­¾ã€‚ åœ°å®«çš„å…¥å£åœ¨å·¦ä¸Šè§’ï¼Œå‡ºå£åœ¨å³ä¸‹è§’ã€‚ å°æ˜è¢«å¸¦åˆ°åœ°å®«çš„å…¥å£ï¼Œå›½ç‹è¦æ±‚ä»–åªèƒ½å‘å³æˆ–å‘ä¸‹è¡Œèµ°ã€‚ èµ°è¿‡æŸä¸ªæ ¼å­æ—¶ï¼Œå¦‚æœé‚£ä¸ªæ ¼å­ä¸­çš„å®è´ä»·å€¼æ¯”å°æ˜æ‰‹ä¸­ä»»æ„å®è´ä»·å€¼éƒ½å¤§ï¼Œå°æ˜å°±å¯ä»¥æ‹¿èµ·å®ƒï¼ˆå½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä¸æ‹¿ï¼‰ã€‚ å½“å°æ˜èµ°åˆ°å‡ºå£æ—¶ï¼Œå¦‚æœä»–æ‰‹ä¸­çš„å®è´æ°å¥½æ˜¯ k ä»¶ï¼Œåˆ™è¿™äº›å®è´å°±å¯ä»¥é€ç»™å°æ˜ã€‚ è¯·ä½ å¸®å°æ˜ç®—ä¸€ç®—ï¼Œåœ¨ç»™å®šçš„å±€é¢ä¸‹ï¼Œä»–æœ‰å¤šå°‘ç§ä¸åŒçš„è¡ŒåŠ¨æ–¹æ¡ˆèƒ½è·å¾—è¿™ k ä»¶å®è´ã€‚ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡Œ 3 ä¸ªæ•´æ•°ï¼Œn,m,kå«ä¹‰è§é¢˜ç›®æè¿°ã€‚ æ¥ä¸‹æ¥ n è¡Œï¼Œæ¯è¡Œæœ‰ m ä¸ªæ•´æ•° Ci ç”¨æ¥æè¿°å®åº“çŸ©é˜µæ¯ä¸ªæ ¼å­çš„å®è´ä»·å€¼ã€‚ **** è¾“å‡ºæ ¼å¼ è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ­£å¥½å– k ä¸ªå®è´çš„è¡ŒåŠ¨æ–¹æ¡ˆæ•°ã€‚ è¯¥æ•°å­—å¯èƒ½å¾ˆå¤§ï¼Œè¾“å‡ºå®ƒå¯¹ 1000000007å–æ¨¡çš„ç»“æœã€‚ æ•°æ®èŒƒå›´ 1â‰¤n,mâ‰¤501â‰¤kâ‰¤120â‰¤Ciâ‰¤12 è¾“å…¥æ ·ä¾‹1ï¼š 1232 2 21 22 1 è¾“å‡ºæ ·ä¾‹1ï¼š 12 è¾“å…¥æ ·ä¾‹2ï¼š 1232 3 21 2 32 1 5 è¾“å‡ºæ ·ä¾‹2ï¼š 114 è®°å¿†åŒ–æœç´¢ å››ç»´DPï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758#include &lt;algorithm&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;const int N = 55, MOD = 1000000007;int n, m, k;int w[N][N];int f[N][N][13][14]; // f[i][j][k][c]è¡¨ç¤ºåœ¨(i, j)è¿™ä¸ªç‚¹ï¼Œæ‹¿äº†kä¸ªç‰©å“ï¼Œè¿™äº›ç‰©å“ä¸­æœ€å¤§å€¼ä¸ºcçš„æ–¹æ¡ˆæ•°int main() &#123; cin &gt;&gt; n &gt;&gt; m &gt;&gt; k; for (int i = 1; i &lt;= n; i++) for (int j = 1; j &lt;= m; j++) &#123; cin &gt;&gt; w[i][j]; w[i][j]++; // ç”±äºéœ€è¦è¡¨ç¤ºæ¯”ç‰©å“ä»·å€¼ï¼ˆå¯èƒ½ä¸º0ï¼‰æ›´å°çš„ä»·å€¼ï¼Œå¯ä»¥è®¾ç½®åˆå§‹ä¸º-1ï¼Œä½†æ˜¯æ•°ç»„ä¸‹æ ‡ä¸èƒ½ä¸º-1ï¼Œäºæ˜¯æŠŠç‰©å“ä»·å€¼å¾€å³åç§»ä¸€ä½ï¼Œç°åœ¨æ˜¯[1,13] &#125; // ä¸¤ä¸ªè¾¹ç•Œåˆå§‹åŒ– // åœ¨èµ·ç‚¹ (1, 1) å¤„ // å¦‚æœæ‹¿ä¹Ÿåªèƒ½æ‹¿ a[i][j] è¿™ä¸ªç‰©å“ï¼Œåªæœ‰ä¸€ç§æ–¹æ¡ˆ // å¦‚æœä¸æ‹¿ï¼Œé‚£å°±æ˜¯ 0 ä¸ªç‰©å“ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ–¹æ¡ˆæ•° // ç”±äºç‰©å“ä»·å€¼å·²ç»å¢åŠ äº†ä¸€ä¸ªåç§»é‡ï¼Œç°åœ¨ä»·å€¼çš„èŒƒå›´æ˜¯ [1, 13] // æ‰€ä»¥ä»·å€¼ä¸º 0 å¹¶ä¸ä»£è¡¨ç‰©å“çš„ä»·å€¼ï¼Œè€Œæ˜¯ä¸€ä¸ªè¾¹ç•Œç‚¹ f[1][1][1][w[1][1]] = 1; f[1][1][0][0] = 1; for (int i = 1; i &lt;= n; i++) for (int j = 1; j &lt;= m; j++) &#123; if (i == 1 &amp;&amp; j == 1) continue; for (int u = 0; u &lt;= k; u++) // æ‹¿äº†uä»¶ç‰©å“ for (int v = 0; v &lt;= 13; v++) &#123; // æ‹¿çš„ç‰©å“çš„æœ€å¤§ä»·å€¼ä¸ºv int &amp;val = f[i][j][u][v]; // ä¸æ‹¿ç‰©å“ val = (val + f[i - 1][j][u][v]) % MOD; // ä¸ºä»€ä¹ˆæ—¶val += å‰é¢å¯èƒ½çš„æ–¹æ¡ˆæ•°è€Œä¸æ˜¯ç­‰äº val = (val + f[i][j - 1][u][v]) % MOD; // å› ä¸ºè¿™ä¸ªé¢˜çƒçš„æ—¶æ–¹æ¡ˆæ•°ï¼Œæ‰€ä»¥å¿…é¡»å¾—æ˜¯æ–¹æ¡ˆæ•°çš„å’Œï¼Œå¦åˆ™è¦†ç›–çš„è¯ï¼Œä¼šæŸå¤±æ–¹æ¡ˆæ•° // å¯ä»¥æ‹¿ if (u &gt; 0 &amp;&amp; v == w[i][j]) &#123; for (int c = 0; c &lt; v; c++) &#123; // c &lt; v;å› ä¸ºç°åœ¨å–çš„å®è´è¦æ¯”ä¹‹å‰çš„ä»·å€¼éƒ½å¤§ val = (val + f[i - 1][j][u - 1][c]) % MOD; val = (val + f[i][j - 1][u - 1][c]) % MOD; &#125; &#125; &#125; &#125; // æœ€åæŠŠåœ¨ç»ˆç‚¹ (n, m) å¤„æ‹¿ c ä¸ªç‰©å“çš„æ–¹æ¡ˆæ•°ç´¯åŠ  int res = 0; for (int i = 0; i &lt;= 13; i++) res = (res + f[n][m][k][i]) % MOD; cout &lt;&lt; res &lt;&lt; endl; return 0;&#125; æç™½æ‰“é…’ä¸€å¤©ï¼Œä»–æç€é…’å£¶ï¼Œä»å®¶é‡Œå‡ºæ¥ï¼Œé…’å£¶ä¸­æœ‰é…’ 2 æ–—ã€‚ ä»–è¾¹èµ°è¾¹å”±ï¼š æ— äº‹è¡—ä¸Šèµ°ï¼Œæå£¶å»æ‰“é…’ã€‚ é€¢åº—åŠ ä¸€å€ï¼Œé‡èŠ±å–ä¸€æ–—ã€‚ è¿™ä¸€è·¯ä¸Šï¼Œä»–ä¸€å…±é‡åˆ°åº— N æ¬¡ï¼Œé‡åˆ°èŠ± M æ¬¡ã€‚ å·²çŸ¥æœ€åä¸€æ¬¡é‡åˆ°çš„æ˜¯èŠ±ï¼Œä»–æ­£å¥½æŠŠé…’å–å…‰äº†ã€‚ è¯·ä½ è®¡ç®—æç™½è¿™ä¸€è·¯é‡åˆ°åº—å’ŒèŠ±çš„é¡ºåºï¼Œæœ‰å¤šå°‘ç§ä¸åŒçš„å¯èƒ½ï¼Ÿ æ³¨æ„ï¼šå£¶é‡Œæ²¡é…’ (000 æ–—) æ—¶é‡åº—æ˜¯åˆæ³•çš„ï¼ŒåŠ å€åè¿˜æ˜¯æ²¡é…’ï¼›ä½†æ˜¯æ²¡é…’æ—¶é‡èŠ±æ˜¯ä¸åˆæ³•çš„ã€‚ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° N å’Œ Mã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºä¸€ä¸ªæ•´æ•°è¡¨ç¤ºç­”æ¡ˆã€‚ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œè¾“å‡ºæ¨¡ 1000000007çš„ç»“æœã€‚ æ•°æ®èŒƒå›´ å¯¹äº 40% çš„è¯„æµ‹ç”¨ä¾‹ï¼š1â‰¤N,Mâ‰¤10 å¯¹äº 100% çš„è¯„æµ‹ç”¨ä¾‹ï¼š1â‰¤N,Mâ‰¤100 è¾“å…¥æ ·ä¾‹ï¼š 15 10 è¾“å‡ºæ ·ä¾‹ï¼š 114 æ ·ä¾‹è§£é‡Š å¦‚æœæˆ‘ä»¬ç”¨ 000 ä»£è¡¨é‡åˆ°èŠ±ï¼Œ111 ä»£è¡¨é‡åˆ°åº—ï¼Œ141414 ç§é¡ºåºå¦‚ä¸‹ï¼š 1234567891011121314010101101000000010110010010000011000110010000100010110010000011001000110000100011000110000100100010110000010110100000100011001001000100100011001000100100100011000100011010000010100100100100010100101000001010100 1234567891011121314151617181920212223242526272829#include &lt;algorithm&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;const int N = 110, MOD = 1e9 + 7;int n, m;int f[N][N][N];int main() &#123; // https://www.acwing.com/problem/content/4411/ cin &gt;&gt; n &gt;&gt; m; f[0][0][2] = 1; for (int i = 0; i &lt;= n; i++) for (int j = 0; j &lt;= m; j++) for (int k = 0; k &lt;= m; k++) &#123; int&amp; v = f[i][j][k]; if (i &amp;&amp; k % 2 == 0) v = (v + f[i - 1][j][k / 2]) % MOD; if (j) v = (v + f[i][j - 1][k + 1]) % MOD; &#125; cout &lt;&lt; f[n][m - 1][1] &lt;&lt; endl; return 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"DP","slug":"DP","permalink":"http://breadwinners.top/tags/DP/"}]},{"title":"æ±‚åŒºé—´å’Œ","slug":"åŒºé—´å’Œ","date":"2023-04-19T16:00:00.000Z","updated":"2023-07-11T01:44:28.893Z","comments":true,"path":"2023/04/20/åŒºé—´å’Œ/","link":"","permalink":"http://breadwinners.top/2023/04/20/%E5%8C%BA%E9%97%B4%E5%92%8C/","excerpt":"","text":"åŒºé—´å’Œçš„æœ¬è´¨æ˜¯ç¦»æ•£åŒ– ç¦»æ•£åŒ–ï¼šå€¼åŸŸè·¨åº¦å¤§ï¼Œç”¨åˆ°çš„éå¸¸çš„ç¨€ç– æ•´æ•°æœ‰åºçš„ç¦»æ•£åŒ– é¢˜ç›®æè¿°ï¼š å‡å®šæœ‰ä¸€ä¸ªæ— é™é•¿çš„æ•°è½´ï¼Œæ•°è½´ä¸Šæ¯ä¸ªåæ ‡ä¸Šçš„æ•°éƒ½æ˜¯0ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬é¦–å…ˆè¿›è¡Œ n æ¬¡æ“ä½œï¼Œæ¯æ¬¡æ“ä½œå°†æŸä¸€ä½ç½®xä¸Šçš„æ•°åŠ cã€‚ è¿‘ä¸‹æ¥ï¼Œè¿›è¡Œ m æ¬¡è¯¢é—®ï¼Œæ¯ä¸ªè¯¢é—®åŒ…å«ä¸¤ä¸ªæ•´æ•°lå’Œrï¼Œä½ éœ€è¦æ±‚å‡ºåœ¨åŒºé—´[l, r]ä¹‹é—´çš„æ‰€æœ‰æ•°çš„å’Œã€‚ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°nå’Œmã€‚ æ¥ä¸‹æ¥ n è¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°xå’Œcã€‚ å†æ¥ä¸‹é‡Œ m è¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°lå’Œrã€‚ è¾“å‡ºæ ¼å¼ å…±mè¡Œï¼Œæ¯è¡Œè¾“å‡ºä¸€ä¸ªè¯¢é—®ä¸­æ‰€æ±‚çš„åŒºé—´å†…æ•°å­—å’Œã€‚ æ•°æ®èŒƒå›´ âˆ’10^9^â‰¤ x â‰¤10^9^,1â‰¤n,mâ‰¤10^5^,âˆ’10^9^â‰¤ l â‰¤ r â‰¤10^9^,âˆ’10000â‰¤câ‰¤10000 è¾“å…¥æ ·ä¾‹ï¼š12345673 31 23 67 51 34 67 8 è¾“å‡ºæ ·ä¾‹ï¼š123805 é¦–å…ˆè¯»å…¥ æ•°è½´ä¸Šå¯èƒ½ç”¨åˆ°çš„æ•°å€¼ï¼Œè¿™åŒ…æ‹¬å¢åŠ è¿‡ç¨‹ä¸­ç”¨åˆ°çš„å’Œåé¢æŸ¥è¯¢è¿‡ç¨‹ä¸­å¯èƒ½ç”¨åˆ°çš„ï¼Œå…¨éƒ¨å­˜å…¥allsä¸­(è¿˜éœ€è¦è¿›è¡Œæ’åºå»é‡å¤„ç†)ï¼ŒåŒæ—¶å¢åŠ è¿‡ç¨‹ä¸­å’ŒæŸ¥è¯¢è¿‡ç¨‹éœ€è¦ä½¿ç”¨çš„é”®å€¼å¯¹ä¹Ÿéœ€è¦ç”¨vector&lt;pair&lt;&lt;int,int&gt;&gt;å­˜å‚¨ï¼Œä¾¿äºåé¢çš„å–å€¼æŸ¥è¯¢ã€‚è¿æ¥allså’Œaæ•°ç»„çš„æ¡¥æ¢æ˜¯å¥¹ä»¬ç›¸åŒçš„ä¸‹æ ‡ ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859#include &lt;algorithm&gt;#include &lt;iostream&gt;#include &lt;vector&gt;#define N 300010using namespace std;typedef vector&lt;int, int&gt; PII;vector&lt;int&gt; alls; // å­˜å‚¨ï¼ˆæ‰€æœ‰ä¸æ’å…¥å’ŒæŸ¥è¯¢æœ‰å…³çš„ï¼‰åæ ‡int a[N], s[N]; // åˆ†åˆ«å­˜å‚¨åæ ‡æ’å…¥çš„å€¼å’Œaçš„å‰ç¼€å’Œint find(int x) &#123; // findå‡½æ•°çš„ä½œç”¨æ˜¯è¾“å…¥åæ ‡ï¼Œè¾“å‡ºç¦»æ•£åŒ–åçš„åæ ‡ int l = 0, r = alls.size() - 1; while (l &lt; r) &#123; int mid = l + r + 1 &gt;&gt; 1; if (alls[mid] &lt;= x) &#123; l = mid; &#125; else r = mid - 1; &#125; return l + 1; // äºŒåˆ†å‡ºäº†é—®é¢˜ ç›®å‰åªèƒ½ç”¨å¦ä¸€ç§äºŒåˆ†æ–¹æ³•å¾—å‡ºæ­£ç¡®çš„ç»“æœ,åŸæ¥æ˜¯äºŒåˆ†çš„æ•°ç»„å†™é”™äº†&#125;int main() &#123; int n, m, x, c, l, r; cin &gt;&gt; n &gt;&gt; m; vector&lt;pair&lt;int, int&gt;&gt; add, query; // å­˜å‚¨æ’å…¥å’Œè¯¢é—®æ“ä½œçš„æ•°æ® for (int i = 1; i &lt;= n; i++) &#123; cin &gt;&gt; x &gt;&gt; c; add.push_back(&#123;x, c&#125;); alls.push_back(x); &#125; for (int i = 1; i &lt;= m; i++) &#123; cin &gt;&gt; l &gt;&gt; r; query.push_back(&#123;l, r&#125;); alls.push_back(l); alls.push_back(r); &#125; // æ’åºï¼Œå»é‡ sort(alls.begin(), alls.end()); alls.erase(unique(alls.begin(), alls.end()), alls.end()); // æ‰§è¡Œå‰næ¬¡æ’å…¥æ“ä½œ for (auto item : add) &#123; int x = find(item.first); a[x] += item.second; &#125; // å‰ç¼€å’Œ for (int i = 1; i &lt;= alls.size(); i++) // ä¸ºä»€ä¹ˆæ˜¯alls.size(),å› ä¸ºallsæ˜¯å­˜ç€æ‰€æœ‰çš„å¯èƒ½ç”¨åˆ°çš„ä¸‹æ ‡,alllsæ•°ç»„ä¸­æœ‰å¤šå°‘ä¸ªæ•°ï¼Œaæ•°ç»„ä¸­å°±æœ‰å¤šå°‘ä¸ªæ•° s[i] = s[i - 1] + a[i]; // å¤„ç†åmæ¬¡è¯¢é—®æ“ä½œ for (auto item : query) &#123; int l = find(item.first); int r = find(item.second); cout &lt;&lt; s[r] - s[l - 1] &lt;&lt; &#x27;\\n&#x27;; &#125; return 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç¦»æ•£åŒ–","slug":"ç¦»æ•£åŒ–","permalink":"http://breadwinners.top/tags/%E7%A6%BB%E6%95%A3%E5%8C%96/"}]},{"title":"å †Heap","slug":"å †","date":"2023-04-19T16:00:00.000Z","updated":"2023-07-11T01:34:51.939Z","comments":true,"path":"2023/04/20/å †/","link":"","permalink":"http://breadwinners.top/2023/04/20/%E5%A0%86/","excerpt":"","text":"å †12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364// å¦‚ä½•æ‰‹å†™ä¸€ä¸ªå †ï¼Ÿå®Œå…¨äºŒå‰æ ‘ 5ä¸ªæ“ä½œ// 1. æ’å…¥ä¸€ä¸ªæ•° heap[ ++ size] = x; up(size);// 2. æ±‚é›†åˆä¸­çš„æœ€å°å€¼ heap[1]// 3. åˆ é™¤æœ€å°å€¼ heap[1] = heap[size]; size -- ;down(1);// 4. åˆ é™¤ä»»æ„ä¸€ä¸ªå…ƒç´  heap[k] = heap[size]; size -- ;up(k); down(k);// 5. ä¿®æ”¹ä»»æ„ä¸€ä¸ªå…ƒç´  heap[k] = x; up(k); down(k);#include &lt;iostream&gt;using namespace std;int const N = 100010;// h[i] è¡¨ç¤ºç¬¬iä¸ªç»“ç‚¹å­˜å‚¨çš„å€¼ï¼Œiä»1å¼€å§‹ï¼Œ2*iæ˜¯å·¦å­èŠ‚ç‚¹ï¼Œ2*i + 1æ˜¯å³å­èŠ‚ç‚¹// size æ—¢è¡¨ç¤ºå †é‡Œå­˜å‚¨çš„å…ƒç´ ä¸ªæ•°ï¼Œåˆè¡¨ç¤ºæœ€åä¸€ä¸ªç»“ç‚¹çš„ä¸‹æ ‡int h[N], siz; // å †æœ‰ä¸¤ä¸ªå˜é‡h[N]ï¼Œsize; æ€ä¹ˆè¿™é‡Œçš„sizeå’Œæ–‡ä»¶é‡Œæœ‰å†²çªï¼Œåªèƒ½æ”¹æˆsizäº†// ä¸‹æ»¤void down(int u) &#123; int t = u; // tå­˜å‚¨ä¸‰ä¸ªç»“ç‚¹ä¸­å­˜åœ¨çš„æœ€å°çš„ç»“ç‚¹çš„ä¸‹æ ‡ï¼Œåˆå§‹åŒ–ä¸ºå½“å‰ç»“ç‚¹u if (u * 2 &lt;= siz &amp;&amp; h[u * 2] &lt; h[t]) t = u * 2; // å·¦å­èŠ‚ç‚¹å­˜åœ¨å¹¶ä¸”å°äºå½“å‰ç»“ç‚¹ï¼Œæ›´æ–°tçš„ä¸‹æ ‡ if (u * 2 + 1 &lt;= siz &amp;&amp; h[u * 2 + 1] &lt; h[t]) t = u * 2 + 1; // å³å­èŠ‚ç‚¹å­˜åœ¨å¹¶ä¸”å°äºå½“å‰ç»“ç‚¹ï¼Œæ›´æ–°tçš„ä¸‹æ ‡ if (t != u) // å¦‚æœt==uæ„å‘³ç€ä¸ç”¨å˜åŠ¨ï¼Œuå°±æ˜¯ä¸‰ä¸ªç»“ç‚¹ä¸­æ‹¥æœ‰æœ€å°å€¼çš„ç»“ç‚¹ä¸‹æ ‡ï¼Œå¦åˆ™äº¤æ¢æ•°å€¼ &#123; swap(h[t], h[u]); down(t); // äº¤æ¢æ•°å€¼åï¼Œtè¿™ä¸ªç»“ç‚¹å­˜å‚¨åŸæœ¬uçš„å€¼ï¼Œuå­˜å‚¨å­˜å‚¨tçš„å€¼ï¼ˆä¸‰ä¸ªæ•°ä¸­çš„æœ€å°å€¼ï¼‰ã€‚uä¸ç”¨è°ƒæ•´äº†ï¼Œä½†tæƒ…å†µä¸æ˜ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´ã€‚ç›´åˆ°å®ƒæ¯”å·¦å³å­èŠ‚ç‚¹éƒ½å° &#125; // å¦‚æœè¿˜æ˜¯ä¸æ˜ç™½å¯ä»¥æ‰‹æ¨¡æ‹Ÿä¸€è¾¹downçš„è¿‡ç¨‹&#125;// ä¸Šæ»¤void up(int u) &#123; while (u / 2 &amp;&amp; h[u / 2] &gt; h[u]) &#123; swap(h[u / 2], h[u]); u /= 2; &#125;&#125;// æ’å…¥æ–°å…ƒç´ void push(int x) &#123; h[++siz] = x, up(x);&#125;// åˆ é™¤æŒ‡ç‚¹å…ƒç´ void pop(int k) &#123; h[k] = h[siz], siz--, down(k), up(k);&#125;// ä¿®æ”¹æŒ‡å®šå…ƒç´ void modify(int k, int x) &#123; h[k] = x, down(k), up(k);&#125;int main() &#123; int n, m; cin &gt;&gt; n &gt;&gt; m; for (int i = 1; i &lt;= n; i++) scanf(&quot;%d&quot;, &amp;h[i]); siz = n; // åˆå§‹åŒ–size,è¡¨ç¤ºå †é‡Œæœ‰n ä¸ªå…ƒç´  for (int i = n / 2; i; i--) down(i); // æŠŠå †åˆå§‹åŒ–æˆå°æ ¹å †ï¼Œä»äºŒå‰æ ‘çš„å€’æ•°ç¬¬äºŒè¡Œå¼€å§‹ï¼ŒæŠŠæ•°å­—å¤§çš„ä¸‹æ²‰ while (m--) &#123; printf(&quot;%d &quot;, h[1]); h[1] = h[siz]; siz--; down(1); &#125; return 0;&#125; å‚è€ƒé“¾æ¥ ph[k]å­˜çš„æ˜¯ç¬¬kä¸ªæ’å…¥çš„ç‚¹æ˜¯å“ªä¸ªç‚¹(å­˜çš„æ˜¯ç‚¹çš„ä¸‹æ ‡)ï¼Œhp[k]å­˜æ˜¯å †é‡Œçš„ç‚¹æ˜¯ç¬¬å‡ ä¸ªæ’å…¥çš„ç‚¹ï¼Œ å¤æ‚ç‰ˆheapï¼ˆä»£ç æœªé€šè¿‡ï¼‰123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081#include &lt;iostream&gt;using namespace std;// int const N = 30;int const N = 100010;// h[i] è¡¨ç¤ºç¬¬iä¸ªç»“ç‚¹å­˜å‚¨çš„å€¼ï¼Œiä»1å¼€å§‹ï¼Œ2*iæ˜¯å·¦å­èŠ‚ç‚¹ï¼Œ2*i + 1æ˜¯å³å­èŠ‚ç‚¹// size æ—¢è¡¨ç¤ºå †é‡Œå­˜å‚¨çš„å…ƒç´ ä¸ªæ•°ï¼Œåˆè¡¨ç¤ºæœ€åä¸€ä¸ªç»“ç‚¹çš„ä¸‹æ ‡int h[N], ph[N], hp[N], siz, k = 1; // ph[k]å­˜çš„æ˜¯ç¬¬kä¸ªæ’å…¥çš„ç‚¹æ˜¯å“ªä¸ªç‚¹ï¼Œhp[k]å­˜æ˜¯å †é‡Œçš„ç‚¹æ˜¯ç¬¬å‡ ä¸ªæ’å…¥çš„ç‚¹void heap_swap(int a, int b) &#123; swap(ph[hp[a]], ph[hp[b]]); swap(hp[a], hp[b]); swap(h[a], h[b]);&#125;void down(int u) &#123; int t = u; // tå­˜å‚¨ä¸‰ä¸ªç»“ç‚¹ä¸­å­˜åœ¨çš„æœ€å°çš„ç»“ç‚¹çš„ä¸‹æ ‡ï¼Œåˆå§‹åŒ–ä¸ºå½“å‰ç»“ç‚¹u if (u * 2 &lt;= siz &amp;&amp; h[u * 2] &lt; h[t]) t = u * 2; // å·¦å­èŠ‚ç‚¹å­˜åœ¨å¹¶ä¸”å°äºå½“å‰ç»“ç‚¹ï¼Œæ›´æ–°tçš„ä¸‹æ ‡ if (u * 2 + 1 &lt;= siz &amp;&amp; h[u * 2 + 1] &lt; h[t]) t = u * 2 + 1; // å³å­èŠ‚ç‚¹å­˜åœ¨å¹¶ä¸”å°äºå½“å‰ç»“ç‚¹ï¼Œæ›´æ–°tçš„ä¸‹æ ‡ if (t != u) // å¦‚æœt==uæ„å‘³ç€ä¸ç”¨å˜åŠ¨ï¼Œuå°±æ˜¯ä¸‰ä¸ªç»“ç‚¹ä¸­æ‹¥æœ‰æœ€å°å€¼çš„ç»“ç‚¹ä¸‹æ ‡ï¼Œå¦åˆ™äº¤æ¢æ•°å€¼ &#123; heap_swap(t, u); down(t); // äº¤æ¢æ•°å€¼åï¼Œtè¿™ä¸ªç»“ç‚¹å­˜å‚¨åŸæœ¬uçš„å€¼ï¼Œuå­˜å‚¨å­˜å‚¨tçš„å€¼ï¼ˆä¸‰ä¸ªæ•°ä¸­çš„æœ€å°å€¼ï¼‰ã€‚uä¸ç”¨è°ƒæ•´äº†ï¼Œä½†tæƒ…å†µä¸æ˜ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´ã€‚ç›´åˆ°å®ƒæ¯”å·¦å³å­èŠ‚ç‚¹éƒ½å° &#125; // å¦‚æœè¿˜æ˜¯ä¸æ˜ç™½å¯ä»¥æ‰‹æ¨¡æ‹Ÿä¸€è¾¹downçš„è¿‡ç¨‹&#125;// ä¸Šæ»¤void up(int u) &#123; while (u / 2 &amp;&amp; h[u / 2] &gt; h[u]) &#123; heap_swap(u / 2, u); u /= 2; &#125;&#125;// æ’å…¥æ–°å…ƒç´ void push(int x) &#123; h[++siz] = x; up(siz); ph[k] = siz, hp[siz] = k; k++;&#125;// åˆ é™¤æŒ‡ç‚¹å…ƒç´ void pop(int k) &#123; heap_swap(k, siz); siz--, down(k), up(k);&#125;// ä¿®æ”¹æŒ‡å®šå…ƒç´ void modify(int k, int x) &#123; h[k] = x, down(k), up(k);&#125;int main() &#123; int n; string op; cin &gt;&gt; n; while (n--) &#123; cin &gt;&gt; op; if (!op.compare(&quot;I&quot;)) &#123; int x; cin &gt;&gt; x; push(x); &#125; else if (!op.compare(&quot;PM&quot;)) &#123; cout &lt;&lt; h[1] &lt;&lt; &#x27;\\n&#x27;; &#125; else if (!op.compare(&quot;DM&quot;)) &#123; pop(1); down(1); &#125; else if (op[0] == &#x27;D&#x27;) &#123; int t; cin &gt;&gt; t; pop(ph[t]); &#125; else if (op[0] == &#x27;C&#x27;) &#123; int t, x; cin &gt;&gt; t &gt;&gt; x; modify(ph[t], x); &#125; &#125; return 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"æ‰‹å†™å †","slug":"æ‰‹å†™å †","permalink":"http://breadwinners.top/tags/%E6%89%8B%E5%86%99%E5%A0%86/"}]},{"title":"DFS","slug":"dfs","date":"2023-04-18T16:00:00.000Z","updated":"2023-07-11T01:37:39.057Z","comments":true,"path":"2023/04/19/dfs/","link":"","permalink":"http://breadwinners.top/2023/04/19/dfs/","excerpt":"","text":"æ±‚å…¨æ’åˆ— ï¼ˆ46ï¼Œ47ï¼‰ æ±‚ç»„åˆ ï¼ˆ77ï¼‰ æ±‚äºŒå‰æ ‘å’Œä¸ºå®šå€¼çš„æŸä¸€è·¯å¾„ æ±‚æ•°ç»„ä¸­å’Œä¸ºå®šå€¼çš„å­æ•°ç»„ï¼ˆ39ï¼Œ40ï¼Œ216ï¼‰ å­æ•°ç»„é—®é¢˜ï¼ˆ78ï¼Œ90ï¼‰ å…«çš‡åé—®é¢˜ æ•°ç‹¬é—®é¢˜ å›æº¯01èƒŒåŒ…è¾“å…¥ï¼šç‰©å“æ•°é‡nï¼ŒèƒŒåŒ…å®¹é‡ï¼Œå„ç‰©å“çš„é‡é‡å’Œä»·å€¼ è¾“å‡ºï¼šèƒŒåŒ…çš„æœ€å¤§ä»·å€¼ã€è£…å…¥æœ€å¤§å®¹é‡åŠè£…å…¥æƒ…å†µ 123456789101112134 52 1 3 212 10 20 15æœ€å¤§ä»·å€¼ï¼š37ï¼ŒèƒŒåŒ…è£…å…¥æœ€å¤§å®¹é‡ï¼š5è£…å…¥æƒ…å†µï¼š1 1 0 13 30 16 15 159 6 5æœ€å¤§ä»·å€¼ï¼š11ï¼ŒèƒŒåŒ…è£…å…¥æœ€å¤§å®¹é‡ï¼š30è£…å…¥æƒ…å†µï¼š0 1 1 Error exampleï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657#include &lt;iostream&gt;using namespace std;int *w, *v, *x, *bestx, bestv, bestw, c, cw, cv;int n;void input() &#123; cin &gt;&gt; n &gt;&gt; c; w = new int[n + 1]; v = new int[n + 1]; x = new int[n + 1]; bestx = new int[n + 1]; for (int i = 1; i &lt;= n; i++) cin &gt;&gt; w[i]; for (int i = 1; i &lt;= n; i++) cin &gt;&gt; v[i];&#125;bool constraint(int k) &#123; if (cw + w[k] &gt; c) return false; else &#123; cw += w[k]; cv += v[k]; return true; &#125;&#125;void bag(int k) &#123; if (k &gt; n) &#123; if (bestv &lt; cv) &#123; bestv = cv; bestw = cw; for (int i = 1; i &lt;= n; i++) &#123; bestx[i] = x[i]; &#125; &#125; &#125; else &#123; for (int i = 0; i &lt;= 1; i++) &#123; x[k] = i; if (i == 0) &#123; bag(k + 1); &#125; else &#123; if (constraint(k)) &#123; // åœ¨constraintå‡½æ•°ä¸­è¿›è¡Œæ¡ä»¶ä¹‹ç±»çš„æ“ä½œï¼Œæ¯”å¦‚æ­¤é¢˜ç§çš„cw += w[k]; // cv += v[k]; åœ¨éæœ€ä¼˜è§£çš„æƒ…å†µåä¸ä¼šè¿˜åŸçŠ¶æ€ï¼Œä»è€Œå‡ºé”™ bag(k + 1); &#125; &#125; &#125; &#125;&#125;int main() &#123; input(); bag(1); cout &lt;&lt; &quot;èƒŒåŒ…çš„æœ€å¤§ä»·å€¼ä¸º &quot; &lt;&lt; bestv &lt;&lt; &quot; è£…å…¥æœ€å¤§å®¹é‡ä¸º &quot; &lt;&lt; bestw &lt;&lt; endl; for (int i = 1; i &lt;= n; i++) &#123; cout &lt;&lt; bestx[i] &lt;&lt; &#x27; &#x27;; &#125; return 0;&#125; &#x3D;&#x3D;åœ¨constraintå‡½æ•°ä¸­è¿›è¡Œæ¡ä»¶ä¹‹ç±»çš„æ“ä½œï¼Œæ¯”å¦‚æ­¤é¢˜ç§çš„cw +&#x3D; w[k];&#x3D;&#x3D;&#x3D;&#x3D;cv +&#x3D; v[k]; åœ¨éæœ€ä¼˜è§£çš„æƒ…å†µåä¸ä¼šè¿˜åŸçŠ¶æ€ï¼Œä»è€Œå‡ºé”™&#x3D;&#x3D; corretï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152#include &lt;iostream&gt;using namespace std;int *w, *v, *x, *bestx, bestv = 0, bestw = 0, c, cw = 0, cv = 0;int n;void input() &#123; cin &gt;&gt; n &gt;&gt; c; w = new int[n + 1]; v = new int[n + 1]; x = new int[n + 1]; bestx = new int[n + 1]; for (int i = 1; i &lt;= n; i++) &#123; cin &gt;&gt; w[i]; &#125; for (int i = 1; i &lt;= n; i++) &#123; cin &gt;&gt; v[i]; &#125;&#125;void bag(int k) &#123; if (k &gt; n) &#123; if (bestv &lt; cv) &#123; bestv = cv; bestw = cw; for (int i = 1; i &lt;= n; i++) &#123; bestx[i] = x[i]; &#125; &#125; &#125; else &#123; for (int i = 0; i &lt;= 1; i++) &#123; x[k] = i; if (i == 0) &#123; bag(k + 1); &#125; else if (cw + w[k] &lt;= c) &#123; cw += w[k]; cv += v[k]; bag(k + 1); cw -= w[k]; cv -= v[k]; &#125; &#125; &#125;&#125;int main() &#123; input(); bag(1); cout &lt;&lt; &quot;èƒŒåŒ…çš„æœ€å¤§ä»·å€¼ä¸º &quot; &lt;&lt; bestv &lt;&lt; &quot; è£…å…¥æœ€å¤§å®¹é‡ä¸º &quot; &lt;&lt; bestw &lt;&lt; endl; for (int i = 1; i &lt;= n; i++) &#123; cout &lt;&lt; bestx[i] &lt;&lt; &#x27; &#x27;; &#125; return 0;&#125; nä¸ªæ•°æ’åˆ—æšä¸¾é¢˜ç›®ï¼š è§£ç©ºé—´æ ‘ï¼š 123456789101112131415161718192021222324252627282930313233343536#include &lt;algorithm&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;const int N = 10;int n;int a[N], path[N];bool st[N];void dfs(int u) &#123; if (u &gt; n) &#123; // uä»£è¡¨å±‚æ•°ï¼Œnä»£è¡¨åˆ†æ”¯æ•°ã€‚æœç´¢å®Œä¸€ä¸ªåˆ†æ”¯ï¼Œ å†æœç´¢å¦ä¸€ä¸ªåˆ†æ”¯ã€‚ for (int i = 1; i &lt;= n; i++) cout &lt;&lt; path[i] &lt;&lt; &quot; &quot;; puts(&quot;&quot;); &#125; else &#123; for (int i = 1; i &lt;= n; i++) &#123; // i æ˜¯æšä¸¾æ‰€æœ‰çš„åˆ†æ”¯ if (!st[i]) &#123; path[u] = a[i]; st[i] = true; dfs(u + 1); st[i] = false; path[u] = 0; &#125; &#125; &#125;&#125;int main() &#123; cin &gt;&gt; n; for (int i = 1; i &lt;= n; i++) &#123; a[i] = i; &#125; dfs(1); return 0;&#125; 1-né€‰ä»»æ„ä¸ªæ•°è§£ç©ºé—´æ ‘å¤šå‰æ ‘çš„éå†è¦ç”¨æ•°ç»„æ¥è®°å½•å“ªä¸ªæ•°å·²ç»è¢«é€‰æ‹©äº†ï¼ŒäºŒå‰æ ‘çš„è¯ï¼Œç›´æ¥è¿˜åŸç°åœºèµ°å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œç»§ç»­å¯»æ‰¾ é€’å½’çš„æ—¶å€™æ€ä¹ˆæŠŠæ¯ä¸ªçŠ¶æ€è®°å½•ä¸‹æ¥path[]ï¼Œè®°å½•æœç´¢çš„å±‚æ•°æ—¶ç¬¬å‡ å±‚uï¼Œè®°å½•ä¸€ä¸‹å½“å‰åˆ†æ”¯ä»ç¬¬å‡ ä¸ªä¹¦å¼€å§‹æœstartï¼Œè¿˜åŸçŠ¶æ€ æ’åˆ—æ•°å­—å„ç§ç±»å‹çš„è§£ç©ºé—´æ ‘ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142#include &lt;algorithm&gt;#include &lt;cstdio&gt;#include &lt;iostream&gt;using namespace std;const int N = 200;// const int N = 1e5 + 10;int n;int a[N];bool vis[N];void dfs(int u) &#123; if (u &gt; n) &#123; for (int i = 1; i &lt;= n; i++) &#123; if (vis[i]) cout &lt;&lt; a[i] &lt;&lt; &#x27; &#x27;; &#125; puts(&quot;&quot;); &#125; else &#123; vis[u] = true; dfs(u + 1); vis[u] = false; dfs(u + 1); &#125;&#125;int main() &#123; cin &gt;&gt; n; for (int i = 1; i &lt;= n; i++) &#123; a[i] = i; &#125; dfs(1); return 0;&#125;/*31 2 3 1 21 312 323 */ 123456789101112131415161718192021222324252627282930313233343536373839404142#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;#include &lt;algorithm&gt;using namespace std;const int N = 16;int n;int st[N]; // çŠ¶æ€ï¼Œè®°å½•æ¯ä¸ªä½ç½®å½“å‰çš„çŠ¶æ€ï¼š0è¡¨ç¤ºè¿˜æ²¡è€ƒè™‘ï¼Œ1è¡¨ç¤ºé€‰å®ƒï¼Œ2è¡¨ç¤ºä¸é€‰å®ƒvoid dfs(int u)&#123; if (u &gt; n) &#123; for (int i = 1; i &lt;= n; i ++ ) if (st[i] == 1) printf(&quot;%d &quot;, i); printf(&quot;\\n&quot;); return; &#125; st[u] = 2; dfs(u + 1); // ç¬¬ä¸€ä¸ªåˆ†æ”¯ï¼šä¸é€‰ st[u] = 0; // æ¢å¤ç°åœº st[u] = 1; dfs(u + 1); // ç¬¬äºŒä¸ªåˆ†æ”¯ï¼šé€‰ st[u] = 0;&#125;int main()&#123; // https://www.acwing.com/activity/content/code/content/156210/ cin &gt;&gt; n; dfs(1); return 0;&#125; nä¸ªæ•°é€‰mä¸ªæ•°å’Œæ’åˆ—è¡Œæšä¸¾ç›¸æ¯”ï¼Œå°‘äº†ä¸€ä¸ªåˆ¤é‡æ•°ç»„ï¼Œå› ä¸ºdfså¤šäº†ä¸€ä¸ªå‚æ•°ï¼Œä¿è¯äº†åé¢æšä¸¾çš„è¿‡ç¨‹ä¸­ï¼Œæšä¸¾çš„æ•°ä¸€å®šæ¯”å‰ä¸€ä¸ªæ•°å¤§ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#include &lt;algorithm&gt;#include &lt;cstdio&gt;#include &lt;iostream&gt;using namespace std;const int N = 200;// const int N = 1e5 + 10;int a[N], path[N];int n, m, cnt;bool vis[N]; // ä¸éœ€è¦æ ‡è®°æ˜¯å¦è®¿é—®çš„æ•°ç»„void dfs(int u, int start) &#123; if (u + n - start &lt; m) return; // å‰ªæ if (u == m + 1) &#123; for (int i = 1; i &lt;= m; i++) cout &lt;&lt; path[i] &lt;&lt; &#x27; &#x27;; puts(&quot;&quot;); &#125; else &#123; for (int i = start; i &lt;= n; i++) &#123; path[u] = i; dfs(u + 1, i + 1); // è®¤ä¸ºè§„å®šé¡ºåºï¼Œä¿æŒå‡åºé€‰æ‹© path[u] = 0; &#125; &#125;&#125;int main() &#123; cin &gt;&gt; n &gt;&gt; m; for (int i = 1; i &lt;= n; i++) &#123; a[i] = i; &#125; dfs(1, 1); return 0;&#125;/* 5 31 2 31 2 41 2 51 3 41 3 51 4 52 3 42 3 52 4 53 4 5 */ å‰ªæï¼šåœ¨ç¬¬uå±‚ï¼Œé€‰ç¬¬uä¸ªæ•°ï¼Œå·²ç»é€‰äº†u - 1ä¸ªæ•°ï¼Œè¿˜å‰©ä¸‹èƒ½é€‰çš„æ•°ä»startå¼€å§‹åˆ°nå…±n - start + 1ä¸ª æ•°ï¼Œå¦‚æœåŠ èµ·æ¥éƒ½å°äºmï¼Œåˆ™å¯ä»¥åˆ¤å®šä¸ºæ­¤åˆ†æ”¯çš„ç»“æœéƒ½ä¸æˆç«‹ï¼Œåˆ™å‰ªæã€‚æ¡ä»¶u + n - start &lt; m","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"dfs","slug":"dfs","permalink":"http://breadwinners.top/tags/dfs/"}]},{"title":"å›¾è®º","slug":"GraphTheory","date":"2023-04-16T16:00:00.000Z","updated":"2023-07-11T01:27:13.520Z","comments":true,"path":"2023/04/17/GraphTheory/","link":"","permalink":"http://breadwinners.top/2023/04/17/GraphTheory/","excerpt":"","text":"æœ€çŸ­è·¯åŠ²é—®é¢˜æ‰€æœ‰åŸºç¡€æœ€çŸ­è·¯å¾„åœ¨æœªæ ‡è®°çš„èŠ‚ç‚¹ä¸­å¯»æ‰¾è·ç¦»å‡ºå‘ç‚¹æœ€å°çš„èŠ‚ç‚¹ï¼Œæ ‡è®°ï¼Œæ”¶å½•è¿›æœ€ä¼˜è·¯å¾„èŠ‚ç‚¹ä¸­ 1234564 4 0 1 31 2 11 3 43 2 10 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;#define maxn 6// #define maxn 110#define INF 0x3f3f3f3f// æ ¹æ®è¾¹æƒå›¾å»ºè¾¹ï¼ˆé‚»æ¥çŸ©é˜µï¼‰int edges[maxn][maxn]; // é‚»æ¥çŸ©é˜µint dist[maxn]; // è·ç¦»æºç‚¹è·ç¦»çš„æ•°ç»„bool visited[maxn]; // æ˜¯å¦å·²ç»æ‰¾åˆ°æœ€çŸ­è·¯void init(int n) &#123; int i, j; memset(edges, INF, sizeof(edges)); // åˆå§‹åŒ–é‚»æ¥çŸ©é˜µ memset(visited, false, sizeof(visited)); for (i = 0; i &lt; n; ++i) &#123; for (j = 0; j &lt; n; ++j) &#123; if (i == j) &#123; edges[i][j] = 0; &#125; &#125; &#125;&#125;void dijkstra(int src, int n) &#123; int i, p; // åˆå§‹åŒ– dist[] for (i = 0; i &lt; n; ++i) &#123; dist[i] = edges[src][i]; &#125; visited[src] = true; while (true) &#123; p = -1; // è®°å½•å½“å‰é›†åˆä¸­åˆ°æºç‚¹æœ€å°è·¯å¾„çš„ç‚¹çš„ä¸‹æ ‡ int mn = INF; // çœ‹èµ·æ¥ mn æ˜¯ä¸€ä¸ªä¸´æ—¶å­˜å‚¨å€¼çš„ä½œç”¨ for (i = 0; i &lt; n; ++i) &#123; // åœ¨dist[]æ‰¾ä¸€ä¸ªæœ€å°çš„è·¯å¾„ï¼Œå¹¶å°†è¿™æ¡è·¯åˆ°è¾¾çš„é¡¶ç‚¹è®°å½• // é€šè¿‡éå† S é›†åˆçš„æ–¹æ³•ï¼Œå¯»æ‰¾æœ€å°è·¯å¾„çš„é¡¶ç‚¹ï¼Œæ­¤å¤„å¯ä»¥é€šè¿‡ä¼˜å…ˆé˜Ÿåˆ—çš„æ–¹æ³•ä¼˜åŒ– if (!visited[i] &amp;&amp; dist[i] &lt; mn) &#123; // dist[i] &lt; mn æˆç«‹æ˜¯å¯è¾¾ï¼Œdist[i] &lt; mn,ä¼šæŒ‘é€‰å‡ºåˆ°æºç‚¹æœ€å°è·ç¦»çš„ç‚¹ mn = dist[i]; p = i; &#125; &#125; visited[p] = true; if (p == -1) &#123; break; &#125; for (i = 0; i &lt; n; ++i) &#123; // æ›´æ–°æœªè®¿é—®è¿‡çš„èŠ‚ç‚¹åˆ°æ–°è®¿é—®èŠ‚ç‚¹p çš„è·ç¦» if (!visited[i] &amp;&amp; mn + edges[p][i] &lt; dist[i]) &#123; dist[i] = mn + edges[p][i]; &#125; &#125; &#125;&#125;int main() &#123; cout &lt;&lt; &quot;ç°åœ¨å¼€å§‹å»ºç«‹é‚»æ¥çŸ©é˜µï¼š&quot; &lt;&lt; endl; int n, m; int i, j; cout &lt;&lt; &quot;è¯·è¾“å…¥é¡¶ç‚¹æ•°é‡å’Œè¾¹çš„æ•°é‡ï¼š&quot; &lt;&lt; endl; cin &gt;&gt; n &gt;&gt; m; init(n); cout &lt;&lt; &quot;è¯·è¾“å…¥è¾¹çš„èµ·ç‚¹ã€ç»ˆç‚¹ä»¥åŠè·ç¦»ï¼š&quot; &lt;&lt; endl; for (i = 0; i &lt; m; ++i) &#123; int u, v, wt; cin &gt;&gt; u &gt;&gt; v &gt;&gt; wt; edges[u][v] = edges[v][u] = wt; &#125; cout &lt;&lt; &quot;è¯·è¾“å…¥èµ·ç‚¹åŸå¸‚ï¼š&quot; &lt;&lt; endl; int start; cin &gt;&gt; start; dijkstra(start, n); cout &lt;&lt; &quot;èµ·ç‚¹åŸå¸‚åˆ°æ‰€æœ‰åŸå¸‚çš„æœ€å°è·ç¦»ä¸ºï¼š&quot; &lt;&lt; endl; for (j = 0; j &lt; n; ++j) &#123; cout &lt;&lt; start &lt;&lt; &quot;-&gt;&quot; &lt;&lt; j &lt;&lt; &quot;æœ€å°è·¯å¾„ä¸º&quot; &lt;&lt; dist[j] &lt;&lt; endl; &#125; return 0;&#125; åˆ†æ”¯é™ç•Œæ³• acwing Dijkstraç»™å®šä¸€ä¸ª n ä¸ªç‚¹ m æ¡è¾¹çš„æœ‰å‘å›¾ï¼Œå›¾ä¸­å¯èƒ½å­˜åœ¨é‡è¾¹å’Œè‡ªç¯ï¼Œæ‰€æœ‰è¾¹æƒå‡ä¸ºæ­£å€¼ã€‚ è¯·ä½ æ±‚å‡º 111 å·ç‚¹åˆ° n å·ç‚¹çš„æœ€çŸ­è·ç¦»ï¼Œå¦‚æœæ— æ³•ä» 1 å·ç‚¹èµ°åˆ° n å·ç‚¹ï¼Œåˆ™è¾“å‡º âˆ’1ã€‚ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•° nå’Œ mã€‚ æ¥ä¸‹æ¥ m è¡Œæ¯è¡ŒåŒ…å«ä¸‰ä¸ªæ•´æ•° x,y,zï¼Œè¡¨ç¤ºå­˜åœ¨ä¸€æ¡ä»ç‚¹ x åˆ°ç‚¹ yçš„æœ‰å‘è¾¹ï¼Œè¾¹é•¿ä¸º zã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤º 1 å·ç‚¹åˆ° n å·ç‚¹çš„æœ€çŸ­è·ç¦»ã€‚ å¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œåˆ™è¾“å‡º âˆ’1ã€‚ æ•°æ®èŒƒå›´ 1â‰¤nâ‰¤500 1â‰¤mâ‰¤10^5^ å›¾ä¸­æ¶‰åŠè¾¹é•¿å‡ä¸è¶…è¿‡10000ã€‚ è¾“å…¥æ ·ä¾‹ï¼š 12343 31 2 22 3 11 3 4 è¾“å‡ºæ ·ä¾‹ï¼š 13 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849#include &lt;algorithm&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;const int N = 510;int n, m;int g[N][N];int dist[N];bool visited[N];int dijkstra() &#123; memset(dist, 0x3f, sizeof dist); dist[1] = 0; for (int i = 0; i &lt; n - 1; i++) &#123; int t = -1; // t = -1 ,åœ¨ä¸‹é¢å†…å±‚å¾ªç¯çš„åˆ¤æ–­ä¸­ä¸€å®šä¼šæˆç«‹ï¼Œå› ä¸ºä¸€å®šè¦æ‰¾åˆ°ä¸€ä¸ªèƒ½å¤Ÿä¸å½“å‰æºç‚¹è·ç¦»æœ€è¿‘çš„ç‚¹ï¼Œt == -1åªä¼šæˆç«‹ä¸€æ¬¡ï¼ŒçŸ¥è¯†ä¸ºäº†æ‰¾åˆ°ç¬¬ä¸€ä¸ªè·ç¦»èµ·å§‹ç‚¹æœ€è¿‘çš„ç‚¹ï¼Œä¸”åœ¨ä¸‹é¢dist[j] = min(dist[j], dist[t] + g[t][j]);ä¸­ç”¨äºåˆå§‹åŒ–ç¬¬ä¸€æ¬¡çš„è·ç¦»å‡ºå‘ç‚¹çš„è·ç¦» for (int j = 1; j &lt;= n; j++) if (!visited[j] &amp;&amp; (t == -1 || dist[t] &gt; dist[j])) t = j; for (int j = 1; j &lt;= n; j++) dist[j] = min(dist[j], dist[t] + g[t][j]); visited[t] = true; &#125; if (dist[n] == 0x3f3f3f3f) return -1; return dist[n];&#125;int main() &#123; scanf(&quot;%d%d&quot;, &amp;n, &amp;m); memset(g, 0x3f, sizeof g); while (m--) &#123; int a, b, c; scanf(&quot;%d%d%d&quot;, &amp;a, &amp;b, &amp;c); g[a][b] = min(g[a][b], c); // æœ‰å‘æ— ç¯å›¾åªèƒ½èµ‹ä¸€è¾¹çš„å€¼********* &#125; printf(&quot;%d\\n&quot;, dijkstra()); return 0;&#125; é‚»æ¥è¡¨å­˜çš„è¯ï¼Œæ— æ‰€è°“é‡è¾¹ Kruskal 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758#include &lt;algorithm&gt;#include &lt;iostream&gt;using namespace std;const int N = 100010, M = 200010, INF = 0x3f3f3f3f;int n, m;int p[N];struct Edge &#123; int a, b, w;&#125; edges[M];bool cmp(Edge a, Edge b) &#123; // é€šè¿‡è¾¹é•¿è¿›è¡Œæ’åº return a.w &lt; b.w;&#125;// å¹¶æŸ¥é›†int find(int x) &#123; if (p[x] != x) p[x] = find(p[x]); return p[x];&#125;int kruskal() &#123; sort(edges, edges + m, cmp); for (int i = 1; i &lt;= n; i++) // åˆå§‹åŒ–å¹¶æŸ¥é›† p[i] = i; int res = 0, cnt = 0; for (int i = 0; i &lt; m; i++) &#123; int a = edges[i].a, b = edges[i].b, w = edges[i].w; a = find(a), b = find(b); if (a != b) &#123; p[a] = b; // åˆå¹¶a b res += w; cnt++; // å½“å‰åŠ äº†å¤šå°‘æ¡è¾¹ &#125; &#125; if (cnt &lt; n - 1) return INF; // å¦‚æœä¿ç•™çš„è¾¹å°äºç‚¹æ•°-1ï¼Œåˆ™ä¸èƒ½è¿é€š else return res;&#125;int main() &#123; scanf(&quot;%d%d&quot;, &amp;n, &amp;m); for (int i = 0; i &lt; m; i++) &#123; int a, b, w; scanf(&quot;%d%d%d&quot;, &amp;a, &amp;b, &amp;w); edges[i] = &#123;a, b, w&#125;; &#125; int t = kruskal(); if (t == INF) puts(&quot;impossible&quot;); else printf(&quot;%d\\n&quot;, t); return 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"å›¾è®º","slug":"å›¾è®º","permalink":"http://breadwinners.top/tags/%E5%9B%BE%E8%AE%BA/"},{"name":"graph","slug":"graph","permalink":"http://breadwinners.top/tags/graph/"}]},{"title":"BFS","slug":"bfs","date":"2023-04-16T16:00:00.000Z","updated":"2023-07-11T01:37:33.107Z","comments":true,"path":"2023/04/17/bfs/","link":"","permalink":"http://breadwinners.top/2023/04/17/bfs/","excerpt":"","text":"ä¸æ˜¯æ‰€æœ‰çš„æœ€çŸ­è·¯å¾„é—®é¢˜éƒ½å¯ä»¥ç”¨bfsæ¥åšï¼Œåªæœ‰å½“è¾¹æƒç›¸åŒçš„æ—¶å€™æ‰èƒ½ç”¨bfs pairæ˜¯ä¸€å¯¹å€¼ BFSä¸€èˆ¬æ¡†æ¶ èµ°è¿·å®«æ€è·¯å‚è€ƒ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364#include &lt;algorithm&gt;#include &lt;iostream&gt;#include &lt;queue&gt;#include &lt;unordered_map&gt;using namespace std;int bfs(string start) &#123; // å®šä¹‰ç›®æ ‡çŠ¶æ€ string end = &quot;12345678x&quot;; // å®šä¹‰é˜Ÿåˆ—å’Œdistæ•°ç»„ queue&lt;string&gt; q; unordered_map&lt;string, int&gt; d; // åˆå§‹åŒ–é˜Ÿåˆ—å’Œdistæ•°ç»„ q.push(start); d[start] = 0; // è½¬ç§»æ–¹å¼ int dx[4] = &#123;1, -1, 0, 0&#125;, dy[4] = &#123;0, 0, 1, -1&#125;; while (q.size()) &#123; auto t = q.front(); q.pop(); // è®°å½•å½“å‰çŠ¶æ€çš„è·ç¦»ï¼Œå¦‚æœæ˜¯æœ€ç»ˆçŠ¶æ€åˆ™è¿”å›è·ç¦» int distance = d[t]; if (t == end) return distance; // æŸ¥è¯¢xåœ¨å­—ç¬¦ä¸²ä¸­çš„ä¸‹æ ‡ï¼Œç„¶åè½¬æ¢ä¸ºåœ¨çŸ©é˜µä¸­çš„åæ ‡ int k = t.find(&#x27;x&#x27;); int x = k / 3, y = k % 3; for (int i = 0; i &lt; 4; i++) &#123; // æ±‚è½¬ç§»åxçš„åæ ‡ int a = x + dx[i], b = y + dy[i]; // å½“å‰åæ ‡æ²¡æœ‰è¶Šç•Œ if (a &gt;= 0 &amp;&amp; a &lt; 3 &amp;&amp; b &gt;= 0 &amp;&amp; b &lt; 3) &#123; // è½¬ç§»x swap(t[k], t[a * 3 + b]); // å¦‚æœt æ²¡æœ‰åœ¨mapä¸­ï¼Œåˆ™å½“å‰çŠ¶æ€æ˜¯ç¬¬ä¸€æ¬¡éå†ï¼Œè®°å½•è·ç¦»è¿›map ä¸­ï¼Œå…¥é˜Ÿ if (d.count(t) == 0) &#123; d[t] = distance + 1; q.push(t); &#125; // è¿˜åŸçŠ¶æ€ï¼Œä¸ºä¸‹ä¸€ç§è½¬æ¢æƒ…å†µåšå‡†å¤‡ swap(t[k], t[a * 3 + b]); &#125; &#125; &#125; // æ— æ³•è½¬æ¢åˆ°ç›®æ ‡çŠ¶æ€ï¼Œè¿”å›-1 return -1;&#125;int main() &#123; string c, start; // è¾“å…¥èµ·å§‹çŠ¶æ€ for (int i = 0; i &lt; 9; i++) &#123; cin &gt;&gt; c; start += c; &#125; cout &lt;&lt; bfs(start) &lt;&lt; endl; return 0;&#125; åˆ é™¤C++å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç©ºæ ¼ å…«æ•°ç åœ¨ä¸€ä¸ª $3 Ã— 3$çš„ç½‘æ ¼ä¸­ï¼Œ1 ~ 8 è¿™ 8 ä¸ªæ•°å­—å’Œä¸€ä¸ª x æ°å¥½ä¸é‡ä¸æ¼åœ°åˆ†å¸ƒåœ¨è¿™ $3 Ã— 3$ çš„ç½‘æ ¼ä¸­ã€‚ ä¾‹å¦‚ï¼š 1231 2 3x 4 67 5 8 åœ¨æ¸¸æˆè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥æŠŠ x ä¸å…¶ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªæ–¹å‘ä¹‹ä¸€çš„æ•°å­—äº¤æ¢ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚ æˆ‘ä»¬çš„ç›®çš„æ˜¯é€šè¿‡äº¤æ¢ï¼Œä½¿å¾—ç½‘æ ¼å˜ä¸ºå¦‚ä¸‹æ’åˆ—ï¼ˆç§°ä¸ºæ­£ç¡®æ’åˆ—ï¼‰ï¼š 1231 2 34 5 67 8 x ä¾‹å¦‚ï¼Œç¤ºä¾‹ä¸­å›¾å½¢å°±å¯ä»¥é€šè¿‡è®© x å…ˆåä¸å³ã€ä¸‹ã€å³ä¸‰ä¸ªæ–¹å‘çš„æ•°å­—äº¤æ¢æˆåŠŸå¾—åˆ°æ­£ç¡®æ’åˆ—ã€‚ äº¤æ¢è¿‡ç¨‹å¦‚ä¸‹ï¼š 1231 2 3 1 2 3 1 2 3 1 2 3x 4 6 4 x 6 4 5 6 4 5 67 5 8 7 5 8 7 x 8 7 8 x ç°åœ¨ï¼Œç»™ä½ ä¸€ä¸ªåˆå§‹ç½‘æ ¼ï¼Œè¯·ä½ æ±‚å‡ºå¾—åˆ°æ­£ç¡®æ’åˆ—è‡³å°‘éœ€è¦è¿›è¡Œå¤šå°‘æ¬¡äº¤æ¢ã€‚ è¾“å…¥æ ¼å¼è¾“å…¥å ä¸€è¡Œï¼Œå°† $3 Ã— 3$ çš„åˆå§‹ç½‘æ ¼æç»˜å‡ºæ¥ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœåˆå§‹ç½‘æ ¼å¦‚ä¸‹æ‰€ç¤ºï¼š 1231 2 3 x 4 6 7 5 8 åˆ™è¾“å…¥ä¸ºï¼š1 2 3 x 4 6 7 5 8 è¾“å‡ºæ ¼å¼è¾“å‡ºå ä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å°‘äº¤æ¢æ¬¡æ•°ã€‚ å¦‚æœä¸å­˜åœ¨è§£å†³æ–¹æ¡ˆï¼Œåˆ™è¾“å‡º âˆ’1âˆ’1-1ã€‚ è¾“å…¥æ ·ä¾‹ï¼š12 3 4 1 5 x 7 6 8 è¾“å‡ºæ ·ä¾‹119 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364#include &lt;algorithm&gt;#include &lt;iostream&gt;#include &lt;queue&gt;#include &lt;unordered_map&gt;using namespace std;int bfs(string start) &#123; // å®šä¹‰ç›®æ ‡çŠ¶æ€ string end = &quot;12345678x&quot;; // å®šä¹‰é˜Ÿåˆ—å’Œdistæ•°ç»„ queue&lt;string&gt; q; unordered_map&lt;string, int&gt; d; // åˆå§‹åŒ–é˜Ÿåˆ—å’Œdistæ•°ç»„ q.push(start); d[start] = 0; // è½¬ç§»æ–¹å¼ int dx[4] = &#123;1, -1, 0, 0&#125;, dy[4] = &#123;0, 0, 1, -1&#125;; while (q.size()) &#123; auto t = q.front(); q.pop(); // è®°å½•å½“å‰çŠ¶æ€çš„è·ç¦»ï¼Œå¦‚æœæ˜¯æœ€ç»ˆçŠ¶æ€åˆ™è¿”å›è·ç¦» int distance = d[t]; if (t == end) return distance; // æŸ¥è¯¢xåœ¨å­—ç¬¦ä¸²ä¸­çš„ä¸‹æ ‡ï¼Œç„¶åè½¬æ¢ä¸ºåœ¨çŸ©é˜µä¸­çš„åæ ‡ int k = t.find(&#x27;x&#x27;); int x = k / 3, y = k % 3; for (int i = 0; i &lt; 4; i++) &#123; // æ±‚è½¬ç§»åxçš„åæ ‡ int a = x + dx[i], b = y + dy[i]; // å½“å‰åæ ‡æ²¡æœ‰è¶Šç•Œ if (a &gt;= 0 &amp;&amp; a &lt; 3 &amp;&amp; b &gt;= 0 &amp;&amp; b &lt; 3) &#123; // å¦‚ä½•å¯»æ‰¾é™åˆ¶æ¡ä»¶ï¼Ÿï¼Ÿï¼Ÿa:è¿™é‡Œä¸éœ€è¦é™åˆ¶æ¡ä»¶ // è½¬ç§»x swap(t[k], t[a * 3 + b]); // ä¸‹é¢if è®°å½•ä¸‹å®½æœçš„ä¸€ç§å¯èƒ½æƒ…å†µ // å¦‚æœt æ²¡æœ‰åœ¨mapä¸­ï¼Œåˆ™å½“å‰çŠ¶æ€æ˜¯ç¬¬ä¸€æ¬¡éå†ï¼Œè®°å½•è·ç¦»è¿›map ä¸­ï¼Œå…¥é˜Ÿ if (d.count(t) == 0) &#123; d[t] = distance + 1; q.push(t); &#125; // è¿˜åŸçŠ¶æ€ï¼Œä¸ºä¸‹ä¸€ç§è½¬æ¢æƒ…å†µåšå‡†å¤‡ swap(t[k], t[a * 3 + b]); // å› ä¸ºè¿™ä¸ªæ˜¯å®½æœï¼Œæ‰€ä»¥å®ƒå¿…é¡»äº¤æ¢å›åŸæ¥çš„å€¼ç»§ç»­è¿›è¡Œæ›´æ–°åç»­å¯èƒ½çš„æƒ…å†µ &#125; &#125; &#125; // æ— æ³•è½¬æ¢åˆ°ç›®æ ‡çŠ¶æ€ï¼Œè¿”å›-1 return -1;&#125;int main() &#123; string c, start; // è¾“å…¥èµ·å§‹çŠ¶æ€ for (int i = 0; i &lt; 9; i++) &#123; cin &gt;&gt; c; start += c; &#125; cout &lt;&lt; bfs(start) &lt;&lt; endl; return 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"bfs","slug":"bfs","permalink":"http://breadwinners.top/tags/bfs/"}]},{"title":"å‰ç¼€å’Œå’Œå·®åˆ†","slug":"å‰ç¼€å’Œå’Œå·®åˆ†","date":"2023-04-16T16:00:00.000Z","updated":"2023-07-11T01:43:41.873Z","comments":true,"path":"2023/04/17/å‰ç¼€å’Œå’Œå·®åˆ†/","link":"","permalink":"http://breadwinners.top/2023/04/17/%E5%89%8D%E7%BC%80%E5%92%8C%E5%92%8C%E5%B7%AE%E5%88%86/","excerpt":"","text":"ä¸€ç»´å‰ç¼€å’Œ12345678910111213141516171819202122232425#include &lt;algorithm&gt;#include &lt;iostream&gt;using namespace std;int main() &#123; // ä¸€ç»´å‰ç¼€å’Œ int n, m; cin &gt;&gt; n &gt;&gt; m; int a[n + 1] = &#123;0&#125;, s[n] = &#123;0&#125;; for (int i = 1; i &lt;= n; i++) &#123; cin &gt;&gt; a[i]; &#125; for (int i = 1; i &lt;= n; i++) &#123; s[i] = s[i - 1] + a[i]; &#125; while (m--) &#123; int l, r; cin &gt;&gt; l &gt;&gt; r; cout &lt;&lt; s[r] - s[l - 1] &lt;&lt; &#x27;\\n&#x27;; &#125; return 0;&#125; äºŒç»´å‰ç¼€å’Œs[i][j] = s[i - 1][j] + s[i][j - 1] - s[i - 1][j - 1] + a[i][j] (x2, y2) - (x1, y1) = s[x2, y2] - s[x1 - 1, y2] - s[x2, y1 - 1] + s[x1 - 1, y1 - 1] &#x3D;&#x3D;æ³¨æ„&#x3D;&#x3D; å®šä¹‰ä¸¤ä¸ª1w * 1wçš„æ•°ç»„ï¼Œç”µè„‘çˆ†äº†ï¼Œ100 * 100çš„è¿‡ä¸äº†ï¼Œ1k * 1kæ¯”è¾ƒç†æƒ³ 123456789101112131415161718192021222324252627#include &lt;iostream&gt;#define N 1010using namespace std;int main() &#123; // äºŒç»´å‰ç¼€å’Œ int n, m, q; scanf(&quot;%d %d %d&quot;, &amp;n, &amp;m, &amp;q); int a[N][N] = &#123;0&#125;, s[N][N] = &#123;0&#125;; for (int i = 1; i &lt;= n; i++) &#123; for (int j = 1; j &lt;= m; j++) &#123; scanf(&quot;%d&quot;, &amp;a[i][j]); &#125; &#125; for (int i = 1; i &lt;= n; i++) &#123; for (int j = 1; j &lt;= m; j++) &#123; s[i][j] = s[i - 1][j] + s[i][j - 1] - s[i - 1][j - 1] + a[i][j]; // è®¡ç®—s[i][j] &#125; &#125; while (q--) &#123; int x1, x2, y1, y2; scanf(&quot;%d %d %d %d&quot;, &amp;x1, &amp;y1, &amp;x2, &amp;y2); printf(&quot;%d\\n&quot;, s[x2][y2] - s[x2][y1 - 1] - s[x1 - 1][y2] + s[x1 - 1][y1 - 1]);// è®¡ç®—s[x1][y1] - s[x2][y2] &#125; return 0;&#125; ä¸€ç»´å·®åˆ† 1234567891011121314151617181920212223242526272829303132333435#include &lt;algorithm&gt;#include &lt;iostream&gt;#define N 100010using namespace std;int a[N] = &#123;0&#125;, b[N] = &#123;0&#125;; // åªç”¨äº†ä¸€ä¸ªbæ•°ç»„void insert(int l, int r, int n) &#123; // æ’å…¥å‡½æ•°æ˜¯ç²¾é«“ b[l] += n; b[r + 1] -= n;&#125;int main() &#123; // ä¸€ç»´å·®åˆ† int n, m; cin &gt;&gt; n &gt;&gt; m; int t; for (int i = 1; i &lt;= n; i++) &#123; cin &gt;&gt; t; insert(i, i, t); &#125; while (m--) &#123; int l, r, k; cin &gt;&gt; l &gt;&gt; r &gt;&gt; k; insert(l, r, k); &#125; for (int i = 1; i &lt;= n; i++) &#123; b[i] += b[i - 1]; &#125; for (int i = 1; i &lt;= n; i++) &#123; cout &lt;&lt; b[i] &lt;&lt; &quot; &quot;; &#125; return 0;&#125; å·®åˆ†çŸ©é˜µ 12345678910111213141516171819202122232425262728293031323334353637383940#include &lt;algorithm&gt;#include &lt;iostream&gt;#define N 1010using namespace std;int a[N][N] = &#123;0&#125;, b[N][N] = &#123;0&#125;;void insert(int x1, int y1, int x2, int y2, int k) &#123; b[x1][y1] += k; b[x2 + 1][y1] -= k; b[x1][y2 + 1] -= k; b[x2 + 1][y2 + 1] += k;&#125;int main() &#123; // å·®åˆ†çŸ©é˜µ ios::sync_with_stdio(false); int n, m, q, t; cin &gt;&gt; n &gt;&gt; m &gt;&gt; q; for (int i = 1; i &lt;= n; i++) &#123; for (int j = 1; j &lt;= m; j++) &#123; cin &gt;&gt; t; insert(i, j, i, j, t); &#125; &#125; while (q--) &#123; int x1, y1, x2, y2, k; cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2 &gt;&gt; k; insert(x1, y1, x2, y2, k); &#125; for (int i = 1; i &lt;= n; i++) &#123; for (int j = 1; j &lt;= m; j++) &#123; b[i][j] = b[i - 1][j] + b[i][j - 1] - b[i - 1][j - 1] + b[i][j]; cout &lt;&lt; b[i][j] &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; &quot;\\n&quot;; &#125; return 0;&#125; æ¿€å…‰ç‚¸å¼¹åœ°å›¾ä¸Šæœ‰ Nä¸ªç›®æ ‡ï¼Œç”¨æ•´æ•° Xi,Yi è¡¨ç¤ºç›®æ ‡åœ¨åœ°å›¾ä¸Šçš„ä½ç½®ï¼Œæ¯ä¸ªç›®æ ‡éƒ½æœ‰ä¸€ä¸ªä»·å€¼ Wiã€‚ æ³¨æ„ï¼šä¸åŒç›®æ ‡å¯èƒ½åœ¨åŒä¸€ä½ç½®ã€‚ ç°åœ¨æœ‰ä¸€ç§æ–°å‹çš„æ¿€å…‰ç‚¸å¼¹ï¼Œå¯ä»¥æ‘§æ¯ä¸€ä¸ªåŒ…å« RÃ—Rä¸ªä½ç½®çš„æ­£æ–¹å½¢å†…çš„æ‰€æœ‰ç›®æ ‡ã€‚ æ¿€å…‰ç‚¸å¼¹çš„æŠ•æ”¾æ˜¯é€šè¿‡å«æ˜Ÿå®šä½çš„ï¼Œä½†å…¶æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯å…¶çˆ†ç‚¸èŒƒå›´ï¼Œå³é‚£ä¸ªæ­£æ–¹å½¢çš„è¾¹å¿…é¡»å’Œ xï¼Œyxï¼Œyxï¼Œy è½´å¹³è¡Œã€‚ æ±‚ä¸€é¢—ç‚¸å¼¹æœ€å¤šèƒ½ç‚¸æ‰åœ°å›¾ä¸Šæ€»ä»·å€¼ä¸ºå¤šå°‘çš„ç›®æ ‡ã€‚ è¾“å…¥æ ¼å¼ç¬¬ä¸€è¡Œè¾“å…¥æ­£æ•´æ•° N å’Œ Rï¼Œåˆ†åˆ«ä»£è¡¨åœ°å›¾ä¸Šçš„ç›®æ ‡æ•°ç›®å’Œæ­£æ–¹å½¢åŒ…å«çš„æ¨ªçºµä½ç½®æ•°é‡ï¼Œæ•°æ®ç”¨ç©ºæ ¼éš”å¼€ã€‚ æ¥ä¸‹æ¥ N è¡Œï¼Œæ¯è¡Œè¾“å…¥ä¸€ç»„æ•°æ®ï¼Œæ¯ç»„æ•°æ®åŒ…æ‹¬ä¸‰ä¸ªæ•´æ•° Xi,Yi,Wiåˆ†åˆ«ä»£è¡¨ç›®æ ‡çš„ x åæ ‡ï¼Œy åæ ‡å’Œä»·å€¼ï¼Œæ•°æ®ç”¨ç©ºæ ¼éš”å¼€ã€‚ è¾“å‡ºæ ¼å¼è¾“å‡ºä¸€ä¸ªæ­£æ•´æ•°ï¼Œä»£è¡¨ä¸€é¢—ç‚¸å¼¹æœ€å¤šèƒ½ç‚¸æ‰åœ°å›¾ä¸Šç›®æ ‡çš„æ€»ä»·å€¼æ•°ç›®ã€‚ æ•°æ®èŒƒå›´$0â‰¤Râ‰¤10^9$$0&lt;Nâ‰¤10000$ $0â‰¤Xi,Yiâ‰¤5000$$0â‰¤Wiâ‰¤1000$ è¾“å…¥æ ·ä¾‹ï¼š1232 10 0 11 1 1 è¾“å‡ºæ ·ä¾‹ï¼š11 æ³¨æ„ä»–è¿™ä¸ªç›®æ ‡æ˜¯åœ¨çº¿å’Œçº¿çš„äº¤ç•Œä¸Šï¼Œä¸æ˜¯æ ¼å­çš„ä¸­å¿ƒ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#include &lt;cstring&gt;#include &lt;iostream&gt;#include &lt;algorithm&gt;using namespace std;const int N = 5010;int n, m;int s[N][N];int main()&#123; int cnt, R; cin &gt;&gt; cnt &gt;&gt; R; R = min(5001, R); // å› ä¸ºæœ€å¤§çš„å®½åº¦ä¸º5000ï¼Œè€Œ R çš„èŒƒå›´å¯èƒ½å–åˆ°1e9,ä½†æ˜¯è¦†ç›–æ•´ä¸ªåŒºåŸŸï¼Œ5001å°±å¤Ÿäº†ï¼Œæ‰€ä»¥è¿™é‡Œå¾—å¤„ç†ä¸€ä¸‹ï¼Œå¦åˆ™åé¢å¤§äº5000ï¼Œå¾€å³ä¸‹è§’ç«¯ç‚¹æšä¸¾æ—¶ï¼Œå¾ªç¯ä¸ä¼šæ‰§è¡Œï¼Œä¸ä¼šè¿›è¡Œæšä¸¾ji&#x27;suan n = m = R; while (cnt -- ) &#123; int x, y, w; cin &gt;&gt; x &gt;&gt; y &gt;&gt; w; x ++, y ++ ; n = max(n, x), m = max(m, y); s[x][y] += w; &#125; // é¢„å¤„ç†å‰ç¼€å’Œ for (int i = 1; i &lt;= n; i ++ ) for (int j = 1; j &lt;= m; j ++ ) s[i][j] += s[i - 1][j] + s[i][j - 1] - s[i - 1][j - 1]; int res = 0; // æšä¸¾æ‰€æœ‰è¾¹é•¿æ˜¯Rçš„çŸ©å½¢ï¼Œæšä¸¾(i, j)ä¸ºå³ä¸‹è§’ for (int i = R; i &lt;= n; i ++ ) for (int j = R; j &lt;= m; j ++ ) res = max(res, s[i][j] - s[i - R][j] - s[i][j - R] + s[i - R][j - R]); cout &lt;&lt; res &lt;&lt; endl; return 0;&#125; // æŠŠnå’Œm éƒ½æ¢æˆæœ€å¤§çš„ä¸´ç•Œå€¼ 5001å¯ä»¥ACï¼Œä½†æ˜¯5010ï¼Œå°±ä¼šæŠ¥SegmentFaultï¼Œ5001è™½ç„¶å¯ä»¥è¿‡ï¼Œä½†æ˜¯å¯¹äºæ—¶é—´çš„è€—è´¹è¿˜æ˜¯å¾ˆé«˜ï¼Œå»ºè®®è¿˜æ˜¯å®šä¹‰nå’Œmç¡®å®šä¸€ä¸‹è¾¹ç•Œå€¼ï¼Œå‡å°‘éå†æ¬¡æ•°//ä½œè€…ï¼šyxc//é“¾æ¥ï¼šhttps://www.acwing.com/activity/content/code/content/163730/ Kå€åŒºé—´ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º N çš„æ•°åˆ—ï¼Œ$A1,A2,â€¦AN$ï¼Œå¦‚æœå…¶ä¸­ä¸€æ®µè¿ç»­çš„å­åºåˆ— $Ai,Ai+1,â€¦Aj$ä¹‹å’Œæ˜¯ K çš„å€æ•°ï¼Œæˆ‘ä»¬å°±ç§°è¿™ä¸ªåŒºé—´ $[i,j]$ æ˜¯ K å€åŒºé—´ã€‚ ä½ èƒ½æ±‚å‡ºæ•°åˆ—ä¸­æ€»å…±æœ‰å¤šå°‘ä¸ª K å€åŒºé—´å—ï¼Ÿ è¾“å…¥æ ¼å¼ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° N å’ŒKã€‚ ä»¥ä¸‹ N è¡Œæ¯è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°$Ai$ã€‚ è¾“å‡ºæ ¼å¼è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œä»£è¡¨ K å€åŒºé—´çš„æ•°ç›®ã€‚ æ•°æ®èŒƒå›´$1â‰¤N,Kâ‰¤100000, $$1â‰¤Aiâ‰¤100000$ è¾“å…¥æ ·ä¾‹125 21 2 3 4 5 è¾“å‡ºæ ·ä¾‹16 æ¯ç§ä½™æ•°æœ‰å¤šå°‘ç§ï¼Œç›¸åŒçš„ä¸€ç§ä½™æ•°å°±ä¼šå¯¹åº”ä¸€ç§ç­”æ¡ˆ ä»£ç æ€è·¯ä¼˜åŒ–è¿‡ç¨‹ï¼š æšä¸¾ O(n3)å¯ä»¥å¾ˆç®€å•çš„å†™å‡ºæš´åŠ›ä»£ç ï¼Œç›´æ¥ä¸‰é‡å¾ªç¯ 12345678for(int r = 1; r &lt;= n; r ++) for(int l = 1; l &lt;= r; l ++) &#123; int sum = 0; for(int i = l; i &lt;= r; i ++) sum += a[i]; if(sum % k == 0) ans ++; &#125; æšä¸¾å·¦å³åŒºé—´ç«¯ç‚¹l,rï¼Œæ±‚å‡ºåŒºé—´å’Œsumåˆ¤æ–­æ˜¯å¦ä¸ºkçš„å€æ•°ï¼Œç„¶åè®°å½•åœ¨ç­”æ¡ˆansä¸Šã€‚å¯ä»¥çœ‹å‡ºç¬¬ä¸‰é‡å¾ªç¯çš„ä½œç”¨å°±æ˜¯ç®—å‡ºåŒºé—´[l,r]çš„å’Œï¼Œæ‰€ä»¥ç”¨å‰ç¼€å’Œæ¥ä¼˜åŒ–è¿™é‡å¾ªç¯ã€‚ å‰ç¼€å’Œ O(n2ï¼‰é¢„å¤„ç†ä¸€ä¸‹æ•°ç»„a[]ï¼Œå°†å‰ç¼€å’Œå­˜å…¥s[]ä¸­ï¼Œæ¯æ¬¡æŸ¥è¯¢å°±åªéœ€è¦O(1)O(1)O(1)çš„æ—¶é—´äº† 12345for(int i = 1; i &lt;= n; i ++) s[i] = s[i - 1] + a[i]; // æ±‚å‰ç¼€å’Œfor(int r = 1; r &lt;= n; r ++) for(int l = 1; l &lt;= r; l ++) if((s[r] - s[l - 1]) % k == 0) ans ++; ä½†æ˜¯è¿™ä¸ªæ—¶é—´è¿˜æ˜¯ä¼šç‚¸ï¼Œæ‰€ä»¥è¿˜éœ€è¦ä¼˜åŒ–ä¸€å±‚ã€‚ æ•°å­¦ O(n) ç¬¬äºŒå±‚å¾ªç¯çš„ä½œç”¨æ˜¯æšä¸¾å·¦ç«¯ç‚¹ï¼Œå†™å‡ºæ¥å°±æ˜¯(s[r] - s[0, r - 1]) % k = 0,å½“è¿™ä¸ªæ¡ä»¶æˆç«‹ç­”æ¡ˆå°±åŠ ä¸€ã€‚ åŒ–ç®€: s[r]%kâ‰¡s[0,râˆ’1]%k ç°åœ¨è¿™ä¸ªå¼å­çš„æ„æ€å°±æ˜¯ï¼šåœ¨æ¨¡kçš„æƒ…å†µä¸‹ï¼Œä¹‹å‰æ‰€æœ‰ç‚¹å’Œå½“å‰ç‚¹æœ‰éƒ½å°‘ä¸ªç›¸ç­‰ã€‚æ‰€ä»¥å†å¼€ä¸€ä¸ªé¢å¤–çš„æ•°ç»„cnt[]è®°å½•æ¯ä¸ªå‰ç¼€å’Œå–ä½™kçš„ä½™æ•°çš„æ•°é‡ï¼Œéå†ä¸€éå°±è¡Œäº†ã€‚ æ³¨æ„è¿˜å¾—æŠŠcnt[0]èµ‹å€¼1ï¼Œå› ä¸ºæ²¡æœ‰è®¡ç®—0%k==0è¿™ä¸€é¡¹ã€‚ (s[ i ] - s[ j ]) % k ç­‰ä»·äºs[ i ] % kçš„ä½™æ•°å’Œs[ j ] % kçš„ä½™æ•°ç›¸åŒæ—¶çš„ç»„åˆæ•°C(s,2)&#x3D;s(s-1)&#x2F;2&#x3D;1+2+3+â€¦+s-1,å…¶ä¸­sä¸ºç›¸åŒä½™æ•°çš„æ•°é‡ã€‚è€Œé’ˆå¯¹ä½™æ•°ä¸º0çš„æ•°ï¼Œç”±äºå…¶æœ¬èº«å°±æ˜¯kçš„å€æ•°ï¼Œæ‰€ä»¥å…¶ç»„åˆæ•°ä¸ºC(s,2)+s&#x3D;1+2+3+â€¦+sï¼Œå› æ­¤éœ€è¦è®¾ç½®cnt[0] &#x3D; 1æ•´åˆè®¡ç®—ã€‚ æ¨¡æ‹Ÿè¿‡ç¨‹ 123456789101112131415161718192021222324252627#include &lt;algorithm&gt;#include &lt;cstdio&gt;#include &lt;iostream&gt;using namespace std;typedef long long LL;const int N = 1e5 + 10;LL s[N], cnt[N];int main() &#123; int n, k; LL res = 0; cin &gt;&gt; n &gt;&gt; k; for (int i = 1; i &lt;= n; i++) &#123; // é¢„å¤„ç†å‰ç¼€å’Œ scanf(&quot;%lld&quot;, &amp;s[i]); s[i] += s[i - 1]; &#125; cnt[0] = 1; // å¦‚æœæœ‰ç›´æ¥ % k == 0ï¼Œçš„ï¼Œéœ€è¦ç›´æ¥åŠ ä¸Šï¼Œä¸éœ€è¦åƒå…¶ä»–çš„å€¼ä¸€æ ·ï¼Œéœ€è¦å‡ºç°ä¸¤æ¬¡ %k ç›¸ç­‰çš„å€¼åœ¨åŠ ä¸Š for (int i = 1; i &lt;= n; i++) &#123; res += cnt[s[i] % k]; cnt[s[i] % k]++; &#125; cout &lt;&lt; res; return 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"å‰ç¼€å’Œ","slug":"å‰ç¼€å’Œ","permalink":"http://breadwinners.top/tags/%E5%89%8D%E7%BC%80%E5%92%8C/"},{"name":"å·®åˆ†","slug":"å·®åˆ†","permalink":"http://breadwinners.top/tags/%E5%B7%AE%E5%88%86/"}]},{"title":"å¹¶æŸ¥é›†","slug":"å¹¶æŸ¥é›†","date":"2023-04-15T16:00:00.000Z","updated":"2023-07-11T01:34:12.047Z","comments":true,"path":"2023/04/16/å¹¶æŸ¥é›†/","link":"","permalink":"http://breadwinners.top/2023/04/16/%E5%B9%B6%E6%9F%A5%E9%9B%86/","excerpt":"","text":"åˆå¹¶é›†åˆ123456789int find(int x)&#123; if (p[x] == x || p[p[x]] == p[x]) return p[x]; int r = find(p[x]); p[x] = r; return r;&#125; 12345int find(int x) &#123; // è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯å¯»æ‰¾xçš„ç¥–å®—æ ¹èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯çˆ¶èŠ‚ç‚¹ if (x != p[x]) p[x] = find(p[x]); // è¿™å…¶ä¸­å®ç°äº†è·¯å¾„å‹ç¼©çš„å·¥ä½œï¼Œä½†æ˜¯ä¸çŸ¥é“æ€ä¹ˆå®ç°çš„ return p[x];&#125; 123456789101112131415161718192021222324252627282930313233#include &lt;algorithm&gt;#include &lt;iostream&gt;using namespace std;const int N = 1e5 + 10;int p[N];int find(int x) &#123; // è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯å¯»æ‰¾xçš„ç¥–å®—æ ¹èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯çˆ¶èŠ‚ç‚¹ if (x != p[x]) p[x] = find(p[x]); // è¿™å…¶ä¸­å®ç°äº†è·¯å¾„å‹ç¼©çš„å·¥ä½œï¼Œä½†æ˜¯ä¸çŸ¥é“æ€ä¹ˆå®ç°çš„ return p[x];&#125;int main() &#123; // å¹¶æŸ¥é›† int n, m; char op; int a, b; cin &gt;&gt; n &gt;&gt; m; for (int i = 1; i &lt;= n; i++) &#123; p[i] = i; &#125; while (m--) &#123; cin &gt;&gt; op &gt;&gt; a &gt;&gt; b; if (op == &#x27;M&#x27;) &#123; p[find(a)] = find(b); // å¿…é¡»æ‰¾æ‰“æ ¹èŠ‚ç‚¹ç„¶ååˆå¹¶,æŠŠaåˆå¹¶åˆ°bï¼Œä¸æ˜¯p[find(a)] = p[find(b)],è™½ç„¶è¿™æ ·ä¹Ÿèƒ½å¯¹ &#125; else if (op == &#x27;Q&#x27;) &#123; if (find(a) == find(b)) puts(&quot;Yes&quot;); else puts(&quot;No&quot;); &#125; &#125; return 0;&#125; è¿é€šå—ä¸­ç‚¹çš„æ•°é‡1234567891011121314151617181920212223242526272829303132333435363738394041424344#include &lt;algorithm&gt;#include &lt;iostream&gt;using namespace std;const int N = 100010 + 10;int p[N], cnt[N];int find(int x) &#123; if (x != p[x]) p[x] = find(p[x]); return p[x];&#125;int main() &#123; // è¿é€šå—ä¸­ç‚¹çš„ä¸ªæ•° int n, m, a, b; string op; cin &gt;&gt; n &gt;&gt; m; for (int i = 1; i &lt;= n; i++) &#123; // ä¸ºä»€ä¹ˆä»1å¼€å§‹ï¼Ÿä»0å¼€å§‹ä¹Ÿæ˜¯å¯ä»¥çš„ p[i] = i; cnt[i] = 1; &#125; while (m--) &#123; cin &gt;&gt; op; if (op[0] == &#x27;C&#x27;) &#123; cin &gt;&gt; a &gt;&gt; b; if (find(a) == find(b)) continue; cnt[find(b)] += cnt[find(a)]; // **å¿…é¡»å…ˆæ”¹èŠ‚ç‚¹æ•°ç›®çš„å¤§å°æ‰èƒ½åˆå¹¶é›†åˆï¼Œå…ˆåˆå¹¶é›†åˆï¼ŒèŠ‚ç‚¹çš„æ•°é‡å°±å˜äº†** p[find(a)] = find(b); // erroneous cnt[b] += cnt[a]; &#125; else if (op[1] == &#x27;1&#x27;) &#123; // æŸ¥è¯¢a, bæ˜¯å¦åœ¨ä¸€ä¸ªè¿é€šå—ä¸­ cin &gt;&gt; a &gt;&gt; b; if (find(a) == find(b)) puts(&quot;Yes&quot;); else puts(&quot;No&quot;); &#125; else if (op[1] == &#x27;2&#x27;) &#123; cin &gt;&gt; a; // erroneous puts(&quot;&quot; + cnt[x]); cout &lt;&lt; cnt[find(a)] &lt;&lt; &#x27;\\n&#x27;; &#125; &#125; return 0;&#125; é£Ÿç‰©é“¾ æ ¸å¿ƒä»£ç 12345678910int find(int x)&#123; if(p[x] != x) &#123; int tmp = find(p[x]); d[x] += d[p[x]]; // åŠ ä¸Šçˆ¶èŠ‚ç‚¹åˆ°çˆ¶çˆ¶èŠ‚ç‚¹çš„è·ç¦» p[x] = tmp; &#125; return p[x];&#125; æ³¨æ„äº‹é¡¹ï¼Œå³æ˜ç™½ d[i] çš„å«ä¹‰çœ‹äº†å‡ ä½åŒå­¦åˆ†äº«çš„ä»£ç è¿˜æœ‰é¢˜è§£ï¼Œå¯¹äºd[i]çš„ç†è§£å…¶å®æ˜¯æœ‰è¯¯çš„ï¼Œd[i]çš„æ­£ç¡®ç†è§£ï¼Œåº”æ˜¯ç¬¬ i ä¸ªèŠ‚ç‚¹åˆ°å…¶çˆ¶èŠ‚ç‚¹è·ç¦»ï¼Œè€Œä¸æ˜¯åƒæœ‰äº›åŒå­¦æ‰€è®²çš„ï¼Œåˆ°æ ¹èŠ‚ç‚¹çš„è·ç¦»ï¼ï¼è¿™ç‚¹å¤§å®¶ä¸€å®šè¦ææ¸…æ¥šï¼Œä¹‹æ‰€ä»¥æœ‰è¿™æ ·çš„è¯¯ä¼šï¼Œæ˜¯å› ä¸ºfind()å‡½æ•°è¿›è¡Œäº†è·¯å¾„å‹ç¼©ï¼Œå½“æŸ¥è¯¢æŸä¸ªèŠ‚ç‚¹ i æ—¶ï¼Œå¦‚æœ i çš„çˆ¶èŠ‚ç‚¹ä¸ä¸ºæ ¹èŠ‚ç‚¹çš„è¯ï¼Œå°±ä¼šè¿›è¡Œé€’å½’è°ƒç”¨ï¼Œå°† i èŠ‚ç‚¹æ²¿é€”è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹å‡æŒ‡å‘çˆ¶èŠ‚ç‚¹ï¼Œæ­¤æ—¶çš„ d[i] å­˜æ”¾çš„æ˜¯ i åˆ°çˆ¶èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æ ¹èŠ‚ç‚¹çš„è·ç¦»ã€‚ä¸‹é¢ä¸ºäº†æ›´å¥½çš„ç†è§£å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä»¥åŠd[i]çš„å˜åŒ–ï¼Œæˆ‘å°†æ’å›¾åˆ†äº«ç»™å¤§å®¶ ç½‘ç»œåˆ†æå°æ˜æ­£åœ¨åšä¸€ä¸ªç½‘ç»œå®éªŒã€‚ ä»–è®¾ç½®äº† n å°ç”µè„‘ï¼Œç§°ä¸ºèŠ‚ç‚¹ï¼Œç”¨äºæ”¶å‘å’Œå­˜å‚¨æ•°æ®ã€‚ åˆå§‹æ—¶ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸å­˜åœ¨ä»»ä½•è¿æ¥ã€‚ å°æ˜å¯ä»¥é€šè¿‡ç½‘çº¿å°†ä¸¤ä¸ªèŠ‚ç‚¹è¿æ¥èµ·æ¥ï¼Œè¿æ¥åä¸¤ä¸ªèŠ‚ç‚¹å°±å¯ä»¥äº’ç›¸é€šä¿¡äº†ã€‚ ä¸¤ä¸ªèŠ‚ç‚¹å¦‚æœå­˜åœ¨ç½‘çº¿è¿æ¥ï¼Œç§°ä¸ºç›¸é‚»ã€‚ å°æ˜æœ‰æ—¶ä¼šæµ‹è¯•å½“æ—¶çš„ç½‘ç»œï¼Œä»–ä¼šåœ¨æŸä¸ªèŠ‚ç‚¹å‘é€ä¸€æ¡ä¿¡æ¯ï¼Œä¿¡æ¯ä¼šå‘é€åˆ°æ¯ä¸ªç›¸é‚»çš„èŠ‚ç‚¹ï¼Œä¹‹åè¿™äº›èŠ‚ç‚¹åˆä¼šè½¬å‘åˆ°è‡ªå·±ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œç›´åˆ°æ‰€æœ‰ç›´æ¥æˆ–é—´æ¥ç›¸é‚»çš„èŠ‚ç‚¹éƒ½æ”¶åˆ°äº†ä¿¡æ¯ã€‚ æ‰€æœ‰å‘é€å’Œæ¥æ”¶çš„èŠ‚ç‚¹éƒ½ä¼šå°†ä¿¡æ¯å­˜å‚¨ä¸‹æ¥ã€‚ ä¸€æ¡ä¿¡æ¯åªå­˜å‚¨ä¸€æ¬¡ã€‚ ç»™å‡ºå°æ˜è¿æ¥å’Œæµ‹è¯•çš„è¿‡ç¨‹ï¼Œè¯·è®¡ç®—å‡ºæ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨ä¿¡æ¯çš„å¤§å°ã€‚ è¾“å…¥æ ¼å¼ è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° n,måˆ†åˆ«è¡¨ç¤ºèŠ‚ç‚¹æ•°é‡å’Œæ“ä½œæ•°é‡ã€‚ èŠ‚ç‚¹ä» 1 è‡³ n ç¼–å·ã€‚ æ¥ä¸‹æ¥ m è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¸€ä¸ªæ“ä½œã€‚ å¦‚æœæ“ä½œä¸º 1 a bï¼Œè¡¨ç¤ºå°†èŠ‚ç‚¹ a å’ŒèŠ‚ç‚¹ b é€šè¿‡ç½‘çº¿è¿æ¥èµ·æ¥ã€‚å½“ a &#x3D; b æ—¶ï¼Œè¡¨ç¤ºè¿æ¥äº†ä¸€ä¸ªè‡ªç¯ï¼Œå¯¹ç½‘ç»œæ²¡æœ‰å®è´¨å½±å“ã€‚ å¦‚æœæ“ä½œä¸º 2 p tï¼Œè¡¨ç¤ºåœ¨èŠ‚ç‚¹ p ä¸Šå‘é€ä¸€æ¡å¤§å°ä¸º t çš„ä¿¡æ¯ã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºä¸€è¡Œï¼ŒåŒ…å« n ä¸ªæ•´æ•°ï¼Œç›¸é‚»æ•´æ•°ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼åˆ†å‰²ï¼Œä¾æ¬¡è¡¨ç¤ºè¿›è¡Œå®Œä¸Šè¿°æ“ä½œåèŠ‚ç‚¹ 1 è‡³èŠ‚ç‚¹ n ä¸Šå­˜å‚¨ä¿¡æ¯çš„å¤§å°ã€‚ æ•°æ®èŒƒå›´ 1â‰¤nâ‰¤100001â‰¤mâ‰¤10^5^1â‰¤tâ‰¤100 è¾“å…¥æ ·ä¾‹1ï¼š 1234567894 81 1 22 1 102 3 51 4 12 2 21 1 21 2 42 2 1 è¾“å‡ºæ ·ä¾‹1ï¼š 113 13 5 3 åˆå¹¶æ—¶ä¸åˆ›å»ºæ–°çš„èŠ‚ç‚¹1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#include &lt;algorithm&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;const int N = 10010;int n, m;int p[N], d[N];int find(int x) &#123; if (p[x] == x || p[p[x]] == p[x]) return p[x]; int r = find(p[x]); d[x] += d[p[x]]; p[x] = r; return r;&#125;int main() &#123; // https://www.acwing.com/problem/content/2071/ scanf(&quot;%d%d&quot;, &amp;n, &amp;m); for (int i = 1; i &lt;= n; i++) p[i] = i; while (m--) &#123; int t, a, b; scanf(&quot;%d%d%d&quot;, &amp;t, &amp;a, &amp;b); if (t == 1) &#123; a = find(a), b = find(b); // ä¸€å®šè¦å…ˆæ‰¾åˆ°ç¥–å®—èŠ‚ç‚¹å†åˆ¤æ–­æ˜¯å¦æ˜¯å±äºåŒä¸€æ£µæ ‘ if (a != b) &#123; d[a] -= d[b]; p[a] = b; &#125; &#125; else &#123; a = find(a); d[a] += b; &#125; &#125; for (int i = 1; i &lt;= n; i++) if (i == find(i)) // æ³¨æ„æ˜¯ i ï¼Œä¸æ˜¯ä»p[i]æ‰¾ printf(&quot;%d &quot;, d[i]); else printf(&quot;%d &quot;, d[i] + d[find(i)]); return 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"è¿é€šå—","slug":"è¿é€šå—","permalink":"http://breadwinners.top/tags/%E8%BF%9E%E9%80%9A%E5%9D%97/"}]},{"title":"è´ªå¿ƒé—®é¢˜","slug":"è´ªå¿ƒé—®é¢˜","date":"2023-04-14T16:00:00.000Z","updated":"2023-07-11T01:46:36.130Z","comments":true,"path":"2023/04/15/è´ªå¿ƒé—®é¢˜/","link":"","permalink":"http://breadwinners.top/2023/04/15/%E8%B4%AA%E5%BF%83%E9%97%AE%E9%A2%98/","excerpt":"","text":"æ´»åŠ¨å®‰æ’é—®é¢˜é—®é¢˜æè¿°å’Œåˆ†æè®¾æœ‰nä¸ªæ´»åŠ¨çš„é›†åˆE&#x3D;{1,2,â€¦,n}ï¼Œå…¶ä¸­æ¯ä¸ªæ´»åŠ¨éƒ½è¦æ±‚ä½¿ç”¨åŒä¸€èµ„æºï¼Œå¦‚æ¼”è®²ä¼šåœºç­‰ï¼Œè€Œåœ¨åŒä¸€æ—¶é—´å†…åªæœ‰ä¸€ä¸ªæ´»åŠ¨èƒ½ä½¿ç”¨è¿™ä¸€èµ„æºã€‚æ¯ä¸ªæ´»åŠ¨iéƒ½æœ‰ä¸€ä¸ªè¦æ±‚ä½¿ç”¨è¯¥èµ„æºçš„èµ·å§‹æ—¶é—´Siå’Œä¸€ä¸ªç»“æŸæ—¶é—´fi,ä¸”si &lt;fi ã€‚å¦‚æœé€‰æ‹©äº†æ´»åŠ¨iï¼Œåˆ™å®ƒåœ¨åŠå¼€æ—¶é—´åŒºé—´[si, fi)å†…å ç”¨èµ„æºã€‚è‹¥åŒºé—´[si, fi)ä¸åŒºé—´[sj, fj)ä¸ç›¸äº¤ï¼Œåˆ™ç§°æ´»åŠ¨iä¸æ´»åŠ¨jæ˜¯ç›¸å®¹çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“siâ‰¥fjæˆ–sjâ‰¥fiæ—¶ï¼Œæ´»åŠ¨iä¸æ´»åŠ¨jç›¸å®¹ã€‚ æ´»åŠ¨å®‰æ’é—®é¢˜ï¼š è¦åœ¨æ‰€ç»™çš„æ´»åŠ¨é›†åˆä¸­é€‰å‡ºæœ€å¤§çš„ç›¸å®¹æ´»åŠ¨å­é›†åˆã€‚ æ´»åŠ¨å®‰æ’é—®é¢˜çš„å…³é”®æ˜¯å¦‚ä½•æŒ‰ç…§ä¸€å®šçš„é¡ºåºå®‰æ’æ´»åŠ¨ï¼Œä½¿å¾—é€‰å‡ºçš„æ´»åŠ¨é—´ç›¸å®¹å¹¶èƒ½å®‰æ’å°½é‡å¤šçš„æ´»åŠ¨ã€‚ ä¾‹ï¼šè®¾å¾…å®‰æ’çš„11ä¸ªæ´»åŠ¨çš„å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´æŒ‰ç»“æŸæ—¶é—´çš„éå‡åºæ’åˆ—å¦‚ä¸‹ï¼š i 1 2 3 4 5 6 7 8 9 10 11 s[i] 1 3 0 5 3 5 6 8 8 2 12 f[i] 4 5 6 7 8 9 10 11 12 13 14 ç”±äºè¾“å…¥çš„æ´»åŠ¨ä»¥å…¶å®Œæˆæ—¶é—´çš„éå‡åºæ’åˆ—ï¼Œæ‰€ä»¥æ¯æ¬¡æ€»æ˜¯é€‰æ‹©å…·æœ‰æœ€æ—©å®Œæˆæ—¶é—´çš„ç›¸å®¹æ´»åŠ¨åŠ å…¥é›†åˆAä¸­ã€‚ç›´è§‚ä¸Šï¼ŒæŒ‰è¿™ç§æ–¹æ³•é€‰æ‹©ç›¸å®¹æ´»åŠ¨ä¸ºæœªå®‰æ’æ´»åŠ¨ç•™ä¸‹å°½å¯èƒ½å¤šçš„æ—¶é—´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè´ªå¿ƒé€‰æ‹©çš„æ„ä¹‰æ˜¯ä½¿å‰©ä½™çš„å¯å®‰æ’æ—¶é—´æ®µæå¤§åŒ–ï¼Œä»¥ä¾¿å®‰æ’å°½å¯èƒ½å¤šçš„ç›¸å®¹æ´»åŠ¨ã€‚ è‹¥è¢«æ£€æŸ¥çš„æ´»åŠ¨içš„å¼€å§‹æ—¶é—´Siå°äºæœ€è¿‘é€‰æ‹©çš„æ´»åŠ¨jçš„ç»“æŸæ—¶é—´fi****ï¼Œåˆ™ä¸é€‰æ‹©æ´»åŠ¨iï¼Œå¦åˆ™é€‰æ‹©æ´»åŠ¨iåŠ å…¥é›†åˆAä¸­ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142#include &lt;iostream&gt;using namespace std;int s[12] = &#123;0, 1, 3, 0, 5, 3, 5, 6, 8, 8, 2, 12&#125;, f[12] = &#123;0, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14&#125;;bool a[11];int n = 11;int Selector() &#123; a[1] = true; int j = 1; int count = 1; for (int i = 2; i &lt;= n; i++) &#123; if (s[i] &gt;= f[j]) &#123; // å¦‚æœæ´»åŠ¨ i çš„å¼€å§‹æ—¶é—´æ™šäºæ´»åŠ¨ j çš„ç»“æŸæ—¶é—´ï¼Œåˆ™é€‰æ‹©æ´»åŠ¨ iï¼Œå¦åˆ™ï¼Œèˆå¼ƒæ´»åŠ¨ i a[i] = true; j = i; count++; &#125; else a[i] = false; &#125; return count;&#125;int main() &#123; cout &lt;&lt; &quot;æ´»åŠ¨åºå·ï¼š&quot; &lt;&lt; endl; for (int i = 1; i &lt;= 11; i++) cout &lt;&lt; i &lt;&lt; &quot; &quot;; cout &lt;&lt; endl &lt;&lt; &quot;æ´»åŠ¨å¼€å§‹æ—¶é—´ï¼š&quot; &lt;&lt; endl; for (int i = 1; i &lt;= 11; i++) cout &lt;&lt; s[i] &lt;&lt; &quot; &quot;; cout &lt;&lt; endl &lt;&lt; &quot;æ´»åŠ¨ç»“æŸæ—¶é—´ï¼š&quot; &lt;&lt; endl; for (int i = 1; i &lt;= 11; i++) cout &lt;&lt; f[i] &lt;&lt; &quot; &quot;; puts(&quot;\\n**********************&quot;); int count = Selector(); cout &lt;&lt; &quot;ä¸€å…±é€‰æ‹©ä¸ª&quot; &lt;&lt; count &lt;&lt; &quot;æ´»åŠ¨å¦‚ä¸‹ï¼š&quot; &lt;&lt; endl; for (int i = 0; i &lt;= n; i++) if (a[i]) cout &lt;&lt; i &lt;&lt; &quot; &quot;; return 0;&#125; æ³¨æ„ï¼šæ­¤é¢˜ç›®è¦æ±‚æ´»åŠ¨çš„ç»“æŸæ—¶é—´ä»å°åˆ°å¤§æ’åºï¼Œæ‰€ä»¥åœ¨å®é™…è¾“å…¥çš„æ—¶å€™æœ€å¥½ç”¨STL sortå‡½æ•°å¯¹å…¶è¿›è¡Œå‡åºæ’åºï¼Œæ•°æ®å¯ä»¥ç”¨ç»“æ„ä½“æˆ–è€…vector&lt;int , int&gt; å­˜å‚¨ å¤šæœºè°ƒåº¦è´ªå¿ƒç®—æ³•å‚è€ƒ ####é—®é¢˜æè¿° è®¾æœ‰nä¸ªç‹¬ç«‹çš„ä½œä¸š&#123;1, 2, â€¦, n&#125;ï¼Œç”±må°ç›¸åŒçš„æœºå™¨`&#123;M1, M2, â€¦, Mm&#125;`è¿›è¡ŒåŠ å·¥å¤„ç†ï¼Œä½œä¸šiæ‰€éœ€çš„å¤„ç†æ—¶é—´ä¸ºtiï¼ˆ1â‰¤iâ‰¤nï¼‰ï¼Œæ¯ä¸ªä½œä¸šå‡å¯åœ¨ä»»ä½•ä¸€å°æœºå™¨ä¸ŠåŠ å·¥å¤„ç†ï¼Œä½†ä¸å¯é—´æ–­ã€æ‹†åˆ†ã€‚å¤šæœºè°ƒåº¦é—®é¢˜è¦æ±‚ç»™å‡ºä¸€ç§ä½œä¸šè°ƒåº¦æ–¹æ¡ˆï¼Œä½¿æ‰€ç»™çš„nä¸ªä½œä¸šåœ¨å°½å¯èƒ½çŸ­çš„æ—¶é—´å†…ç”±må°æœºå™¨åŠ å·¥å¤„ç†å®Œæˆã€‚ è®¾7ä¸ªç‹¬ç«‹ä½œä¸š&#123;1, 2, 3, 4, 5, 6, 7&#125;ç”±3å°æœºå™¨`&#123;M1, M2, M3&#125;`åŠ å·¥å¤„ç†ï¼Œå„ä½œä¸šæ‰€éœ€çš„å¤„ç†æ—¶é—´åˆ†åˆ«ä¸º&#123;2, 14, 4, 16, 6, 5, 3&#125;ã€‚ æ±‚è§£æ€è·¯ è´ªå¿ƒæ³•æ±‚è§£å¤šæœºè°ƒåº¦é—®é¢˜çš„è´ªå¿ƒç­–ç•¥æ˜¯æœ€é•¿å¤„ç†æ—¶é—´ä½œä¸šä¼˜å…ˆï¼Œå³æŠŠå¤„ç†æ—¶é—´æœ€é•¿çš„ä½œä¸šåˆ†é…ç»™æœ€å…ˆç©ºé—²çš„æœºå™¨ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å¤„ç†æ—¶é—´é•¿çš„ä½œä¸šä¼˜å…ˆå¤„ç†ï¼Œä»è€Œåœ¨æ•´ä½“ä¸Šè·å¾—å°½å¯èƒ½çŸ­çš„å¤„ç†æ—¶é—´ã€‚æŒ‰ç…§æœ€é•¿å¤„ç†æ—¶é—´ä½œä¸šä¼˜å…ˆçš„è´ªå¿ƒç­–ç•¥ï¼Œå½“mâ‰¥næ—¶ï¼Œåªè¦å°†æœºå™¨içš„[0, ti)æ—¶é—´åŒºé—´åˆ†é…ç»™ä½œä¸šiå³å¯ï¼›å½“mï¼œnæ—¶ï¼Œé¦–å…ˆå°†nä¸ªä½œä¸šä¾å…¶æ‰€éœ€çš„å¤„ç†æ—¶é—´ä»å¤§åˆ°å°æ’åºï¼Œç„¶åä¾æ­¤é¡ºåºå°†ä½œä¸šåˆ†é…ç»™ç©ºé—²çš„å¤„ç†æœºã€‚ è®¾nä¸ªä½œä¸šçš„å¤„ç†æ—¶é—´å­˜å‚¨åœ¨æ•°ç»„t[n]ä¸­ï¼Œmå°æœºå™¨çš„ç©ºé—²æ—¶é—´å­˜å‚¨åœ¨æ•°ç»„d[m]ä¸­ï¼Œé›†åˆæ•°ç»„S[m]å­˜å‚¨æ¯å°æœºå™¨æ‰€å¤„ç†çš„ä½œä¸šï¼Œå…¶ä¸­S[i]è¡¨ç¤ºæœºå™¨iæ‰€å¤„ç†çš„ä½œä¸šï¼Œç®—æ³•å¦‚ä¸‹ï¼š æ€è·¯å›¾è§£ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576#include &lt;algorithm&gt;#include &lt;cstdio&gt;#include &lt;iostream&gt;using namespace std;#define N 10 // å®šä¹‰æœ€å¤§ä½œä¸šæ•°é‡int d[N]; // å®šä¹‰æœºå™¨çš„å¤„ç†ä½œä¸šçš„æ€»æ—¶é•¿å’Œint S[N][N]; // è®°å½•æ¯å°æœºå™¨å¤„ç†çš„ä½œä¸šï¼Œç¬¬ä¸€ä¸ªä¸‹æ ‡æ˜¯æœºå™¨ç¼–å·ï¼Œæ¯ä¸€ç»´æ•°ç»„ä¸­å­˜çš„æ˜¯å¤„ç†çš„ä½œä¸šçš„ç¼–å·struct work &#123; // å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œè®°å½•ä½œä¸šå¤„ç†æ—¶é—´ int hour; // ä½œä¸šæ—¶é—´ int number; // åŸé¡ºåº&#125;;bool cmp(work x, work y) &#123; return x.hour &gt; y.hour;&#125;work t[N];void MultiMachine(int n, int m) &#123; int rear[N]; // é˜Ÿå°¾ä¸‹æ ‡ï¼Œç”¨æ¥æŒ‡å‘Sæ•°ç»„ä¸­ä¸‹ä¸€ä¸ªä½œä¸šçš„ä½ç½® for (int i = 0; i &lt; m; i++) &#123; // å®‰æ’å‰mä¸ªä½œä¸š S[i][0] = t[i].number; rear[i] = 0; d[i] = t[i].hour; &#125; for (int i = m; i &lt; n; i++) &#123; // ä¸€æ¬¡å®‰æ’ä½™ä¸‹å‡ ä¸ªä½œä¸š, kç”¨æ¥è®°å½•å½“å‰å¤„ç†ä»»åŠ¡æœ€å°‘æ—¶é—´æœºå™¨çš„ä¸‹æ ‡ int k = 0; for (int j = 0; j &lt; m; j++) // æŸ¥æ‰¾æœ€å…ˆç©ºé—²çš„æœºå™¨ if (d[j] &lt; d[k]) k = j; rear[k]++; S[k][rear[k]] = t[i].number; d[k] += t[i].hour; &#125; // è¾“å‡ºç»“æœ for (int i = 0; i &lt; m; i++) &#123; printf(&quot;æœºå™¨%då¤„ç†:&quot;, i + 1); for (int j = 0; S[i][j] &gt; 0; j++) &#123; printf(&quot;ä½œä¸š%d\\t&quot;, S[i][j]); &#125; printf(&quot;å¤„ç†æ—¶é—´:%d\\n&quot;, d[i]); printf(&quot;\\n&quot;); &#125;&#125;int main() &#123; int n; // ä½œä¸šä¸ªæ•° int m; // æœºå™¨ä¸ªæ•° printf(&quot;è¯·è¾“å…¥å¾…å¤„ç†çš„ä½œä¸šä¸ªæ•°:&quot;); scanf(&quot;%d&quot;, &amp;n); printf(&quot;è¯·è¾“å…¥ä½œä¸šéœ€è¦å¤„ç†çš„æ—¶é—´:&quot;); for (int i = 0; i &lt; n; i++) &#123; scanf(&quot;%d&quot;, &amp;t[i].hour); t[i].number = i + 1; &#125; sort(t, t + n, cmp); // å°†ç»“æ„ä½“æ•°ç»„è¿›è¡Œä»å¤§åˆ°å°çš„æ’åºï¼Œåºå·å­˜åœ¨numberä¸­ printf(&quot;è¯·è¾“å…¥æœºå™¨çš„ä¸ªæ•°:&quot;); scanf(&quot;%d&quot;, &amp;m); // å°†æ•°ç»„dåˆå§‹åŒ–ä¸º0 for (int i = 0; i &lt; m; i++) &#123; d[i] = 0; &#125; MultiMachine(n, m); return 0;&#125;/*716 5 2 14 6 4 334 2 1 3 22 */ å¾—åˆ°å°çš„æ•°è¾“å…¥ï¼š178543 4æ ·ä¾‹è¾“å‡ºï¼š13 é‚£ä¹ˆåˆšæ‹¿åˆ°è¿™é“é¢˜å¦‚ä½•å»æ€è€ƒå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å…ˆè¯•ç€æ‰¾è§„å¾‹ã€‚å¦‚æœè¦ä»178543ä¸­å–å‡º1ä¸ªæ•°ï¼Œä½¿è¿™ä¸ªæ•°æœ€å°ï¼Œåº”è¯¥å–â€¦â€¦8å¦‚æœè¦ä»17543ä¸­å–å‡º1ä¸ªæ•°ï¼Œä½¿è¿™ä¸ªæ•°æœ€å°ï¼Œåº”è¯¥å–â€¦â€¦7å¦‚æœè¦ä»1543ä¸­å–å‡º1ä¸ªæ•°ï¼Œä½¿è¿™ä¸ªæ•°æœ€å°ï¼Œåº”è¯¥å–â€¦â€¦5â€¦â€¦å¯ä»¥å‘ç°ï¼š1ï¼Œ7ï¼Œ8æ˜¯ä¸€ä¸ªä¸é™åºæ•°åˆ—ï¼ˆæœ‰ç›¸ç­‰çš„å‡åºï¼‰ï¼Œä¹Ÿå°±æ˜¯é€æ¸å˜å¤šï¼Œè€Œ8ï¼Œ5ï¼Œ4ï¼Œ3æ˜¯ä¸€ä¸ªä¸å‡åºæ•°åˆ—ï¼ˆæœ‰ç›¸ç­‰çš„é™åºï¼‰ï¼Œé€æ¸å‡å°‘ã€‚8æ­£å¥½æ˜¯å‡åºæ•°åˆ—çš„æœ€åä¸€ä¸ªï¼Œä¹Ÿæ˜¯é™åºæ•°åˆ—çš„ç¬¬ä¸€ä¸ªã€‚ æˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°ç¬¬ä¸€ä¸ª&#x3D;&#x3D;å‡åºæ•°åˆ—çš„æœ«å°¾&#x3D;&#x3D;å¹¶å–å‡ºå®ƒå°±å¯ä»¥ç®—æˆåŠŸå®Œæˆäº†â€œå±€éƒ¨çš„æœ€ä¼˜è§£â€ï¼Œå†é€šè¿‡è¿™ä¸ªç»§ç»­å–å‡ºæ›´å¤šçš„æ•° å¾—åˆ°å¤§å¾—æ•°è¾“å…¥ï¼š 16403 1 &lt; 6ï¼Œåˆ é™¤1ï¼Œå¾—6403 0 &lt; 3 ï¼Œ åˆ é™¤0ï¼Œå¾—643 éƒ½æ˜¯é™åºçš„ï¼Œåˆ é™¤6ï¼Œå¾—43 éƒ½æ˜¯é™åºçš„ï¼Œåˆ é™¤4ï¼Œçš„3 æ¯æ¬¡åˆ é™¤&#x3D;&#x3D;å‡åºçš„ç¬¬ä¸€ä¸ªæ•°å­—&#x3D;&#x3D; 123456789101112131415161718192021222324252627282930313233343536373839404142#include &lt;algorithm&gt;#include &lt;iostream&gt;using namespace std;int shanshu(string &amp;a, int k) &#123; int n = a.size(), j = 0; while (k &gt; 0) &#123; for (int i = 0; i &lt; n; i++) &#123; if (a[i] &gt; a[i + 1]) &#123; // æ£€æµ‹å®ƒå¼€å§‹é™åºçš„æ—¶å€™ï¼Œå°±æ˜¯ å‡åºåºåˆ—çš„æœ€åä¸€ä¸ªæ•° ï¼Œåˆ é™¤ for (int j = i; j &lt; n; j++) &#123; a[j] = a[j + 1]; &#125; n--; break; // å¿˜è®°é€€å‡ºå¾ªç¯äº† &#125; else if (i == n - 1) &#123; // éå†åˆ°æœ€åä»ç„¶æ²¡æœ‰å‘ç°å¼€å§‹é™åºï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªåºåˆ—å·²ç»æ˜¯å‡åºçš„åºåˆ—ï¼Œç›´æ¥åˆ é™¤æœ€åä¸€ä¸ªåºåˆ— n--; break; &#125; &#125; k--; &#125; return n;&#125;int main() &#123; // åˆ é™¤ k ä¸ªæ•°å­—åéœ€è¦å¾—åˆ°æœ€å°çš„æ•°å­—ï¼Œåˆ é™¤å‡åºåºåˆ—çš„æœ€åä¸€ä¸ªæ•° string st; int n, startIndex = 0; cin &gt;&gt; st &gt;&gt; n; n = shanshu(st, n); st.erase(0, st.find_first_not_of(&#x27;0&#x27;)); // åˆ é™¤â€œ0â€ /* for (int i = 0; i &lt; n; i++) &#123; // å¯¹åˆ å®Œåçš„æ•°å­—çš„å‰å¯¼é›¶è¿›è¡Œå¤„ç† if (st[i] == &#x27;0&#x27;) &#123; startIndex++; &#125; &#125; */ for (int i = startIndex; i &lt; n; i++) &#123; cout &lt;&lt; st[i]; &#125; return 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"greedy","slug":"greedy","permalink":"http://breadwinners.top/tags/greedy/"}]},{"title":"è´¹è§£çš„å¼€å…³","slug":"è´¹è§£çš„å¼€å…³","date":"2023-04-13T16:00:00.000Z","updated":"2023-07-11T01:35:58.608Z","comments":true,"path":"2023/04/14/è´¹è§£çš„å¼€å…³/","link":"","permalink":"http://breadwinners.top/2023/04/14/%E8%B4%B9%E8%A7%A3%E7%9A%84%E5%BC%80%E5%85%B3/","excerpt":"","text":"è´¹è§£çš„å¼€å…³25 ç›ç¯æ’æˆä¸€ä¸ª 5Ã—5 çš„æ–¹å½¢ã€‚ æ¯ä¸€ä¸ªç¯éƒ½æœ‰ä¸€ä¸ªå¼€å…³ï¼Œæ¸¸æˆè€…å¯ä»¥æ”¹å˜å®ƒçš„çŠ¶æ€ã€‚ æ¯ä¸€æ­¥ï¼Œæ¸¸æˆè€…å¯ä»¥æ”¹å˜æŸä¸€ä¸ªç¯çš„çŠ¶æ€ã€‚ æ¸¸æˆè€…æ”¹å˜ä¸€ä¸ªç¯çš„çŠ¶æ€ä¼šäº§ç”Ÿè¿é”ååº”ï¼šå’Œè¿™ä¸ªç¯ä¸Šä¸‹å·¦å³ç›¸é‚»çš„ç¯ä¹Ÿè¦ç›¸åº”åœ°æ”¹å˜å…¶çŠ¶æ€ã€‚ æˆ‘ä»¬ç”¨æ•°å­— 1 è¡¨ç¤ºä¸€ç›å¼€ç€çš„ç¯ï¼Œç”¨æ•°å­— 0 è¡¨ç¤ºå…³ç€çš„ç¯ã€‚ ä¸‹é¢è¿™ç§çŠ¶æ€ 123451011101101101111000011011 åœ¨æ”¹å˜äº†æœ€å·¦ä¸Šè§’çš„ç¯çš„çŠ¶æ€åå°†å˜æˆï¼š 123450111111101101111000011011 å†æ”¹å˜å®ƒæ­£ä¸­é—´çš„ç¯åçŠ¶æ€å°†å˜æˆï¼š 123450111111001110011010011011 ç»™å®šä¸€äº›æ¸¸æˆçš„åˆå§‹çŠ¶æ€ï¼Œç¼–å†™ç¨‹åºåˆ¤æ–­æ¸¸æˆè€…æ˜¯å¦å¯èƒ½åœ¨ 666 æ­¥ä»¥å†…ä½¿æ‰€æœ‰çš„ç¯éƒ½å˜äº®ã€‚ è¾“å…¥æ ¼å¼ç¬¬ä¸€è¡Œè¾“å…¥æ­£æ•´æ•° nï¼Œä»£è¡¨æ•°æ®ä¸­å…±æœ‰ n ä¸ªå¾…è§£å†³çš„æ¸¸æˆåˆå§‹çŠ¶æ€ã€‚ ä»¥ä¸‹è‹¥å¹²è¡Œæ•°æ®åˆ†ä¸º n ç»„ï¼Œæ¯ç»„æ•°æ®æœ‰ 5 è¡Œï¼Œæ¯è¡Œ 5 ä¸ªå­—ç¬¦ã€‚ æ¯ç»„æ•°æ®æè¿°äº†ä¸€ä¸ªæ¸¸æˆçš„åˆå§‹çŠ¶æ€ã€‚ å„ç»„æ•°æ®é—´ç”¨ä¸€ä¸ªç©ºè¡Œåˆ†éš”ã€‚ è¾“å‡ºæ ¼å¼ä¸€å…±è¾“å‡º n è¡Œæ•°æ®ï¼Œæ¯è¡Œæœ‰ä¸€ä¸ªå°äºç­‰äº 6 çš„æ•´æ•°ï¼Œå®ƒè¡¨ç¤ºå¯¹äºè¾“å…¥æ•°æ®ä¸­å¯¹åº”çš„æ¸¸æˆçŠ¶æ€æœ€å°‘éœ€è¦å‡ æ­¥æ‰èƒ½ä½¿æ‰€æœ‰ç¯å˜äº®ã€‚ å¯¹äºæŸä¸€ä¸ªæ¸¸æˆåˆå§‹çŠ¶æ€ï¼Œè‹¥ 6 æ­¥ä»¥å†…æ— æ³•ä½¿æ‰€æœ‰ç¯å˜äº®ï¼Œåˆ™è¾“å‡º âˆ’1ã€‚ æ•°æ®èŒƒå›´$0&lt;nâ‰¤500$ è¾“å…¥æ ·ä¾‹ï¼š1234567891011121314151617183001110101110001110101110011101111011111011111111110111111111111111111111111 è¾“å‡ºæ ·ä¾‹ï¼š 12332-1 æ¯ä¸€è¡Œçš„æš—ç¯éƒ½ç”±ä¸‹é¢ä¸€è¡Œå»ç‚¹äº® ä¸ºä»€ä¹ˆè¦æšä¸¾ç¬¬ä¸€è¡Œçš„çŠ¶æ€ï¼Ÿ æˆ‘è§‰å¾—å§ï¼Œæšä¸¾ç¬¬ä¸€è¡Œçš„æ‰€æœ‰æŒ‰æ³•æ˜¯ç”¨æ¥å‡å°‘æ­¥æ•°çš„ï¼Œæˆ‘ä¹‹å‰ä¸€ç›´è§‰å¾—ä»ç¬¬äºŒè¡Œç›´æ¥çœ‹å°±å¥½ï¼Œä½†æ˜¯ä»ç¬¬äºŒè¡Œå¼€å§‹å…¶å®å°±å·²ç»å›ºå®šäº†æœ€åçš„ç­”æ¡ˆï¼Œè¿™æ ·çš„è§£ä¸ä¸€å®šæ˜¯æœ€å°‘çš„ç”šè‡³å¯èƒ½è¶…å‡ºèŒƒå›´è€Œæ²¡æœ‰è§£ã€‚ æ‰€ä»¥ï¼Œæšä¸¾ç¬¬ä¸€è¡Œçš„æ„ä¹‰æ˜¯ï¼šä¸éœ€è¦åœ¨æ„ç¬¬ä¸€è¡Œçš„ç¯æ˜¯ç­æ˜¯æš—ï¼Œåªéœ€æŠŠç¬¬ä¸€è¡Œçš„æŒ‰æ³•æšä¸¾ä¸€éï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ â€œæ“ä½œâ€ï¼Œæ¯ä¸ªä½ç½®éƒ½æœ‰ä¸¤ç§é€‰æ‹©ï¼ŒæŒ‰(ç”¨1è¡¨ç¤º)æˆ–è€…ä¸æŒ‰(ç”¨0è¡¨ç¤º)ï¼Œéå†è¿™32ç§æ“ä½œå¼•å‘çš„æƒ…å†µï¼Œæ¯ä¸€æ¬¡å†é€šè¿‡res &#x3D; min(res, step);æŠŠæœ€å°æ­¥æ•°å­˜ä¸€ä¸‹ï¼Œå°±èƒ½æ‰¾åˆ°æœ€ä¼˜è§£ åé¢çš„opä»1â€“31ï¼Œå› ä¸ºæ˜¯ä½è¿ç®—ï¼Œæ‰€ä»¥æ˜¯1â€“31çš„äºŒè¿›åˆ¶å’Œ1çš„äºŒè¿›åˆ¶ä»å³å‘å·¦è¿›è¡Œä¸çš„æ“ä½œï¼Œæ¯”å¦‚10100(20)çš„opï¼Œæ„æ€æ˜¯ç¬¬2ã€4ä½ï¼ˆå³åˆ°å·¦01234ï¼‰éœ€è¦æŒ‰ï¼Œä¸æ˜¯ä»£è¡¨ç¯æœ‰æ²¡æœ‰äº®ï¼Œ32ç§çŠ¶æ€å…¶å®æ˜¯å“ªäº›ç¯è¦æŒ‰ï¼Œä¸€ç§opå¯¹åº”ä¸€ç§å›ºå®šçš„æŒ‰æ³•ï¼Œæ‰€ä»¥æ˜¯&amp;1=&#x3D;1æˆ–è€…^1=&#x3D;0ã€‚åŒç†ï¼Œè°ƒç”¨æ–¹æ³•è¿™é‡Œåº”è¯¥æ˜¯turn(0, 4 - i) å°å¯„å·§ï¼šå­—ç¬¦æ•°0çš„äºŒè¿›åˆ¶ä¸º 11000 ï¼Œ å­—ç¬¦æ•°1çš„äºŒè¿›åˆ¶ä¸º 11001 ï¼ŒäºŒè€…çš„æ›´æ¢æ“ä½œå¯ä»¥è®¾ç½®ä¸ºx ^= 1 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384#include &lt;algorithm&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;const int N = 6;int dx[N] = &#123;-1, 0, 1, 0, 0&#125;, dy[N] = &#123;0, 1, 0, -1, 0&#125;;char g[N][N], backup[N][N];// è¿™ä¸ªæ“ä½œæ˜¯æŠŠ(x, y)ä»¥åŠä¸Šä¸‹å·¦å³çš„ç¯éƒ½å˜æˆç›¸åçš„é¢œè‰²void turn(int x, int y) &#123; for (int i = 0; i &lt; 5; i++) &#123; int a = x + dx[i], b = y + dy[i]; // å¦‚æœåœ¨è¾¹ç•Œå¤–è¾¹ï¼Œç›´æ¥å¿½ç•¥å³å¯ if (a &lt; 0 || a &gt;= 5 || b &lt; 0 || b &gt;= 5) continue; g[a][b] ^= 1; // å¼‚æˆ–ï¼Œä¸åŒçš„æ—¶å€™å°±å˜æˆç›¸åçš„æ•° &#125;&#125;int main() &#123; int n; scanf(&quot;%d&quot;, &amp;n); while (n--) &#123; // æŒ‰è¡Œè¾“å…¥ï¼ŒæŠŠæ¯ä¸€è¡Œå½“æˆä¸€ä¸ªå­—ç¬¦ä¸² for (int i = 0; i &lt; 5; i++) cin &gt;&gt; g[i]; int res = 10; // è¿™é‡Œæˆ‘ä»¬æšä¸¾äº†ç¬¬ä¸€è¡Œçš„32ç§æŒ‰æ³•ï¼Œä¸ç”¨ç®¡æ˜¯äº®æ˜¯ç­ï¼ŒæŠŠç¬¬ä¸€è¡Œæ‰€æœ‰æƒ…å†µéƒ½æŒ‰ä¸€é // æŒ‰æ¯ç§æƒ…å†µçš„ç¬¬ä¸€è¡Œï¼Œå»éå†æ¥ä¸‹æ¥çš„è¡Œ // æšä¸¾32ç§ç¬¬ä¸€è¡Œçš„æŒ‰æ³•åªæ˜¯å¯èƒ½ä¼šå‡å°‘æ­¥æ•°ï¼Œå¦‚æœç›´æ¥ä»ç¬¬äºŒè¡Œå¼€å§‹ç­”æ¡ˆä¸€å®šæ˜¯å›ºå®šçš„äº†ï¼Œæ‰¾ä¸åˆ°æœ€ä¼˜è§£æˆ–è€…å¯èƒ½æ²¡æœ‰è§£ for (int op = 0; op &lt; 32; op++) &#123; // æˆ‘åœ¨å¯¹è¿™ç§æƒ…å†µæ“ä½œçš„æ—¶å€™ï¼Œå¾—å…ˆå¤‡ç”¨ä¸€ä¸‹ // æŠŠåŸå§‹æ•°ç»„å¤‡ä»½ä¸€ä¸‹ï¼Œç„¶åæ“ä½œgï¼Œæ“ä½œå®Œäº†è¿˜åŸï¼Œç„¶åå†æ“ä½œ memcpy(backup, g, sizeof g); int step = 0; // ç¬¬ä¸€è¡Œçš„æŒ‰æ³•(åœ¨è¿™é‡Œ 1 è¡¨ç¤ºæŒ‰äº†, 0 è¡¨ç¤ºä¸æŒ‰)ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†è¾“å‡ºç¬¬ä¸€è¡ŒæŒ‰å®Œä¹‹åçš„çŠ¶æ€ for (int i = 0; i &lt; 5; i++) if (op &gt;&gt; i &amp; 1) // æ•°å­—2 å¯¹åº”äº† 00010 è¡¨ç¤ºç¬¬2ä¸ªä½ç½®çš„æŒ‰ä¸€ä¸‹ // 00010 &gt;&gt; 1 &amp; 1 æ˜¯1 æ‰€ä»¥turn(0, 1) å°±æ˜¯ç¬¬ä¸€è¡Œç¬¬äºŒä¸ªä½ç½® &#123; // æ•°å­—3 å¯¹åº”äº†00011 è¡¨ç¤ºç¬¬1 å’Œç¬¬2ä¸ªä½ç½®çš„æŒ‰ä¸€ä¸‹ step++; turn(0, 4 - i); // è¿™é‡Œçš„opä»1~31ï¼Œå› ä¸ºæ˜¯ä½è¿ç®—ï¼Œæ‰€ä»¥æ˜¯1~31çš„äºŒè¿›åˆ¶å’Œ1çš„äºŒè¿›åˆ¶ä»å³å‘å·¦è¿›è¡Œä¸çš„æ“ä½œï¼Œ // æ¯”å¦‚10100(20)çš„opï¼Œæ„æ€æ˜¯ç¬¬2ã€4ä½ï¼ˆå³åˆ°å·¦01234ï¼‰éœ€è¦æŒ‰ï¼Œä¸æ˜¯ä»£è¡¨ç¯æœ‰æ²¡æœ‰äº®ï¼Œ // 32ç§çŠ¶æ€å…¶å®æ˜¯å“ªäº›ç¯è¦æŒ‰ï¼Œä¸€ç§opå¯¹åº”ä¸€ç§å›ºå®šçš„æŒ‰æ³•ï¼Œæ‰€ä»¥æ˜¯&amp;1==1æˆ–è€…^1==0ã€‚åŒç†ï¼Œè°ƒç”¨æ–¹æ³•è¿™é‡Œåº”è¯¥æ˜¯turn(0,4-i) ; &#125; // ç„¶åé€šè¿‡ç¬¬ä¸€è¡ŒæŒ‰å®Œä¹‹åçš„çŠ¶æ€ï¼ŒæŒ‰234è¡Œ for (int i = 0; i &lt; 4; i++) for (int j = 0; j &lt; 5; j++) if (g[i][j] == &#x27;0&#x27;) &#123; step++; turn(i + 1, j); // å¦‚æœè¿™ä¸ªä½ç½®æ˜¯ç­çš„ï¼Œå°±æŒ‰ä¸‹ä¸€è¡Œå¯¹åº”çš„ä½ç½® &#125; bool dark = false; for (int j = 0; j &lt; 5; j++) if (g[4][j] == &#x27;0&#x27;) &#123; dark = true; break; &#125; // å¯¹äº32ç§æƒ…å†µçš„è¿™ä¸€ç§ï¼Œå¦‚æœæ‰€æœ‰çš„å…¨äº®å°±è®°å½•ä¸‹æ­¥æ•°(äº‹å®ä¸Šåªè®°å½•äº†æœ€åä¸€è¡Œæ˜¯å¦dark) if (!dark) res = min(res, step); memcpy(g, backup, sizeof g); &#125; if (res &gt; 6) res = -1; cout &lt;&lt; res &lt;&lt; endl; &#125; return 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"æš´åŠ›","slug":"æš´åŠ›","permalink":"http://breadwinners.top/tags/%E6%9A%B4%E5%8A%9B/"},{"name":"æ¨¡æ‹Ÿ","slug":"æ¨¡æ‹Ÿ","permalink":"http://breadwinners.top/tags/%E6%A8%A1%E6%8B%9F/"}]},{"title":"å½’å¹¶æ’åºå’Œé€†åºå¯¹","slug":"å½’å¹¶æ’åºå’Œé€†åºå¯¹","date":"2023-04-13T16:00:00.000Z","updated":"2023-07-11T01:49:14.182Z","comments":true,"path":"2023/04/14/å½’å¹¶æ’åºå’Œé€†åºå¯¹/","link":"","permalink":"http://breadwinners.top/2023/04/14/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F%E5%92%8C%E9%80%86%E5%BA%8F%E5%AF%B9/","excerpt":"","text":"å½’å¹¶æ’åºå½’å¹¶æ’åºï¼šå½’å¹¶æ’åºé‡‡ç”¨åˆ†æ²»çš„æ€æƒ³ï¼Œå°†åŸæ•°ç»„åˆ†è§£æˆå¤šä¸ªç›¸ä¼¼çš„å­æ•°ç»„ï¼Œè¿›è¡Œé€’å½’è§£å†³ï¼Œæœ€åé€æ¸åˆå¹¶æˆæ’åºå¥½çš„æ•°ç»„ å½’å¹¶æ’åºçš„æ ¸å¿ƒæ˜¯åˆå¹¶ä¸¤ä¸ªæ•°ç»„ ç®—æ³•è¿‡ç¨‹ï¼š bilibiliè§†é¢‘è®²è§£ ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#include &lt;algorithm&gt;#include &lt;iostream&gt;#define N 100using namespace std;int tmp[N];void merge_sort(int q[], int l, int r);int main() &#123; int n; cin &gt;&gt; n; int a[n]; for (int i = 0; i &lt; n; i++) &#123; cin &gt;&gt; a[i]; &#125; merge_sort(a, 0, n - 1); for (int i = 0; i &lt; n; i++) &#123; cout &lt;&lt; a[i] &lt;&lt; &quot; &quot;; &#125; return 0;&#125;void merge_sort(int q[], int l, int r) &#123; if (l &gt;= r) &#123; // åªæœ‰ä¸€ä¸ªæˆ–è€…æ²¡æœ‰åˆ™ä¸ç”¨æ’åº return; &#125; // å¯¹æ•°ç»„è¿›è¡Œåˆ†å‰² int mid = l + r &gt;&gt; 1; // å–ä¸­é—´å€¼ä¸ºåˆ†ç•Œ merge_sort(q, l, mid); // å·¦è¾¹åŒºé—´å³è¾¹åŒºé—´è¿›è¡Œé€’å½’ merge_sort(q, mid + 1, r); // å¯¹åˆ†å‰²çš„æ•°ç»„è¿›è¡Œæ’åº int k = 0, i = l, j = mid + 1; while (i &lt;= mid &amp;&amp; j &lt;= r) &#123; if (q[i] &lt; q[j]) tmp[k++] = q[i++]; else tmp[k++] = q[j++]; &#125; while (i &lt;= mid) &#123; tmp[k++] = q[i++]; &#125; while (j &lt;= r) &#123; tmp[k++] = q[j++]; &#125; // å°†æ’å¥½åºçš„æ•°ç»„å­˜å›æ¥ for (i = l, j = 0; i &lt;= r; i++, j++) q[i] = tmp[j];&#125; é€†åºå¯¹çš„æ•°é‡åœ¨å½’å¹¶æ’åºçš„è¿‡ç¨‹ä¸­ï¼Œä¸¤ä¸ªå­æ•°ç»„ æˆä¸º æ’åºå¥½çš„å­æ•°ç»„ï¼Œå½“å³è¾¹çš„æ•°ç»„å…ƒç´ è¿›å…¥æœ‰åºåºåˆ—æ—¶ï¼Œè¯´æ˜å…¶å·¦è¾¹çš„å…ƒç´ éƒ½æ˜¯æ¯”å®ƒå°çš„ï¼Œå› ä¸ºæ¯æ¬¡éƒ½æ˜¯æŒ‘é€‰ä¸¤ä¸ªæœ‰åºæ•°ç»„ä¸­çš„æœ€å°çš„å…ƒç´ è¿›å…¥å¿ƒå¾—æœ‰åºåºåˆ—ï¼Œä¹Ÿåªæœ‰å³è¾¹çš„å…ƒç´ è¿›å…¥æœ‰åºåºåˆ—æ—¶ï¼Œæ‰å¯ä»¥ç¡®å®šæœ‰é€†åºå¯¹å­˜åœ¨ å³è¾¹å…ƒç´ è¿›å…¥æ–°çš„æœ‰åºåºåˆ—æ—¶ï¼Œå¯ä»¥å¾—å‡ºæš‚ä¸”çš„é€†åºå¯¹ä¸ºmid - i + 1 ä»£ç  12345678910111213141516171819202122232425262728293031323334#include &lt;iostream&gt;using namespace std;typedef long long LL; // å®šä¹‰long long ç±»å‹const int N = 1e5 + 10;int a[N], tmp[N];LL merge_sort(int a[], int l, int r) &#123; if (l &gt;= r) return 0; int mid = l + r &gt;&gt; 1; LL res = merge_sort(a, l, mid) + merge_sort(a, mid + 1, r); // é€’å½’æ’åºï¼ï¼ˆå°†åºåˆ—ä¸€ç›´åˆ†ï¼Œæ‹†å°æˆå•ä¸ªï¼Œå³ä¸ºæœ‰åºï¼‰ int k = 0, i = l, j = mid + 1; while (i &lt;= mid &amp;&amp; j &lt;= r) &#123; // å½’å¹¶ï¼Œæ•´ç†é€†åºå¯¹çš„è¿‡ç¨‹ if (a[i] &lt;= a[j]) tmp[k++] = a[i++]; else &#123; res += mid - i + 1; // æ»¡è¶³é€†åºå¯¹æ¡ä»¶ tmp[k++] = a[j++]; &#125; &#125; while (i &lt;= mid) tmp[k++] = a[i++]; while (j &lt;= r) tmp[k++] = a[j++]; for (int i = l, j = 0; i &lt;= r; i++, j++) a[i] = tmp[j]; return res;&#125;int main() &#123; int n; scanf(&quot;%d&quot;, &amp;n); for (int i = 0; i &lt; n; i++) scanf(&quot;%d&quot;, &amp;a[i]); cout &lt;&lt; merge_sort(a, 0, n - 1) &lt;&lt; endl; return 0;&#125; å‚è€ƒåšå®¢ å“”å“©å“”å“©å­¦ä¹ ","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"sort","slug":"sort","permalink":"http://breadwinners.top/tags/sort/"}]},{"title":"å•é“¾è¡¨","slug":"æ•°æ®ç»“æ„","date":"2023-04-12T16:00:00.000Z","updated":"2023-07-11T01:45:22.116Z","comments":true,"path":"2023/04/13/æ•°æ®ç»“æ„/","link":"","permalink":"http://breadwinners.top/2023/04/13/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","excerpt":"","text":"å•é“¾è¡¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#include &lt;iostream&gt;using namespace std;const int N = 100010;int idx, head, n[N], ne[N];int a;void add_head(int x) &#123; // å•é“¾è¡¨çš„æ“ä½œ n[idx] = x; ne[idx] = head; head = idx++;&#125;void add(int k, int x) &#123; n[idx] = x; ne[idx] = ne[k]; ne[k] = idx++;&#125;void remove(int k) &#123; ne[k] = ne[ne[k]];&#125;int main() &#123; head = -1; idx = 0; cin &gt;&gt; a; while (a--) &#123; string op; int k, x; cin &gt;&gt; op; if (op == &quot;D&quot;) &#123; cin &gt;&gt; k; if (!k) head = ne[head]; else remove(k - 1); &#125; else if (op == &quot;H&quot;) &#123; cin &gt;&gt; x; add_head(x); &#125; else if (op == &quot;I&quot;) &#123; int k, x; cin &gt;&gt; k &gt;&gt; x; add(k - 1, x); &#125; &#125; for (int i = head; i != -1; i = ne[i]) cout &lt;&lt; n[i] &lt;&lt; &quot; &quot;; return 0;&#125; åŒé“¾è¡¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465#include &lt;iostream&gt;using namespace std;const int N = 1e5 + 10;int m;int e[N], l[N], r[N];int idx;//! åˆå§‹åŒ–void init() &#123; l[1] = 0, r[0] = 1; //* åˆå§‹åŒ– ç¬¬ä¸€ä¸ªç‚¹çš„å³è¾¹æ˜¯ 1 ç¬¬äºŒä¸ªç‚¹çš„å·¦è¾¹æ˜¯ 0 idx = 2; //! idx æ­¤æ—¶å·²ç»ç”¨æ‰ä¸¤ä¸ªç‚¹äº†&#125;//* åœ¨ç¬¬ K ä¸ªç‚¹å³è¾¹æ’å…¥ä¸€ä¸ª Xvoid add(int k, int x) &#123; e[idx] = x; l[idx] = k; r[idx] = r[k]; // todo è¿™è¾¹çš„ k ä¸åŠ  1 ï¼Œ è¾“å…¥çš„æ—¶å€™ k+1 å°±å¥½ l[r[k]] = idx; r[k] = idx; idx++;&#125; //! å½“ç„¶åœ¨ K çš„å·¦è¾¹æ’å…¥ä¸€ä¸ªæ•° å¯ä»¥å†å†™ä¸€ä¸ª ï¼Œ ä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨æˆ‘ä»¬è¿™ä¸ªå‡½æ•°ï¼Œåœ¨ k çš„å·¦è¾¹æ’å…¥ä¸€ä¸ª æ•° ç­‰ä»·äºåœ¨ l[k] çš„å³è¾¹æ’å…¥ä¸€ä¸ªæ•° add(l[k],x)//*åˆ é™¤ç¬¬ kä¸ª ç‚¹void remove(int k) &#123; r[l[k]] = r[k]; l[r[k]] = l[k];&#125;int main(void) &#123; ios::sync_with_stdio(false); cin &gt;&gt; m; init(); while (m--) &#123; string op; cin &gt;&gt; op; int k, x; if (op == &quot;R&quot;) &#123; cin &gt;&gt; x; add(l[1], x); //! 0å’Œ 1 åªæ˜¯ä»£è¡¨ å¤´å’Œå°¾ æ‰€ä»¥ æœ€å³è¾¹æ’å…¥ åªè¦åœ¨ æŒ‡å‘ 1çš„ é‚£ä¸ªç‚¹çš„å³è¾¹æ’å…¥å°±å¯ä»¥äº† &#125; else if (op == &quot;L&quot;) //! åŒç† æœ€å·¦è¾¹æ’å…¥å°±æ˜¯ åœ¨æŒ‡å‘ 0çš„æ•°çš„å·¦è¾¹æ’å…¥å°±å¯ä»¥äº† ä¹Ÿå°±æ˜¯å¯ä»¥ç›´æ¥åœ¨ 0çš„ æœ‰å³è¾¹æ’å…¥ &#123; cin &gt;&gt; x; add(0, x); &#125; else if (op == &quot;D&quot;) &#123; cin &gt;&gt; k; remove(k + 1); &#125; else if (op == &quot;IL&quot;) &#123; cin &gt;&gt; k &gt;&gt; x; add(l[k + 1], x); &#125; else &#123; cin &gt;&gt; k &gt;&gt; x; add(k + 1, x); &#125; &#125; for (int i = r[0]; i != 1; i = r[i]) cout &lt;&lt; e[i] &lt;&lt; &#x27; &#x27;; return 0;&#125; å•è°ƒæ ˆ123456789101112131415161718192021222324#include &lt;algorithm&gt;#include &lt;iostream&gt;using namespace std;const int N = 100010;int stk[N], p = -1;int main() &#123; // å•è°ƒæ ˆ https://www.acwing.com/problem/content/832/ int n, x; cin &gt;&gt; n; while (n--) &#123; cin &gt;&gt; x; while (stk[p] &gt;= x &amp;&amp; p != -1) &#123; // åˆ é™¤æ ˆä¸­æ¯” x å¤§çš„å…ƒç´ ï¼Œä¿è¯æ ˆä¸­çš„å…ƒç´ æ˜¯å•è°ƒé€’å¢çš„ p--; &#125; if (p != -1) cout &lt;&lt; stk[p] &lt;&lt; &#x27; &#x27;; else cout &lt;&lt; -1 &lt;&lt; &quot; &quot;; stk[++p] = x; &#125; return 0;&#125; ###è¿ç”¨å•è°ƒé˜Ÿåˆ—è§£å†³æ»‘åŠ¨çª—å£é—®é¢˜ï¼ˆè¿ç”¨çš„æ•°æ®ç»“æ„å®é™…ä¸Šæ˜¯åŒç«¯é˜Ÿåˆ—ï¼‰ æœ´ç´ åšæ³•ï¼š å°±æ˜¯ä¸¤å±‚å¾ªç¯ å¤–å±‚å¾ªç¯æ¯ä¸€ä¸ªæ•° å†…å¾ªç¯çª—å£å†…æ¯ä¸€ä¸ªå€¼ï¼Œè¿™æ ·çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(nm); è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç”¨ å•è°ƒé˜Ÿåˆ—æ¥ä¼˜åŒ– å¯å°†æ—¶é—´å¤æ‚åº¦é™ä¸º O(n)ã€‚ ä¸¾ä¾‹ è¿™æ˜¯æˆ‘ä»¬å‡†å¤‡æ±‚çš„ä¸€ä¸ªæ•°ç»„ çº¢è‰²æ˜¯å…ƒç´ å€¼ ç°è‰²æ˜¯æ•°ç»„ä¸‹æ ‡ ä»£ç  12345678910111213141516171819202122232425262728293031323334353637383940414243#include &lt;algorithm&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;const int N = 1e6 + 10;int q[N], a[N];int n, k;int main() &#123; // å•è°ƒé˜Ÿåˆ—æ¶‰åŠåˆ°çš„æ»‘åŠ¨çª—å£é—®é¢˜ cin &gt;&gt; n &gt;&gt; k; for (int i = 0; i &lt; n; i++) cin &gt;&gt; a[i]; // çª—å£ç»´æŠ¤å•è°ƒé€’å¢é˜Ÿåˆ— é˜Ÿå¤´ä¸ºæœ€å°å€¼ int hh = 0, tt = -1; for (int i = 0; i &lt; n; i++) &#123; if (hh &lt;= tt &amp;&amp; q[hh] &lt; i - k + 1) hh++; // é˜Ÿå¤´è¶…å‡ºçª—å£å‡ºé˜Ÿ å› ä¸ºæ¯æ¬¡åªå…¥ä¸€ä¸ªå…ƒç´  æ‰€ä»¥ç”¨ifå³å¯ while (hh &lt;= tt &amp;&amp; a[q[tt]] &gt;= a[i]) tt--; // é˜Ÿåˆ—å•è°ƒé€’å¢ q[++tt] = i; // è®°ä½qé‡Œé¢å­˜çš„æ˜¯ä¸‹æ ‡ï¼ï¼ è¦è¾“å‡ºå…ƒç´ åº”è¯¥æ˜¯ a[q[hh]] if (i &gt;= k - 1) cout &lt;&lt; a[q[hh]] &lt;&lt; &quot; &quot;; // çª—å£å†…è¾¾åˆ°kä¸ª &#125; cout &lt;&lt; endl; // çª—å£ç»´æŠ¤å•è°ƒé€’å‡é˜Ÿåˆ— é˜Ÿå¤´ä¸ºæœ€å¤§å€¼ hh = 0, tt = -1; for (int i = 0; i &lt; n; i++) &#123; if (hh &lt;= tt &amp;&amp; q[hh] &lt; i - k + 1) hh++; // é˜Ÿå¤´è¶…å‡ºçª—å£å‡ºé˜Ÿ å› ä¸ºæ¯æ¬¡åªå…¥ä¸€ä¸ªå…ƒç´  æ‰€ä»¥ç”¨ifå³å¯ while (hh &lt;= tt &amp;&amp; a[q[tt]] &lt;= a[i]) tt--; // é˜Ÿåˆ—å•è°ƒé€’å¢ q[++tt] = i; // è®°ä½qé‡Œé¢å­˜çš„æ˜¯ä¸‹æ ‡ï¼ï¼ è¦è¾“å‡ºå…ƒç´ åº”è¯¥æ˜¯ a[q[hh]] if (i &gt;= k - 1) cout &lt;&lt; a[q[hh]] &lt;&lt; &quot; &quot;; // çª—å£å†…è¾¾åˆ°kä¸ª &#125; cout &lt;&lt; endl; return 0;&#125; å¤§äºåˆ é™¤å¯¹ä½å…ƒç´ æ˜¯å› ä¸ºè¦ä¿è¯å½“å‰çš„çª—æ ¼çš„å€¼æ˜¯æœ€å¤§çš„ å°äºåˆ é™¤æ˜¯è¦å› ä¸ºåç»­å¯èƒ½çš„çª—å£ç”±äºå‰é¢è¾ƒå¤§çš„å€¼å‡ºé˜Ÿï¼Œå°±æˆäº†æœ€å¤§å€¼ æ—¥å¿—ç»Ÿè®¡å°æ˜ç»´æŠ¤ç€ä¸€ä¸ªç¨‹åºå‘˜è®ºå›ã€‚ç°åœ¨ä»–æ”¶é›†äº†ä¸€ä»½â€ç‚¹èµâ€æ—¥å¿—ï¼Œæ—¥å¿—å…±æœ‰ N è¡Œã€‚ å…¶ä¸­æ¯ä¸€è¡Œçš„æ ¼å¼æ˜¯ï¼š 1ts id è¡¨ç¤ºåœ¨ tststs æ—¶åˆ»ç¼–å· ididid çš„å¸–å­æ”¶åˆ°ä¸€ä¸ªâ€èµâ€ã€‚ ç°åœ¨å°æ˜æƒ³ç»Ÿè®¡æœ‰å“ªäº›å¸–å­æ›¾ç»æ˜¯â€çƒ­å¸–â€ã€‚ å¦‚æœä¸€ä¸ªå¸–å­æ›¾åœ¨ä»»æ„ä¸€ä¸ªé•¿åº¦ä¸º D çš„æ—¶é—´æ®µå†…æ”¶åˆ°ä¸å°‘äº K ä¸ªèµï¼Œå°æ˜å°±è®¤ä¸ºè¿™ä¸ªå¸–å­æ›¾æ˜¯â€çƒ­å¸–â€ã€‚ å…·ä½“æ¥è¯´ï¼Œå¦‚æœå­˜åœ¨æŸä¸ªæ—¶åˆ» Tæ»¡è¶³è¯¥å¸–åœ¨ [T,T+D)è¿™æ®µæ—¶é—´å†…(æ³¨æ„æ˜¯å·¦é—­å³å¼€åŒºé—´)æ”¶åˆ°ä¸å°‘äº KKK ä¸ªèµï¼Œè¯¥å¸–å°±æ›¾æ˜¯â€çƒ­å¸–â€ã€‚ ç»™å®šæ—¥å¿—ï¼Œè¯·ä½ å¸®åŠ©å°æ˜ç»Ÿè®¡å‡ºæ‰€æœ‰æ›¾æ˜¯â€çƒ­å¸–â€çš„å¸–å­ç¼–å·ã€‚ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡ŒåŒ…å«ä¸‰ä¸ªæ•´æ•° N,D ä»¥ä¸‹ N è¡Œæ¯è¡Œä¸€æ¡æ—¥å¿—ï¼ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° ts å’Œ idã€‚ è¾“å‡ºæ ¼å¼ æŒ‰ä»å°åˆ°å¤§çš„é¡ºåºè¾“å‡ºçƒ­å¸– idã€‚ æ¯ä¸ª id å ä¸€è¡Œã€‚ æ•°æ®èŒƒå›´ 1â‰¤Kâ‰¤Nâ‰¤10^5^0â‰¤ts,idâ‰¤10^5^1â‰¤Dâ‰¤10000 è¾“å…¥æ ·ä¾‹ï¼š 123456787 10 20 10 1010 1010 19 1100 3100 3 è¾“å‡ºæ ·ä¾‹ï¼š 1213 ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445#include &lt;algorithm&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;#define x first#define y secondusing namespace std;typedef pair&lt;int, int&gt; PII;const int N = 100010;int n, d, k;PII logs[N];int cnt[N];bool st[N]; int main() &#123; int n, d, k; cin &gt;&gt; n &gt;&gt; d &gt;&gt; k; for (int i = 0;i &lt; n;i++) cin &gt;&gt; logs[i].x &gt;&gt; logs[i].y; sort(logs, logs + n); for (int i = 0, j = 0;i &lt; n;i++) &#123; int id = logs[i].y; cnt[id]++; // cntæ•°ç»„ç»´æŠ¤çš„æ˜¯çª—å£ä¸­å¸–å­çš„æ•°é‡ while (logs[i].x - logs[j].x &gt;= d) &#123; cnt[logs[j].y]--; j++; &#125; if (cnt[id] &gt;= k) st[id] = true; &#125; for (int i = 0;i &lt;= 100000;i++) if (st[i]) cout &lt;&lt; i &lt;&lt; endl; return 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"æ•°ç»„å•é“¾è¡¨","slug":"æ•°ç»„å•é“¾è¡¨","permalink":"http://breadwinners.top/tags/%E6%95%B0%E7%BB%84%E5%8D%95%E9%93%BE%E8%A1%A8/"},{"name":"æ»‘åŠ¨çª—å£","slug":"æ»‘åŠ¨çª—å£","permalink":"http://breadwinners.top/tags/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/"}]},{"title":"Trieæ ‘","slug":"Trieæ ‘","date":"2023-04-09T16:00:00.000Z","updated":"2023-07-11T01:32:02.889Z","comments":true,"path":"2023/04/10/Trieæ ‘/","link":"","permalink":"http://breadwinners.top/2023/04/10/Trie%E6%A0%91/","excerpt":"","text":"é«˜æ•ˆå­˜å‚¨å­—ç¬¦ä¸²é›†åˆ ä»å·¦å¾€å³çœ‹ï¼Œæ„æˆäº†å­—å…¸æ ‘ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253#include &lt;iostream&gt;using namespace std;const int N = 10;// const int N = 100010;int son[N][26]; // 26æ˜¯æŒ‡ æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰26ä¸ªå­èŠ‚ç‚¹int cnt[N]; // ä»¥å½“å‰å­—ç¬¦ç»“å°¾çš„å•è¯ä¸ªæ•°int idx; // å½“å‰ä½¿ç”¨çš„ä¸‹æ ‡,ä¸‹æ ‡æ˜¯0çš„ç‚¹å³æ˜¯æ ¹èŠ‚ç‚¹ä¹Ÿæ˜¯ç©ºèŠ‚ç‚¹ï¼Œidxå†³å®šäº†ä¸åŒçš„å•è¯å¯¹åº”ä¸åŒçš„pï¼Œidxå§‹ç»ˆé€’å¢ï¼Œæ¯ä¸ªå•è¯ä¼šæœ‰ä¸åŒçš„idxchar str[N];void insert(char str[]) &#123; int p = 0; for (int i = 0; str[i]; i++) &#123; // éå†å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²æœ«å°¾æ˜¯&#x27;\\0&#x27;å¤šä»¥å¯ä»¥ç”¨str[i]ç›´æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯ç»“å°¾äº† int u = str[i] - &#x27;a&#x27;; // æŠŠ26ä¸ªå­—æ¯æ˜ å°„åˆ°0-25 if (!son[p][u]) son[p][u] = ++idx; // å¦‚æœpè¿™ä¸ªèŠ‚ç‚¹ä¸å­˜åœ¨uå­èŠ‚ç‚¹çš„è¯ å°±è¦æŠŠä»–åˆ›å»ºå‡ºæ¥ p = son[p][u]; // å‘å‰èµ° &#125; cnt[p]++; // ä»¥pè¿™ä¸ªèŠ‚ç‚¹ç»“å°¾çš„å•è¯+1ï¼›&#125;int query(char str[]) &#123; int p = 0; for (int i = 0; str[i]; i++) &#123; int u = str[i] - &#x27;a&#x27;; if (!son[p][u]) return 0; // åˆ°åº•äº†ï¼ŒæŸ¥æ— æ­¤å•è¯ p = son[p][u]; // å¾€ä¸‹èµ° &#125; return cnt[p]; // è¿”å›æŸ¥åˆ°çš„å•è¯ä¸ªæ•°&#125;// void printdebug(int n) &#123;// if (n == 5) &#123;// for (int i = 0; i &lt; 10; i++) &#123;// for (int j = 0; j &lt; 10; j++)// cout &lt;&lt; son[i][j] &lt;&lt; &#x27; &#x27;;// cout &lt;&lt; &#x27;\\n&#x27;;// &#125;// &#125;// &#125;int main() &#123; int n; scanf(&quot;%d&quot;, &amp;n); while (n--) &#123; char op[2]; scanf(&quot;%s%s&quot;, op, str); if (op[0] == &#x27;I&#x27;) insert(str); else printf(&quot;%d\\n&quot;, query(str)); // printdebug(n); &#125; return 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"Trie","slug":"Trie","permalink":"http://breadwinners.top/tags/Trie/"}]},{"title":"å“ˆå¤«æ›¼","slug":"å“ˆå¤«æ›¼","date":"2023-04-09T16:00:00.000Z","updated":"2023-07-11T01:41:32.440Z","comments":true,"path":"2023/04/10/å“ˆå¤«æ›¼/","link":"","permalink":"http://breadwinners.top/2023/04/10/%E5%93%88%E5%A4%AB%E6%9B%BC/","excerpt":"","text":"åœ¨ä¸€ä¸ªæœå›­é‡Œï¼Œè¾¾è¾¾å·²ç»å°†æ‰€æœ‰çš„æœå­æ‰“äº†ä¸‹æ¥ï¼Œè€Œä¸”æŒ‰æœå­çš„ä¸åŒç§ç±»åˆ†æˆäº†ä¸åŒçš„å †ã€‚ è¾¾è¾¾å†³å®šæŠŠæ‰€æœ‰çš„æœå­åˆæˆä¸€å †ã€‚ æ¯ä¸€æ¬¡åˆå¹¶ï¼Œè¾¾è¾¾å¯ä»¥æŠŠä¸¤å †æœå­åˆå¹¶åˆ°ä¸€èµ·ï¼Œæ¶ˆè€—çš„ä½“åŠ›ç­‰äºä¸¤å †æœå­çš„é‡é‡ä¹‹å’Œã€‚ å¯ä»¥çœ‹å‡ºï¼Œæ‰€æœ‰çš„æœå­ç»è¿‡ nâˆ’1 æ¬¡åˆå¹¶ä¹‹åï¼Œå°±åªå‰©ä¸‹ä¸€å †äº†ã€‚ è¾¾è¾¾åœ¨åˆå¹¶æœå­æ—¶æ€»å…±æ¶ˆè€—çš„ä½“åŠ›ç­‰äºæ¯æ¬¡åˆå¹¶æ‰€è€—ä½“åŠ›ä¹‹å’Œã€‚ å› ä¸ºè¿˜è¦èŠ±å¤§åŠ›æ°”æŠŠè¿™äº›æœå­æ¬å›å®¶ï¼Œæ‰€ä»¥è¾¾è¾¾åœ¨åˆå¹¶æœå­æ—¶è¦å°½å¯èƒ½åœ°èŠ‚çœä½“åŠ›ã€‚ å‡å®šæ¯ä¸ªæœå­é‡é‡éƒ½ä¸º 1ï¼Œå¹¶ä¸”å·²çŸ¥æœå­çš„ç§ç±»æ•°å’Œæ¯ç§æœå­çš„æ•°ç›®ï¼Œä½ çš„ä»»åŠ¡æ˜¯è®¾è®¡å‡ºåˆå¹¶çš„æ¬¡åºæ–¹æ¡ˆï¼Œä½¿è¾¾è¾¾è€—è´¹çš„ä½“åŠ›æœ€å°‘ï¼Œå¹¶è¾“å‡ºè¿™ä¸ªæœ€å°çš„ä½“åŠ›è€—è´¹å€¼ã€‚ ä¾‹å¦‚æœ‰ 3 ç§æœå­ï¼Œæ•°ç›®ä¾æ¬¡ä¸º 1ï¼Œ2ï¼Œ9ã€‚ å¯ä»¥å…ˆå°† 1ã€2 å †åˆå¹¶ï¼Œæ–°å †æ•°ç›®ä¸º 3ï¼Œè€—è´¹ä½“åŠ›ä¸º 3ã€‚ æ¥ç€ï¼Œå°†æ–°å †ä¸åŸå…ˆçš„ç¬¬ä¸‰å †åˆå¹¶ï¼Œåˆå¾—åˆ°æ–°çš„å †ï¼Œæ•°ç›®ä¸º 12ï¼Œè€—è´¹ä½“åŠ›ä¸º 12ã€‚ æ‰€ä»¥è¾¾è¾¾æ€»å…±è€—è´¹ä½“åŠ›&#x3D;3+12&#x3D;15ã€‚ å¯ä»¥è¯æ˜ 15 ä¸ºæœ€å°çš„ä½“åŠ›è€—è´¹å€¼ã€‚ è¾“å…¥æ ¼å¼è¾“å…¥åŒ…æ‹¬ä¸¤è¡Œï¼Œç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•° nï¼Œè¡¨ç¤ºæœå­çš„ç§ç±»æ•°ã€‚ ç¬¬äºŒè¡ŒåŒ…å« n ä¸ªæ•´æ•°ï¼Œç”¨ç©ºæ ¼åˆ†éš”ï¼Œç¬¬ i ä¸ªæ•´æ•° ai æ˜¯ç¬¬ i ç§æœå­çš„æ•°ç›®ã€‚ è¾“å‡ºæ ¼å¼è¾“å‡ºåŒ…æ‹¬ä¸€è¡Œï¼Œè¿™ä¸€è¡ŒåªåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œä¹Ÿå°±æ˜¯æœ€å°çš„ä½“åŠ›è€—è´¹å€¼ã€‚ è¾“å…¥æ•°æ®ä¿è¯è¿™ä¸ªå€¼å°äº 2^31^ã€‚ æ•°æ®èŒƒå›´1â‰¤nâ‰¤10000,1â‰¤aiâ‰¤20000 è¾“å…¥æ ·ä¾‹ï¼š123 1 2 9 è¾“å‡ºæ ·ä¾‹ï¼š115 ä»£ç ï¼š 123456789101112131415161718192021222324252627#include &lt;algorithm&gt;#include &lt;cstdio&gt;#include &lt;iostream&gt;#include &lt;queue&gt;using namespace std;const int N = 20;int main() &#123; priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt;&gt; heap; int n, t, sum = 0, a, b; cin &gt;&gt; n; for (int i = 0; i &lt; n; i++) &#123; cin &gt;&gt; t; heap.push(t); &#125; while (heap.size() &gt; 1) &#123; a = heap.top(); heap.pop(); b = heap.top(); heap.pop(); sum += a + b; heap.push(a + b); &#125; cout &lt;&lt; sum; return 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"è´ªå¿ƒ","slug":"è´ªå¿ƒ","permalink":"http://breadwinners.top/tags/%E8%B4%AA%E5%BF%83/"},{"name":"heap","slug":"heap","permalink":"http://breadwinners.top/tags/heap/"}]},{"title":"frpå†…ç½‘ç©¿é€","slug":"Linux/centosé…ç½®å†…ç½‘ç©¿é€","date":"2023-04-09T16:00:00.000Z","updated":"2023-07-11T02:09:06.639Z","comments":true,"path":"2023/04/10/Linux/centosé…ç½®å†…ç½‘ç©¿é€/","link":"","permalink":"http://breadwinners.top/2023/04/10/Linux/centos%E9%85%8D%E7%BD%AE%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/","excerpt":"","text":"centos7ä½¿ç”¨frpæ­å»ºå†…ç½‘ç©¿é€å†™çš„å¾ˆå¥½ å‰ææ¡ä»¶ï¼šéƒ¨ç½²FRPè½¯ä»¶çš„è™šæ‹Ÿæœºéœ€å¯ä»¥è®¿é—®äº’è”ç½‘ï¼Œå¹¶å…³é—­æ“ä½œç³»ç»Ÿé˜²ç«å¢™ã€‚ è™šæ‹ŸæœºæˆåŠŸéƒ¨ç½²FRPåå³å¯é€šè¿‡SSHè®¿é—®è™šæ‹Ÿæœºã€‚ ä¸‹è½½ FRPè½¯ä»¶ â€‹ ä¸‹è½½åœ°å€ï¼šhttps://github.com/fatedier/frp/releases 1wget https://github.com/fatedier/frp/releases/download/v0.36.2/frp_0.36.2_linux_amd64.tar.gz è§£å‹ 1tar -xvf frp_0.36.2_linux_amd64.tar.gz è¿›å…¥è§£å‹ç›®å½• 1cd frp_0.36.2_linux_amd64 é…ç½®frpc.ini 1234vim frpc.ini[common]bind_port = 8000 æœåŠ¡å™¨è¿è¡Œ 1./frps -c ./frps.ini æ·»åŠ å¼€æœºè‡ªå¯åŠ¨ 123456789101112131415161718vim /usr/lib/systemd/system/frp.service[Unit]Description=The nginx HTTP and reverse proxy serverAfter=network.target remote-fs.target nss-lookup.target[Service]Type=simpleExecStart=/usr/local/frp/frps -c /usr/local/frp/frps.iniKillSignal=SIGQUITTimeoutStopSec=5KillMode=processPrivateTmp=trueStandardOutput=syslogStandardError=inherit[Install]WantedBy=multi-user.target ExecStartçš„å†…å®¹è¯·æ ¹æ®è‡ªå·±frpå®‰è£…ç›®å½•ä¿®æ”¹ã€‚ 12systemctl daemon-reload # è®¾ç½®å¼€æœºè‡ªå¯åŠ¨systemctl enable frp 1systemctl start frp # å¯åŠ¨frp æŸ¥çœ‹frpæ˜¯å¦å¯åŠ¨ 1ps aux | grep frps æœ¬åœ°æœåŠ¡å™¨é…ç½® ä¸‹è½½frp 1wget https://github.com/fatedier/frp/releases/download/v0.36.2/frp_0.36.2_linux_amd64.tar.gz è§£å‹è¿›å…¥ 12tar -xvf frp_0.36.2_linux_amd64.tar.gzcd frp_0.36.2_linux_amd64 é…ç½®frpc.ini 1vim frpc.ini æŠŠä¸‹é¢çš„å†…å®¹å¤åˆ¶åˆ°é‡Œé¢ 12345678910[common]server_addr = 666.666.666.66 # å¤–ç½‘å¯ä»¥è®¿é—®çš„æœåŠ¡å™¨ipserver_port = 8000 # æœ¬åœ°æœåŠ¡å™¨ä¸é˜¿é‡Œäº‘æœåŠ¡å™¨è¿æ¥çš„ç«¯å£ï¼ˆéœ€è¦åœ¨é˜¿é‡Œäº‘å¼€é€šè¯¥ç«¯å£ï¼‰[web]type = tcplocal_ip = 127.0.0.1local_port = 8080remote_port = 6666 # webæœåŠ¡ä¸é˜¿é‡Œäº‘æœåŠ¡å™¨è¿æ¥çš„ç«¯å£ è¿è¡Œ 1./frpc -c ./frpc.ini è®¿é—® é˜¿é‡Œäº‘æœåŠ¡å™¨:remote_portç«¯å£&#x2F;webæœåŠ¡è·¯å¾„ä¾‹å¦‚ï¼š88.888.888.88:6666&#x2F;report&#x2F;allure-html&#x2F;index.html åå°è¿è¡ŒfrpæœåŠ¡ï¼š æœåŠ¡ç«¯ï¼š nohup ./frps -c frps.ini &gt;/dev/null 2&gt;&amp;1 &amp; å®¢æˆ·ç«¯ï¼š nohup ./frpc -c frpc.ini &gt;/dev/null 2&gt;&amp;1 &amp; è¯´æ˜ï¼š&gt;/dev/null 2&gt;&amp;1 &amp;ï¼Œè¡¨ç¤ºä¸¢å¼ƒã€‚ å†…ç½‘ç©¿é€","categories":[{"name":"æ£é¼“","slug":"æ£é¼“","permalink":"http://breadwinners.top/categories/%E6%8D%A3%E9%BC%93/"}],"tags":[{"name":"frp","slug":"frp","permalink":"http://breadwinners.top/tags/frp/"},{"name":"å†…ç½‘ç©¿é€","slug":"å†…ç½‘ç©¿é€","permalink":"http://breadwinners.top/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"}]},{"title":"","slug":"Bugs","date":"2023-04-08T16:00:00.000Z","updated":"2023-07-11T01:25:18.225Z","comments":true,"path":"2023/04/09/Bugs/","link":"","permalink":"http://breadwinners.top/2023/04/09/Bugs/","excerpt":"","text":"Ctrl + D CV å¤åˆ¶å‡ºçš„ä»£ç æ€»ä¼šå‡ºç‚¹é—®é¢˜ï¼Œæœ‰çš„ç›¸ä¼¼çš„å†…å®¹å¿˜è®°æ”¹ï¼Œæ¯”å¦‚ 12res1 = max(res1, a[i]);res2 = max(res1, a[j]); ç¬¬äºŒä¸ªres2åº”è¯¥æ˜¯è¦minå‡½æ•° &#x3D;&#x3D;ä¹ æƒ¯äº†ä½¿ç”¨n--è¯»å…¥æ•°æ®ï¼Œä»¥è‡³äºåˆ°åé¢å¾ªç¯éå†æ•°æ®çš„æ—¶å€™ï¼Œnçš„å€¼å˜æˆäº† -1 ä¸å¯ç”¨è¿™ä¸ªfor i n æ¥éå†&#x3D;&#x3D; 123456789101112131415161718192021222324252627282930313233#include &lt;algorithm&gt;#include &lt;iostream&gt;#include &lt;vector&gt;using namespace std;vector&lt;int&gt; mul(vector&lt;int&gt;&amp; A, int b) &#123; int t = 0; vector&lt;int&gt; C; for (int i = 0; i &lt; A.size() || t; i++) &#123; if (i &lt; A.size()) t += A[i] * b; C.push_back(t % 10); t /= 10; &#125; while (C.size() &gt; 1 &amp;&amp; C.back() == 0) // æ•°æ®è¿ç®—æœ‰å¿…è¦æ¸…ç†å‰å¯¼é›¶ C.pop_back(); return C;&#125;int main() &#123; string st; int b; vector&lt;int&gt; A; cin &gt;&gt; st &gt;&gt; b; for (int i = st.length() - 1; i &gt;= 0; i++) &#123; // ä¹ æƒ¯æ€§å†™æˆäº†i++ï¼Œå®é™…ä¸Šè¿™ä¸ªé¢˜ç›®ä¸­åº”è¯¥æ˜¯i-- A.push_back(st[i] - &#x27;0&#x27;); &#125; vector&lt;int&gt; C = mul(A, b); for (int i = C.size() - 1; i &gt;= 0; i++) &#123; // ä¹ æƒ¯æ€§å†™æˆäº†i++ï¼Œå®é™…ä¸Šè¿™ä¸ªé¢˜ç›®ä¸­åº”è¯¥æ˜¯i-- cout &lt;&lt; C[i]; &#125; return 0;&#125; æ’åºï¼Œå¯èƒ½å°±ä¼šæ¶‰åŠåˆ°å¤åŸæ•°ç»„ï¼Œåƒè¿å·åŒºé—´ æ¶‰åŠåˆ°æ•°é‡é—®é¢˜ï¼Œå¯èƒ½ä¼šçˆ†int é€’å¢ä¸‰å…ƒç»„ whileå¾ªç¯çš„æŒ‡é’ˆï¼Œä¸€å®šè¦åˆ¤æ–­æŒ‡é’ˆä¸å‡ºç•Œæ‰ç»§ç»­å¾ªç¯ é€’å¢ä¸‰å…ƒç»„ using namespace std è¦æ”¾åœ¨typedefä¸Šé¢ï¼Œå¦åˆ™ä¼šæŠ¥é”™ ç»“æ„ä½“æ•°ç»„çš„æ’åºæ–¹å¼ stable_sort 1234567891011121314151617181920212223#include &lt;iostream&gt;#include &lt;stdio.h&gt;int main()&#123; std::string str = &quot;668&quot;; int num = 0; sscanf(str.c_str(), &quot;%d&quot;, &amp;num); std::cout &lt;&lt; num; return 0;&#125;#include &lt;iostream&gt;int main()&#123; int num = 123; std::cout &lt;&lt; std::to_string(num); return 0;&#125; çˆ†int123456789101112131415161718192021222324252627#include &lt;algorithm&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;const int N = 1000010;typedef long long LL;LL res;int n;LL a[N]; // åå¹´OIä¸€åœºç©ºï¼Œä¸å¼€long long è§ç¥–å®—int main() &#123; // https://www.acwing.com/problem/content/description/2878/ cin &gt;&gt; n; for (int i = 0; i &lt; n; i++) &#123; cin &gt;&gt; a[i]; &#125; LL t; for (int i = 0; i &lt; n - 1; i++) &#123; t = a[i] * a[i + 1]; res += t; a[i + 1] += a[i]; &#125; cout &lt;&lt; res; return 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"bugs","slug":"bugs","permalink":"http://breadwinners.top/tags/bugs/"}]},{"title":"STL","slug":"STL","date":"2023-04-07T16:00:00.000Z","updated":"2023-07-11T01:29:30.909Z","comments":true,"path":"2023/04/08/STL/","link":"","permalink":"http://breadwinners.top/2023/04/08/STL/","excerpt":"","text":"mapä¸­countæ–¹æ³•123456789101112131415161718192021222324252627282930#include&lt;iostream&gt;#include&lt;map&gt;#include&lt;string&gt;using namespace std;int main()&#123; map&lt;int,string&gt;maps; if(maps.find(1)==maps.end()) &#123; cout&lt;&lt;&quot;æ²¡æœ‰1è¿™ä¸ªå…ƒç´ &quot;&lt;&lt;endl; &#125; if(maps.count(1)==0) &#123; cout&lt;&lt;&quot;æ²¡æœ‰1è¿™ä¸ªå…ƒç´ &quot;&lt;&lt;endl; &#125; //æ·»åŠ å…ƒç´ 1 maps[1]=&quot;one&quot;; if(maps.find(1)!=maps.end()) &#123; cout&lt;&lt;&quot;æœ‰1è¿™ä¸ªå…ƒç´ &quot;&lt;&lt;endl; &#125; if(maps.count(1)) &#123; cout&lt;&lt;&quot;æœ‰1è¿™ä¸ªå…ƒç´ &quot;&lt;&lt;endl; &#125; return 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"STL","slug":"STL","permalink":"http://breadwinners.top/tags/STL/"}]},{"title":"å“ˆå¸Œè¡¨","slug":"HashMap","date":"2023-04-07T16:00:00.000Z","updated":"2023-07-11T01:27:57.785Z","comments":true,"path":"2023/04/08/HashMap/","link":"","permalink":"http://breadwinners.top/2023/04/08/HashMap/","excerpt":"","text":"æ‹‰é“¾æ³•æ¨¡çš„æ•°åº”è¯¥æ˜¯è´¨æ•° ä¸€å®šè¦è®°å¾—memset ç»´æŠ¤ä¸€ä¸ªé›†åˆï¼Œæ”¯æŒå¦‚ä¸‹å‡ ç§æ“ä½œï¼š I xï¼Œæ’å…¥ä¸€ä¸ªæ•° xï¼› Q xï¼Œè¯¢é—®æ•° x æ˜¯å¦åœ¨é›†åˆä¸­å‡ºç°è¿‡ï¼› ç°åœ¨è¦è¿›è¡Œ N æ¬¡æ“ä½œï¼Œå¯¹äºæ¯ä¸ªè¯¢é—®æ“ä½œè¾“å‡ºå¯¹åº”çš„ç»“æœã€‚ è¾“å…¥æ ¼å¼ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•° Nï¼Œè¡¨ç¤ºæ“ä½œæ•°é‡ã€‚ æ¥ä¸‹æ¥ N è¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸€ä¸ªæ“ä½œæŒ‡ä»¤ï¼Œæ“ä½œæŒ‡ä»¤ä¸º I xï¼ŒQ x ä¸­çš„ä¸€ç§ã€‚ è¾“å‡ºæ ¼å¼å¯¹äºæ¯ä¸ªè¯¢é—®æŒ‡ä»¤ Q xï¼Œè¾“å‡ºä¸€ä¸ªè¯¢é—®ç»“æœï¼Œå¦‚æœ xxx åœ¨é›†åˆä¸­å‡ºç°è¿‡ï¼Œåˆ™è¾“å‡º Yesï¼Œå¦åˆ™è¾“å‡º Noã€‚ æ¯ä¸ªç»“æœå ä¸€è¡Œã€‚ æ•°æ®èŒƒå›´1â‰¤Nâ‰¤10^5^âˆ’10^9^â‰¤xâ‰¤10^9^ è¾“å…¥æ ·ä¾‹ï¼š1234565I 1I 2I 3Q 2Q 5 è¾“å‡ºæ ·ä¾‹ï¼š12YesNo 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;const int N = 1e5 + 3; // å–å¤§äº1e5çš„ç¬¬ä¸€ä¸ªè´¨æ•°ï¼Œå–è´¨æ•°å†²çªçš„æ¦‚ç‡æœ€å° å¯ä»¥ç™¾åº¦//* å¼€ä¸€ä¸ªæ§½ hint h[N], e[N], ne[N], idx; // é‚»æ¥è¡¨void insert(int x) &#123; // c++ä¸­å¦‚æœæ˜¯è´Ÿæ•° é‚£ä»–å–æ¨¡ä¹Ÿæ˜¯è´Ÿçš„ æ‰€ä»¥ åŠ N å† %N å°±ä¸€å®šæ˜¯ä¸€ä¸ªæ­£æ•° int k = (x % N + N) % N; e[idx] = x; ne[idx] = h[k]; h[k] = idx++;&#125;bool find(int x) &#123; // ç”¨ä¸Šé¢åŒæ ·çš„ Hashå‡½æ•° è®²xæ˜ å°„åˆ° ä» 0-1e5 ä¹‹é—´çš„æ•° int k = (x % N + N) % N; for (int i = h[k]; i != -1; i = ne[i]) &#123; if (e[i] == x) &#123; return true; &#125; &#125; return false;&#125;int n;int main() &#123; cin &gt;&gt; n; memset(h, -1, sizeof h); // å°†æ§½å…ˆæ¸…ç©º ç©ºæŒ‡é’ˆä¸€èˆ¬ç”¨ -1 æ¥è¡¨ç¤º while (n--) &#123; string op; int x; cin &gt;&gt; op &gt;&gt; x; if (op == &quot;I&quot;) &#123; insert(x); &#125; else &#123; if (find(x)) &#123; puts(&quot;Yes&quot;); &#125; else &#123; puts(&quot;No&quot;); &#125; &#125; &#125; return 0;&#125; å¼€æ”¾å¯»å€æ³•å¼€çš„æ•°ç»„åº”è¯¥æ˜¯æ•°æ®èŒƒå›´çš„ä¸‰å€ å–ä¸€ä¸ªåœ¨æ•°æ®èŒƒå›´å¤–çš„æ•°ï¼Œæ¯”å¦‚null &#x3D; ox3f3f3f3fï¼Œnullï¼10^9^ï¼Œè¡¨ç¤ºä¸ºç©ºï¼ˆ4ä¸ª3fï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839#include &lt;algorithm&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;const int N = 2e5 + 3;const int null = 0x3f3f3f3f;int h[N];int find(int x) &#123; // å¼€æ”¾å¯»å€æ³•ï¼Œfindå‡½æ•°è¿”å›çš„æ˜¯xåº”è¯¥å­˜åœ¨çš„ä½ç½®æˆ–è€…åœ¨çš„ä½ç½® int k = (x % N + N) % N; while (h[k] != x &amp;&amp; h[k] != null) &#123; k++; if (k == N) k = 0; &#125; return k;&#125;int main() &#123; char op; int n, x; cin &gt;&gt; n; memset(h, 0x3f, sizeof h); while (n--) &#123; cin &gt;&gt; op &gt;&gt; x; int k = find(x); if (op == &#x27;I&#x27;) &#123; h[k] = x; &#125; else if (op == &#x27;Q&#x27;) &#123; if (h[k] != null) puts(&quot;Yes&quot;); else puts(&quot;No&quot;); &#125; &#125; return 0;&#125; å­—ç¬¦ä¸²å“ˆå¸Œ 12345678910111213141516171819202122232425262728293031323334#include &lt;algorithm&gt;#include &lt;iostream&gt;using namespace std;const int P = 131, N = 1e5+10; // På–è¿™ä¸ªå€¼æ¯”è¾ƒå¥½typedef unsigned long long ULL;ULL p[N], h[N]; // h[N] æ˜¯ s[1 - n] å“ˆå¸Œå€¼void init(int n, char* str) &#123; p[0] = 1; for (int i = 1; i &lt;= n; i++) &#123; p[i] = p[i - 1] * P; h[i] = h[i - 1] * P + str[i]; &#125;&#125;ULL get(int l, int r) &#123; return h[r] - h[l - 1] * p[r - l + 1];&#125;int main() &#123; // å­—ç¬¦ä¸²å“ˆå¸Œhttps://www.acwing.com/problem/content/843/ int n, m; char str[N]; cin &gt;&gt; n &gt;&gt; m &gt;&gt; str + 1; // åªèƒ½å®šä¹‰æˆchar init(n, str); int l1, r1, l2, r2; while (m--) &#123; cin &gt;&gt; l1 &gt;&gt; r1 &gt;&gt; l2 &gt;&gt; r2; if (get(l1, r1) == get(l2, r2)) puts(&quot;Yes&quot;); else puts(&quot;No&quot;); &#125; return 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"HashMap","slug":"HashMap","permalink":"http://breadwinners.top/tags/HashMap/"}]},{"title":"æš´åŠ›å’Œæ¨¡æ‹Ÿ","slug":"æš´åŠ›å’Œæ¨¡æ‹Ÿ","date":"2023-04-06T16:00:00.000Z","updated":"2023-07-11T01:33:16.260Z","comments":true,"path":"2023/04/07/æš´åŠ›å’Œæ¨¡æ‹Ÿ/","link":"","permalink":"http://breadwinners.top/2023/04/07/%E6%9A%B4%E5%8A%9B%E5%92%8C%E6%A8%A1%E6%8B%9F/","excerpt":"","text":"å››æ–¹å’Œå®šç† 1234567891011121314151617181920212223242526272829303132333435363738#include &lt;bits/stdc++.h&gt;using namespace std;typedef pair&lt;int, int&gt; PII;const int N = 5e6 + 10;int n;int h[N * 2]; // å°æŠ€å·§ï¼Œé¿å…pairï¼Œr[c^2+d^2]=c;å¯ä»¥æ¨å¯¼å‡ºdint main() &#123; cin &gt;&gt; n; memset(h, -1, sizeof h); for (int c = 0; c * c &lt;= n; c++) &#123; for (int d = c; c * c + d * d &lt;= n; d++) &#123; // å¿…é¡»è¦æ›´ä¸¥æ ¼çš„åˆ¤æ–­æ¡ä»¶ï¼Œc * c + d * d &lt;= n,å¦åˆ™ä¼šå‡ºæ„å¤– int s = c * c + d * d; if (h[s] == -1) &#123; h[s] = c; &#125; &#125; &#125; for (int a = 0; a * a &lt;= n; a++) &#123; for (int b = a; a * a + b * b &lt;= n; b++) &#123; // å¿…é¡»è¦æ›´ä¸¥æ ¼çš„åˆ¤æ–­æ¡ä»¶ï¼Œa * a+ b * b &lt;= n,å¦åˆ™ä¼šå‡ºæ„å¤– int s = n - a * a - b * b; if (h[s] != -1) &#123; int d = sqrt(s - h[s] * h[s]); printf(&quot;%d %d %d %d\\n&quot;, a, b, h[s], d); return 0; &#125; &#125; &#125; return 0;&#125; è¿å·åŒºé—´æ•° 123456789101112131415161718192021222324252627282930313233#include &lt;algorithm&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;const int N = 10010;int a[N], tmp[N];int n, cnt = 0;int main() &#123; // https://www.acwing.com/problem/content/1212/ cin &gt;&gt; n; for (int i = 0; i &lt; n; i++) &#123; cin &gt;&gt; a[i]; &#125; for (int i = 0; i &lt; n; i++) &#123; int mav = -1; int miv = 10009; for (int j = i; j &lt; n; j++) &#123; mav = max(mav, a[j]); miv = min(miv, a[j]); if (mav - miv == j - i) &#123; cnt++; &#125; &#125; &#125; cout &lt;&lt; cnt; return 0;&#125; å›æ–‡æ—¥æœŸ &#x3D;&#x3D;æ³¨æ„&#x3D;&#x3D; è¿™ä¸ªé¢˜ç›®ä¸­æœ‰ä¸¤ä¸ªæšä¸¾çš„è§’åº¦ï¼Œä¸€ä¸ªæ˜¯ ç¬¦åˆå›æ–‡æ•°çš„èŒƒå›´è¦æ±‚ï¼Œå¦ä¸€ä¸ªæ˜¯ ç¬¦åˆæ—¥æœŸçš„è¦æ±‚ï¼Œå¾ˆå®¹æ˜“ä¼šæƒ³åˆ°å¼€å§‹æšä¸¾æ—¥æœŸï¼Œç„¶åæƒ³æ˜¯å¦æ»¡è¶³å›æ–‡æ•°ï¼Œä½†æ˜¯è¿™ç§æšä¸¾æ–¹æ³•å¾ˆéº»çƒ¦ï¼Œå¯èƒ½éœ€è¦è‡ªå·±å†™ä¸ªæ—¥å†ã€‚æ‰€ä»¥æ¢ä¸€ä¸ªè§’åº¦ï¼Œå…ˆæšä¸¾å›æ–‡æ•°ï¼Œå†åˆ¤æ–­æ˜¯å¦æ»¡è¶³æ—¥æœŸçš„è¦æ±‚ï¼Œå°±ç®€å•å¾ˆå¤šï¼Œæ³¨æ„getlineä¹‹å‰è¦å¸æ”¶å›è½¦ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950#include &lt;algorithm&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;int date1, date2, res = 0;int days[13] = &#123;0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31&#125;;bool check(int date) &#123; // åˆ¤æ–­å›æ–‡æ•°ä¸­çš„æœˆä»½æ˜¯å¦åˆæ³• int year, month, day; year = date / 10000; month = date / 100 % 100; day = date % 100; cout &lt;&lt; year &lt;&lt; &quot; &quot; &lt;&lt; month &lt;&lt; &quot; &quot; &lt;&lt; day &lt;&lt; &quot;##\\n&quot;; if (month &lt;= 0 || month &gt; 12) return false; if (day &lt;= 0 || day &gt; days[month] &amp;&amp; month != 2) return false; if (month == 2) &#123; int leap = (year % 400 == 0 || year % 4 == 0 &amp;&amp; year % 100 != 0); if (day &gt; days[month] + leap) return false; &#125; return true;&#125;int main() &#123; // https://www.acwing.com/problem/content/468/ cin &gt;&gt; date1 &gt;&gt; date2; // é¦–å…ˆæšä¸¾å›æ–‡æ•°ï¼Œåªéœ€æšä¸¾å‰é¢4ä½æ•° for (int i = 1000; i &lt; 10000; i++) &#123; int date = i, x = i; while (x) &#123; // é€šè¿‡å‰4ä½æ•°æ„é€ å›æ–‡æ•° date *= 10; int t = x % 10; date += t; x /= 10; &#125; cout &lt;&lt; date &lt;&lt; endl; if (check(date) &amp;&amp; date &gt;= date1 &amp;&amp; date &lt;= date2) res++; &#125; cout &lt;&lt; res; return 0;&#125; é€’å¢ä¸‰å…ƒç»„ åŒæŒ‡é’ˆ&#x3D;&#x3D;æ³¨æ„&#x3D;&#x3D; while å¾ªç¯çš„æŒ‡é’ˆï¼Œä¸€å®šè¦åˆ¤æ–­æŒ‡é’ˆä¸å‡ºç•Œæ‰ç»§ç»­å¾ªç¯ é€’å¢ä¸‰å…ƒç»„ æ€è·¯ï¼šæšä¸¾æ•°ç»„Bï¼ŒAï¼Œ Cæ•°ç»„ä»å¼€å¤´å‡ºå‘ï¼Œæ»¡è¶³ A &lt; B &lt; Cï¼Œres++ 12345678910111213141516171819202122232425262728293031#include &lt;algorithm&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;typedef long long LL;const int N = 1e5 + 10;int n;int a[N], b[N], c[N];signed main() &#123; // https://www.acwing.com/problem/content/description/1238/ cin &gt;&gt; n; for (int i = 0; i &lt; n; i++) scanf(&quot;%d&quot;, &amp;a[i]); for (int i = 0; i &lt; n; i++) scanf(&quot;%d&quot;, &amp;b[i]); for (int i = 0; i &lt; n; i++) scanf(&quot;%d&quot;, &amp;c[i]); sort(a, a + n); sort(b, b + n); sort(c, c + n); LL res = 0, l = 0, r = 0; // l å’Œ rå®šä¹‰åœ¨å¤–é¢ï¼Œå› ä¸ºæ•°ç»„æ’åºè¿‡åï¼Œé¡ºåºæ˜¯å›ºå®šçš„ï¼Œæ²¡å¿…è¦ä»å¤´å¼€å§‹æŸ¥æ‰¾ for (int i = 0; i &lt; n; i++) &#123; while (a[l] &lt; b[i] &amp;&amp; l &lt; n) l++; while (c[r] &lt;= b[i] &amp;&amp; r &lt; n) r++; res += (LL)l * (n - r); &#125; cout &lt;&lt; res &lt;&lt; endl;&#125; å‰ç¼€å’Œæ€è·¯ï¼šå®šä¹‰ä¸€ä¸ªæ•°ç»„cntaï¼Œcnta[i] æ˜¯Aä¸­å°äºiçš„æ•°çš„ä¸ªæ•°ï¼Œcntc[i] æ˜¯Cä¸­å¤§äºiçš„æ•°çš„ä¸ªæ•°ï¼Œç„¶åå¾ªç¯éå†æ•°ç»„Bï¼Œres +&#x3D; Aä¸­å°äºB[i]çš„æ•°é‡ Ã— Cä¸­å¤§äºB[i]çš„æ•°é‡ 12345678910111213141516171819202122232425262728293031323334353637383940414243#include &lt;algorithm&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;typedef long long LL;const int N = 100010;int A[N], B[N], C[N];int cnta[N], cntc[N]; // cnta[i] æ˜¯Aä¸­å°äºiçš„æ•°çš„ä¸ªæ•°, cntc[i] æ˜¯Cä¸­å¤§äºiçš„æ•°çš„ä¸ªæ•°int main() &#123; int n; cin &gt;&gt; n; for (int i = 1; i &lt;= n; i++) &#123; scanf(&quot;%d&quot;, &amp;A[i]); cnta[A[i]]++; &#125; for (int i = 1; i &lt;= n; i++) &#123; scanf(&quot;%d&quot;, &amp;B[i]); &#125; for (int i = 1; i &lt;= n; i++) &#123; scanf(&quot;%d&quot;, &amp;C[i]); cntc[C[i]]++; &#125; // å¯¹æ•°å‡ºç°çš„æ¬¡æ•°ï¼Œæ±‚ä¸€æ¬¡å‰ç¼€å’Œ // é¢„å¤„ç†å‰ç¼€å’Œ for (int i = 1; i &lt;= N; i++) &#123; // å‰ç¼€å’Œçš„è¿­ä»£æ¬¡æ•°ä¸æ˜¯ n, è€Œæ˜¯é¢˜ä¸­å‡ºç°çš„æ•°çš„æœ€å¤§å€¼ cnta[i] += cnta[i - 1]; &#125; for (int i = N; i &gt;= 1; i--) &#123; // è¿™é‡Œè¿˜éœ€è¦æ³¨æ„å‰ç¼€å’Œçš„åç¼€å’Œ cntc[i] += cntc[i + 1]; &#125; // å¼€å§‹è®¡ç®—res LL res = 0; for (int i = 1; i &lt;= n; i++) &#123; res += (LL)cnta[B[i] - 1] * cntc[B[i] + 1]; &#125; cout &lt;&lt; res &lt;&lt; endl; return 0;&#125; é”™è¯¯ç¥¨æ®ï¼ˆè€ƒå¯Ÿæ•°æ®è¯»å–ï¼‰æŸæ¶‰å¯†å•ä½ä¸‹å‘äº†æŸç§ç¥¨æ®ï¼Œå¹¶è¦åœ¨å¹´ç»ˆå…¨éƒ¨æ”¶å›ã€‚ æ¯å¼ ç¥¨æ®æœ‰å”¯ä¸€çš„IDå·ã€‚ å…¨å¹´æ‰€æœ‰ç¥¨æ®çš„IDå·æ˜¯è¿ç»­çš„ï¼Œä½†IDçš„å¼€å§‹æ•°ç æ˜¯éšæœºé€‰å®šçš„ã€‚ å› ä¸ºå·¥ä½œäººå‘˜ç–å¿½ï¼Œåœ¨å½•å…¥IDå·çš„æ—¶å€™å‘ç”Ÿäº†ä¸€å¤„é”™è¯¯ï¼Œé€ æˆäº†æŸä¸ªIDæ–­å·ï¼Œå¦å¤–ä¸€ä¸ªIDé‡å·ã€‚ ä½ çš„ä»»åŠ¡æ˜¯é€šè¿‡ç¼–ç¨‹ï¼Œæ‰¾å‡ºæ–­å·çš„IDå’Œé‡å·çš„IDã€‚ å‡è®¾æ–­å·ä¸å¯èƒ½å‘ç”Ÿåœ¨æœ€å¤§å’Œæœ€å°å·ã€‚ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•° Nï¼Œè¡¨ç¤ºåé¢å…±æœ‰ N è¡Œæ•°æ®ã€‚ æ¥ä¸‹æ¥ N è¡Œï¼Œæ¯è¡ŒåŒ…å«ç©ºæ ¼åˆ†å¼€çš„è‹¥å¹²ä¸ªï¼ˆä¸å¤§äº100ä¸ªï¼‰æ­£æ•´æ•°ï¼ˆä¸å¤§äº100000ï¼‰ï¼Œæ¯ä¸ªæ•´æ•°ä»£è¡¨ä¸€ä¸ªIDå·ã€‚ è¾“å‡ºæ ¼å¼ è¦æ±‚ç¨‹åºè¾“å‡º1è¡Œï¼Œå«ä¸¤ä¸ªæ•´æ•° m,nç”¨ç©ºæ ¼åˆ†éš”ã€‚ å…¶ä¸­ï¼Œmè¡¨ç¤ºæ–­å·IDï¼Œnè¡¨ç¤ºé‡å·IDã€‚ æ•°æ®èŒƒå›´ 1â‰¤Nâ‰¤100 è¾“å…¥æ ·ä¾‹ï¼š12325 6 8 11 9 10 12 9 è¾“å‡ºæ ·ä¾‹ï¼š 17 9 å¯ä»¥ä½¿ç”¨stringstream&#x3D;&#x3D;æ³¨æ„&#x3D;&#x3D; getlineä¹‹å‰å¿…é¡»å¤„ç†æ‰å¤šä½™çš„æ¢è¡Œç¬¦\\n 12345678910111213141516171819202122232425262728293031323334353637#include &lt;algorithm&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;#include &lt;sstream&gt;using namespace std;const int N = 10010;int a[N];int main() &#123; // https://www.acwing.com/problem/content/1206/ int n, cnt = 0; cin &gt;&gt; n; string line; getline(cin, line); while (n--) &#123; getline(cin, line); stringstream ssin(line); while (ssin &gt;&gt; a[cnt]) cnt++; &#125; sort(a, a + cnt); // for (int i = 0;i &lt;cnt;i++) // cout &lt;&lt; a[i] &lt;&lt; &quot; &quot;; int res1, res2; for (int i = 1; i &lt; cnt; i++) &#123; if (a[i] == a[i - 1]) res1 = a[i]; else if (a[i] - a[i - 1] &gt; 1) res2 = a[i - 1] + 1; &#125; cout &lt;&lt; res2 &lt;&lt; &quot; &quot; &lt;&lt; res1; return 0;&#125; ç›´æ¥å¿½ç•¥ç¬¬ä¸€ä¸ªæ•°ï¼Œè¯»å–åˆ°EOF123456789101112131415161718192021222324#include &lt;algorithm&gt;#include &lt;iostream&gt;using namespace std;int n;const int N = 1e5 + 10;int a[N];int main() &#123; // https://www.acwing.com/problem/content/1206/ cin &gt;&gt; n; int i = 0; while (cin &gt;&gt; a[i]) &#123; i++; &#125; sort(a, a + i); int duan, chong; for (int j = 0; j &lt; i; j++) &#123; if (a[j] == a[j + 1]) chong = a[j]; if (a[j] == a[j + 1] - 2) duan = a[j] + 1; &#125; cout &lt;&lt; duan &lt;&lt; &#x27; &#x27;; cout &lt;&lt; chong &lt;&lt; &#x27; &#x27;;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"æš´åŠ›","slug":"æš´åŠ›","permalink":"http://breadwinners.top/tags/%E6%9A%B4%E5%8A%9B/"},{"name":"æ¨¡æ‹Ÿ","slug":"æ¨¡æ‹Ÿ","permalink":"http://breadwinners.top/tags/%E6%A8%A1%E6%8B%9F/"},{"name":"åŒæŒ‡é’ˆ","slug":"åŒæŒ‡é’ˆ","permalink":"http://breadwinners.top/tags/%E5%8F%8C%E6%8C%87%E9%92%88/"}]},{"title":"å¿«æ’å’Œå¿«é€‰","slug":"å¿«æ’é—®é¢˜","date":"2023-04-06T16:00:00.000Z","updated":"2023-07-11T01:42:34.183Z","comments":true,"path":"2023/04/07/å¿«æ’é—®é¢˜/","link":"","permalink":"http://breadwinners.top/2023/04/07/%E5%BF%AB%E6%8E%92%E9%97%AE%E9%A2%98/","excerpt":"","text":"å¿«é€Ÿæ’åº123456789101112131415161718192021222324252627282930313233343536#include &lt;algorithm&gt;#include &lt;iostream&gt;using namespace std;void quick_sort(int q[], int l, int r);int main() &#123; int n = 7; int a[n] = &#123;2, 4, 3, 7, 1, 5, 6&#125;; for (int i = 0; i &lt; n; i++) &#123; cout &lt;&lt; a[i] &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; &quot;\\n####################\\n&quot;; quick_sort(a, 0, n - 1); for (int i = 0; i &lt; n; i++) &#123; cout &lt;&lt; a[i] &lt;&lt; &quot; &quot;; &#125; return 0;&#125;void quick_sort(int q[], int l, int r) &#123; if (l &gt;= r) &#123; return; &#125; int x = q[l + r &gt;&gt; 1], i = l - 1, j = r + 1; while (i &lt; j) &#123; while (q[++i] &lt; x) ; while (q[--j] &gt; x) ; if (i &lt; j) swap(q[i], q[j]); &#125; quick_sort(q, l, j); quick_sort(q, j + 1, r);&#125; å¿«é€Ÿé€‰æ‹©123456789101112131415161718192021222324252627282930#include &lt;algorithm&gt;#include &lt;iostream&gt;using namespace std;int quick_select(int q[], int l, int r, int k);int main() &#123; int n = 5, k = 1; int a[5] = &#123;3, 4, 5, 1, 2&#125;; cout &lt;&lt; quick_select(a, 0, n - 1, k); return 0;&#125;int quick_select(int q[], int l, int r, int k) &#123; if (l &gt;= r) &#123; return q[l]; &#125; int x = q[l + r &gt;&gt; 1], i = l - 1, j = r + 1; while (i &lt; j) &#123; while (q[++i] &lt; x) ; while (q[--j] &gt; x) ; if (i &lt; j) swap(q[i], q[j]); &#125; int sl = j - l + 1; // slå¯ä»¥çœ‹æˆæ’åºå®Œæˆåï¼Œå·¦è¾¹ sl ä¸ªæœ€å°çš„æ•°ï¼Œæ‰€ä»¥ç¬¬kå°çš„æ•°ä¸€å®šåœ¨å·¦åŠè¾¹ if (k &lt;= sl) // k &lt;= sl, ç¬¬kå°çš„æ•°ä¸€ç‚¹åœ¨å·¦åŠè¾¹åŒºé—´å†… return quick_select(q, l, j, k); return quick_select(q, j + 1, r, k - sl);&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"quick","slug":"quick","permalink":"http://breadwinners.top/tags/quick/"},{"name":"sort","slug":"sort","permalink":"http://breadwinners.top/tags/sort/"}]},{"title":"kmp","slug":"kmp","date":"2023-04-06T16:00:00.000Z","updated":"2023-07-11T01:48:27.795Z","comments":true,"path":"2023/04/07/kmp/","link":"","permalink":"http://breadwinners.top/2023/04/07/kmp/","excerpt":"","text":"nextæ•°ç»„çš„æœ¬è´¨å…¶å®æ˜¯å¯»æ‰¾å­ä¸²ä¸­â€œç›¸åŒå‰åç¼€â€çš„é•¿åº¦ï¼Œå¹¶ä¸”ä¸€å®šæ˜¯æœ€é•¿çš„å‰åç¼€ å¦‚æœä¸‹ä¸€ä¸ªå­—ç¬¦ä¾ç„¶ç›¸åŒçš„è¯ï¼Œç›´ æ¥éƒ½æˆäº†ä¸€ä¸ªæ›´é•¿çš„å‰åç¼€ï¼Œé•¿åº¦+1, ä¸‹ä¸€ä¸ªå­—ç¬¦ä¸åŒçš„è¯","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"kmp","slug":"kmp","permalink":"http://breadwinners.top/tags/kmp/"}]},{"title":"äºŒåˆ†æ³•å’Œæ¨¡æ¿","slug":"äºŒåˆ†æ¨¡æ¿","date":"2023-04-05T16:00:00.000Z","updated":"2023-07-11T01:35:20.896Z","comments":true,"path":"2023/04/06/äºŒåˆ†æ¨¡æ¿/","link":"","permalink":"http://breadwinners.top/2023/04/06/%E4%BA%8C%E5%88%86%E6%A8%A1%E6%9D%BF/","excerpt":"","text":"äºŒåˆ†çš„æœ¬è´¨æ˜¯å¯»æ‰¾å·²çŸ¥æ•°æ®ä¸­ï¼Œä¸€éƒ¨åˆ†æ»¡è¶³æŸç§æ€§è´¨ï¼Œå¦ä¸€éƒ¨åˆ†ä¸æ»¡è¶³æŸç§æ€§è´¨ï¼Œå¯»æ‰¾è¿™ä¸ªè¾¹ç•Œç‚¹äºŒåˆ†æ˜¯å¯»æ‰¾è¾¹ç•Œç‚¹ï¼Œå·¦è¾¹ç•Œç‚¹æˆ–è€…æ˜¯å³è¾¹ç•Œç‚¹ï¼Œè€Œè¾¹ç•Œç‚¹ä¸€å®šæ˜¯ä¸¤ç§æ€§è´¨çš„è¿‡æ¸¡ç‚¹ï¼Œ åœ¨æ€è€ƒè¿‡ç¨‹ä¸­ï¼Œä¸çŸ¥é“å¦‚ä½•ç¡®å®šl &#x3D; mid,è¿˜æ˜¯r &#x3D; midï¼Œè®°ä½midæ˜¯å‘keyé è¿‘çš„ï¼Œæ€ä¹ˆå–å€¼èƒ½å¤Ÿè®©midå‘å¯ä»¥é è¿‘ 1.å…ˆå†™ä¸€ä¸ªcheckå‡½æ•°ï¼Œç¡®å®šåŒºé—´æ€§è´¨2.ç¡®å®šè¾¹ç•Œå†™æ¨¡æ¿ï¼Œå¯¹äºæ•´æ•°äºŒåˆ†ï¼Œå…ˆå†™mid &#x3D; l + r &gt;&gt; 1ï¼›åé¢å†ç¡®å®šæ˜¯å¦éœ€è¦+1ï¼Œå¦‚æœæ˜¯l &#x3D; midï¼Œå°±+1 æ¨¡æ¿ 12345678910111213141516171819202122// åŒºé—´[lï¼Œr]è¢«åˆ’åˆ†æˆ[1ï¼Œmid]å’Œ[mid + 1ï¼Œr]æ—¶ä½¿ç”¨:int bsearch_1(int l, int r) &#123; while (l &lt; r) &#123; int mid = l + r &gt;&gt; 1; if (check(mid)) // check() åˆ¤æ–­midæ˜¯å¦æ»¡è¶³æ€§è´¨ r = mid; else l = mid + 1; &#125; return l;&#125;// åŒºé—´[lï¼Œr]è¢«åˆ’åˆ†æˆ[l, mid - 1]å’Œ[midï¼Œr]æ—¶ä½¿ç”¨:int bsearch_2(int l, int r) &#123; while (l &lt; r) &#123; int mid = l + r + 1 &gt;&gt; 1; if (check(mid)) l = mid; else r = mid - 1; &#125; return l;&#125; é¢˜ç›®é“¾æ¥ æ•°çš„èŒƒå›´ 1234567891011121314151617181920212223242526272829303132333435363738394041#include &lt;algorithm&gt;#include &lt;iostream&gt;using namespace std;int main() &#123; int n, m, key; cin &gt;&gt; n &gt;&gt; m; int a[n]; for (int i = 0; i &lt; n; i++) &#123; cin &gt;&gt; a[i]; &#125; while (m--) &#123; cin &gt;&gt; key; int l = 0, r = n - 1; while (l &lt; r) &#123; int mid = l + r &gt;&gt; 1; if (a[mid] &gt;= key) &#123; // å¤§äºç­‰äº x çš„ç¬¬ä¸€ä¸ªä½ç½® r = mid; &#125; else l = mid + 1; &#125; if (a[l] != key) &#123; cout &lt;&lt; &quot;-1 -1\\n&quot;; &#125; else &#123; int ll = 0, rr = n - 1; while (ll &lt; rr) &#123; int mid = ll + rr + 1 &gt;&gt; 1; if (a[mid] &lt;= key) &#123; // å°äºç­‰äº x çš„ç¬¬ä¸€ä¸ªä½ç½® ll = mid; &#125; else rr = mid - 1; &#125; cout &lt;&lt; l &lt;&lt; &quot; &quot; &lt;&lt; ll &lt;&lt; &quot;\\n&quot;; &#125; &#125; return 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"äºŒåˆ†","slug":"äºŒåˆ†","permalink":"http://breadwinners.top/tags/%E4%BA%8C%E5%88%86/"}]},{"title":"å¦‚ä½•æé«˜cin/coutçš„é€Ÿåº¦","slug":"algorithm","date":"2023-04-02T16:00:00.000Z","updated":"2023-07-11T01:23:22.866Z","comments":true,"path":"2023/04/03/algorithm/","link":"","permalink":"http://breadwinners.top/2023/04/03/algorithm/","excerpt":"","text":"åœ¨æ— æ•°çš„ç®—æ³•æ¯”èµ›ä¸­ï¼Œä¸éš¾çœ‹åˆ°ä¸‹é¢è¿™æ ·çš„ä¸œè¥¿ï¼š 1ios::sync_with_stdio(false); ç”šè‡³æ˜¯è¿™æ ·çš„ä¸œè¥¿ï¼š 123ios_base::sync_with_stdio(false); cin.tie(nullptr); cout.tie(nullptr); ç°åœ¨ï¼Œå°½é‡ç”¨&quot;\\n&quot;æ›¿æ¢å¯ä»¥æ›¿æ¢çš„endl ã€‚ï¼ˆè€ƒè™‘æµè¾“å‡ºï¼‰","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"cin","slug":"cin","permalink":"http://breadwinners.top/tags/cin/"},{"name":"cout","slug":"cout","permalink":"http://breadwinners.top/tags/cout/"}]},{"title":"Linuxä¸­suã€sudo","slug":"Linux/sudoå’Œsuå’Œlogout","date":"2023-04-02T16:00:00.000Z","updated":"2023-07-11T02:07:40.164Z","comments":true,"path":"2023/04/03/Linux/sudoå’Œsuå’Œlogout/","link":"","permalink":"http://breadwinners.top/2023/04/03/Linux/sudo%E5%92%8Csu%E5%92%8Clogout/","excerpt":"","text":"æ³¨æ„ï¼šsu -ä½¿ç”¨rootçš„å¯†ç ,è€Œsudo suä½¿ç”¨ç”¨æˆ·å¯†ç  é«˜æƒé™çš„ç”¨æˆ·åˆ‡æ¢åˆ°ä½æƒé™çš„ç”¨æˆ·ä¸éœ€è¦å—ï¼Œå¯†ç ï¼Œå½“ç”¨æˆ·ç™»å½•åˆ°å¦ä¸€ä¸ªç”¨æˆ·ï¼Œlogoutä¼šå›é€€åˆ°ä¸Šä¸€ä¸ªç”¨æˆ·çš„ç•Œé¢ sudo sudoæ˜¯ä¸€ç§æƒé™ç®¡ç†æœºåˆ¶ï¼Œä¾èµ–äº&#x2F;etc&#x2F;sudoersï¼Œå…¶å®šä¹‰äº†æˆæƒç»™å“ªä¸ªç”¨æˆ·å¯ä»¥ä»¥ç®¡ç†å‘˜çš„èº«ä»½èƒ½å¤Ÿæ‰§è¡Œä»€ä¹ˆæ ·çš„ç®¡ç†å‘½ä»¤ï¼› æ ¼å¼ï¼šsudo -u USERNAME COMMAND é»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿåªæœ‰rootç”¨æˆ·å¯ä»¥æ‰§è¡Œsudoå‘½ä»¤ã€‚éœ€è¦rootç”¨æˆ·é€šè¿‡ä½¿ç”¨visudoå‘½ä»¤ç¼–è¾‘sudoçš„é…ç½®æ–‡ä»¶&#x2F;etc&#x2F;sudoersï¼Œæ‰å¯ä»¥æˆæƒå…¶ä»–æ™®é€šç”¨æˆ·æ‰§è¡Œsudoå‘½ä»¤ã€‚ sudoçš„è¿è¡Œæœ‰è¿™æ ·ä¸€ä¸ªæµç¨‹ï¼š 1).å½“ç”¨æˆ·è¿è¡Œsudoæ—¶ï¼Œç³»ç»Ÿäº&#x2F;etc&#x2F;sudoersæ–‡ä»¶é‡ŒæŸ¥æ‰¾è¯¥ç”¨æˆ·æ˜¯å¦æœ‰è¿è¡Œsudoçš„æƒé™ï¼› 2).è‹¥ç”¨æˆ·å…·æœ‰å¯è¿è¡Œsudoçš„æƒé™ã€‚é‚£ä¹ˆè®©ç”¨æˆ·è¾“å…¥ç”¨æˆ·è‡ªå·±çš„passwordï¼Œæ³¨æ„è¿™é‡Œè¾“å…¥çš„æ˜¯ç”¨æˆ·è‡ªå·±çš„passwordã€‚ 3).å‡è®¾passwordæ­£ç¡®ã€‚å˜é–‹å§‹è¿›è¡Œsudoåé¢çš„å‘½ä»¤ï¼Œrootè¿è¡Œsudoæ˜¯ä¸é¡»è¦è¾“å…¥passwordçš„ï¼Œåˆ‡æ¢åˆ°çš„èº«ä»½ä¸è¿è¡Œè€…èº«ä»½åŒæ ·çš„æ—¶å€™ã€‚ä¹Ÿä¸é¡»è¦è¾“å…¥passwordã€‚ su suä¸ºswitch userï¼Œå³åˆ‡æ¢ç”¨æˆ·çš„ç®€å†™ã€‚ suæ˜¯æœ€ç®€å•çš„èº«ä»½åˆ‡æ¢åï¼Œç”¨suæˆ‘ä»¬èƒ½å¤Ÿè¿›è¡Œä¸è®ºä»€ä¹ˆç”¨æˆ·çš„åˆ‡æ¢ï¼Œä¸€èˆ¬éƒ½æ˜¯su â€“ usernameï¼Œç„¶åè¾“å…¥passwordå°±okäº†ï¼Œå¯æ˜¯rootç”¨suåˆ‡æ¢åˆ°å…¶å®ƒèº«ä»½çš„æ—¶å€™æ˜¯ä¸é¡»è¦è¾“å…¥passwordçš„ã€‚ å¦‚æœä¸æŒ‡å®šUSERNAMEï¼ˆç”¨æˆ·åï¼‰ï¼Œé»˜è®¤å³ä¸ºrootï¼Œæ‰€ä»¥åˆ‡æ¢åˆ°rootçš„èº«ä»½çš„å‘½ä»¤å³ä¸ºï¼šsu -rootæˆ–su -ï¼Œsu root æˆ–suã€‚ su USERNAMEï¼Œä¸su â€“ USERNAMEçš„ä¸åŒä¹‹å¤„å¦‚ä¸‹ï¼š su â€“ USERNAMEåˆ‡æ¢ç”¨æˆ·åï¼ŒåŒæ—¶åˆ‡æ¢åˆ°æ–°ç”¨æˆ·çš„å·¥ä½œç¯å¢ƒä¸­ã€‚ su USERNAMEåˆ‡æ¢ç”¨æˆ·åï¼Œä¸æ”¹å˜åŸç”¨æˆ·çš„å·¥ä½œç›®å½•ï¼ŒåŠå…¶ä»–ç¯å¢ƒå˜é‡ç›®å½•ã€‚ å¦‚ä½•è®¾ç½®åˆå§‹suå¯†ç ï¼Ÿ å½“æˆ‘ä»¬è¾“å…¥suæ—¶ä¼šå‘ç°è¦è¾“å…¥å¯†ç ï¼Œæˆ‘ä»¬å°è¯•è¾“å…¥è‡ªå·±å½“å‰ç”¨æˆ·çš„å¯†ç ï¼Œå‘ç°failureã€‚ ä½†æˆ‘ä»¬åˆä¸çŸ¥é“suå¯†ç æ˜¯ä»€ä¹ˆï¼Ÿå…¶å®suåˆå§‹å¯†ç å¯ä»¥é€šè¿‡ä¸‹é¢æ–¹å¼è¿›è¡Œè®¾ç½®ï¼š 1sudo passwd å¤åˆ¶ è®¾ç½®å®Œåå†è¾“å…¥suå‘½ä»¤å¹¶é”®å…¥åˆšæ‰è®¾ç½®çš„å¯†ç å³å¯è¿›å…¥~ su â€“ su -ï¼Œsu -læˆ–su â€“login å‘½ä»¤æ”¹å˜èº«ä»½æ—¶ï¼Œä¹ŸåŒæ—¶å˜æ›´å·¥ä½œç›®å½•ï¼Œä»¥åŠHOMEï¼ŒSHELLï¼ŒUSERï¼ŒLOGNAMEã€‚æ­¤å¤–ï¼Œä¹Ÿä¼šå˜æ›´PATHå˜é‡ã€‚ç”¨su -å‘½ä»¤åˆ™é»˜è®¤è½¬æ¢æˆæˆrootç”¨æˆ·äº†ã€‚ è€Œä¸å¸¦å‚æ•°çš„â€œsuå‘½ä»¤â€ä¸ä¼šæ”¹å˜å½“å‰å·¥ä½œç›®å½•ä»¥åŠHOME,SHELL,USER,LOGNAMEã€‚åªæ˜¯æ‹¥æœ‰äº†rootçš„æƒé™è€Œå·²ã€‚","categories":[{"name":"Linux","slug":"Linux","permalink":"http://breadwinners.top/categories/Linux/"}],"tags":[{"name":"su","slug":"su","permalink":"http://breadwinners.top/tags/su/"},{"name":"sudo","slug":"sudo","permalink":"http://breadwinners.top/tags/sudo/"}]},{"title":"javaå®¹å™¨","slug":"javaå®¹å™¨","date":"2023-03-22T16:00:00.000Z","updated":"2023-07-11T02:03:46.298Z","comments":true,"path":"2023/03/23/javaå®¹å™¨/","link":"","permalink":"http://breadwinners.top/2023/03/23/java%E5%AE%B9%E5%99%A8/","excerpt":"","text":"Listæ¥å£å¸¸ç”¨æ–¹æ³•ï¼š1ã€add(Object element)ï¼š å‘åˆ—è¡¨çš„å°¾éƒ¨æ·»åŠ æŒ‡å®šçš„å…ƒç´ ã€‚ 2ã€size()ï¼š è¿”å›åˆ—è¡¨ä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚ 3ã€get(int index)ï¼š è¿”å›åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œindexä»0å¼€å§‹ã€‚ 4ã€add(int index, Object element)ï¼š åœ¨åˆ—è¡¨çš„æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šå…ƒç´ ã€‚ 5ã€set(int i, Object element)ï¼š å°†ç´¢å¼•iä½ç½®å…ƒç´ æ›¿æ¢ä¸ºå…ƒç´ elementå¹¶è¿”å›è¢«æ›¿æ¢çš„å…ƒç´ ã€‚ 6ã€clear()ï¼š ä»åˆ—è¡¨ä¸­ç§»é™¤æ‰€æœ‰å…ƒç´ ã€‚ 7ã€isEmpty()ï¼š åˆ¤æ–­åˆ—è¡¨æ˜¯å¦åŒ…å«å…ƒç´ ï¼Œä¸åŒ…å«å…ƒç´ åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å›falseã€‚ 8ã€contains(Object o)ï¼š å¦‚æœåˆ—è¡¨åŒ…å«æŒ‡å®šçš„å…ƒç´ ï¼Œåˆ™è¿”å› trueã€‚ 9ã€remove(int index)ï¼š ç§»é™¤åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œå¹¶è¿”å›è¢«åˆ å…ƒç´ ã€‚ 10ã€remove(Object o)ï¼š ç§»é™¤é›†åˆä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„æŒ‡å®šå…ƒç´ ï¼Œç§»é™¤æˆåŠŸè¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚ 11ã€iterator()ï¼š è¿”å›æŒ‰é€‚å½“é¡ºåºåœ¨åˆ—è¡¨çš„å…ƒç´ ä¸Šè¿›è¡Œè¿­ä»£çš„è¿­ä»£å™¨ã€‚ ArrayListä¸€æ ·å¯ä»¥ä½¿ç”¨Listçš„æ‰€æœ‰æ–¹æ³•ï¼Œæ‰€ä»¥ä»¥ArrayListæ¥æ¼”ç¤ºï¼š æ–¹æ³•ä½¿ç”¨ï¼š1ã€add(Object element) å‘åˆ—è¡¨çš„å°¾éƒ¨æ·»åŠ æŒ‡å®šçš„å…ƒç´ ã€‚2ã€size() è¿”å›åˆ—è¡¨ä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚3ã€get(int index) è¿”å›åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œindexä»0å¼€å§‹ã€‚ ä¾‹å¦‚ï¼š 123456789101112import java.util.ArrayList;public class Test &#123; public static void main(String[] args) &#123; ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(); //&lt;String&gt;æ³›å‹è¡¨ç¤ºé›†åˆä¸­å­˜çš„æ˜¯å­—ç¬¦ä¸²å½¢å¼çš„å…ƒç´ ã€‚ list.add(&quot;å¾å†°&quot;); //add()ç”¨äºå‘Listé›†åˆå®¹å™¨ä¸­æ·»åŠ å…ƒç´ ã€‚ list.add(&quot;è¤ç«&quot;); System.out.println(list); System.out.println(list.size()); //size()ç”¨äºè·å–é›†åˆä¸­æœ‰å¤šå°‘ä¸ªå…ƒç´ ã€‚ System.out.println(list.get(1)); //get()è·å–æŒ‡å®šç´¢å¼•ï¼ˆä»0å¼€å§‹ï¼‰ä½ç½®çš„å…ƒç´ ã€‚ &#125;&#125; è¾“å‡ºï¼š[å¾å†°, è¤ç«]2è¤ç« 4ã€add(int index, Object element) åœ¨åˆ—è¡¨çš„æŒ‡å®šä½ç½®ï¼ˆä»0å¼€å§‹ï¼‰æ’å…¥æŒ‡å®šå…ƒç´ ã€‚ä¾‹å¦‚ï¼š 123456789101112import java.util.ArrayList;public class Test &#123; public static void main(String[] args) &#123; ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(); list.add(&quot;å¾å†°&quot;); list.add(&quot;è¤ç«&quot;); System.out.println(list); list.add(1, &quot;é˜¿è‹¥&quot;); //åœ¨æŒ‡å®šä½ç½®æ·»åŠ å…ƒç´ ï¼ŒåŸæ¥ä½ç½®çš„å…ƒç´ åç½®ã€‚ System.out.println(list); &#125;&#125; è¾“å‡ºï¼š[å¾å†°, è¤ç«][å¾å†°, é˜¿è‹¥, è¤ç«] 5ã€set(int i, Object element) ä½¿ç”¨å…ƒç´ elementæ›¿æ¢ç´¢å¼•iä½ç½®çš„å…ƒç´ ï¼Œå¹¶è¿”å›è¢«æ›¿æ¢çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼š 123456789101112import java.util.ArrayList;public class Test &#123; public static void main(String[] args) &#123; ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(); list.add(&quot;å¾å†°&quot;); list.add(&quot;è¤ç«&quot;); System.out.println(list); list.set(1, &quot;é˜¿è‹¥&quot;); //æ›¿æ¢æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œä»0å¼€å§‹ï¼Œæ›¿æ¢äº†â€œè¤ç«â€ã€‚ System.out.println(list); &#125;&#125; è¾“å‡ºï¼š[å¾å†°, è¤ç«][å¾å†°, é˜¿è‹¥] 6ã€clear() ä»åˆ—è¡¨ä¸­ç§»é™¤æ‰€æœ‰å…ƒç´ ã€‚7ã€isEmpty() åˆ¤æ–­åˆ—è¡¨æ˜¯å¦åŒ…å«å…ƒç´ ï¼Œä¸åŒ…å«å…ƒç´ åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å›falseã€‚ä¾‹å¦‚ï¼š 12345678910111213import java.util.ArrayList;public class Test &#123; public static void main(String[] args) &#123; ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(); list.add(&quot;å¾å†°&quot;); list.add(&quot;è¤ç«&quot;); System.out.println(list); list.clear(); //æ¸…ç©ºListé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚ System.out.println(list.isEmpty()); //é›†åˆå®¹å™¨æ²¡æœ‰å…ƒç´ ï¼Œåˆ™trueã€‚ System.out.println(list); &#125;&#125; è¾“å‡ºï¼š[å¾å†°, è¤ç«]true[] 8ã€contains(Object o) å¦‚æœåˆ—è¡¨åŒ…å«æŒ‡å®šçš„å…ƒç´ ï¼Œåˆ™è¿”å› trueã€‚ä¾‹å¦‚ï¼š 1234567891011import java.util.ArrayList;public class Test &#123; public static void main(String[] args) &#123; ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(); list.add(&quot;å¾å†°&quot;); list.add(&quot;è¤ç«&quot;); boolean flag = list.contains(&quot;å¾å†°&quot;); //ç”¨æ¥åˆ¤æ–­é›†åˆå®¹å™¨ä¸­æ˜¯å¦å«æœ‰å‚æ•°å…ƒç´ ã€‚ System.out.println(flag); &#125;&#125; è¿™ä¸ªæ–¹æ³•éœ€è¦æ€è€ƒä¸€ä¸‹ï¼Œå› ä¸ºcontainsçš„å‚æ•°ç±»å‹æ˜¯Objectå‹ï¼Œçœ‹ä¸€ä¸‹æºä»£ç ï¼š 1234567891011121314151617public boolean contains(Object o) &#123; return indexOf(o) &gt;= 0;&#125;public int indexOf(Object o) &#123; //å› ä¸ºæˆ‘ä»¬è®¾ç½®çš„å®å‚æ˜¯Stringç±»å‹çš„å˜é‡ï¼Œæ‰€ä»¥æ­¤æ—¶oä¸ºä¸Šè½¬å‹å¯¹è±¡ã€‚ if (o == null) &#123; for (int i = 0; i &lt; size; i++) if (elementData[i]==null) return i; &#125; else &#123; for (int i = 0; i &lt; size; i++) if (o.equals(elementData[i])) //å› ä¸ºoä¸ºä¸Šè½¬å‹å¯¹è±¡ï¼Œæ‰€ä»¥equalsè¡¨é¢ä¸Šæ˜¯Objectç±»çš„ï¼Œä½†å®é™…ä¸Šæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯Stringç±»çš„equalsæ–¹æ³•ã€‚ return i; &#125; return -1;&#125; å³listä¸ºä¸Šè½¬å‹å¯¹è±¡ï¼Œä½¿ç”¨Stringç±»çš„equalsæ–¹æ³•æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå…ƒç´ çš„å†…å®¹æ˜¯å¦ç›¸åŒã€‚ 9ã€remove(int index) ç§»é™¤åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œå¹¶è¿”å›è¢«åˆ å…ƒç´ ï¼Œåˆ é™¤ä½ç½®åé¢çš„å…ƒç´ ï¼ˆå¦‚æœæœ‰ï¼‰å‘å‰ç§»åŠ¨ã€‚ä¾‹å¦‚ï¼š 123456789101112import java.util.ArrayList;public class Test &#123; public static void main(String[] args) &#123; ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(); list.add(&quot;å¾å†°&quot;); list.add(&quot;è¤ç«&quot;); list.add(&quot;é˜¿è‹¥&quot;); System.out.println(list.remove(1)); //åˆ é™¤æŒ‡å®šç´¢å¼•ï¼ˆä»0å¼€å§‹ï¼‰ä½ç½®çš„å…ƒç´ ï¼Œå¹¶å°†å…ƒç´ è¿”å›,å¹¶åé¢å…ƒç´ å‰ç§»ã€‚ System.out.println(list); &#125;&#125; è¾“å‡ºï¼šè¤ç«[å¾å†°, é˜¿è‹¥] 10ã€remove(Object o) ä»Listé›†åˆä¸­ç§»é™¤ç¬¬ä¸€æ¬¡å‡ºç°çš„æŒ‡å®šå…ƒç´ ï¼Œç§»é™¤æˆåŠŸè¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚å½“ä¸”ä»…å½“Listé›†åˆä¸­å«æœ‰æ»¡è¶³(o&#x3D;&#x3D;null ? get(i)&#x3D;&#x3D;null : o.equals(get(i)))æ¡ä»¶çš„æœ€ä½ç´¢å¼•içš„å…ƒç´ æ—¶æ‰ä¼šè¿”å›trueã€‚ä¾‹å¦‚ï¼š 123456789101112import java.util.ArrayList;public class Test &#123; public static void main(String[] args) &#123; ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(); list.add(&quot;å¾å†°&quot;); list.add(&quot;è¤ç«&quot;); list.add(&quot;é˜¿è‹¥&quot;); System.out.println(list.remove(&quot;è¤ç«&quot;)); //åˆ é™¤Listé›†åˆå…ƒç´ ï¼Œè¿”å›boolean,å¹¶åé¢å…ƒç´ å‰ç§»ã€‚ System.out.println(list); &#125;&#125; è¾“å‡ºï¼štrue[å¾å†°, é˜¿è‹¥] 11ã€iterator() è¿”å›æŒ‰é€‚å½“é¡ºåºåœ¨åˆ—è¡¨çš„å…ƒç´ ä¸Šè¿›è¡Œè¿­ä»£çš„è¿­ä»£å™¨ã€‚ä¾‹å¦‚è¿ç”¨iteratoræ–¹æ³•è¿›è¡ŒListéå†ï¼š 123456789101112131415import java.util.ArrayList;import java.util.Iterator;public class Test &#123; public static void main(String[] args) &#123; ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(); list.add(&quot;å¾å†°&quot;); list.add(&quot;è¤ç«&quot;); Iterator&lt;String&gt; ite = list.iterator(); //å°†Listé›†åˆä¸­å…ƒç´ è½¬åˆ°iteratorå˜é‡ä¸­ã€‚ while(ite.hasNext()) //hasNext()åˆ¤æ–­å½“å‰â€œæŒ‡é’ˆâ€ä¸‹é¢æ˜¯å¦è¿˜æœ‰å…ƒç´ çš„æ–¹æ³•ï¼Œjavaä¸­æ²¡æœ‰æŒ‡é’ˆï¼Œè¿™åªæ˜¯ä¸¾ä¸ªä¾‹å­ã€‚ &#123; System.out.println(ite.next()); //å¦‚æœâ€œæŒ‡é’ˆâ€ä¸‹é¢æœ‰å…ƒç´ ï¼Œåˆ™ç§»åŠ¨â€œæŒ‡é’ˆâ€å¹¶è·å–ç›¸åº”ä½ç½®çš„å…ƒç´ ã€‚ &#125; &#125;&#125; è¾“å‡ºï¼šå¾å†°è¤ç« 12ã€forå¾ªç¯éå†Listé›†åˆï¼šä¾‹å¦‚ï¼š 123456789101112import java.util.ArrayList;public class Test &#123; public static void main(String[] args) &#123; ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(); list.add(&quot;å¾å†°&quot;); list.add(&quot;è¤ç«&quot;); for (int i = 0; i &lt; list.size(); i++) &#123; //ç”¨sizeæ–¹æ³•è·å–é•¿åº¦ã€‚ System.out.println(list.get(i)); //ç”¨getæ–¹æ³•è·å–å€¼ã€‚ &#125; &#125;&#125; è¾“å‡ºï¼šå¾å†°è¤ç« 13ã€åŠ å¼ºforå¾ªç¯éå†Listé›†åˆï¼šä¾‹å¦‚ï¼š 123456789101112import java.util.ArrayList;public class Test &#123; public static void main(String[] args) &#123; ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(); list.add(&quot;å¾å†°&quot;); list.add(&quot;è¤ç«&quot;); for (String name : list) &#123; //ä½¿ç”¨foreachè¿›è¡Œéå†ã€‚ System.out.println(name); &#125; &#125;&#125; è¾“å‡ºï¼šå¾å†°è¤ç« æ’åº12345678910111213141516//æŒ‰ç…§Listä¸­å¯¹è±¡çš„idå±æ€§å‡åºlist.sort(Comparator.comparing(Stu::getId))//æŒ‰ç…§Listä¸­å¯¹è±¡çš„idå±æ€§é™åºlist.sort(Comparator.comparing(Stu::getId).reversed());//å¤šæ¡ä»¶å‡åºlist.sort(Comparator.comparing(Stu::getId).thenComparing(Stu::getSid));//idå‡åº,sidé™åºlist.sort(Comparator.comparing(Stu::getId).reversed().thenComparing(Stu::getSid));//keyå€¼é‡å¤çš„mapMultiValueMap&lt;Integer, String&gt; timeMap = new LinkedMultiValueMap&lt;&gt;();//é›†åˆå‡åºæ’åºCollections.sort(student, new Comparator()&#123;public int compare(StudentVo p1, StudentVo p2) &#123;return Integer.parseInt(p1.getStudentCode()) - Integer.parseInt(p2.getStudentCode());&#125;&#125;); Stack æ ˆç®€ä»‹ stack ç±»æ˜¯ Vector ç±»çš„ä¸€ä¸ªå­ç±»ï¼Œå®ƒå®ç°äº†æ ‡å‡†çš„åè¿›å…ˆå‡ºçš„æ ˆ å¸¸ç”¨æ–¹æ³• åºå· æ–¹æ³• ä½œç”¨ 1 boolean empty() åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º 2 Object peek() æŸ¥çœ‹æ ˆé¡¶éƒ¨çš„å¯¹è±¡ï¼Œä½†ä¸ä»å †æ ˆä¸­ç§»é™¤å®ƒ 3 Object pop() ç§»é™¤æ ˆé¡¶éƒ¨çš„å¯¹è±¡ï¼Œå¹¶ä½œä¸ºæ­¤å‡½æ•°çš„å€¼è¿”å›è¯¥å¯¹è±¡ã€‚ 4 Object push(Object obj) æŠŠå…ƒç´ å‹å…¥æ ˆé¡¶éƒ¨ 5 int search(Object obj) è¿”å›å¯¹è±¡åœ¨å †æ ˆä¸­çš„ä½ç½®ï¼Œä»æ ˆé¡¶å¾€ä¸‹å¼€å§‹æŸ¥æ‰¾ã€‚ ç”¨æ³•è®²è§£ åˆ›å»ºä¸€ä¸ªç©ºçš„å­—ç¬¦æ ˆ 12Stack&lt;Character&gt; stack = new Stack&lt;Character&gt;();System.out.println(&quot;stack: &quot; + stack); // stack: [] å°†å…ƒç´  R å‹å…¥æ ˆé¡¶éƒ¨ 123Stack&lt;Character&gt; stack = new Stack&lt;Character&gt;();stack.push(&#x27;R&#x27;);System.out.println(&quot;stack: &quot; + stack); // stack: [R] åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º 1234Stack&lt;Character&gt; stack = new Stack&lt;Character&gt;();System.out.println(stack.empty()); // truestack.push(&#x27;R&#x27;);System.out.println(stack.empty()); // false ç§»é™¤æ ˆé¡¶å…ƒç´ ï¼Œä½†ä¸ç§»é™¤ 12345Stack&lt;Character&gt; stack = new Stack&lt;Character&gt;(); stack.push(&#x27;R&#x27;);System.out.println(&quot;stack: &quot; + stack); // stack: [R]System.out.println(stack.peek()); // RSystem.out.println(&quot;stack: &quot; + stack); // stack: [R] ç§»é™¤æ ˆé¡¶å…ƒç´ ï¼›å¦‚æœæ ˆä¸ºç©ºä¼šå¼•èµ·EmptyStackException 12345678910Stack&lt;Character&gt; stack = new Stack&lt;Character&gt;(); stack.push(&#x27;R&#x27;);System.out.println(&quot;stack: &quot; + stack); // stack: [R]System.out.println(stack.pop()); // RSystem.out.println(&quot;stack: &quot; + stack); // stack: []try &#123; stack.pop(); &#125; catch (EmptyStackException e) &#123; System.out.println(&quot;empty stack&quot;); //empty stack &#125; æŸ¥è¯¢å…ƒç´ åœ¨æ ˆä¸­çš„ä½ç½®ï¼›å¤šä¸ªç›¸åŒå…ƒç´ è¿”å›ç¦»æ ˆé¡¶æœ€è¿‘çš„ï¼›æ²¡æœ‰åˆ™è¿”å›-1 1234567891011Stack&lt;Character&gt; stack = new Stack&lt;Character&gt;();stack.push(&#x27;E&#x27;);stack.push(&#x27;A&#x27;);stack.push(&#x27;W&#x27;);stack.push(&#x27;A&#x27;);stack.push(&#x27;Q&#x27;);stack.push(&#x27;R&#x27;);System.out.println(stack.search(&#x27;R&#x27;)); //1System.out.println(stack.search(&#x27;Q&#x27;)); //2System.out.println(stack.search(&#x27;A&#x27;)); //3System.out.println(stack.search(&#x27;D&#x27;)); // -1 QueueQueueæ˜¯javaä¸­å®ç°é˜Ÿåˆ—çš„æ¥å£ï¼Œå®ƒæ€»å…±åªæœ‰6ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬ä¸€èˆ¬åªç”¨å…¶ä¸­3ä¸ªå°±å¯ä»¥äº†ã€‚Queueçš„å®ç°ç±»æœ‰LinkedListå’ŒPriorityQueueã€‚æœ€å¸¸ç”¨çš„å®ç°ç±»æ˜¯LinkedListã€‚ Queueçš„6ä¸ªæ–¹æ³•åˆ†ç±»ï¼š å‹å…¥å…ƒç´ (æ·»åŠ )ï¼šadd()ã€offer()ç›¸åŒï¼šæœªè¶…å‡ºå®¹é‡ï¼Œä»é˜Ÿå°¾å‹å…¥å…ƒç´ ï¼Œè¿”å›å‹å…¥çš„é‚£ä¸ªå…ƒç´ ã€‚åŒºåˆ«ï¼šåœ¨è¶…å‡ºå®¹é‡æ—¶ï¼Œadd()æ–¹æ³•ä¼šå¯¹æŠ›å‡ºå¼‚å¸¸ï¼Œoffer()è¿”å›false å¼¹å‡ºå…ƒç´ (åˆ é™¤)ï¼šremove()ã€poll()ç›¸åŒï¼šå®¹é‡å¤§äº0çš„æ—¶å€™ï¼Œåˆ é™¤å¹¶è¿”å›é˜Ÿå¤´è¢«åˆ é™¤çš„é‚£ä¸ªå…ƒç´ ã€‚åŒºåˆ«ï¼šåœ¨å®¹é‡ä¸º0çš„æ—¶å€™ï¼Œremove()ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œpoll()è¿”å›false è·å–é˜Ÿå¤´å…ƒç´ (ä¸åˆ é™¤)ï¼šelement()ã€peek()ç›¸åŒï¼šå®¹é‡å¤§äº0çš„æ—¶å€™ï¼Œéƒ½è¿”å›é˜Ÿå¤´å…ƒç´ ã€‚ä½†æ˜¯ä¸åˆ é™¤ã€‚åŒºåˆ«ï¼šå®¹é‡ä¸º0çš„æ—¶å€™ï¼Œelement()ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œpeek()è¿”å›nullã€‚ é˜Ÿåˆ—é™¤äº†åŸºæœ¬çš„ Collection æ“ä½œå¤–ï¼Œè¿˜æä¾›ç‰¹æœ‰çš„æ’å…¥ã€æå–å’Œæ£€æŸ¥æ“ä½œ(å¦‚ä¸Š)ã€‚æ¯ä¸ªæ–¹æ³•éƒ½å­˜åœ¨ä¸¤ç§å½¢å¼ï¼šä¸€ç§æŠ›å‡ºå¼‚å¸¸ï¼ˆæ“ä½œå¤±è´¥æ—¶ï¼‰ï¼Œå¦ä¸€ç§è¿”å›ä¸€ä¸ªç‰¹æ®Šå€¼ï¼ˆnull æˆ– falseï¼Œå…·ä½“å–å†³äºæ“ä½œï¼‰ã€‚æ’å…¥æ“ä½œçš„åä¸€ç§å½¢å¼æ˜¯ç”¨äºä¸“é—¨ä¸ºæœ‰å®¹é‡é™åˆ¶çš„ Queue å®ç°è®¾è®¡çš„ï¼›åœ¨å¤§å¤šæ•°å®ç°ä¸­ï¼Œæ’å…¥æ“ä½œä¸ä¼šå¤±è´¥ã€‚ æŠ›å‡ºå¼‚å¸¸ è¿”å›ç‰¹æ®Šå€¼ æ’å…¥ add(e) offer(e) åˆ é™¤ remove() poll() æ£€æŸ¥ element() peek() Queue å®ç°é€šå¸¸ä¸å…è®¸æ’å…¥ null å…ƒç´ ï¼Œå°½ç®¡æŸäº›å®ç°ï¼ˆå¦‚ LinkedListï¼‰å¹¶ä¸ç¦æ­¢æ’å…¥ nullã€‚å³ä½¿åœ¨å…è®¸ null çš„å®ç°ä¸­ï¼Œä¹Ÿä¸åº”è¯¥å°† null æ’å…¥åˆ° Queue ä¸­ï¼Œå› ä¸º null ä¹Ÿç”¨ä½œ poll æ–¹æ³•çš„ä¸€ä¸ªç‰¹æ®Šè¿”å›å€¼ï¼Œè¡¨æ˜é˜Ÿåˆ—ä¸åŒ…å«å…ƒç´ ã€‚ Queue å®ç°é€šå¸¸æœªå®šä¹‰ equals å’Œ hashCode æ–¹æ³•çš„åŸºäºå…ƒç´ çš„ç‰ˆæœ¬ï¼Œè€Œæ˜¯ä» Object ç±»ç»§æ‰¿äº†åŸºäºèº«ä»½çš„ç‰ˆæœ¬ï¼Œå› ä¸ºå¯¹äºå…·æœ‰ç›¸åŒå…ƒç´ ä½†æœ‰ä¸åŒæ’åºå±æ€§çš„é˜Ÿåˆ—è€Œè¨€ï¼ŒåŸºäºå…ƒç´ çš„ç›¸ç­‰æ€§å¹¶éæ€»æ˜¯å®šä¹‰è‰¯å¥½çš„ã€‚ çœ‹ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š 123456789101112131415public class QueueTest &#123; public static void main(String[] args) &#123; Queue&lt;String&gt; queue = new LinkedList(); queue.offer(&quot;å…ƒç´ A&quot;); queue.offer(&quot;å…ƒç´ B&quot;); queue.offer(&quot;å…ƒç´ C&quot;); queue.offer(&quot;å…ƒç´ D&quot;); queue.offer(&quot;å…ƒç´ E&quot;); while (queue.size() &gt; 0) &#123; String element = queue.poll(); System.out.println(element); &#125; &#125;&#125; è¾“å‡ºç»“æœï¼š 1234567å…ƒç´ Aå…ƒç´ Bå…ƒç´ Cå…ƒç´ Då…ƒç´ EProcess finished with exit code 0 å¯ä»¥çœ‹åˆ°ï¼Œqueueæ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—ã€‚ éå†æ—¶å¯ä»¥ç”¨iteratoræŒ‡å®šæ³›å‹ï¼Œå°±ä¸éœ€è¦å¼ºè½¬ Mapä¸»è¦ä½¿ç”¨HashMapå’ŒTreemap getæ–¹æ³•ï¼šè·å–æŒ‡å®šé”®(key)æ‰€å¯¹åº”çš„å€¼(value)ï¼Œ æ–¹æ³•è¿”å›å€¼ä¸ºé”®æ‰€å¯¹åº”çš„å€¼ putæ–¹æ³•ï¼šå°†æŒ‡å®šçš„é”®ä¸å€¼å¯¹åº”èµ·æ¥ï¼Œå¹¶æ·»åŠ åˆ°é›†åˆä¸­ï¼Œè‹¥æŒ‡å®šçš„é”®(key)åœ¨é›†åˆä¸­ï¼Œè¦† removeæ–¹æ³•ï¼šæ ¹æ®æŒ‡å®šçš„é”®(key)åˆ é™¤å…ƒç´ ï¼Œè¿”å›è¢«åˆ é™¤å…ƒç´ çš„å€¼(value)ã€‚ 1234567891011121314151617181920212223public class MapDemo &#123; public static void main(String[] args) &#123; //åˆ›å»ºMapå¯¹è±¡ Map&lt;String, String&gt; map = new HashMap&lt;String,String&gt;(); //æ•°æ®é‡‡ç”¨çš„å“ˆå¸Œè¡¨ç»“æ„ //ç»™mapä¸­æ·»åŠ å…ƒç´  map.put(&quot;æ˜ŸæœŸä¸€&quot;, &quot;Monday&quot;); map.put(&quot;æ˜ŸæœŸæ—¥&quot;, &quot;Sunday&quot;); System.out.println(map); // &#123;æ˜ŸæœŸæ—¥=Sunday, æ˜ŸæœŸä¸€=Monday&#125; //å½“ç»™Mapä¸­æ·»åŠ å…ƒç´ ï¼Œä¼šè¿”å›keyå¯¹åº”çš„åŸæ¥çš„valueå€¼ï¼Œè‹¥keyæ²¡æœ‰å¯¹åº”çš„å€¼ï¼Œè¿”å›null System.out.println(map.put(&quot;æ˜ŸæœŸä¸€&quot;, &quot;Mon&quot;)); // Monday System.out.println(map); // &#123;æ˜ŸæœŸæ—¥=Sunday, æ˜ŸæœŸä¸€=Mon&#125; //æ ¹æ®æŒ‡å®šçš„keyè·å–å¯¹åº”çš„value String en = map.get(&quot;æ˜ŸæœŸæ—¥&quot;); System.out.println(en); // Sunday //æ ¹æ®keyåˆ é™¤å…ƒç´ ,ä¼šè¿”å›keyå¯¹åº”çš„valueå€¼ String value = map.remove(&quot;æ˜ŸæœŸæ—¥&quot;); System.out.println(value); // Sunday System.out.println(map); // &#123;æ˜ŸæœŸä¸€=Mon&#125; &#125;&#125; éå†Mapåˆ©ç”¨è¿­ä»£å™¨ 123456789101112131415161718192021public class MapDemo &#123; public static void main(String[] args) &#123; //åˆ›å»ºMapå¯¹è±¡ Map&lt;String, String&gt; map = new HashMap&lt;String,String&gt;(); //ç»™mapä¸­æ·»åŠ å…ƒç´  map.put(&quot;é‚“è¶…&quot;, &quot;å­™ä¿ª&quot;); map.put(&quot;ææ™¨&quot;, &quot;èŒƒå†°å†°&quot;); map.put(&quot;åˆ˜å¾·å&quot;, &quot;æŸ³å²©&quot;); //è·å–Mapä¸­çš„æ‰€æœ‰key Set&lt;String&gt; keySet = map.keySet(); //éå†å­˜æ”¾æ‰€æœ‰keyçš„Seté›†åˆ Iterator&lt;String&gt; it =keySet.iterator(); ** while(it.hasNext())&#123; //åˆ©ç”¨äº†Iteratorè¿­ä»£å™¨** //å¾—åˆ°æ¯ä¸€ä¸ªkey String key = it.next(); //é€šè¿‡keyè·å–å¯¹åº”çš„value String value = map.get(key); System.out.println(key+&quot;=&quot;+value); &#125; &#125;&#125; Mapé›†åˆéå†é”®å€¼å¯¹æ–¹å¼ é”®å€¼å¯¹æ–¹å¼ï¼šå³é€šè¿‡é›†åˆä¸­æ¯ä¸ªé”®å€¼å¯¹(Entry)å¯¹è±¡ï¼Œè·å–é”®å€¼å¯¹(Entry)å¯¹è±¡ä¸­çš„é”®ä¸å€¼ã€‚ æ“ä½œæ­¥éª¤ä¸å›¾è§£ï¼š 1.è·å–Mapé›†åˆä¸­ï¼Œæ‰€æœ‰çš„é”®å€¼å¯¹(Entry)å¯¹è±¡ï¼Œä»¥Seté›†åˆå½¢å¼è¿”å›ã€‚ 2.éå†åŒ…å«é”®å€¼å¯¹(Entry)å¯¹è±¡çš„Seté›†åˆï¼Œå¾—åˆ°æ¯ä¸€ä¸ªé”®å€¼å¯¹(Entry)å¯¹è±¡ 3.é€šè¿‡é”®å€¼å¯¹(Entry)å¯¹è±¡ï¼Œè·å–Entryå¯¹è±¡ä¸­çš„é”®ä¸å€¼ã€‚ 1234567891011121314151617181920212223public class MapDemo &#123; public static void main(String[] args) &#123; //åˆ›å»ºMapå¯¹è±¡ Map&lt;String, String&gt; map = new HashMap&lt;String,String&gt;(); //ç»™mapä¸­æ·»åŠ å…ƒç´  map.put(&quot;é‚“è¶…&quot;, &quot;å­™ä¿ª&quot;); map.put(&quot;ææ™¨&quot;, &quot;èŒƒå†°å†°&quot;); map.put(&quot;åˆ˜å¾·å&quot;, &quot;æŸ³å²©&quot;); //è·å–Mapä¸­çš„æ‰€æœ‰keyä¸valueçš„å¯¹åº”å…³ç³» Set&lt;Map.Entry&lt;String,String&gt;&gt; entrySet = map.entrySet(); //éå†Seté›†åˆ Iterator&lt;Map.Entry&lt;String,String&gt;&gt; it = entrySet.iterator(); while(it.hasNext())&#123; //å¾—åˆ°æ¯ä¸€å¯¹å¯¹åº”å…³ç³» Map.Entry&lt;String,String&gt; entry = it.next(); //é€šè¿‡æ¯ä¸€å¯¹å¯¹åº”å…³ç³»è·å–å¯¹åº”çš„key String key = entry.getKey(); //é€šè¿‡æ¯ä¸€å¯¹å¯¹åº”å…³ç³»è·å–å¯¹åº”çš„value String value = entry.getValue(); System.out.println(key+&quot;=&quot;+value); &#125; &#125;&#125; &#x3D;&#x3D;æ³¨æ„ï¼šMapé›†åˆä¸èƒ½ç›´æ¥ä½¿ç”¨è¿­ä»£å™¨æˆ–è€…foreachè¿›è¡Œéå†ã€‚ä½†æ˜¯è½¬æˆSetä¹‹åå°±å¯ä»¥ä½¿ç”¨äº†ã€‚&#x3D;&#x3D; setHashSetç‰¹æ€§ï¼šå…ƒç´ å”¯ä¸€ï¼Œæ— åºï¼Œå¯ä»¥å«æœ‰ç©ºå…ƒç´ ã€‚ ä¸‹é¢æˆ‘ä»¬çœ‹ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223import java.util.HashSet;import java.util.Iterator;import java.util.Set; public class first &#123; public static void main(String[] args) &#123; Set&lt;String&gt; str = new HashSet&lt;String&gt;(); str.add(&quot;first&quot;);//æ·»åŠ å…ƒç´  str.add(&quot;second&quot;); str.remove(&quot;first&quot;);//åˆ é™¤å…ƒç´  //éå†ï¼Œé€šè¿‡è¿­ä»£å™¨ Iterator&lt;String&gt; it = str.iterator(); while(it.hasNext()) &#123; System.out.println(it.next()); &#125; //é€šè¿‡foreach for(String s:str) &#123; System.out.println(s); &#125; &#125;&#125; è¿è¡Œç»“æœä¸ºï¼š LinkedHashSetè¿™ä¸ªç›¸å¯¹äºHashSetæ¥è¯´æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ä¸ä¸€æ ·æ˜¯LinkedHashSetæ˜¯æœ‰åºçš„ã€‚LinkedHashSetåœ¨è¿­ä»£è®¿é—®Setä¸­çš„å…¨éƒ¨å…ƒç´ æ—¶ï¼Œæ€§èƒ½æ¯”HashSetå¥½ï¼Œä½†æ˜¯æ’å…¥æ—¶æ€§èƒ½ç¨å¾®é€Šè‰²äºHashSetã€‚ è¯¦ç»†è§demo: 12345678910Set&lt;String&gt; set = new LinkedHashSet&lt;String&gt;();for(int i= 0;i&lt;6;i++)&#123; set.add(i+&quot;&quot;);&#125;set.add(&quot;3&quot;); //é‡å¤æ•°æ®ï¼Œä¸ä¼šå†™å…¥set.add(null); //å¯ä»¥å†™å…¥ç©ºæ•°æ®Iterator&lt;String&gt; iter = set.iterator();while(iter.hasNext())&#123; System.out.println(iter.next()); //è¾“å‡ºæ˜¯æœ‰åºçš„&#125; è¾“å‡ºæ‰“å°å¦‚ä¸‹ï¼š 1234567012345null TreeSet:ç‰¹ç‚¹ï¼šå…ƒç´ å”¯ä¸€ï¼Œæœ‰åºï¼Œä¸èƒ½å«æœ‰ç©ºå…ƒç´ ã€‚ ä¸‹é¢æˆ‘ä»¬é€šè¿‡ç¤ºä¾‹æ¥è¯´æ˜ï¼š 123456789101112131415161718192021222324252627import java.util.Iterator;import java.util.Set;import java.util.TreeSet; public class first &#123; public static void main(String[] args) &#123; Set&lt;String&gt; str = new TreeSet&lt;String&gt;(); str.add(&quot;first&quot;);//æ·»åŠ å…ƒç´  str.add(&quot;second&quot;); str.add(&quot;third&quot;); str.add(&quot;first&quot;);//é‡å¤å…ƒç´  //éå†ï¼Œé€šè¿‡è¿­ä»£å™¨ Iterator&lt;String&gt; it = str.iterator(); System.out.println(&quot;é€šè¿‡è¿­ä»£å™¨è¾“å‡º&quot;); while(it.hasNext()) &#123; System.out.println(it.next()); &#125; //é€šè¿‡foreach System.out.println(&quot;é€šè¿‡foreachè¾“å‡º&quot;); for(String s:str) &#123; System.out.println(s); &#125; &#125;&#125; è¿è¡Œç»“æœä¸ºï¼š","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"å®¹å™¨","slug":"å®¹å™¨","permalink":"http://breadwinners.top/tags/%E5%AE%B9%E5%99%A8/"}]},{"title":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡yuanze","date":"2023-03-19T16:00:00.000Z","updated":"2023-07-11T01:55:38.250Z","comments":true,"path":"2023/03/20/è®¾è®¡yuanze/","link":"","permalink":"http://breadwinners.top/2023/03/20/%E8%AE%BE%E8%AE%A1yuanze/","excerpt":"","text":"åŸåˆ™1.1 å¼€é—­åŸåˆ™å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚åœ¨ç¨‹åºéœ€è¦è¿›è¡Œæ‹“å±•çš„æ—¶å€™ï¼Œä¸èƒ½å»ä¿®æ”¹åŸæœ‰çš„ä»£ç ï¼Œå®ç°ä¸€ä¸ªçƒ­æ’æ‹”çš„æ•ˆæœã€‚ç®€è¨€ä¹‹ï¼Œæ˜¯ä¸ºäº†ä½¿ç¨‹åºçš„æ‰©å±•æ€§å¥½ï¼Œæ˜“äºç»´æŠ¤å’Œå‡çº§ã€‚ æƒ³è¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¥å£å’ŒæŠ½è±¡ç±»ã€‚ å› ä¸ºæŠ½è±¡çµæ´»æ€§å¥½ï¼Œé€‚åº”æ€§å¹¿ï¼Œåªè¦æŠ½è±¡çš„åˆç†ï¼Œå¯ä»¥åŸºæœ¬ä¿æŒè½¯ä»¶æ¶æ„çš„ç¨³å®šã€‚è€Œè½¯ä»¶ä¸­æ˜“å˜çš„ç»†èŠ‚å¯ä»¥ä»æŠ½è±¡æ´¾ç”Ÿæ¥çš„å®ç°ç±»æ¥è¿›è¡Œæ‰©å±•ï¼Œå½“è½¯ä»¶éœ€è¦å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåªéœ€è¦æ ¹æ®éœ€æ±‚é‡æ–°æ´¾ç”Ÿä¸€ä¸ªå®ç°ç±»æ¥æ‰©å±•å°±å¯ä»¥äº†ã€‚ ä¸‹é¢ä»¥ æœç‹—è¾“å…¥æ³• çš„çš®è‚¤ä¸ºä¾‹ä»‹ç»å¼€é—­åŸåˆ™çš„åº”ç”¨ã€‚ ã€ä¾‹ã€‘æœç‹—è¾“å…¥æ³• çš„çš®è‚¤è®¾è®¡ã€‚ åˆ†æï¼šæœç‹—è¾“å…¥æ³• çš„çš®è‚¤æ˜¯è¾“å…¥æ³•èƒŒæ™¯å›¾ç‰‡ã€çª—å£é¢œè‰²å’Œå£°éŸ³ç­‰å…ƒç´ çš„ç»„åˆã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œçˆ±æ›´æ¢è‡ªå·±çš„è¾“å…¥æ³•çš„çš®è‚¤ï¼Œä¹Ÿå¯ä»¥ä»ç½‘ä¸Šä¸‹è½½æ–°çš„çš®è‚¤ã€‚è¿™äº›çš®è‚¤æœ‰å…±åŒçš„ç‰¹ç‚¹ï¼Œå¯ä»¥ä¸ºå…¶å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»ï¼ˆAbstractSkinï¼‰ï¼Œè€Œæ¯ä¸ªå…·ä½“çš„çš®è‚¤ï¼ˆDefaultSpecificSkinå’ŒHeimaSpecificSkinï¼‰æ˜¯å…¶å­ç±»ã€‚ç”¨æˆ·çª—ä½“å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©æˆ–è€…å¢åŠ æ–°çš„ä¸»é¢˜ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åŸä»£ç ï¼Œæ‰€ä»¥å®ƒæ˜¯æ»¡è¶³å¼€é—­åŸåˆ™çš„ã€‚ 1.2 é‡Œæ°ä»£æ¢åŸåˆ™é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯é¢å‘å¯¹è±¡è®¾è®¡çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€ã€‚ é‡Œæ°ä»£æ¢åŸåˆ™ï¼šä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚é€šä¿—ç†è§£ï¼šå­ç±»å¯ä»¥æ‰©å±•çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½æ”¹å˜çˆ¶ç±»åŸæœ‰çš„åŠŸèƒ½ã€‚æ¢å¥è¯è¯´ï¼Œå­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶ï¼Œ&#x3D;&#x3D;é™¤æ·»åŠ æ–°çš„æ–¹æ³•å®Œæˆæ–°å¢åŠŸèƒ½å¤–ï¼Œå°½é‡ä¸è¦é‡å†™çˆ¶ç±»çš„æ–¹æ³•&#x3D;&#x3D;ã€‚ å¦‚æœé€šè¿‡é‡å†™çˆ¶ç±»çš„æ–¹æ³•æ¥å®Œæˆæ–°çš„åŠŸèƒ½ï¼Œè¿™æ ·å†™èµ·æ¥è™½ç„¶ç®€å•ï¼Œä½†æ˜¯æ•´ä¸ªç»§æ‰¿ä½“ç³»çš„å¯å¤ç”¨æ€§ä¼šæ¯”è¾ƒå·®ï¼Œç‰¹åˆ«æ˜¯è¿ç”¨å¤šæ€æ¯”è¾ƒé¢‘ç¹æ—¶ï¼Œç¨‹åºè¿è¡Œå‡ºé”™çš„æ¦‚ç‡ä¼šéå¸¸å¤§ã€‚ ä¸‹é¢çœ‹ä¸€ä¸ªé‡Œæ°æ›¿æ¢åŸåˆ™ä¸­ç»å…¸çš„ä¸€ä¸ªä¾‹å­ ã€ä¾‹ã€‘æ­£æ–¹å½¢ä¸æ˜¯é•¿æ–¹å½¢ã€‚ åœ¨æ•°å­¦é¢†åŸŸé‡Œï¼Œæ­£æ–¹å½¢æ¯«æ— ç–‘é—®æ˜¯é•¿æ–¹å½¢ï¼Œå®ƒæ˜¯ä¸€ä¸ªé•¿å®½ç›¸ç­‰çš„é•¿æ–¹å½¢ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¼€å‘çš„ä¸€ä¸ªä¸å‡ ä½•å›¾å½¢ç›¸å…³çš„è½¯ä»¶ç³»ç»Ÿï¼Œå°±å¯ä»¥é¡ºç†æˆç« çš„è®©æ­£æ–¹å½¢ç»§æ‰¿è‡ªé•¿æ–¹å½¢ã€‚ ä»£ç å¦‚ä¸‹ï¼š é•¿æ–¹å½¢ç±»ï¼ˆRectangleï¼‰ï¼š 1234567891011121314151617181920public class Rectangle &#123; private double length; private double width; public double getLength() &#123; return length; &#125; public void setLength(double length) &#123; this.length = length; &#125; public double getWidth() &#123; return width; &#125; public void setWidth(double width) &#123; this.width = width; &#125;&#125; æ­£æ–¹å½¢ï¼ˆSquareï¼‰ï¼š ç”±äºæ­£æ–¹å½¢çš„é•¿å’Œå®½ç›¸åŒï¼Œæ‰€ä»¥åœ¨æ–¹æ³•setLengthå’ŒsetWidthä¸­ï¼Œå¯¹é•¿åº¦å’Œå®½åº¦éƒ½éœ€è¦èµ‹ç›¸åŒå€¼ã€‚ 123456789101112public class Square extends Rectangle &#123; public void setWidth(double width) &#123; super.setLength(width); super.setWidth(width); &#125; public void setLength(double length) &#123; super.setLength(length); super.setWidth(length); &#125;&#125; ç±»RectangleDemoæ˜¯æˆ‘ä»¬çš„è½¯ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒæœ‰ä¸€ä¸ªresizeæ–¹æ³•ä¾èµ–åŸºç±»Rectangleï¼Œresizeæ–¹æ³•æ˜¯RectandleDemoç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨æ¥å®ç°å®½åº¦é€æ¸å¢é•¿çš„æ•ˆæœã€‚ 1234567891011121314151617181920212223242526272829public class RectangleDemo &#123; public static void resize(Rectangle rectangle) &#123; while (rectangle.getWidth() &lt;= rectangle.getLength()) &#123; rectangle.setWidth(rectangle.getWidth() + 1); &#125; &#125; //æ‰“å°é•¿æ–¹å½¢çš„é•¿å’Œå®½ public static void printLengthAndWidth(Rectangle rectangle) &#123; System.out.println(rectangle.getLength()); System.out.println(rectangle.getWidth()); &#125; public static void main(String[] args) &#123; Rectangle rectangle = new Rectangle(); rectangle.setLength(20); rectangle.setWidth(10); resize(rectangle); printLengthAndWidth(rectangle); System.out.println(&quot;============&quot;); Rectangle rectangle1 = new Square(); rectangle1.setLength(10); resize(rectangle1); printLengthAndWidth(rectangle1); &#125;&#125; æˆ‘ä»¬è¿è¡Œä¸€ä¸‹è¿™æ®µä»£ç å°±ä¼šå‘ç°ï¼Œå‡å¦‚æˆ‘ä»¬æŠŠä¸€ä¸ªæ™®é€šé•¿æ–¹å½¢ä½œä¸ºå‚æ•°ä¼ å…¥resizeæ–¹æ³•ï¼Œå°±ä¼šçœ‹åˆ°é•¿æ–¹å½¢å®½åº¦é€æ¸å¢é•¿çš„æ•ˆæœï¼Œå½“å®½åº¦å¤§äºé•¿åº¦,ä»£ç å°±ä¼šåœæ­¢ï¼Œè¿™ç§è¡Œä¸ºçš„ç»“æœç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸï¼›å‡å¦‚æˆ‘ä»¬å†æŠŠä¸€ä¸ªæ­£æ–¹å½¢ä½œä¸ºå‚æ•°ä¼ å…¥resizeæ–¹æ³•åï¼Œå°±ä¼šçœ‹åˆ°æ­£æ–¹å½¢çš„å®½åº¦å’Œé•¿åº¦éƒ½åœ¨ä¸æ–­å¢é•¿ï¼Œä»£ç ä¼šä¸€ç›´è¿è¡Œä¸‹å»ï¼Œç›´è‡³ç³»ç»Ÿäº§ç”Ÿæº¢å‡ºé”™è¯¯ã€‚æ‰€ä»¥ï¼Œæ™®é€šçš„é•¿æ–¹å½¢æ˜¯é€‚åˆè¿™æ®µä»£ç çš„ï¼Œæ­£æ–¹å½¢ä¸é€‚åˆã€‚æˆ‘ä»¬å¾—å‡ºç»“è®ºï¼šåœ¨resizeæ–¹æ³•ä¸­ï¼ŒRectangleç±»å‹çš„å‚æ•°æ˜¯ä¸èƒ½è¢«Squareç±»å‹çš„å‚æ•°æ‰€ä»£æ›¿ï¼Œå¦‚æœè¿›è¡Œäº†æ›¿æ¢å°±å¾—ä¸åˆ°é¢„æœŸç»“æœã€‚å› æ­¤ï¼ŒSquareç±»å’ŒRectangleç±»ä¹‹é—´çš„ç»§æ‰¿å…³ç³»è¿åäº†é‡Œæ°ä»£æ¢åŸåˆ™ï¼Œå®ƒä»¬ä¹‹é—´çš„ç»§æ‰¿å…³ç³»ä¸æˆç«‹ï¼Œæ­£æ–¹å½¢ä¸æ˜¯é•¿æ–¹å½¢ã€‚ å¦‚ä½•æ”¹è¿›å‘¢ï¼Ÿæ­¤æ—¶æˆ‘ä»¬éœ€è¦é‡æ–°è®¾è®¡ä»–ä»¬ä¹‹é—´çš„å…³ç³»ã€‚æŠ½è±¡å‡ºæ¥ä¸€ä¸ªå››è¾¹å½¢æ¥å£(Quadrilateral)ï¼Œè®©Rectangleç±»å’ŒSquareç±»å®ç°Quadrilateralæ¥å£ 1.3 ä¾èµ–å€’è½¬åŸåˆ™é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡ï¼›æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚ç®€å•çš„è¯´å°±æ˜¯è¦æ±‚å¯¹æŠ½è±¡è¿›è¡Œç¼–ç¨‹ï¼Œä¸è¦å¯¹å®ç°è¿›è¡Œç¼–ç¨‹ï¼Œè¿™æ ·å°±é™ä½äº†å®¢æˆ·ä¸å®ç°æ¨¡å—é—´çš„è€¦åˆã€‚ ä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­æ¥ç†è§£ä¾èµ–å€’è½¬åŸåˆ™ ã€ä¾‹ã€‘ç»„è£…ç”µè„‘ ç°è¦ç»„è£…ä¸€å°ç”µè„‘ï¼Œéœ€è¦é…ä»¶cpuï¼Œç¡¬ç›˜ï¼Œå†…å­˜æ¡ã€‚åªæœ‰è¿™äº›é…ç½®éƒ½æœ‰äº†ï¼Œè®¡ç®—æœºæ‰èƒ½æ­£å¸¸çš„è¿è¡Œã€‚é€‰æ‹©cpuæœ‰å¾ˆå¤šé€‰æ‹©ï¼Œå¦‚Intelï¼ŒAMDç­‰ï¼Œç¡¬ç›˜å¯ä»¥é€‰æ‹©å¸Œæ·ï¼Œè¥¿æ•°ç­‰ï¼Œå†…å­˜æ¡å¯ä»¥é€‰æ‹©é‡‘å£«é¡¿ï¼Œæµ·ç›—èˆ¹ç­‰ã€‚ ç±»å›¾å¦‚ä¸‹ï¼š æ ¹æ®ä¾èµ–å€’è½¬åŸåˆ™è¿›è¡Œæ”¹è¿›ï¼š ä»£ç æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹Computerç±»ï¼Œè®©Computerç±»ä¾èµ–æŠ½è±¡ï¼ˆå„ä¸ªé…ä»¶çš„æ¥å£ï¼‰ï¼Œè€Œä¸æ˜¯ä¾èµ–äºå„ä¸ªç»„ä»¶å…·ä½“çš„å®ç°ç±»ã€‚ ç±»å›¾å¦‚ä¸‹ï¼š 1.4 æ¥å£éš”ç¦»åŸåˆ™å®¢æˆ·ç«¯ä¸åº”è¯¥è¢«è¿«ä¾èµ–äºå®ƒä¸ä½¿ç”¨çš„æ–¹æ³•ï¼›ä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Šã€‚ ä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­æ¥ç†è§£æ¥å£éš”ç¦»åŸåˆ™ ã€ä¾‹ã€‘å®‰å…¨é—¨æ¡ˆä¾‹ æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªé»‘é©¬å“ç‰Œçš„å®‰å…¨é—¨ï¼Œè¯¥å®‰å…¨é—¨å…·æœ‰é˜²ç«ã€é˜²æ°´ã€é˜²ç›—çš„åŠŸèƒ½ã€‚å¯ä»¥å°†é˜²ç«ï¼Œé˜²æ°´ï¼Œé˜²ç›—åŠŸèƒ½æå–æˆä¸€ä¸ªæ¥å£ï¼Œå½¢æˆä¸€å¥—è§„èŒƒã€‚ç±»å›¾å¦‚ä¸‹ï¼š ä¸Šé¢çš„è®¾è®¡æˆ‘ä»¬å‘ç°äº†å®ƒå­˜åœ¨çš„é—®é¢˜ï¼Œé»‘é©¬å“ç‰Œçš„å®‰å…¨é—¨å…·æœ‰é˜²ç›—ï¼Œé˜²æ°´ï¼Œé˜²ç«çš„åŠŸèƒ½ã€‚ç°åœ¨å¦‚æœæˆ‘ä»¬è¿˜éœ€è¦å†åˆ›å»ºä¸€ä¸ªä¼ æ™ºå“ç‰Œçš„å®‰å…¨é—¨ï¼Œè€Œè¯¥å®‰å…¨é—¨åªå…·æœ‰é˜²ç›—ã€é˜²æ°´åŠŸèƒ½å‘¢ï¼Ÿå¾ˆæ˜¾ç„¶å¦‚æœå®ç°SafetyDooræ¥å£å°±è¿èƒŒäº†æ¥å£éš”ç¦»åŸåˆ™ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è¿›è¡Œä¿®æ”¹å‘¢ï¼Ÿçœ‹å¦‚ä¸‹ç±»å›¾ï¼š 1.5 è¿ªç±³ç‰¹æ³•åˆ™è¿ªç±³ç‰¹æ³•åˆ™åˆå«æœ€å°‘çŸ¥è¯†åŸåˆ™ã€‚ åªå’Œä½ çš„ç›´æ¥æœ‹å‹äº¤è°ˆï¼Œä¸è·Ÿâ€œé™Œç”Ÿäººâ€è¯´è¯ï¼ˆTalk only to your immediate friends and not to strangersï¼‰ã€‚ å…¶å«ä¹‰æ˜¯ï¼šå¦‚æœä¸¤ä¸ªè½¯ä»¶å®ä½“æ— é¡»ç›´æ¥é€šä¿¡ï¼Œé‚£ä¹ˆå°±ä¸åº”å½“å‘ç”Ÿç›´æ¥çš„ç›¸äº’è°ƒç”¨ï¼Œå¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹è½¬å‘è¯¥è°ƒç”¨ã€‚å…¶ç›®çš„æ˜¯é™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜æ¨¡å—çš„ç›¸å¯¹ç‹¬ç«‹æ€§ã€‚ è¿ªç±³ç‰¹æ³•åˆ™ä¸­çš„â€œæœ‹å‹â€æ˜¯æŒ‡ï¼šå½“å‰å¯¹è±¡æœ¬èº«ã€å½“å‰å¯¹è±¡çš„æˆå‘˜å¯¹è±¡ã€å½“å‰å¯¹è±¡æ‰€åˆ›å»ºçš„å¯¹è±¡ã€å½“å‰å¯¹è±¡çš„æ–¹æ³•å‚æ•°ç­‰ï¼Œè¿™äº›å¯¹è±¡åŒå½“å‰å¯¹è±¡å­˜åœ¨å…³è”ã€èšåˆæˆ–ç»„åˆå…³ç³»ï¼Œå¯ä»¥ç›´æ¥è®¿é—®è¿™äº›å¯¹è±¡çš„æ–¹æ³•ã€‚ ä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­æ¥ç†è§£è¿ªç±³ç‰¹æ³•åˆ™ ã€ä¾‹ã€‘æ˜æ˜Ÿä¸ç»çºªäººçš„å…³ç³»å®ä¾‹ æ˜æ˜Ÿç”±äºå…¨èº«å¿ƒæŠ•å…¥è‰ºæœ¯ï¼Œæ‰€ä»¥è®¸å¤šæ—¥å¸¸äº‹åŠ¡ç”±ç»çºªäººè´Ÿè´£å¤„ç†ï¼Œå¦‚å’Œç²‰ä¸çš„è§é¢ä¼šï¼Œå’Œåª’ä½“å…¬å¸çš„ä¸šåŠ¡æ´½æ·¡ç­‰ã€‚è¿™é‡Œçš„ç»çºªäººæ˜¯æ˜æ˜Ÿçš„æœ‹å‹ï¼Œè€Œç²‰ä¸å’Œåª’ä½“å…¬å¸æ˜¯é™Œç”Ÿäººï¼Œæ‰€ä»¥é€‚åˆä½¿ç”¨è¿ªç±³ç‰¹æ³•åˆ™ã€‚ ç±»å›¾å¦‚ä¸‹ï¼š 1.6 åˆæˆå¤ç”¨åŸåˆ™åˆæˆå¤ç”¨åŸåˆ™æ˜¯æŒ‡ï¼šå°½é‡å…ˆä½¿ç”¨ç»„åˆæˆ–è€…èšåˆç­‰å…³è”å…³ç³»æ¥å®ç°ï¼Œå…¶æ¬¡æ‰è€ƒè™‘ä½¿ç”¨ç»§æ‰¿å…³ç³»æ¥å®ç°ã€‚ é€šå¸¸ç±»çš„å¤ç”¨åˆ†ä¸ºç»§æ‰¿å¤ç”¨å’Œåˆæˆå¤ç”¨ä¸¤ç§ã€‚ ç»§æ‰¿å¤ç”¨è™½ç„¶æœ‰ç®€å•å’Œæ˜“å®ç°çš„ä¼˜ç‚¹ï¼Œä½†å®ƒä¹Ÿå­˜åœ¨ä»¥ä¸‹ç¼ºç‚¹ï¼š ç»§æ‰¿å¤ç”¨ç ´åäº†ç±»çš„å°è£…æ€§ã€‚å› ä¸ºç»§æ‰¿ä¼šå°†çˆ¶ç±»çš„å®ç°ç»†èŠ‚æš´éœ²ç»™å­ç±»ï¼Œçˆ¶ç±»å¯¹å­ç±»æ˜¯é€æ˜çš„ï¼Œæ‰€ä»¥è¿™ç§å¤ç”¨åˆç§°ä¸ºâ€œç™½ç®±â€å¤ç”¨ã€‚ å­ç±»ä¸çˆ¶ç±»çš„è€¦åˆåº¦é«˜ã€‚çˆ¶ç±»çš„å®ç°çš„ä»»ä½•æ”¹å˜éƒ½ä¼šå¯¼è‡´å­ç±»çš„å®ç°å‘ç”Ÿå˜åŒ–ï¼Œè¿™ä¸åˆ©äºç±»çš„æ‰©å±•ä¸ç»´æŠ¤ã€‚ å®ƒé™åˆ¶äº†å¤ç”¨çš„çµæ´»æ€§ã€‚ä»çˆ¶ç±»ç»§æ‰¿è€Œæ¥çš„å®ç°æ˜¯é™æ€çš„ï¼Œåœ¨ç¼–è¯‘æ—¶å·²ç»å®šä¹‰ï¼Œæ‰€ä»¥åœ¨è¿è¡Œæ—¶ä¸å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚ é‡‡ç”¨ç»„åˆæˆ–èšåˆå¤ç”¨æ—¶ï¼Œå¯ä»¥å°†å·²æœ‰å¯¹è±¡çº³å…¥æ–°å¯¹è±¡ä¸­ï¼Œä½¿ä¹‹æˆä¸ºæ–°å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œæ–°å¯¹è±¡å¯ä»¥è°ƒç”¨å·²æœ‰å¯¹è±¡çš„åŠŸèƒ½ï¼Œå®ƒæœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š å®ƒç»´æŒäº†ç±»çš„å°è£…æ€§ã€‚å› ä¸ºæˆåˆ†å¯¹è±¡çš„å†…éƒ¨ç»†èŠ‚æ˜¯æ–°å¯¹è±¡çœ‹ä¸è§çš„ï¼Œæ‰€ä»¥è¿™ç§å¤ç”¨åˆç§°ä¸ºâ€œé»‘ç®±â€å¤ç”¨ã€‚ å¯¹è±¡é—´çš„è€¦åˆåº¦ä½ã€‚å¯ä»¥åœ¨ç±»çš„æˆå‘˜ä½ç½®å£°æ˜æŠ½è±¡ã€‚ å¤ç”¨çš„çµæ´»æ€§é«˜ã€‚è¿™ç§å¤ç”¨å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€è¿›è¡Œï¼Œæ–°å¯¹è±¡å¯ä»¥åŠ¨æ€åœ°å¼•ç”¨ä¸æˆåˆ†å¯¹è±¡ç±»å‹ç›¸åŒçš„å¯¹è±¡ã€‚ ä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­æ¥ç†è§£åˆæˆå¤ç”¨åŸåˆ™ ã€ä¾‹ã€‘æ±½è½¦åˆ†ç±»ç®¡ç†ç¨‹åº æ±½è½¦æŒ‰â€œåŠ¨åŠ›æºâ€åˆ’åˆ†å¯åˆ†ä¸ºæ±½æ²¹æ±½è½¦ã€ç”µåŠ¨æ±½è½¦ç­‰ï¼›æŒ‰â€œé¢œè‰²â€åˆ’åˆ†å¯åˆ†ä¸ºç™½è‰²æ±½è½¦ã€é»‘è‰²æ±½è½¦å’Œçº¢è‰²æ±½è½¦ç­‰ã€‚å¦‚æœåŒæ—¶è€ƒè™‘è¿™ä¸¤ç§åˆ†ç±»ï¼Œå…¶ç»„åˆå°±å¾ˆå¤šã€‚ç±»å›¾å¦‚ä¸‹ï¼š ä»ä¸Šé¢ç±»å›¾æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä½¿ç”¨ç»§æ‰¿å¤ç”¨äº§ç”Ÿäº†å¾ˆå¤šå­ç±»ï¼Œå¦‚æœç°åœ¨åˆæœ‰æ–°çš„åŠ¨åŠ›æºæˆ–è€…æ–°çš„é¢œè‰²çš„è¯ï¼Œå°±éœ€è¦å†å®šä¹‰æ–°çš„ç±»ã€‚æˆ‘ä»¬è¯•ç€å°†ç»§æ‰¿å¤ç”¨æ”¹ä¸ºèšåˆå¤ç”¨çœ‹ä¸€ä¸‹ã€‚ 2.åˆ›å»ºè€…æ¨¡å¼åˆ›å»ºå‹æ¨¡å¼çš„ä¸»è¦å…³æ³¨ç‚¹æ˜¯â€œæ€æ ·åˆ›å»ºå¯¹è±¡ï¼Ÿâ€ï¼Œå®ƒçš„ä¸»è¦ç‰¹ç‚¹æ˜¯â€œå°†å¯¹è±¡çš„åˆ›å»ºä¸ä½¿ç”¨åˆ†ç¦»â€ã€‚ è¿™æ ·å¯ä»¥é™ä½ç³»ç»Ÿçš„è€¦åˆåº¦ï¼Œä½¿ç”¨è€…ä¸éœ€è¦å…³æ³¨å¯¹è±¡çš„åˆ›å»ºç»†èŠ‚ã€‚ åˆ›å»ºå‹æ¨¡å¼åˆ†ä¸ºï¼š å•ä¾‹æ¨¡å¼ å·¥å‚æ–¹æ³•æ¨¡å¼ æŠ½è±¡å·¥ç¨‹æ¨¡å¼ åŸå‹æ¨¡å¼ å»ºé€ è€…æ¨¡å¼ 2.1 å•ä¾‹è®¾è®¡æ¨¡å¼å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰æ˜¯ Java ä¸­æœ€ç®€å•çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚ è¿™ç§æ¨¡å¼æ¶‰åŠåˆ°ä¸€ä¸ªå•ä¸€çš„ç±»ï¼Œè¯¥ç±»è´Ÿè´£åˆ›å»ºè‡ªå·±çš„å¯¹è±¡ï¼ŒåŒæ—¶ç¡®ä¿åªæœ‰å•ä¸ªå¯¹è±¡è¢«åˆ›å»ºã€‚è¿™ä¸ªç±»æä¾›äº†ä¸€ç§è®¿é—®å…¶å”¯ä¸€çš„å¯¹è±¡çš„æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ï¼Œä¸éœ€è¦å®ä¾‹åŒ–è¯¥ç±»çš„å¯¹è±¡ã€‚ 2.1.1 å•ä¾‹æ¨¡å¼çš„ç»“æ„å•ä¾‹æ¨¡å¼çš„ä¸»è¦æœ‰ä»¥ä¸‹è§’è‰²ï¼š å•ä¾‹ç±»ã€‚åªèƒ½åˆ›å»ºä¸€ä¸ªå®ä¾‹çš„ç±» è®¿é—®ç±»ã€‚ä½¿ç”¨å•ä¾‹ç±» 2.1.2 å•ä¾‹æ¨¡å¼çš„å®ç° å•ä¾‹è®¾è®¡æ¨¡å¼åˆ†ç±»ä¸¤ç§ï¼š â€‹ é¥¿æ±‰å¼ï¼šç±»åŠ è½½å°±ä¼šå¯¼è‡´è¯¥å•å®ä¾‹å¯¹è±¡è¢«åˆ›å»º â€‹ æ‡’æ±‰å¼ï¼šç±»åŠ è½½ä¸ä¼šå¯¼è‡´è¯¥å•å®ä¾‹å¯¹è±¡è¢«åˆ›å»ºï¼Œè€Œæ˜¯é¦–æ¬¡ä½¿ç”¨è¯¥å¯¹è±¡æ—¶æ‰ä¼šåˆ›å»º é¥¿æ±‰å¼-æ–¹å¼1ï¼ˆé™æ€å˜é‡æ–¹å¼ï¼‰ 12345678910111213141516/** * é¥¿æ±‰å¼ * é™æ€å˜é‡åˆ›å»ºç±»çš„å¯¹è±¡ */public class Singleton &#123; //ç§æœ‰æ„é€ æ–¹æ³• private Singleton() &#123;&#125; //åœ¨æˆå‘˜ä½ç½®åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡ private static Singleton instance = new Singleton(); //å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡ public static Singleton getInstance() &#123; return instance; &#125;&#125; è¯´æ˜ï¼š â€‹ è¯¥æ–¹å¼åœ¨æˆå‘˜ä½ç½®å£°æ˜Singletonç±»å‹çš„é™æ€å˜é‡ï¼Œå¹¶åˆ›å»ºSingletonç±»çš„å¯¹è±¡instanceã€‚instanceå¯¹è±¡æ˜¯éšç€ç±»çš„åŠ è½½è€Œåˆ›å»ºçš„ã€‚å¦‚æœè¯¥å¯¹è±¡è¶³å¤Ÿå¤§çš„è¯ï¼Œè€Œä¸€ç›´æ²¡æœ‰ä½¿ç”¨å°±ä¼šé€ æˆå†…å­˜çš„æµªè´¹ã€‚ é¥¿æ±‰å¼-æ–¹å¼2ï¼ˆé™æ€ä»£ç å—æ–¹å¼ï¼‰ 12345678910111213141516171819202122/** * æ¶æ±‰å¼ * åœ¨é™æ€ä»£ç å—ä¸­åˆ›å»ºè¯¥ç±»å¯¹è±¡ */public class Singleton &#123; //ç§æœ‰æ„é€ æ–¹æ³• private Singleton() &#123;&#125; //åœ¨æˆå‘˜ä½ç½®åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡ private static Singleton instance; // åœ¨é™æ€ä»£ç å—ä¸­è¿›è¡Œèµ‹å€¼ static &#123; instance = new Singleton(); &#125; //å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡ public static Singleton getInstance() &#123; return instance; &#125;&#125; è¯´æ˜ï¼š â€‹ è¯¥æ–¹å¼åœ¨æˆå‘˜ä½ç½®å£°æ˜Singletonç±»å‹çš„é™æ€å˜é‡ï¼Œè€Œå¯¹è±¡çš„åˆ›å»ºæ˜¯åœ¨é™æ€ä»£ç å—ä¸­ï¼Œä¹Ÿæ˜¯å¯¹ç€ç±»çš„åŠ è½½è€Œåˆ›å»ºã€‚æ‰€ä»¥å’Œé¥¿æ±‰å¼çš„æ–¹å¼1åŸºæœ¬ä¸Šä¸€æ ·ï¼Œå½“ç„¶è¯¥æ–¹å¼ä¹Ÿå­˜åœ¨å†…å­˜æµªè´¹é—®é¢˜ã€‚ æ‡’æ±‰å¼-æ–¹å¼1ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰ 1234567891011121314151617181920/** * æ‡’æ±‰å¼ * çº¿ç¨‹ä¸å®‰å…¨ */public class Singleton &#123; //ç§æœ‰æ„é€ æ–¹æ³• private Singleton() &#123;&#125; //åœ¨æˆå‘˜ä½ç½®åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡ private static Singleton instance; //å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡ public static Singleton getInstance() &#123; if(instance == null) &#123; instance = new Singleton(); &#125; return instance; &#125;&#125; è¯´æ˜ï¼š â€‹ ä»ä¸Šé¢ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹å‡ºè¯¥æ–¹å¼åœ¨æˆå‘˜ä½ç½®å£°æ˜Singletonç±»å‹çš„é™æ€å˜é‡ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œå¯¹è±¡çš„èµ‹å€¼æ“ä½œï¼Œé‚£ä¹ˆä»€ä¹ˆæ—¶å€™èµ‹å€¼çš„å‘¢ï¼Ÿå½“è°ƒç”¨getInstance()æ–¹æ³•è·å–Singletonç±»çš„å¯¹è±¡çš„æ—¶å€™æ‰åˆ›å»ºSingletonç±»çš„å¯¹è±¡ï¼Œè¿™æ ·å°±å®ç°äº†æ‡’åŠ è½½çš„æ•ˆæœã€‚ä½†æ˜¯ï¼Œå¦‚æœæ˜¯å¤šçº¿ç¨‹ç¯å¢ƒï¼Œä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ æ‡’æ±‰å¼-æ–¹å¼2ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰ 1234567891011121314151617181920/** * æ‡’æ±‰å¼ * çº¿ç¨‹å®‰å…¨ */public class Singleton &#123; //ç§æœ‰æ„é€ æ–¹æ³• private Singleton() &#123;&#125; //åœ¨æˆå‘˜ä½ç½®åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡ private static Singleton instance; //å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡ public static synchronized Singleton getInstance() &#123; if(instance == null) &#123; instance = new Singleton(); &#125; return instance; &#125;&#125; è¯´æ˜ï¼š â€‹ è¯¥æ–¹å¼ä¹Ÿå®ç°äº†æ‡’åŠ è½½æ•ˆæœï¼ŒåŒæ—¶åˆè§£å†³äº†çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ä½†æ˜¯åœ¨getInstance()æ–¹æ³•ä¸Šæ·»åŠ äº†synchronizedå…³é”®å­—ï¼Œå¯¼è‡´è¯¥æ–¹æ³•çš„æ‰§è¡Œæ•ˆæœç‰¹åˆ«ä½ã€‚ä»ä¸Šé¢ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå…¶å®å°±æ˜¯åœ¨åˆå§‹åŒ–instanceçš„æ—¶å€™æ‰ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä¸€æ—¦åˆå§‹åŒ–å®Œæˆå°±ä¸å­˜åœ¨äº†ã€‚ æ‡’æ±‰å¼-æ–¹å¼3ï¼ˆåŒé‡æ£€æŸ¥é”ï¼‰ å†æ¥è®¨è®ºä¸€ä¸‹æ‡’æ±‰æ¨¡å¼ä¸­åŠ é”çš„é—®é¢˜ï¼Œå¯¹äº getInstance() æ–¹æ³•æ¥è¯´ï¼Œç»å¤§éƒ¨åˆ†çš„æ“ä½œéƒ½æ˜¯è¯»æ“ä½œï¼Œè¯»æ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ²¡å¿…è®©æ¯ä¸ªçº¿ç¨‹å¿…é¡»æŒæœ‰é”æ‰èƒ½è°ƒç”¨è¯¥æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦è°ƒæ•´åŠ é”çš„æ—¶æœºã€‚ç”±æ­¤ä¹Ÿäº§ç”Ÿäº†ä¸€ç§æ–°çš„å®ç°æ¨¡å¼ï¼šåŒé‡æ£€æŸ¥é”æ¨¡å¼ 123456789101112131415161718192021222324/** * åŒé‡æ£€æŸ¥æ–¹å¼ */public class Singleton &#123; //ç§æœ‰æ„é€ æ–¹æ³• private Singleton() &#123;&#125; private static Singleton instance; //å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡ public static Singleton getInstance() &#123; //ç¬¬ä¸€æ¬¡åˆ¤æ–­ï¼Œå¦‚æœinstanceä¸ä¸ºnullï¼Œä¸è¿›å…¥æŠ¢é”é˜¶æ®µï¼Œç›´æ¥è¿”å›å®ä¾‹ if(instance == null) &#123; synchronized (Singleton.class) &#123; //æŠ¢åˆ°é”ä¹‹åå†æ¬¡åˆ¤æ–­æ˜¯å¦ä¸ºnull if(instance == null) &#123; instance = new Singleton(); &#125; &#125; &#125; return instance; &#125;&#125; åŒé‡æ£€æŸ¥é”æ¨¡å¼æ˜¯ä¸€ç§éå¸¸å¥½çš„å•ä¾‹å®ç°æ¨¡å¼ï¼Œè§£å†³äº†å•ä¾‹ã€æ€§èƒ½ã€çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä¸Šé¢çš„åŒé‡æ£€æµ‹é”æ¨¡å¼çœ‹ä¸Šå»å®Œç¾æ— ç¼ºï¼Œå…¶å®æ˜¯å­˜åœ¨é—®é¢˜ï¼Œåœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå‡ºç°ç©ºæŒ‡é’ˆé—®é¢˜ï¼Œå‡ºç°é—®é¢˜çš„åŸå› æ˜¯JVMåœ¨å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™ä¼šè¿›è¡Œä¼˜åŒ–å’ŒæŒ‡ä»¤é‡æ’åºæ“ä½œã€‚ è¦è§£å†³åŒé‡æ£€æŸ¥é”æ¨¡å¼å¸¦æ¥ç©ºæŒ‡é’ˆå¼‚å¸¸çš„é—®é¢˜ï¼Œåªéœ€è¦ä½¿ç”¨ volatile å…³é”®å­—, volatile å…³é”®å­—å¯ä»¥ä¿è¯å¯è§æ€§å’Œæœ‰åºæ€§ã€‚ 123456789101112131415161718192021222324/** * åŒé‡æ£€æŸ¥æ–¹å¼ */public class Singleton &#123; //ç§æœ‰æ„é€ æ–¹æ³• private Singleton() &#123;&#125; private static volatile Singleton instance; //å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡ public static Singleton getInstance() &#123; //ç¬¬ä¸€æ¬¡åˆ¤æ–­ï¼Œå¦‚æœinstanceä¸ä¸ºnullï¼Œä¸è¿›å…¥æŠ¢é”é˜¶æ®µï¼Œç›´æ¥è¿”å›å®é™… if(instance == null) &#123; synchronized (Singleton.class) &#123; //æŠ¢åˆ°é”ä¹‹åå†æ¬¡åˆ¤æ–­æ˜¯å¦ä¸ºç©º if(instance == null) &#123; instance = new Singleton(); &#125; &#125; &#125; return instance; &#125;&#125; å°ç»“ï¼š æ·»åŠ  volatile å…³é”®å­—ä¹‹åçš„åŒé‡æ£€æŸ¥é”æ¨¡å¼æ˜¯ä¸€ç§æ¯”è¾ƒå¥½çš„å•ä¾‹å®ç°æ¨¡å¼ï¼Œèƒ½å¤Ÿä¿è¯åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹çº¿ç¨‹å®‰å…¨ä¹Ÿä¸ä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚ æ‡’æ±‰å¼-æ–¹å¼4ï¼ˆé™æ€å†…éƒ¨ç±»æ–¹å¼ï¼‰ é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼ä¸­å®ä¾‹ç”±å†…éƒ¨ç±»åˆ›å»ºï¼Œç”±äº JVM åœ¨åŠ è½½å¤–éƒ¨ç±»çš„è¿‡ç¨‹ä¸­, æ˜¯ä¸ä¼šåŠ è½½é™æ€å†…éƒ¨ç±»çš„, åªæœ‰å†…éƒ¨ç±»çš„å±æ€§&#x2F;æ–¹æ³•è¢«è°ƒç”¨æ—¶æ‰ä¼šè¢«åŠ è½½, å¹¶åˆå§‹åŒ–å…¶é™æ€å±æ€§ã€‚é™æ€å±æ€§ç”±äºè¢« static ä¿®é¥°ï¼Œä¿è¯åªè¢«å®ä¾‹åŒ–ä¸€æ¬¡ï¼Œå¹¶ä¸”ä¸¥æ ¼ä¿è¯å®ä¾‹åŒ–é¡ºåºã€‚ 1234567891011121314151617/** * é™æ€å†…éƒ¨ç±»æ–¹å¼ */public class Singleton &#123; //ç§æœ‰æ„é€ æ–¹æ³• private Singleton() &#123;&#125; private static class SingletonHolder &#123; private static final Singleton INSTANCE = new Singleton(); &#125; //å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡ public static Singleton getInstance() &#123; return SingletonHolder.INSTANCE; &#125;&#125; è¯´æ˜ï¼š â€‹ ç¬¬ä¸€æ¬¡åŠ è½½Singletonç±»æ—¶ä¸ä¼šå»åˆå§‹åŒ–INSTANCEï¼Œåªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨getInstanceï¼Œè™šæ‹ŸæœºåŠ è½½SingletonHolder å¹¶åˆå§‹åŒ–INSTANCEï¼Œè¿™æ ·ä¸ä»…èƒ½ç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œä¹Ÿèƒ½ä¿è¯ Singleton ç±»çš„å”¯ä¸€æ€§ã€‚ å°ç»“ï¼š â€‹ é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§ä¼˜ç§€çš„å•ä¾‹æ¨¡å¼ï¼Œæ˜¯å¼€æºé¡¹ç›®ä¸­æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ç§å•ä¾‹æ¨¡å¼ã€‚åœ¨æ²¡æœ‰åŠ ä»»ä½•é”çš„æƒ…å†µä¸‹ï¼Œä¿è¯äº†å¤šçº¿ç¨‹ä¸‹çš„å®‰å…¨ï¼Œå¹¶ä¸”æ²¡æœ‰ä»»ä½•æ€§èƒ½å½±å“å’Œç©ºé—´çš„æµªè´¹ã€‚ æšä¸¾æ–¹å¼ æšä¸¾ç±»å®ç°å•ä¾‹æ¨¡å¼æ˜¯æåŠ›æ¨èçš„å•ä¾‹å®ç°æ¨¡å¼ï¼Œå› ä¸ºæšä¸¾ç±»å‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¹¶ä¸”åªä¼šè£…è½½ä¸€æ¬¡ï¼Œè®¾è®¡è€…å……åˆ†çš„åˆ©ç”¨äº†æšä¸¾çš„è¿™ä¸ªç‰¹æ€§æ¥å®ç°å•ä¾‹æ¨¡å¼ï¼Œæšä¸¾çš„å†™æ³•éå¸¸ç®€å•ï¼Œè€Œä¸”æšä¸¾ç±»å‹æ˜¯æ‰€ç”¨å•ä¾‹å®ç°ä¸­å”¯ä¸€ä¸€ç§ä¸ä¼šè¢«ç ´åçš„å•ä¾‹å®ç°æ¨¡å¼ã€‚ 123456/** * æšä¸¾æ–¹å¼ */public enum Singleton &#123; INSTANCE;&#125; è¯´æ˜ï¼š â€‹ æšä¸¾æ–¹å¼å±äºæ¶æ±‰å¼æ–¹å¼ã€‚ 2.2 å·¥å‚æ¨¡å¼2.2.1 æ¦‚è¿°éœ€æ±‚ï¼šè®¾è®¡ä¸€ä¸ªå’–å•¡åº—ç‚¹é¤ç³»ç»Ÿã€‚ è®¾è®¡ä¸€ä¸ªå’–å•¡ç±»ï¼ˆCoffeeï¼‰ï¼Œå¹¶å®šä¹‰å…¶ä¸¤ä¸ªå­ç±»ï¼ˆç¾å¼å’–å•¡ã€AmericanCoffeeã€‘å’Œæ‹¿é“å’–å•¡ã€LatteCoffeeã€‘ï¼‰ï¼›å†è®¾è®¡ä¸€ä¸ªå’–å•¡åº—ç±»ï¼ˆCoffeeStoreï¼‰ï¼Œå’–å•¡åº—å…·æœ‰ç‚¹å’–å•¡çš„åŠŸèƒ½ã€‚ å…·ä½“ç±»çš„è®¾è®¡å¦‚ä¸‹ï¼š åœ¨javaä¸­ï¼Œä¸‡ç‰©çš†å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡éƒ½éœ€è¦åˆ›å»ºï¼Œå¦‚æœåˆ›å»ºçš„æ—¶å€™ç›´æ¥newè¯¥å¯¹è±¡ï¼Œå°±ä¼šå¯¹è¯¥å¯¹è±¡è€¦åˆä¸¥é‡ï¼Œå‡å¦‚æˆ‘ä»¬è¦æ›´æ¢å¯¹è±¡ï¼Œæ‰€æœ‰newå¯¹è±¡çš„åœ°æ–¹éƒ½éœ€è¦ä¿®æ”¹ä¸€éï¼Œè¿™æ˜¾ç„¶è¿èƒŒäº†è½¯ä»¶è®¾è®¡çš„å¼€é—­åŸåˆ™ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨å·¥å‚æ¥ç”Ÿäº§å¯¹è±¡ï¼Œæˆ‘ä»¬å°±åªå’Œå·¥å‚æ‰“äº¤é“å°±å¯ä»¥äº†ï¼Œå½»åº•å’Œå¯¹è±¡è§£è€¦ï¼Œå¦‚æœè¦æ›´æ¢å¯¹è±¡ï¼Œç›´æ¥åœ¨å·¥å‚é‡Œæ›´æ¢è¯¥å¯¹è±¡å³å¯ï¼Œè¾¾åˆ°äº†ä¸å¯¹è±¡è§£è€¦çš„ç›®çš„ï¼›æ‰€ä»¥è¯´ï¼Œå·¥å‚æ¨¡å¼æœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯ï¼šè§£è€¦ã€‚ åœ¨æœ¬æ•™ç¨‹ä¸­ä¼šä»‹ç»ä¸‰ç§å·¥å‚çš„ä½¿ç”¨ ç®€å•å·¥å‚æ¨¡å¼ï¼ˆä¸å±äºGOFçš„23ç§ç»å…¸è®¾è®¡æ¨¡å¼ï¼‰ å·¥å‚æ–¹æ³•æ¨¡å¼ æŠ½è±¡å·¥å‚æ¨¡å¼ 2.2.2 ç®€å•å·¥å‚æ¨¡å¼ç®€å•å·¥å‚ä¸æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œåè€Œæ¯”è¾ƒåƒæ˜¯ä¸€ç§ç¼–ç¨‹ä¹ æƒ¯ã€‚ 2.2.2.1 ç»“æ„ç®€å•å·¥å‚åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š æŠ½è±¡äº§å“ ï¼šå®šä¹‰äº†äº§å“çš„è§„èŒƒï¼Œæè¿°äº†äº§å“çš„ä¸»è¦ç‰¹æ€§å’ŒåŠŸèƒ½ã€‚ å…·ä½“äº§å“ ï¼šå®ç°æˆ–è€…ç»§æ‰¿æŠ½è±¡äº§å“çš„å­ç±» å…·ä½“å·¥å‚ ï¼šæä¾›äº†åˆ›å»ºäº§å“çš„æ–¹æ³•ï¼Œè°ƒç”¨è€…é€šè¿‡è¯¥æ–¹æ³•æ¥è·å–äº§å“ã€‚ 2.2.2.2 å®ç°ç°åœ¨ä½¿ç”¨ç®€å•å·¥å‚å¯¹ä¸Šé¢æ¡ˆä¾‹è¿›è¡Œæ”¹è¿›ï¼Œç±»å›¾å¦‚ä¸‹ï¼š å·¥å‚ç±»ä»£ç å¦‚ä¸‹ï¼š 123456789101112public class SimpleCoffeeFactory &#123; public Coffee createCoffee(String type) &#123; Coffee coffee = null; if(&quot;americano&quot;.equals(type)) &#123; coffee = new AmericanoCoffee(); &#125; else if(&quot;latte&quot;.equals(type)) &#123; coffee = new LatteCoffee(); &#125; return coffee; &#125;&#125; å·¥å‚ï¼ˆfactoryï¼‰å¤„ç†åˆ›å»ºå¯¹è±¡çš„ç»†èŠ‚ï¼Œä¸€æ—¦æœ‰äº†SimpleCoffeeFactoryï¼ŒCoffeeStoreç±»ä¸­çš„orderCoffee()å°±å˜æˆæ­¤å¯¹è±¡çš„å®¢æˆ·ï¼ŒåæœŸå¦‚æœéœ€è¦Coffeeå¯¹è±¡ç›´æ¥ä»å·¥å‚ä¸­è·å–å³å¯ã€‚è¿™æ ·ä¹Ÿå°±è§£é™¤äº†å’ŒCoffeeå®ç°ç±»çš„è€¦åˆï¼ŒåŒæ—¶åˆäº§ç”Ÿäº†æ–°çš„è€¦åˆï¼ŒCoffeeStoreå¯¹è±¡å’ŒSimpleCoffeeFactoryå·¥å‚å¯¹è±¡çš„è€¦åˆï¼Œå·¥å‚å¯¹è±¡å’Œå•†å“å¯¹è±¡çš„è€¦åˆã€‚ åæœŸå¦‚æœå†åŠ æ–°å“ç§çš„å’–å•¡ï¼Œæˆ‘ä»¬åŠ¿å¿…è¦éœ€æ±‚ä¿®æ”¹SimpleCoffeeFactoryçš„ä»£ç ï¼Œè¿åäº†å¼€é—­åŸåˆ™ã€‚å·¥å‚ç±»çš„å®¢æˆ·ç«¯å¯èƒ½æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚åˆ›å»ºç¾å›¢å¤–å–ç­‰ï¼Œè¿™æ ·åªéœ€è¦ä¿®æ”¹å·¥å‚ç±»çš„ä»£ç ï¼Œçœå»å…¶ä»–çš„ä¿®æ”¹æ“ä½œã€‚ 2.2.2.4 ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼š å°è£…äº†åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼Œå¯ä»¥é€šè¿‡å‚æ•°ç›´æ¥è·å–å¯¹è±¡ã€‚æŠŠå¯¹è±¡çš„åˆ›å»ºå’Œä¸šåŠ¡é€»è¾‘å±‚åˆ†å¼€ï¼Œè¿™æ ·ä»¥åå°±é¿å…äº†ä¿®æ”¹å®¢æˆ·ä»£ç ï¼Œå¦‚æœè¦å®ç°æ–°äº§å“ç›´æ¥ä¿®æ”¹å·¥å‚ç±»ï¼Œè€Œä¸éœ€è¦åœ¨åŸä»£ç ä¸­ä¿®æ”¹ï¼Œè¿™æ ·å°±é™ä½äº†å®¢æˆ·ä»£ç ä¿®æ”¹çš„å¯èƒ½æ€§ï¼Œæ›´åŠ å®¹æ˜“æ‰©å±•ã€‚ ç¼ºç‚¹ï¼š å¢åŠ æ–°äº§å“æ—¶è¿˜æ˜¯éœ€è¦ä¿®æ”¹å·¥å‚ç±»çš„ä»£ç ï¼Œè¿èƒŒäº†â€œå¼€é—­åŸåˆ™â€ã€‚ 2.2.2.3 æ‰©å±•é™æ€å·¥å‚ åœ¨å¼€å‘ä¸­ä¹Ÿæœ‰ä¸€éƒ¨åˆ†äººå°†å·¥å‚ç±»ä¸­çš„åˆ›å»ºå¯¹è±¡çš„åŠŸèƒ½å®šä¹‰ä¸ºé™æ€çš„ï¼Œè¿™ä¸ªå°±æ˜¯é™æ€å·¥å‚æ¨¡å¼ï¼Œå®ƒä¹Ÿä¸æ˜¯23ç§è®¾è®¡æ¨¡å¼ä¸­çš„ã€‚ä»£ç å¦‚ä¸‹ï¼š 123456789101112public class SimpleCoffeeFactory &#123; public static Coffee createCoffee(String type) &#123; Coffee coffee = null; if(&quot;americano&quot;.equals(type)) &#123; coffee = new AmericanoCoffee(); &#125; else if(&quot;latte&quot;.equals(type)) &#123; coffee = new LatteCoffee(); &#125; return coffe; &#125;&#125; 2.2.3 å·¥å‚æ–¹æ³•æ¨¡å¼é’ˆå¯¹ä¸Šä¾‹ä¸­çš„ç¼ºç‚¹ï¼Œä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼å°±å¯ä»¥å®Œç¾çš„è§£å†³ï¼Œå®Œå…¨éµå¾ªå¼€é—­åŸåˆ™ã€‚ 2.2.3.1 æ¦‚å¿µå®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸ªäº§å“ç±»å¯¹è±¡ã€‚å·¥å‚æ–¹æ³•ä½¿ä¸€ä¸ªäº§å“ç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å·¥å‚çš„å­ç±»ã€‚ 2.2.3.2 ç»“æ„å·¥å‚æ–¹æ³•æ¨¡å¼çš„ä¸»è¦è§’è‰²ï¼š æŠ½è±¡å·¥å‚ï¼ˆAbstract Factoryï¼‰ï¼šæä¾›äº†åˆ›å»ºäº§å“çš„æ¥å£ï¼Œè°ƒç”¨è€…é€šè¿‡å®ƒè®¿é—®å…·ä½“å·¥å‚çš„å·¥å‚æ–¹æ³•æ¥åˆ›å»ºäº§å“ã€‚ å…·ä½“å·¥å‚ï¼ˆConcreteFactoryï¼‰ï¼šä¸»è¦æ˜¯å®ç°æŠ½è±¡å·¥å‚ä¸­çš„æŠ½è±¡æ–¹æ³•ï¼Œå®Œæˆå…·ä½“äº§å“çš„åˆ›å»ºã€‚ æŠ½è±¡äº§å“ï¼ˆProductï¼‰ï¼šå®šä¹‰äº†äº§å“çš„è§„èŒƒï¼Œæè¿°äº†äº§å“çš„ä¸»è¦ç‰¹æ€§å’ŒåŠŸèƒ½ã€‚ å…·ä½“äº§å“ï¼ˆConcreteProductï¼‰ï¼šå®ç°äº†æŠ½è±¡äº§å“è§’è‰²æ‰€å®šä¹‰çš„æ¥å£ï¼Œç”±å…·ä½“å·¥å‚æ¥åˆ›å»ºï¼Œå®ƒåŒå…·ä½“å·¥å‚ä¹‹é—´ä¸€ä¸€å¯¹åº”ã€‚ 2.2.3.3 å®ç°ä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼å¯¹ä¸Šä¾‹è¿›è¡Œæ”¹è¿›ï¼Œç±»å›¾å¦‚ä¸‹ï¼š ä»£ç å¦‚ä¸‹ï¼š æŠ½è±¡å·¥å‚ï¼š 1234public interface CoffeeFactory &#123; Coffee createCoffee();&#125; å…·ä½“å·¥å‚ï¼š 12345678910111213public class LatteCoffeeFactory implements CoffeeFactory &#123; public Coffee createCoffee() &#123; return new LatteCoffee(); &#125;&#125;public class AmericanCoffeeFactory implements CoffeeFactory &#123; public Coffee createCoffee() &#123; return new AmericanCoffee(); &#125;&#125; å’–å•¡åº—ç±»ï¼š 123456789101112131415public class CoffeeStore &#123; private CoffeeFactory factory; public CoffeeStore(CoffeeFactory factory) &#123; this.factory = factory; &#125; public Coffee orderCoffee(String type) &#123; Coffee coffee = factory.createCoffee(); coffee.addMilk(); coffee.addsugar(); return coffee; &#125;&#125; ä»ä»¥ä¸Šçš„ç¼–å†™çš„ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œè¦å¢åŠ äº§å“ç±»æ—¶ä¹Ÿè¦ç›¸åº”åœ°å¢åŠ å·¥å‚ç±»ï¼Œä¸éœ€è¦ä¿®æ”¹å·¥å‚ç±»çš„ä»£ç äº†ï¼Œè¿™æ ·å°±è§£å†³äº†ç®€å•å·¥å‚æ¨¡å¼çš„ç¼ºç‚¹ã€‚ å·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„è¿›ä¸€æ­¥æŠ½è±¡ã€‚ç”±äºä½¿ç”¨äº†å¤šæ€æ€§ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼ä¿æŒäº†ç®€å•å·¥å‚æ¨¡å¼çš„ä¼˜ç‚¹ï¼Œè€Œä¸”å…‹æœäº†å®ƒçš„ç¼ºç‚¹ã€‚ 2.2.3.4 ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼š ç”¨æˆ·åªéœ€è¦çŸ¥é“å…·ä½“å·¥å‚çš„åç§°å°±å¯å¾—åˆ°æ‰€è¦çš„äº§å“ï¼Œæ— é¡»çŸ¥é“äº§å“çš„å…·ä½“åˆ›å»ºè¿‡ç¨‹ï¼› åœ¨ç³»ç»Ÿå¢åŠ æ–°çš„äº§å“æ—¶åªéœ€è¦æ·»åŠ å…·ä½“äº§å“ç±»å’Œå¯¹åº”çš„å…·ä½“å·¥å‚ç±»ï¼Œæ— é¡»å¯¹åŸå·¥å‚è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œæ»¡è¶³å¼€é—­åŸåˆ™ï¼› ç¼ºç‚¹ï¼š æ¯å¢åŠ ä¸€ä¸ªäº§å“å°±è¦å¢åŠ ä¸€ä¸ªå…·ä½“äº§å“ç±»å’Œä¸€ä¸ªå¯¹åº”çš„å…·ä½“å·¥å‚ç±»ï¼Œè¿™å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ã€‚ 2.2.4 æŠ½è±¡å·¥å‚æ¨¡å¼å‰é¢ä»‹ç»çš„å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­è€ƒè™‘çš„æ˜¯ä¸€ç±»äº§å“çš„ç”Ÿäº§ï¼Œå¦‚ç•œç‰§åœºåªå…»åŠ¨ç‰©ã€ç”µè§†æœºå‚åªç”Ÿäº§ç”µè§†æœºã€ä¼ æ™ºæ’­å®¢åªåŸ¹å…»è®¡ç®—æœºè½¯ä»¶ä¸“ä¸šçš„å­¦ç”Ÿç­‰ã€‚ è¿™äº›å·¥å‚åªç”Ÿäº§åŒç§ç±»äº§å“ï¼ŒåŒç§ç±»äº§å“ç§°ä¸ºåŒç­‰çº§äº§å“ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šå·¥å‚æ–¹æ³•æ¨¡å¼åªè€ƒè™‘ç”Ÿäº§åŒç­‰çº§çš„äº§å“ï¼Œä½†æ˜¯åœ¨ç°å®ç”Ÿæ´»ä¸­è®¸å¤šå·¥å‚æ˜¯ç»¼åˆå‹çš„å·¥å‚ï¼Œèƒ½ç”Ÿäº§å¤šç­‰çº§ï¼ˆç§ç±»ï¼‰ çš„äº§å“ï¼Œå¦‚ç”µå™¨å‚æ—¢ç”Ÿäº§ç”µè§†æœºåˆç”Ÿäº§æ´—è¡£æœºæˆ–ç©ºè°ƒï¼Œå¤§å­¦æ—¢æœ‰è½¯ä»¶ä¸“ä¸šåˆæœ‰ç”Ÿç‰©ä¸“ä¸šç­‰ã€‚ æœ¬èŠ‚è¦ä»‹ç»çš„æŠ½è±¡å·¥å‚æ¨¡å¼å°†è€ƒè™‘å¤šç­‰çº§äº§å“çš„ç”Ÿäº§ï¼Œå°†åŒä¸€ä¸ªå…·ä½“å·¥å‚æ‰€ç”Ÿäº§çš„ä½äºä¸åŒç­‰çº§çš„ä¸€ç»„äº§å“ç§°ä¸ºä¸€ä¸ªäº§å“æ—ï¼Œä¸‹å›¾æ‰€ç¤ºæ¨ªè½´æ˜¯äº§å“ç­‰çº§ï¼Œä¹Ÿå°±æ˜¯åŒä¸€ç±»äº§å“ï¼›çºµè½´æ˜¯äº§å“æ—ï¼Œä¹Ÿå°±æ˜¯åŒä¸€å“ç‰Œçš„äº§å“ï¼ŒåŒä¸€å“ç‰Œçš„äº§å“äº§è‡ªåŒä¸€ä¸ªå·¥å‚ã€‚ 2.2.2.1 æ¦‚å¿µæ˜¯ä¸€ç§ä¸ºè®¿é—®ç±»æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç»„ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œä¸”è®¿é—®ç±»æ— é¡»æŒ‡å®šæ‰€è¦äº§å“çš„å…·ä½“ç±»å°±èƒ½å¾—åˆ°åŒæ—çš„ä¸åŒç­‰çº§çš„äº§å“çš„æ¨¡å¼ç»“æ„ã€‚ æŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„å‡çº§ç‰ˆæœ¬ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼åªç”Ÿäº§ä¸€ä¸ªç­‰çº§çš„äº§å“ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼å¯ç”Ÿäº§å¤šä¸ªç­‰çº§çš„äº§å“ã€‚ 2.2.4.2 ç»“æ„æŠ½è±¡å·¥å‚æ¨¡å¼çš„ä¸»è¦è§’è‰²å¦‚ä¸‹ï¼š æŠ½è±¡å·¥å‚ï¼ˆAbstract Factoryï¼‰ï¼šæä¾›äº†åˆ›å»ºäº§å“çš„æ¥å£ï¼Œå®ƒåŒ…å«å¤šä¸ªåˆ›å»ºäº§å“çš„æ–¹æ³•ï¼Œå¯ä»¥åˆ›å»ºå¤šä¸ªä¸åŒç­‰çº§çš„äº§å“ã€‚ å…·ä½“å·¥å‚ï¼ˆConcrete Factoryï¼‰ï¼šä¸»è¦æ˜¯å®ç°æŠ½è±¡å·¥å‚ä¸­çš„å¤šä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå®Œæˆå…·ä½“äº§å“çš„åˆ›å»ºã€‚ æŠ½è±¡äº§å“ï¼ˆProductï¼‰ï¼šå®šä¹‰äº†äº§å“çš„è§„èŒƒï¼Œæè¿°äº†äº§å“çš„ä¸»è¦ç‰¹æ€§å’ŒåŠŸèƒ½ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼æœ‰å¤šä¸ªæŠ½è±¡äº§å“ã€‚ å…·ä½“äº§å“ï¼ˆConcreteProductï¼‰ï¼šå®ç°äº†æŠ½è±¡äº§å“è§’è‰²æ‰€å®šä¹‰çš„æ¥å£ï¼Œç”±å…·ä½“å·¥å‚æ¥åˆ›å»ºï¼Œå®ƒ åŒå…·ä½“å·¥å‚ä¹‹é—´æ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ã€‚ 4.2.4.2 å®ç°ç°å’–å•¡åº—ä¸šåŠ¡å‘ç”Ÿæ”¹å˜ï¼Œä¸ä»…è¦ç”Ÿäº§å’–å•¡è¿˜è¦ç”Ÿäº§ç”œç‚¹ï¼Œå¦‚ææ‹‰ç±³è‹ã€æŠ¹èŒ¶æ…•æ–¯ç­‰ï¼Œè¦æ˜¯æŒ‰ç…§å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œéœ€è¦å®šä¹‰ææ‹‰ç±³è‹ç±»ã€æŠ¹èŒ¶æ…•æ–¯ç±»ã€ææ‹‰ç±³è‹å·¥å‚ã€æŠ¹èŒ¶æ…•æ–¯å·¥å‚ã€ç”œç‚¹å·¥å‚ç±»ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿç±»çˆ†ç‚¸æƒ…å†µã€‚å…¶ä¸­æ‹¿é“å’–å•¡ã€ç¾å¼å’–å•¡æ˜¯ä¸€ä¸ªäº§å“ç­‰çº§ï¼Œéƒ½æ˜¯å’–å•¡ï¼›ææ‹‰ç±³è‹ã€æŠ¹èŒ¶æ…•æ–¯ä¹Ÿæ˜¯ä¸€ä¸ªäº§å“ç­‰çº§ï¼›æ‹¿é“å’–å•¡å’Œææ‹‰ç±³è‹æ˜¯åŒä¸€äº§å“æ—ï¼ˆä¹Ÿå°±æ˜¯éƒ½å±äºæ„å¤§åˆ©é£å‘³ï¼‰ï¼Œç¾å¼å’–å•¡å’ŒæŠ¹èŒ¶æ…•æ–¯æ˜¯åŒä¸€äº§å“æ—ï¼ˆä¹Ÿå°±æ˜¯éƒ½å±äºç¾å¼é£å‘³ï¼‰ã€‚æ‰€ä»¥è¿™ä¸ªæ¡ˆä¾‹å¯ä»¥ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼å®ç°ã€‚ç±»å›¾å¦‚ä¸‹ï¼š ä»£ç å¦‚ä¸‹ï¼š æŠ½è±¡å·¥å‚ï¼š 123456public interface DessertFactory &#123; Coffee createCoffee(); Dessert createDessert();&#125; å…·ä½“å·¥å‚ï¼š 12345678910111213141516171819202122//ç¾å¼ç”œç‚¹å·¥å‚public class AmericanDessertFactory implements DessertFactory &#123; public Coffee createCoffee() &#123; return new AmericanCoffee(); &#125; public Dessert createDessert() &#123; return new MatchaMousse(); &#125;&#125;//æ„å¤§åˆ©é£å‘³ç”œç‚¹å·¥å‚public class ItalyDessertFactory implements DessertFactory &#123; public Coffee createCoffee() &#123; return new LatteCoffee(); &#125; public Dessert createDessert() &#123; return new Tiramisu(); &#125;&#125; å¦‚æœè¦åŠ åŒä¸€ä¸ªäº§å“æ—çš„è¯ï¼Œåªéœ€è¦å†åŠ ä¸€ä¸ªå¯¹åº”çš„å·¥å‚ç±»å³å¯ï¼Œä¸éœ€è¦ä¿®æ”¹å…¶ä»–çš„ç±»ã€‚ 4.2.4.3 ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼š å½“ä¸€ä¸ªäº§å“æ—ä¸­çš„å¤šä¸ªå¯¹è±¡è¢«è®¾è®¡æˆä¸€èµ·å·¥ä½œæ—¶ï¼Œå®ƒèƒ½ä¿è¯å®¢æˆ·ç«¯å§‹ç»ˆåªä½¿ç”¨åŒä¸€ä¸ªäº§å“æ—ä¸­çš„å¯¹è±¡ã€‚ ç¼ºç‚¹ï¼š å½“äº§å“æ—ä¸­éœ€è¦å¢åŠ ä¸€ä¸ªæ–°çš„äº§å“æ—¶ï¼Œæ‰€æœ‰çš„å·¥å‚ç±»éƒ½éœ€è¦è¿›è¡Œä¿®æ”¹ã€‚ 4.2.4.4 ä½¿ç”¨åœºæ™¯ å½“éœ€è¦åˆ›å»ºçš„å¯¹è±¡æ˜¯ä¸€ç³»åˆ—ç›¸äº’å…³è”æˆ–ç›¸äº’ä¾èµ–çš„äº§å“æ—æ—¶ï¼Œå¦‚ç”µå™¨å·¥å‚ä¸­çš„ç”µè§†æœºã€æ´—è¡£æœºã€ç©ºè°ƒç­‰ã€‚ ç³»ç»Ÿä¸­æœ‰å¤šä¸ªäº§å“æ—ï¼Œä½†æ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„æŸä¸€æ—äº§å“ã€‚å¦‚æœ‰äººåªå–œæ¬¢ç©¿æŸä¸€ä¸ªå“ç‰Œçš„è¡£æœå’Œé‹ã€‚ ç³»ç»Ÿä¸­æä¾›äº†äº§å“çš„ç±»åº“ï¼Œä¸”æ‰€æœ‰äº§å“çš„æ¥å£ç›¸åŒï¼Œå®¢æˆ·ç«¯ä¸ä¾èµ–äº§å“å®ä¾‹çš„åˆ›å»ºç»†èŠ‚å’Œå†…éƒ¨ç»“æ„ã€‚ å¦‚ï¼šè¾“å…¥æ³•æ¢çš®è‚¤ï¼Œä¸€æ•´å¥—ä¸€èµ·æ¢ã€‚ç”Ÿæˆä¸åŒæ“ä½œç³»ç»Ÿçš„ç¨‹åºã€‚ 2.3 å»ºé€ è€…æ¨¡å¼2.3.1 æ¦‚è¿°å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚ åˆ†ç¦»äº†éƒ¨ä»¶çš„æ„é€ (ç”±Builderæ¥è´Ÿè´£)å’Œè£…é…(ç”±Directorè´Ÿè´£)ã€‚ ä»è€Œå¯ä»¥æ„é€ å‡ºå¤æ‚çš„å¯¹è±¡ã€‚è¿™ä¸ªæ¨¡å¼é€‚ç”¨äºï¼šæŸä¸ªå¯¹è±¡çš„æ„å»ºè¿‡ç¨‹å¤æ‚çš„æƒ…å†µã€‚ ç”±äºå®ç°äº†æ„å»ºå’Œè£…é…çš„è§£è€¦ã€‚ä¸åŒçš„æ„å»ºå™¨ï¼Œç›¸åŒçš„è£…é…ï¼Œä¹Ÿå¯ä»¥åšå‡ºä¸åŒçš„å¯¹è±¡ï¼›ç›¸åŒçš„æ„å»ºå™¨ï¼Œä¸åŒçš„è£…é…é¡ºåºä¹Ÿå¯ä»¥åšå‡ºä¸åŒçš„å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯å®ç°äº†æ„å»ºç®—æ³•ã€è£…é…ç®—æ³•çš„è§£è€¦ï¼Œå®ç°äº†æ›´å¥½çš„å¤ç”¨ã€‚ å»ºé€ è€…æ¨¡å¼å¯ä»¥å°†éƒ¨ä»¶å’Œå…¶ç»„è£…è¿‡ç¨‹åˆ†å¼€ï¼Œä¸€æ­¥ä¸€æ­¥åˆ›å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ã€‚ç”¨æˆ·åªéœ€è¦æŒ‡å®šå¤æ‚å¯¹è±¡çš„ç±»å‹å°±å¯ä»¥å¾—åˆ°è¯¥å¯¹è±¡ï¼Œè€Œæ— é¡»çŸ¥é“å…¶å†…éƒ¨çš„å…·ä½“æ„é€ ç»†èŠ‚ã€‚ 2.3.2 ç»“æ„å»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š æŠ½è±¡å»ºé€ è€…ç±»ï¼ˆBuilderï¼‰ï¼šè¿™ä¸ªæ¥å£è§„å®šè¦å®ç°å¤æ‚å¯¹è±¡çš„é‚£äº›éƒ¨åˆ†çš„åˆ›å»ºï¼Œå¹¶ä¸æ¶‰åŠå…·ä½“çš„éƒ¨ä»¶å¯¹è±¡çš„åˆ›å»ºã€‚ å…·ä½“å»ºé€ è€…ç±»ï¼ˆConcreteBuilderï¼‰ï¼šå®ç° Builder æ¥å£ï¼Œå®Œæˆå¤æ‚äº§å“çš„å„ä¸ªéƒ¨ä»¶çš„å…·ä½“åˆ›å»ºæ–¹æ³•ã€‚åœ¨æ„é€ è¿‡ç¨‹å®Œ æˆåï¼Œæä¾›äº§å“çš„å®ä¾‹ã€‚ äº§å“ç±»ï¼ˆProductï¼‰ï¼šè¦åˆ›å»ºçš„å¤æ‚å¯¹è±¡ã€‚ æŒ‡æŒ¥è€…ç±»ï¼ˆDirectorï¼‰ï¼šè°ƒç”¨å…·ä½“å»ºé€ è€…æ¥åˆ›å»ºå¤æ‚å¯¹è±¡çš„å„ä¸ªéƒ¨åˆ†ï¼Œåœ¨æŒ‡å¯¼è€…ä¸­ä¸æ¶‰åŠå…·ä½“äº§å“çš„ä¿¡æ¯ï¼Œåªè´Ÿè´£ä¿è¯å¯¹è±¡å„éƒ¨åˆ†å®Œæ•´åˆ›å»ºæˆ–æŒ‰æŸç§é¡ºåºåˆ›å»ºã€‚ ç±»å›¾å¦‚ä¸‹ï¼š 2.3.3 å®ä¾‹åˆ›å»ºå…±äº«å•è½¦ ç”Ÿäº§è‡ªè¡Œè½¦æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼Œå®ƒåŒ…å«äº†è½¦æ¶ï¼Œè½¦åº§ç­‰ç»„ä»¶çš„ç”Ÿäº§ã€‚è€Œè½¦æ¶åˆæœ‰ç¢³çº¤ç»´ï¼Œé“åˆé‡‘ç­‰æè´¨çš„ï¼Œè½¦åº§æœ‰æ©¡èƒ¶ï¼ŒçœŸçš®ç­‰æè´¨ã€‚å¯¹äºè‡ªè¡Œè½¦çš„ç”Ÿäº§å°±å¯ä»¥ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ã€‚ è¿™é‡ŒBikeæ˜¯äº§å“ï¼ŒåŒ…å«è½¦æ¶ï¼Œè½¦åº§ç­‰ç»„ä»¶ï¼›Builderæ˜¯æŠ½è±¡å»ºé€ è€…ï¼ŒMobikeBuilderå’ŒOfoBuilderæ˜¯å…·ä½“çš„å»ºé€ è€…ï¼›Directoræ˜¯æŒ‡æŒ¥è€…ã€‚ç±»å›¾å¦‚ä¸‹ï¼š å…·ä½“çš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798//è‡ªè¡Œè½¦ç±»public class Bike &#123; private String frame; private String seat; public String getFrame() &#123; return frame; &#125; public void setFrame(String frame) &#123; this.frame = frame; &#125; public String getSeat() &#123; return seat; &#125; public void setSeat(String seat) &#123; this.seat = seat; &#125;&#125;// æŠ½è±¡ builder ç±»public abstract class Builder &#123; protected Bike mBike = new Bike(); public abstract void buildFrame(); public abstract void buildSeat(); public abstract Bike createBike();&#125;//æ‘©æ‹œå•è½¦Builderç±»public class MobikeBuilder extends Builder &#123; @Override public void buildFrame() &#123; mBike.setFrame(&quot;é“åˆé‡‘è½¦æ¶&quot;); &#125; @Override public void buildSeat() &#123; mBike.setSeat(&quot;çœŸçš®è½¦åº§&quot;); &#125; @Override public Bike createBike() &#123; return mBike; &#125;&#125;//ofoå•è½¦Builderç±»public class OfoBuilder extends Builder &#123; @Override public void buildFrame() &#123; mBike.setFrame(&quot;ç¢³çº¤ç»´è½¦æ¶&quot;); &#125; @Override public void buildSeat() &#123; mBike.setSeat(&quot;æ©¡èƒ¶è½¦åº§&quot;); &#125; @Override public Bike createBike() &#123; return mBike; &#125;&#125;//æŒ‡æŒ¥è€…ç±»public class Director &#123; private Builder mBuilder; public Director(Builder builder) &#123; mBuilder = builder; &#125; public Bike construct() &#123; mBuilder.buildFrame(); mBuilder.buildSeat(); return mBuilder.createBike(); &#125;&#125;//æµ‹è¯•ç±»public class Client &#123; public static void main(String[] args) &#123; showBike(new OfoBuilder()); showBike(new MobikeBuilder()); &#125; private static void showBike(Builder builder) &#123; Director director = new Director(builder); Bike bike = director.construct(); System.out.println(bike.getFrame()); System.out.println(bike.getSeat()); &#125;&#125; æ³¨æ„ï¼š ä¸Šé¢ç¤ºä¾‹æ˜¯ Builderæ¨¡å¼çš„å¸¸è§„ç”¨æ³•ï¼ŒæŒ‡æŒ¥è€…ç±» Director åœ¨å»ºé€ è€…æ¨¡å¼ä¸­å…·æœ‰å¾ˆé‡è¦çš„ä½œç”¨ï¼Œå®ƒç”¨äºæŒ‡å¯¼å…·ä½“æ„å»ºè€…å¦‚ä½•æ„å»ºäº§å“ï¼Œæ§åˆ¶è°ƒç”¨å…ˆåæ¬¡åºï¼Œå¹¶å‘è°ƒç”¨è€…è¿”å›å®Œæ•´çš„äº§å“ç±»ï¼Œä½†æ˜¯æœ‰äº›æƒ…å†µä¸‹éœ€è¦ç®€åŒ–ç³»ç»Ÿç»“æ„ï¼Œå¯ä»¥æŠŠæŒ‡æŒ¥è€…ç±»å’ŒæŠ½è±¡å»ºé€ è€…è¿›è¡Œç»“åˆ 123456789101112131415// æŠ½è±¡ builder ç±»public abstract class Builder &#123; protected Bike mBike = new Bike(); public abstract void buildFrame(); public abstract void buildSeat(); public abstract Bike createBike(); public Bike construct() &#123; this.buildFrame(); this.BuildSeat(); return this.createBike(); &#125;&#125; è¯´æ˜ï¼š è¿™æ ·åšç¡®å®ç®€åŒ–äº†ç³»ç»Ÿç»“æ„ï¼Œä½†åŒæ—¶ä¹ŸåŠ é‡äº†æŠ½è±¡å»ºé€ è€…ç±»çš„èŒè´£ï¼Œä¹Ÿä¸æ˜¯å¤ªç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ï¼Œå¦‚æœconstruct() è¿‡äºå¤æ‚ï¼Œå»ºè®®è¿˜æ˜¯å°è£…åˆ° Director ä¸­ã€‚ 2.3.4 ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼š å»ºé€ è€…æ¨¡å¼çš„å°è£…æ€§å¾ˆå¥½ã€‚ä½¿ç”¨å»ºé€ è€…æ¨¡å¼å¯ä»¥æœ‰æ•ˆçš„å°è£…å˜åŒ–ï¼Œåœ¨ä½¿ç”¨å»ºé€ è€…æ¨¡å¼çš„åœºæ™¯ä¸­ï¼Œä¸€èˆ¬äº§å“ç±»å’Œå»ºé€ è€…ç±»æ˜¯æ¯”è¾ƒç¨³å®šçš„ï¼Œå› æ­¤ï¼Œå°†ä¸»è¦çš„ä¸šåŠ¡é€»è¾‘å°è£…åœ¨æŒ‡æŒ¥è€…ç±»ä¸­å¯¹æ•´ä½“è€Œè¨€å¯ä»¥å–å¾—æ¯”è¾ƒå¥½çš„ç¨³å®šæ€§ã€‚ åœ¨å»ºé€ è€…æ¨¡å¼ä¸­ï¼Œå®¢æˆ·ç«¯ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨ç»„æˆçš„ç»†èŠ‚ï¼Œå°†äº§å“æœ¬èº«ä¸äº§å“çš„åˆ›å»ºè¿‡ç¨‹è§£è€¦ï¼Œä½¿å¾—ç›¸åŒçš„åˆ›å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„äº§å“å¯¹è±¡ã€‚ å¯ä»¥æ›´åŠ ç²¾ç»†åœ°æ§åˆ¶äº§å“çš„åˆ›å»ºè¿‡ç¨‹ ã€‚å°†å¤æ‚äº§å“çš„åˆ›å»ºæ­¥éª¤åˆ†è§£åœ¨ä¸åŒçš„æ–¹æ³•ä¸­ï¼Œä½¿å¾—åˆ›å»ºè¿‡ç¨‹æ›´åŠ æ¸…æ™°ï¼Œä¹Ÿæ›´æ–¹ä¾¿ä½¿ç”¨ç¨‹åºæ¥æ§åˆ¶åˆ›å»ºè¿‡ç¨‹ã€‚ å»ºé€ è€…æ¨¡å¼å¾ˆå®¹æ˜“è¿›è¡Œæ‰©å±•ã€‚å¦‚æœæœ‰æ–°çš„éœ€æ±‚ï¼Œé€šè¿‡å®ç°ä¸€ä¸ªæ–°çš„å»ºé€ è€…ç±»å°±å¯ä»¥å®Œæˆï¼ŒåŸºæœ¬ä¸Šä¸ç”¨ä¿®æ”¹ä¹‹å‰å·²ç»æµ‹è¯•é€šè¿‡çš„ä»£ç ï¼Œå› æ­¤ä¹Ÿå°±ä¸ä¼šå¯¹åŸæœ‰åŠŸèƒ½å¼•å…¥é£é™©ã€‚ç¬¦åˆå¼€é—­åŸåˆ™ã€‚ ç¼ºç‚¹ï¼š é€ è€…æ¨¡å¼æ‰€åˆ›å»ºçš„äº§å“ä¸€èˆ¬å…·æœ‰è¾ƒå¤šçš„å…±åŒç‚¹ï¼Œå…¶ç»„æˆéƒ¨åˆ†ç›¸ä¼¼ï¼Œå¦‚æœäº§å“ä¹‹é—´çš„å·®å¼‚æ€§å¾ˆå¤§ï¼Œåˆ™ä¸é€‚åˆä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼Œå› æ­¤å…¶ä½¿ç”¨èŒƒå›´å—åˆ°ä¸€å®šçš„é™åˆ¶ã€‚ 2.3.5 ä½¿ç”¨åœºæ™¯å»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼åˆ›å»ºçš„æ˜¯å¤æ‚å¯¹è±¡ï¼Œå…¶äº§å“çš„å„ä¸ªéƒ¨åˆ†ç»å¸¸é¢ä¸´ç€å‰§çƒˆçš„å˜åŒ–ï¼Œä½†å°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·çš„ç®—æ³•å´ç›¸å¯¹ç¨³å®šï¼Œæ‰€ä»¥å®ƒé€šå¸¸åœ¨ä»¥ä¸‹åœºåˆä½¿ç”¨ã€‚ åˆ›å»ºçš„å¯¹è±¡è¾ƒå¤æ‚ï¼Œç”±å¤šä¸ªéƒ¨ä»¶æ„æˆï¼Œå„éƒ¨ä»¶é¢ä¸´ç€å¤æ‚çš„å˜åŒ–ï¼Œä½†æ„ä»¶é—´çš„å»ºé€ é¡ºåºæ˜¯ç¨³å®šçš„ã€‚ åˆ›å»ºå¤æ‚å¯¹è±¡çš„ç®—æ³•ç‹¬ç«‹äºè¯¥å¯¹è±¡çš„ç»„æˆéƒ¨åˆ†ä»¥åŠå®ƒä»¬çš„è£…é…æ–¹å¼ï¼Œå³äº§å“çš„æ„å»ºè¿‡ç¨‹å’Œæœ€ç»ˆçš„è¡¨ç¤ºæ˜¯ç‹¬ç«‹çš„ã€‚ 2.3.6 æ¨¡å¼æ‰©å±•å»ºé€ è€…æ¨¡å¼é™¤äº†ä¸Šé¢çš„ç”¨é€”å¤–ï¼Œåœ¨å¼€å‘ä¸­è¿˜æœ‰ä¸€ä¸ªå¸¸ç”¨çš„ä½¿ç”¨æ–¹å¼ï¼Œå°±æ˜¯å½“ä¸€ä¸ªç±»æ„é€ å™¨éœ€è¦ä¼ å…¥å¾ˆå¤šå‚æ•°æ—¶ï¼Œå¦‚æœåˆ›å»ºè¿™ä¸ªç±»çš„å®ä¾‹ï¼Œä»£ç å¯è¯»æ€§ä¼šéå¸¸å·®ï¼Œè€Œä¸”å¾ˆå®¹æ˜“å¼•å…¥é”™è¯¯ï¼Œæ­¤æ—¶å°±å¯ä»¥åˆ©ç”¨å»ºé€ è€…æ¨¡å¼è¿›è¡Œé‡æ„ã€‚ é‡æ„å‰ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263public class Phone &#123; private String cpu; private String screen; private String memory; private String mainboard; public Phone(String cpu, String screen, String memory, String mainboard) &#123; this.cpu = cpu; this.screen = screen; this.memory = memory; this.mainboard = mainboard; &#125; public String getCpu() &#123; return cpu; &#125; public void setCpu(String cpu) &#123; this.cpu = cpu; &#125; public String getScreen() &#123; return screen; &#125; public void setScreen(String screen) &#123; this.screen = screen; &#125; public String getMemory() &#123; return memory; &#125; public void setMemory(String memory) &#123; this.memory = memory; &#125; public String getMainboard() &#123; return mainboard; &#125; public void setMainboard(String mainboard) &#123; this.mainboard = mainboard; &#125; @Override public String toString() &#123; return &quot;Phone&#123;&quot; + &quot;cpu=&#x27;&quot; + cpu + &#x27;\\&#x27;&#x27; + &quot;, screen=&#x27;&quot; + screen + &#x27;\\&#x27;&#x27; + &quot;, memory=&#x27;&quot; + memory + &#x27;\\&#x27;&#x27; + &quot;, mainboard=&#x27;&quot; + mainboard + &#x27;\\&#x27;&#x27; + &#x27;&#125;&#x27;; &#125;&#125;public class Client &#123; public static void main(String[] args) &#123; //æ„å»ºPhoneå¯¹è±¡ Phone phone = new Phone(&quot;intel&quot;,&quot;ä¸‰æ˜Ÿå±å¹•&quot;,&quot;é‡‘å£«é¡¿&quot;,&quot;åç¡•&quot;); System.out.println(phone); &#125;&#125; ä¸Šé¢åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­æ„å»ºPhoneå¯¹è±¡ï¼Œä¼ é€’äº†å››ä¸ªå‚æ•°ï¼Œå¦‚æœå‚æ•°æ›´å¤šå‘¢ï¼Ÿä»£ç çš„å¯è¯»æ€§åŠä½¿ç”¨çš„æˆæœ¬å°±æ˜¯æ¯”è¾ƒé«˜ã€‚ é‡æ„åä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263public class Phone &#123; private String cpu; private String screen; private String memory; private String mainboard; private Phone(Builder builder) &#123; cpu = builder.cpu; screen = builder.screen; memory = builder.memory; mainboard = builder.mainboard; &#125; public static final class Builder &#123; private String cpu; private String screen; private String memory; private String mainboard; public Builder() &#123;&#125; public Builder cpu(String val) &#123; cpu = val; return this; &#125; public Builder screen(String val) &#123; screen = val; return this; &#125; public Builder memory(String val) &#123; memory = val; return this; &#125; public Builder mainboard(String val) &#123; mainboard = val; return this; &#125; public Phone build() &#123; return new Phone(this);&#125; &#125; @Override public String toString() &#123; return &quot;Phone&#123;&quot; + &quot;cpu=&#x27;&quot; + cpu + &#x27;\\&#x27;&#x27; + &quot;, screen=&#x27;&quot; + screen + &#x27;\\&#x27;&#x27; + &quot;, memory=&#x27;&quot; + memory + &#x27;\\&#x27;&#x27; + &quot;, mainboard=&#x27;&quot; + mainboard + &#x27;\\&#x27;&#x27; + &#x27;&#125;&#x27;; &#125;&#125;public class Client &#123; public static void main(String[] args) &#123; Phone phone = new Phone.Builder() .cpu(&quot;intel&quot;) .mainboard(&quot;åç¡•&quot;) .memory(&quot;é‡‘å£«é¡¿&quot;) .screen(&quot;ä¸‰æ˜Ÿ&quot;) .build(); System.out.println(phone); &#125;&#125; é‡æ„åçš„ä»£ç åœ¨ä½¿ç”¨èµ·æ¥æ›´æ–¹ä¾¿ï¼ŒæŸç§ç¨‹åº¦ä¸Šä¹Ÿå¯ä»¥æé«˜å¼€å‘æ•ˆç‡ã€‚ä»è½¯ä»¶è®¾è®¡ä¸Šï¼Œå¯¹ç¨‹åºå‘˜çš„è¦æ±‚æ¯”è¾ƒé«˜ã€‚ 4.6 åˆ›å»ºè€…æ¨¡å¼å¯¹æ¯”4.6.1 å·¥å‚æ–¹æ³•æ¨¡å¼VSå»ºé€ è€…æ¨¡å¼å·¥å‚æ–¹æ³•æ¨¡å¼æ³¨é‡çš„æ˜¯æ•´ä½“å¯¹è±¡çš„åˆ›å»ºæ–¹å¼ï¼›è€Œå»ºé€ è€…æ¨¡å¼æ³¨é‡çš„æ˜¯éƒ¨ä»¶æ„å»ºçš„è¿‡ç¨‹ï¼Œæ„åœ¨é€šè¿‡ä¸€æ­¥ä¸€æ­¥åœ°ç²¾ç¡®æ„é€ åˆ›å»ºå‡ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ã€‚ æˆ‘ä»¬ä¸¾ä¸ªç®€å•ä¾‹å­æ¥è¯´æ˜ä¸¤è€…çš„å·®å¼‚ï¼Œå¦‚è¦åˆ¶é€ ä¸€ä¸ªè¶…äººï¼Œå¦‚æœä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œç›´æ¥äº§ç”Ÿå‡ºæ¥çš„å°±æ˜¯ä¸€ä¸ªåŠ›å¤§æ— ç©·ã€èƒ½å¤Ÿé£ç¿”ã€å†…è£¤å¤–ç©¿çš„è¶…äººï¼›è€Œå¦‚æœä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼Œåˆ™éœ€è¦ç»„è£…æ‰‹ã€å¤´ã€è„šã€èº¯å¹²ç­‰éƒ¨åˆ†ï¼Œç„¶åå†æŠŠå†…è£¤å¤–ç©¿ï¼Œäºæ˜¯ä¸€ä¸ªè¶…äººå°±è¯ç”Ÿäº†ã€‚ 4.6.2 æŠ½è±¡å·¥å‚æ¨¡å¼VSå»ºé€ è€…æ¨¡å¼æŠ½è±¡å·¥å‚æ¨¡å¼å®ç°å¯¹äº§å“å®¶æ—çš„åˆ›å»ºï¼Œä¸€ä¸ªäº§å“å®¶æ—æ˜¯è¿™æ ·çš„ä¸€ç³»åˆ—äº§å“ï¼šå…·æœ‰ä¸åŒåˆ†ç±»ç»´åº¦çš„äº§å“ç»„åˆï¼Œé‡‡ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼åˆ™æ˜¯ä¸éœ€è¦å…³å¿ƒæ„å»ºè¿‡ç¨‹ï¼Œåªå…³å¿ƒä»€ä¹ˆäº§å“ç”±ä»€ä¹ˆå·¥å‚ç”Ÿäº§å³å¯ã€‚ å»ºé€ è€…æ¨¡å¼åˆ™æ˜¯è¦æ±‚æŒ‰ç…§æŒ‡å®šçš„è“å›¾å»ºé€ äº§å“ï¼Œå®ƒçš„ä¸»è¦ç›®çš„æ˜¯é€šè¿‡ç»„è£…é›¶é…ä»¶è€Œäº§ç”Ÿä¸€ä¸ªæ–°äº§å“ã€‚ å¦‚æœå°†æŠ½è±¡å·¥å‚æ¨¡å¼çœ‹æˆæ±½è½¦é…ä»¶ç”Ÿäº§å·¥å‚ï¼Œç”Ÿäº§ä¸€ä¸ªäº§å“æ—çš„äº§å“ï¼Œé‚£ä¹ˆå»ºé€ è€…æ¨¡å¼å°±æ˜¯ä¸€ä¸ªæ±½è½¦ç»„è£…å·¥å‚ï¼Œé€šè¿‡å¯¹éƒ¨ä»¶çš„ç»„è£…å¯ä»¥è¿”å›ä¸€è¾†å®Œæ•´çš„æ±½è½¦ã€‚ 5.2 é€‚é…å™¨æ¨¡å¼5.2.1 æ¦‚è¿°å¦‚æœå»æ¬§æ´²å›½å®¶å»æ—…æ¸¸çš„è¯ï¼Œä»–ä»¬çš„æ’åº§å¦‚ä¸‹å›¾æœ€å·¦è¾¹ï¼Œæ˜¯æ¬§æ´²æ ‡å‡†ã€‚è€Œæˆ‘ä»¬ä½¿ç”¨çš„æ’å¤´å¦‚ä¸‹å›¾æœ€å³è¾¹çš„ã€‚å› æ­¤æˆ‘ä»¬çš„ç¬”è®°æœ¬ç”µè„‘ï¼Œæ‰‹æœºåœ¨å½“åœ°ä¸èƒ½ç›´æ¥å……ç”µã€‚æ‰€ä»¥å°±éœ€è¦ä¸€ä¸ªæ’åº§è½¬æ¢å™¨ï¼Œè½¬æ¢å™¨ç¬¬1é¢æ’å…¥å½“åœ°çš„æ’åº§ï¼Œç¬¬2é¢ä¾›æˆ‘ä»¬å……ç”µï¼Œè¿™æ ·ä½¿å¾—æˆ‘ä»¬çš„æ’å¤´åœ¨å½“åœ°èƒ½ä½¿ç”¨ã€‚ç”Ÿæ´»ä¸­è¿™æ ·çš„ä¾‹å­å¾ˆå¤šï¼Œæ‰‹æœºå……ç”µå™¨ï¼ˆå°†220vè½¬æ¢ä¸º5vçš„ç”µå‹ï¼‰ï¼Œè¯»å¡å™¨ç­‰ï¼Œå…¶å®å°±æ˜¯ä½¿ç”¨åˆ°äº†é€‚é…å™¨æ¨¡å¼ã€‚ å®šä¹‰ï¼š â€‹ å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ï¼Œä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»èƒ½ä¸€èµ·å·¥ä½œã€‚ â€‹ é€‚é…å™¨æ¨¡å¼åˆ†ä¸ºç±»é€‚é…å™¨æ¨¡å¼å’Œå¯¹è±¡é€‚é…å™¨æ¨¡å¼ï¼Œå‰è€…ç±»ä¹‹é—´çš„è€¦åˆåº¦æ¯”åè€…é«˜ï¼Œä¸”è¦æ±‚ç¨‹åºå‘˜äº†è§£ç°æœ‰ç»„ä»¶åº“ä¸­çš„ç›¸å…³ç»„ä»¶çš„å†…éƒ¨ç»“æ„ï¼Œæ‰€ä»¥åº”ç”¨ç›¸å¯¹è¾ƒå°‘äº›ã€‚ 5.2.2 ç»“æ„é€‚é…å™¨æ¨¡å¼ï¼ˆAdapterï¼‰åŒ…å«ä»¥ä¸‹ä¸»è¦è§’è‰²ï¼š ç›®æ ‡ï¼ˆTargetï¼‰æ¥å£ï¼šå½“å‰ç³»ç»Ÿä¸šåŠ¡æ‰€æœŸå¾…çš„æ¥å£ï¼Œå®ƒå¯ä»¥æ˜¯æŠ½è±¡ç±»æˆ–æ¥å£ã€‚ é€‚é…è€…ï¼ˆAdapteeï¼‰ç±»ï¼šå®ƒæ˜¯è¢«è®¿é—®å’Œé€‚é…çš„ç°å­˜ç»„ä»¶åº“ä¸­çš„ç»„ä»¶æ¥å£ã€‚ é€‚é…å™¨ï¼ˆAdapterï¼‰ç±»ï¼šå®ƒæ˜¯ä¸€ä¸ªè½¬æ¢å™¨ï¼Œé€šè¿‡ç»§æ‰¿æˆ–å¼•ç”¨é€‚é…è€…çš„å¯¹è±¡ï¼ŒæŠŠé€‚é…è€…æ¥å£è½¬æ¢æˆç›®æ ‡æ¥å£ï¼Œè®©å®¢æˆ·æŒ‰ç›®æ ‡æ¥å£çš„æ ¼å¼è®¿é—®é€‚é…è€…ã€‚ 5.2.3 ç±»é€‚é…å™¨æ¨¡å¼å®ç°æ–¹å¼ï¼šå®šä¹‰ä¸€ä¸ªé€‚é…å™¨ç±»æ¥å®ç°å½“å‰ç³»ç»Ÿçš„ä¸šåŠ¡æ¥å£ï¼ŒåŒæ—¶åˆç»§æ‰¿ç°æœ‰ç»„ä»¶åº“ä¸­å·²ç»å­˜åœ¨çš„ç»„ä»¶ã€‚ ã€ä¾‹ã€‘è¯»å¡å™¨ ç°æœ‰ä¸€å°ç”µè„‘åªèƒ½è¯»å–SDå¡ï¼Œè€Œè¦è¯»å–TFå¡ä¸­çš„å†…å®¹çš„è¯å°±éœ€è¦ä½¿ç”¨åˆ°é€‚é…å™¨æ¨¡å¼ã€‚åˆ›å»ºä¸€ä¸ªè¯»å¡å™¨ï¼Œå°†TFå¡ä¸­çš„å†…å®¹è¯»å–å‡ºæ¥ã€‚ ç±»å›¾å¦‚ä¸‹ï¼š ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879//SDå¡çš„æ¥å£public interface SDCard &#123; //è¯»å–SDå¡æ–¹æ³• String readSD(); //å†™å…¥SDå¡åŠŸèƒ½ void writeSD(String msg);&#125;//SDå¡å®ç°ç±»public class SDCardImpl implements SDCard &#123; public String readSD() &#123; String msg = &quot;sd card read a msg :hello word SD&quot;; return msg; &#125; public void writeSD(String msg) &#123; System.out.println(&quot;sd card write msg : &quot; + msg); &#125;&#125;//ç”µè„‘ç±»public class Computer &#123; public String readSD(SDCard sdCard) &#123; if(sdCard == null) &#123; throw new NullPointerException(&quot;sd card null&quot;); &#125; return sdCard.readSD(); &#125;&#125;//TFå¡æ¥å£public interface TFCard &#123; //è¯»å–TFå¡æ–¹æ³• String readTF(); //å†™å…¥TFå¡åŠŸèƒ½ void writeTF(String msg);&#125;//TFå¡å®ç°ç±»public class TFCardImpl implements TFCard &#123; public String readTF() &#123; String msg =&quot;tf card read msg : hello word tf card&quot;; return msg; &#125; public void writeTF(String msg) &#123; System.out.println(&quot;tf card write a msg : &quot; + msg); &#125;&#125;//å®šä¹‰é€‚é…å™¨ç±»ï¼ˆSDå…¼å®¹TFï¼‰public class SDAdapterTF extends TFCardImpl implements SDCard &#123; public String readSD() &#123; System.out.println(&quot;adapter read tf card &quot;); return readTF(); &#125; public void writeSD(String msg) &#123; System.out.println(&quot;adapter write tf card&quot;); writeTF(msg); &#125;&#125;//æµ‹è¯•ç±»public class Client &#123; public static void main(String[] args) &#123; Computer computer = new Computer(); SDCard sdCard = new SDCardImpl(); System.out.println(computer.readSD(sdCard)); System.out.println(&quot;------------&quot;); SDAdapterTF adapter = new SDAdapterTF(); System.out.println(computer.readSD(adapter)); &#125;&#125; ç±»é€‚é…å™¨æ¨¡å¼è¿èƒŒäº†åˆæˆå¤ç”¨åŸåˆ™ã€‚ç±»é€‚é…å™¨æ˜¯å®¢æˆ·ç±»æœ‰ä¸€ä¸ªæ¥å£è§„èŒƒçš„æƒ…å†µä¸‹å¯ç”¨ï¼Œåä¹‹ä¸å¯ç”¨ã€‚ 5.2.4 å¯¹è±¡é€‚é…å™¨æ¨¡å¼å®ç°æ–¹å¼ï¼šå¯¹è±¡é€‚é…å™¨æ¨¡å¼å¯é‡†ç”¨å°†ç°æœ‰ç»„ä»¶åº“ä¸­å·²ç»å®ç°çš„ç»„ä»¶å¼•å…¥é€‚é…å™¨ç±»ä¸­ï¼Œè¯¥ç±»åŒæ—¶å®ç°å½“å‰ç³»ç»Ÿçš„ä¸šåŠ¡æ¥å£ã€‚ ã€ä¾‹ã€‘è¯»å¡å™¨ æˆ‘ä»¬ä½¿ç”¨å¯¹è±¡é€‚é…å™¨æ¨¡å¼å°†è¯»å¡å™¨çš„æ¡ˆä¾‹è¿›è¡Œæ”¹å†™ã€‚ç±»å›¾å¦‚ä¸‹ï¼š ä»£ç å¦‚ä¸‹ï¼š ç±»é€‚é…å™¨æ¨¡å¼çš„ä»£ç ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹é€‚é…å™¨ç±»ï¼ˆSDAdapterTFï¼‰å’Œæµ‹è¯•ç±»ã€‚ 12345678910111213141516171819202122232425262728293031323334//åˆ›å»ºé€‚é…å™¨å¯¹è±¡ï¼ˆSDå…¼å®¹TFï¼‰public class SDAdapterTF implements SDCard &#123; private TFCard tfCard; public SDAdapterTF(TFCard tfCard) &#123; this.tfCard = tfCard; &#125; public String readSD() &#123; System.out.println(&quot;adapter read tf card &quot;); return tfCard.readTF(); &#125; public void writeSD(String msg) &#123; System.out.println(&quot;adapter write tf card&quot;); tfCard.writeTF(msg); &#125;&#125;//æµ‹è¯•ç±»public class Client &#123; public static void main(String[] args) &#123; Computer computer = new Computer(); SDCard sdCard = new SDCardImpl(); System.out.println(computer.readSD(sdCard)); System.out.println(&quot;------------&quot;); TFCard tfCard = new TFCardImpl(); SDAdapterTF adapter = new SDAdapterTF(tfCard); System.out.println(computer.readSD(adapter)); &#125;&#125; æ³¨æ„ï¼šè¿˜æœ‰ä¸€ä¸ªé€‚é…å™¨æ¨¡å¼æ˜¯æ¥å£é€‚é…å™¨æ¨¡å¼ã€‚å½“ä¸å¸Œæœ›å®ç°ä¸€ä¸ªæ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•æ—¶ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±»Adapter ï¼Œå®ç°æ‰€æœ‰æ–¹æ³•ã€‚è€Œæ­¤æ—¶æˆ‘ä»¬åªéœ€è¦ç»§æ‰¿è¯¥æŠ½è±¡ç±»å³å¯ã€‚ 5.2.5 åº”ç”¨åœºæ™¯ ä»¥å‰å¼€å‘çš„ç³»ç»Ÿå­˜åœ¨æ»¡è¶³æ–°ç³»ç»ŸåŠŸèƒ½éœ€æ±‚çš„ç±»ï¼Œä½†å…¶æ¥å£åŒæ–°ç³»ç»Ÿçš„æ¥å£ä¸ä¸€è‡´ã€‚ ä½¿ç”¨ç¬¬ä¸‰æ–¹æä¾›çš„ç»„ä»¶ï¼Œä½†ç»„ä»¶æ¥å£å®šä¹‰å’Œè‡ªå·±è¦æ±‚çš„æ¥å£å®šä¹‰ä¸åŒã€‚ 5.4 æ¡¥æ¥æ¨¡å¼5.4.1 æ¦‚è¿°ç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦åˆ›å»ºä¸åŒçš„å›¾å½¢ï¼Œå¹¶ä¸”æ¯ä¸ªå›¾å½¢éƒ½æœ‰å¯èƒ½ä¼šæœ‰ä¸åŒçš„é¢œè‰²ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç»§æ‰¿çš„æ–¹å¼æ¥è®¾è®¡ç±»çš„å…³ç³»ï¼š æˆ‘ä»¬å¯ä»¥å‘ç°æœ‰å¾ˆå¤šçš„ç±»ï¼Œå‡å¦‚æˆ‘ä»¬å†å¢åŠ ä¸€ä¸ªå½¢çŠ¶æˆ–å†å¢åŠ ä¸€ç§é¢œè‰²ï¼Œå°±éœ€è¦åˆ›å»ºæ›´å¤šçš„ç±»ã€‚ è¯•æƒ³ï¼Œåœ¨ä¸€ä¸ªæœ‰å¤šç§å¯èƒ½ä¼šå˜åŒ–çš„ç»´åº¦çš„ç³»ç»Ÿä¸­ï¼Œç”¨ç»§æ‰¿æ–¹å¼ä¼šé€ æˆç±»çˆ†ç‚¸ï¼Œæ‰©å±•èµ·æ¥ä¸çµæ´»ã€‚æ¯æ¬¡åœ¨ä¸€ä¸ªç»´åº¦ä¸Šæ–°å¢ä¸€ä¸ªå…·ä½“å®ç°éƒ½è¦å¢åŠ å¤šä¸ªå­ç±»ã€‚ä¸ºäº†æ›´åŠ çµæ´»çš„è®¾è®¡ç³»ç»Ÿï¼Œæˆ‘ä»¬æ­¤æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨æ¡¥æ¥æ¨¡å¼ã€‚ å®šä¹‰ï¼š â€‹ å°†æŠ½è±¡ä¸å®ç°åˆ†ç¦»ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚å®ƒæ˜¯ç”¨ç»„åˆå…³ç³»ä»£æ›¿ç»§æ‰¿å…³ç³»æ¥å®ç°ï¼Œä»è€Œé™ä½äº†æŠ½è±¡å’Œå®ç°è¿™ä¸¤ä¸ªå¯å˜ç»´åº¦çš„è€¦åˆåº¦ã€‚ 5.4.2 ç»“æ„æ¡¥æ¥ï¼ˆBridgeï¼‰æ¨¡å¼åŒ…å«ä»¥ä¸‹ä¸»è¦è§’è‰²ï¼š æŠ½è±¡åŒ–ï¼ˆAbstractionï¼‰è§’è‰² ï¼šå®šä¹‰æŠ½è±¡ç±»ï¼Œå¹¶åŒ…å«ä¸€ä¸ªå¯¹å®ç°åŒ–å¯¹è±¡çš„å¼•ç”¨ã€‚ æ‰©å±•æŠ½è±¡åŒ–ï¼ˆRefined Abstractionï¼‰è§’è‰² ï¼šæ˜¯æŠ½è±¡åŒ–è§’è‰²çš„å­ç±»ï¼Œå®ç°çˆ¶ç±»ä¸­çš„ä¸šåŠ¡æ–¹æ³•ï¼Œå¹¶é€šè¿‡ç»„åˆå…³ç³»è°ƒç”¨å®ç°åŒ–è§’è‰²ä¸­çš„ä¸šåŠ¡æ–¹æ³•ã€‚ å®ç°åŒ–ï¼ˆImplementorï¼‰è§’è‰² ï¼šå®šä¹‰å®ç°åŒ–è§’è‰²çš„æ¥å£ï¼Œä¾›æ‰©å±•æŠ½è±¡åŒ–è§’è‰²è°ƒç”¨ã€‚ å…·ä½“å®ç°åŒ–ï¼ˆConcrete Implementorï¼‰è§’è‰² ï¼šç»™å‡ºå®ç°åŒ–è§’è‰²æ¥å£çš„å…·ä½“å®ç°ã€‚ 5.4.3 æ¡ˆä¾‹ã€ä¾‹ã€‘è§†é¢‘æ’­æ”¾å™¨ éœ€è¦å¼€å‘ä¸€ä¸ªè·¨å¹³å°è§†é¢‘æ’­æ”¾å™¨ï¼Œå¯ä»¥åœ¨ä¸åŒæ“ä½œç³»ç»Ÿå¹³å°ï¼ˆå¦‚Windowsã€Macã€Linuxç­‰ï¼‰ä¸Šæ’­æ”¾å¤šç§æ ¼å¼çš„è§†é¢‘æ–‡ä»¶ï¼Œå¸¸è§çš„è§†é¢‘æ ¼å¼åŒ…æ‹¬RMVBã€AVIã€WMVç­‰ã€‚è¯¥æ’­æ”¾å™¨åŒ…å«äº†ä¸¤ä¸ªç»´åº¦ï¼Œé€‚åˆä½¿ç”¨æ¡¥æ¥æ¨¡å¼ã€‚ ç±»å›¾å¦‚ä¸‹ï¼š ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263//è§†é¢‘æ–‡ä»¶public interface VideoFile &#123; void decode(String fileName);&#125;//aviæ–‡ä»¶public class AVIFile implements VideoFile &#123; public void decode(String fileName) &#123; System.out.println(&quot;aviè§†é¢‘æ–‡ä»¶ï¼š&quot;+ fileName); &#125;&#125;//rmvbæ–‡ä»¶public class REVBBFile implements VideoFile &#123; public void decode(String fileName) &#123; System.out.println(&quot;rmvbæ–‡ä»¶ï¼š&quot; + fileName); &#125;&#125;//æ“ä½œç³»ç»Ÿç‰ˆæœ¬public abstract class OperatingSystemVersion &#123; protected VideoFile videoFile; public OperatingSystemVersion(VideoFile videoFile) &#123; this.videoFile = videoFile; &#125; public abstract void play(String fileName);&#125;//Windowsç‰ˆæœ¬public class Windows extends OperatingSystem &#123; public Windows(VideoFile videoFile) &#123; super(videoFile); &#125; public void play(String fileName) &#123; videoFile.decode(fileName); &#125;&#125;//macç‰ˆæœ¬public class Mac extends OperatingSystemVersion &#123; public Mac(VideoFile videoFile) &#123; super(videoFile); &#125; public void play(String fileName) &#123; videoFile.decode(fileName); &#125;&#125;//æµ‹è¯•ç±»public class Client &#123; public static void main(String[] args) &#123; OperatingSystem os = new Windows(new AVIFile()); os.play(&quot;æˆ˜ç‹¼3&quot;); &#125;&#125; å¥½å¤„ï¼š æ¡¥æ¥æ¨¡å¼æé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å……æ€§ï¼Œåœ¨ä¸¤ä¸ªå˜åŒ–ç»´åº¦ä¸­ä»»æ„æ‰©å±•ä¸€ä¸ªç»´åº¦ï¼Œéƒ½ä¸éœ€è¦ä¿®æ”¹åŸæœ‰ç³»ç»Ÿã€‚ å¦‚ï¼šå¦‚æœç°åœ¨è¿˜æœ‰ä¸€ç§è§†é¢‘æ–‡ä»¶ç±»å‹wmvï¼Œæˆ‘ä»¬åªéœ€è¦å†å®šä¹‰ä¸€ä¸ªç±»å®ç°VideoFileæ¥å£å³å¯ï¼Œå…¶ä»–ç±»ä¸éœ€è¦å‘ç”Ÿå˜åŒ–ã€‚ å®ç°ç»†èŠ‚å¯¹å®¢æˆ·é€æ˜ 5.4.4 ä½¿ç”¨åœºæ™¯ å½“ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œä¸”è¿™ä¸¤ä¸ªç»´åº¦éƒ½éœ€è¦è¿›è¡Œæ‰©å±•æ—¶ã€‚ å½“ä¸€ä¸ªç³»ç»Ÿä¸å¸Œæœ›ä½¿ç”¨ç»§æ‰¿æˆ–å› ä¸ºå¤šå±‚æ¬¡ç»§æ‰¿å¯¼è‡´ç³»ç»Ÿç±»çš„ä¸ªæ•°æ€¥å‰§å¢åŠ æ—¶ã€‚ å½“ä¸€ä¸ªç³»ç»Ÿéœ€è¦åœ¨æ„ä»¶çš„æŠ½è±¡åŒ–è§’è‰²å’Œå…·ä½“åŒ–è§’è‰²ä¹‹é—´å¢åŠ æ›´å¤šçš„çµæ´»æ€§æ—¶ã€‚é¿å…åœ¨ä¸¤ä¸ªå±‚æ¬¡ä¹‹é—´å»ºç«‹é™æ€çš„ç»§æ‰¿è”ç³»ï¼Œé€šè¿‡æ¡¥æ¥æ¨¡å¼å¯ä»¥ä½¿å®ƒä»¬åœ¨æŠ½è±¡å±‚å»ºç«‹ä¸€ä¸ªå…³è”å…³ç³»ã€‚ 5.5 å¤–è§‚æ¨¡å¼5.5.1 æ¦‚è¿°æœ‰äº›äººå¯èƒ½ç‚’è¿‡è‚¡ç¥¨ï¼Œä½†å…¶å®å¤§éƒ¨åˆ†äººéƒ½ä¸å¤ªæ‡‚ï¼Œè¿™ç§æ²¡æœ‰è¶³å¤Ÿäº†è§£è¯åˆ¸çŸ¥è¯†çš„æƒ…å†µä¸‹åšè‚¡ç¥¨æ˜¯å¾ˆå®¹æ˜“äºé’±çš„ï¼Œåˆšå¼€å§‹ç‚’è‚¡è‚¯å®šéƒ½ä¼šæƒ³ï¼Œå¦‚æœæœ‰ä¸ªæ‡‚è¡Œçš„å¸®å¸®æ‰‹å°±å¥½ï¼Œå…¶å®åŸºé‡‘å°±æ˜¯ä¸ªå¥½å¸®æ‰‹ï¼Œæ”¯ä»˜å®é‡Œå°±æœ‰è®¸å¤šçš„åŸºé‡‘ï¼Œå®ƒå°†æŠ•èµ„è€…åˆ†æ•£çš„èµ„é‡‘é›†ä¸­èµ·æ¥ï¼Œäº¤ç”±ä¸“ä¸šçš„ç»ç†äººè¿›è¡Œç®¡ç†ï¼ŒæŠ•èµ„äºè‚¡ç¥¨ã€å€ºåˆ¸ã€å¤–æ±‡ç­‰é¢†åŸŸï¼Œè€ŒåŸºé‡‘æŠ•èµ„çš„æ”¶ç›Šå½’æŒæœ‰è€…æ‰€æœ‰ï¼Œç®¡ç†æœºæ„æ”¶å–ä¸€å®šæ¯”ä¾‹çš„æ‰˜ç®¡ç®¡ç†è´¹ç”¨ã€‚ å®šä¹‰ï¼š â€‹ åˆåé—¨é¢æ¨¡å¼ï¼Œæ˜¯ä¸€ç§é€šè¿‡ä¸ºå¤šä¸ªå¤æ‚çš„å­ç³»ç»Ÿæä¾›ä¸€ä¸ªä¸€è‡´çš„æ¥å£ï¼Œè€Œä½¿è¿™äº›å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“è¢«è®¿é—®çš„æ¨¡å¼ã€‚è¯¥æ¨¡å¼å¯¹å¤–æœ‰ä¸€ä¸ªç»Ÿä¸€æ¥å£ï¼Œå¤–éƒ¨åº”ç”¨ç¨‹åºä¸ç”¨å…³å¿ƒå†…éƒ¨å­ç³»ç»Ÿçš„å…·ä½“çš„ç»†èŠ‚ï¼Œè¿™æ ·ä¼šå¤§å¤§é™ä½åº”ç”¨ç¨‹åºçš„å¤æ‚åº¦ï¼Œæé«˜äº†ç¨‹åºçš„å¯ç»´æŠ¤æ€§ã€‚ â€‹ å¤–è§‚ï¼ˆFacadeï¼‰æ¨¡å¼æ˜¯â€œè¿ªç±³ç‰¹æ³•åˆ™â€çš„å…¸å‹åº”ç”¨ 5.5.2 ç»“æ„å¤–è§‚ï¼ˆFacadeï¼‰æ¨¡å¼åŒ…å«ä»¥ä¸‹ä¸»è¦è§’è‰²ï¼š å¤–è§‚ï¼ˆFacadeï¼‰è§’è‰²ï¼šä¸ºå¤šä¸ªå­ç³»ç»Ÿå¯¹å¤–æä¾›ä¸€ä¸ªå…±åŒçš„æ¥å£ã€‚ å­ç³»ç»Ÿï¼ˆSub Systemï¼‰è§’è‰²ï¼šå®ç°ç³»ç»Ÿçš„éƒ¨åˆ†åŠŸèƒ½ï¼Œå®¢æˆ·å¯ä»¥é€šè¿‡å¤–è§‚è§’è‰²è®¿é—®å®ƒã€‚ 5.5.3 æ¡ˆä¾‹ã€ä¾‹ã€‘æ™ºèƒ½å®¶ç”µæ§åˆ¶ å°æ˜çš„çˆ·çˆ·å·²ç»60å²äº†ï¼Œä¸€ä¸ªäººåœ¨å®¶ç”Ÿæ´»ï¼šæ¯æ¬¡éƒ½éœ€è¦æ‰“å¼€ç¯ã€æ‰“å¼€ç”µè§†ã€æ‰“å¼€ç©ºè°ƒï¼›ç¡è§‰æ—¶å…³é—­ç¯ã€å…³é—­ç”µè§†ã€å…³é—­ç©ºè°ƒï¼›æ“ä½œèµ·æ¥éƒ½æ¯”è¾ƒéº»çƒ¦ã€‚æ‰€ä»¥å°æ˜ç»™çˆ·çˆ·ä¹°äº†æ™ºèƒ½éŸ³ç®±ï¼Œå¯ä»¥é€šè¿‡è¯­éŸ³ç›´æ¥æ§åˆ¶è¿™äº›æ™ºèƒ½å®¶ç”µçš„å¼€å¯å’Œå…³é—­ã€‚ç±»å›¾å¦‚ä¸‹ï¼š ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283//ç¯ç±»public class Light &#123; public void on() &#123; System.out.println(&quot;æ‰“å¼€äº†ç¯....&quot;); &#125; public void off() &#123; System.out.println(&quot;å…³é—­äº†ç¯....&quot;); &#125;&#125;//ç”µè§†ç±»public class TV &#123; public void on() &#123; System.out.println(&quot;æ‰“å¼€äº†ç”µè§†....&quot;); &#125; public void off() &#123; System.out.println(&quot;å…³é—­äº†ç”µè§†....&quot;); &#125;&#125;//æ§åˆ¶ç±»public class AirCondition &#123; public void on() &#123; System.out.println(&quot;æ‰“å¼€äº†ç©ºè°ƒ....&quot;); &#125; public void off() &#123; System.out.println(&quot;å…³é—­äº†ç©ºè°ƒ....&quot;); &#125;&#125;//æ™ºèƒ½éŸ³ç®±public class SmartAppliancesFacade &#123; private Light light; private TV tv; private AirCondition airCondition; public SmartAppliancesFacade() &#123; light = new Light(); tv = new TV(); airCondition = new AirCondition(); &#125; public void say(String message) &#123; if(message.contains(&quot;æ‰“å¼€&quot;)) &#123; on(); &#125; else if(message.contains(&quot;å…³é—­&quot;)) &#123; off(); &#125; else &#123; System.out.println(&quot;æˆ‘è¿˜å¬ä¸æ‡‚ä½ è¯´çš„ï¼ï¼ï¼&quot;); &#125; &#125; //èµ·åºŠåä¸€é”®å¼€ç”µå™¨ private void on() &#123; System.out.println(&quot;èµ·åºŠäº†&quot;); light.on(); tv.on(); airCondition.on(); &#125; //ç¡è§‰ä¸€é”®å…³ç”µå™¨ private void off() &#123; System.out.println(&quot;ç¡è§‰äº†&quot;); light.off(); tv.off(); airCondition.off(); &#125;&#125;//æµ‹è¯•ç±»public class Client &#123; public static void main(String[] args) &#123; //åˆ›å»ºå¤–è§‚å¯¹è±¡ SmartAppliancesFacade facade = new SmartAppliancesFacade(); //å®¢æˆ·ç«¯ç›´æ¥ä¸å¤–è§‚å¯¹è±¡è¿›è¡Œäº¤äº’ facade.say(&quot;æ‰“å¼€å®¶ç”µ&quot;); facade.say(&quot;å…³é—­å®¶ç”µ&quot;); &#125;&#125; å¥½å¤„ï¼š é™ä½äº†å­ç³»ç»Ÿä¸å®¢æˆ·ç«¯ä¹‹é—´çš„è€¦åˆåº¦ï¼Œä½¿å¾—å­ç³»ç»Ÿçš„å˜åŒ–ä¸ä¼šå½±å“è°ƒç”¨å®ƒçš„å®¢æˆ·ç±»ã€‚ å¯¹å®¢æˆ·å±è”½äº†å­ç³»ç»Ÿç»„ä»¶ï¼Œå‡å°‘äº†å®¢æˆ·å¤„ç†çš„å¯¹è±¡æ•°ç›®ï¼Œå¹¶ä½¿å¾—å­ç³»ç»Ÿä½¿ç”¨èµ·æ¥æ›´åŠ å®¹æ˜“ã€‚ ç¼ºç‚¹ï¼š ä¸ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œä¿®æ”¹å¾ˆéº»çƒ¦ 5.5.4 ä½¿ç”¨åœºæ™¯ å¯¹åˆ†å±‚ç»“æ„ç³»ç»Ÿæ„å»ºæ—¶ï¼Œä½¿ç”¨å¤–è§‚æ¨¡å¼å®šä¹‰å­ç³»ç»Ÿä¸­æ¯å±‚çš„å…¥å£ç‚¹å¯ä»¥ç®€åŒ–å­ç³»ç»Ÿä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ å½“ä¸€ä¸ªå¤æ‚ç³»ç»Ÿçš„å­ç³»ç»Ÿå¾ˆå¤šæ—¶ï¼Œå¤–è§‚æ¨¡å¼å¯ä»¥ä¸ºç³»ç»Ÿè®¾è®¡ä¸€ä¸ªç®€å•çš„æ¥å£ä¾›å¤–ç•Œè®¿é—®ã€‚ å½“å®¢æˆ·ç«¯ä¸å¤šä¸ªå­ç³»ç»Ÿä¹‹é—´å­˜åœ¨å¾ˆå¤§çš„è”ç³»æ—¶ï¼Œå¼•å…¥å¤–è§‚æ¨¡å¼å¯å°†å®ƒä»¬åˆ†ç¦»ï¼Œä»è€Œæé«˜å­ç³»ç»Ÿçš„ç‹¬ç«‹æ€§å’Œå¯ç§»æ¤æ€§ã€‚ 5ï¼Œç»“æ„å‹æ¨¡å¼5.6 ç»„åˆæ¨¡å¼5.6.1 æ¦‚è¿° â€‹ å¯¹äºè¿™ä¸ªå›¾ç‰‡è‚¯å®šä¼šéå¸¸ç†Ÿæ‚‰ï¼Œä¸Šå›¾æˆ‘ä»¬å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå¯¹äºè¿™æ ·çš„ç»“æ„æˆ‘ä»¬ç§°ä¹‹ä¸ºæ ‘å½¢ç»“æ„ã€‚åœ¨æ ‘å½¢ç»“æ„ä¸­å¯ä»¥é€šè¿‡è°ƒç”¨æŸä¸ªæ–¹æ³•æ¥éå†æ•´ä¸ªæ ‘ï¼Œå½“æˆ‘ä»¬æ‰¾åˆ°æŸä¸ªå¶å­èŠ‚ç‚¹åï¼Œå°±å¯ä»¥å¯¹å¶å­èŠ‚ç‚¹è¿›è¡Œç›¸å…³çš„æ“ä½œã€‚å¯ä»¥å°†è¿™é¢—æ ‘ç†è§£æˆä¸€ä¸ªå¤§çš„å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢åŒ…å«å¾ˆå¤šçš„æˆå‘˜å¯¹è±¡ï¼Œè¿™äº›æˆå‘˜å¯¹è±¡å³å¯æ˜¯å®¹å™¨å¯¹è±¡ä¹Ÿå¯ä»¥æ˜¯å¶å­å¯¹è±¡ã€‚ä½†æ˜¯ç”±äºå®¹å™¨å¯¹è±¡å’Œå¶å­å¯¹è±¡åœ¨åŠŸèƒ½ä¸Šé¢çš„åŒºåˆ«ï¼Œä½¿å¾—æˆ‘ä»¬åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å¿…é¡»è¦åŒºåˆ†å®¹å™¨å¯¹è±¡å’Œå¶å­å¯¹è±¡ï¼Œä½†æ˜¯è¿™æ ·å°±ä¼šç»™å®¢æˆ·å¸¦æ¥ä¸å¿…è¦çš„éº»çƒ¦ï¼Œä½œä¸ºå®¢æˆ·è€Œå·²ï¼Œå®ƒå§‹ç»ˆå¸Œæœ›èƒ½å¤Ÿä¸€è‡´çš„å¯¹å¾…å®¹å™¨å¯¹è±¡å’Œå¶å­å¯¹è±¡ã€‚ å®šä¹‰ï¼š â€‹ åˆåéƒ¨åˆ†æ•´ä½“æ¨¡å¼ï¼Œæ˜¯ç”¨äºæŠŠä¸€ç»„ç›¸ä¼¼çš„å¯¹è±¡å½“ä½œä¸€ä¸ªå•ä¸€çš„å¯¹è±¡ã€‚ç»„åˆæ¨¡å¼ä¾æ®æ ‘å½¢ç»“æ„æ¥ç»„åˆå¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤ºéƒ¨åˆ†ä»¥åŠæ•´ä½“å±‚æ¬¡ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒåˆ›å»ºäº†å¯¹è±¡ç»„çš„æ ‘å½¢ç»“æ„ã€‚ 5.6.2 ç»“æ„ç»„åˆæ¨¡å¼ä¸»è¦åŒ…å«ä¸‰ç§è§’è‰²ï¼š æŠ½è±¡æ ¹èŠ‚ç‚¹ï¼ˆComponentï¼‰ï¼šå®šä¹‰ç³»ç»Ÿå„å±‚æ¬¡å¯¹è±¡çš„å…±æœ‰æ–¹æ³•å’Œå±æ€§ï¼Œå¯ä»¥é¢„å…ˆå®šä¹‰ä¸€äº›é»˜è®¤è¡Œä¸ºå’Œå±æ€§ã€‚ æ ‘æèŠ‚ç‚¹ï¼ˆCompositeï¼‰ï¼šå®šä¹‰æ ‘æèŠ‚ç‚¹çš„è¡Œä¸ºï¼Œå­˜å‚¨å­èŠ‚ç‚¹ï¼Œç»„åˆæ ‘æèŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹å½¢æˆä¸€ä¸ªæ ‘å½¢ç»“æ„ã€‚ å¶å­èŠ‚ç‚¹ï¼ˆLeafï¼‰ï¼šå¶å­èŠ‚ç‚¹å¯¹è±¡ï¼Œå…¶ä¸‹å†æ— åˆ†æ”¯ï¼Œæ˜¯ç³»ç»Ÿå±‚æ¬¡éå†çš„æœ€å°å•ä½ã€‚ 5.6.3 æ¡ˆä¾‹å®ç°ã€ä¾‹ã€‘è½¯ä»¶èœå• å¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬åœ¨è®¿é—®åˆ«çš„ä¸€äº›ç®¡ç†ç³»ç»Ÿæ—¶ï¼Œç»å¸¸å¯ä»¥çœ‹åˆ°ç±»ä¼¼çš„èœå•ã€‚ä¸€ä¸ªèœå•å¯ä»¥åŒ…å«èœå•é¡¹ï¼ˆèœå•é¡¹æ˜¯æŒ‡ä¸å†åŒ…å«å…¶ä»–å†…å®¹çš„èœå•æ¡ç›®ï¼‰ï¼Œä¹Ÿå¯ä»¥åŒ…å«å¸¦æœ‰å…¶ä»–èœå•é¡¹çš„èœå•ï¼Œå› æ­¤ä½¿ç”¨ç»„åˆæ¨¡å¼æè¿°èœå•å°±å¾ˆæ°å½“ï¼Œæˆ‘ä»¬çš„éœ€æ±‚æ˜¯é’ˆå¯¹ä¸€ä¸ªèœå•ï¼Œæ‰“å°å‡ºå…¶åŒ…å«çš„æ‰€æœ‰èœå•ä»¥åŠèœå•é¡¹çš„åç§°ã€‚ è¦å®ç°è¯¥æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å…ˆç”»å‡ºç±»å›¾ï¼š ä»£ç å®ç°ï¼š ä¸ç®¡æ˜¯èœå•è¿˜æ˜¯èœå•é¡¹ï¼Œéƒ½åº”è¯¥ç»§æ‰¿è‡ªç»Ÿä¸€çš„æ¥å£ï¼Œè¿™é‡Œå§‘ä¸”å°†è¿™ä¸ªç»Ÿä¸€çš„æ¥å£ç§°ä¸ºèœå•ç»„ä»¶ã€‚ 123456789101112131415161718192021222324252627282930//èœå•ç»„ä»¶ ä¸ç®¡æ˜¯èœå•è¿˜æ˜¯èœå•é¡¹ï¼Œéƒ½åº”è¯¥ç»§æ‰¿è¯¥ç±»public abstract class MenuComponent &#123; protected String name; protected int level; //æ·»åŠ èœå• public void add(MenuComponent menuComponent)&#123; throw new UnsupportedOperationException(); &#125; //ç§»é™¤èœå• public void remove(MenuComponent menuComponent)&#123; throw new UnsupportedOperationException(); &#125; //è·å–æŒ‡å®šçš„å­èœå• public MenuComponent getChild(int i)&#123; throw new UnsupportedOperationException(); &#125; //è·å–èœå•åç§° public String getName()&#123; return name; &#125; public void print()&#123; throw new UnsupportedOperationException(); &#125;&#125; è¿™é‡Œçš„MenuComponentå®šä¹‰ä¸ºæŠ½è±¡ç±»ï¼Œå› ä¸ºæœ‰ä¸€äº›å…±æœ‰çš„å±æ€§å’Œè¡Œä¸ºè¦åœ¨è¯¥ç±»ä¸­å®ç°ï¼ŒMenuå’ŒMenuItemç±»å°±å¯ä»¥åªè¦†ç›–è‡ªå·±æ„Ÿå…´è¶£çš„æ–¹æ³•ï¼Œè€Œä¸ç”¨æ­ç†ä¸éœ€è¦æˆ–è€…ä¸æ„Ÿå…´è¶£çš„æ–¹æ³•ï¼Œä¸¾ä¾‹æ¥è¯´ï¼ŒMenuç±»å¯ä»¥åŒ…å«å­èœå•ï¼Œå› æ­¤éœ€è¦è¦†ç›–add()ã€remove()ã€getChild()æ–¹æ³•ï¼Œä½†æ˜¯MenuItemå°±ä¸åº”è¯¥æœ‰è¿™äº›æ–¹æ³•ã€‚è¿™é‡Œç»™å‡ºçš„é»˜è®¤å®ç°æ˜¯æŠ›å‡ºå¼‚å¸¸ï¼Œä½ ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦æ”¹å†™é»˜è®¤å®ç°ã€‚ 12345678910111213141516171819202122232425262728293031323334353637public class Menu extends MenuComponent &#123; private List&lt;MenuComponent&gt; menuComponentList; public Menu(String name,int level)&#123; this.level = level; this.name = name; menuComponentList = new ArrayList&lt;MenuComponent&gt;(); &#125; @Override public void add(MenuComponent menuComponent) &#123; menuComponentList.add(menuComponent); &#125; @Override public void remove(MenuComponent menuComponent) &#123; menuComponentList.remove(menuComponent); &#125; @Override public MenuComponent getChild(int i) &#123; return menuComponentList.get(i); &#125; @Override public void print() &#123; for (int i = 1; i &lt; level; i++) &#123; System.out.print(&quot;--&quot;); &#125; System.out.println(name); for (MenuComponent menuComponent : menuComponentList) &#123; menuComponent.print(); &#125; &#125;&#125; Menuç±»å·²ç»å®ç°äº†é™¤äº†getNameæ–¹æ³•çš„å…¶ä»–æ‰€æœ‰æ–¹æ³•ï¼Œå› ä¸ºMenuç±»å…·æœ‰æ·»åŠ èœå•ï¼Œç§»é™¤èœå•å’Œè·å–å­èœå•çš„åŠŸèƒ½ã€‚ 123456789101112131415public class MenuItem extends MenuComponent &#123; public MenuItem(String name,int level) &#123; this.name = name; this.level = level; &#125; @Override public void print() &#123; for (int i = 1; i &lt; level; i++) &#123; System.out.print(&quot;--&quot;); &#125; System.out.println(name); &#125;&#125; MenuItemæ˜¯èœå•é¡¹ï¼Œä¸èƒ½å†æœ‰å­èœå•ï¼Œæ‰€ä»¥æ·»åŠ èœå•ï¼Œç§»é™¤èœå•å’Œè·å–å­èœå•çš„åŠŸèƒ½å¹¶ä¸èƒ½å®ç°ã€‚ 5.6.4 ç»„åˆæ¨¡å¼çš„åˆ†ç±»åœ¨ä½¿ç”¨ç»„åˆæ¨¡å¼æ—¶ï¼Œæ ¹æ®æŠ½è±¡æ„ä»¶ç±»çš„å®šä¹‰å½¢å¼ï¼Œæˆ‘ä»¬å¯å°†ç»„åˆæ¨¡å¼åˆ†ä¸ºé€æ˜ç»„åˆæ¨¡å¼å’Œå®‰å…¨ç»„åˆæ¨¡å¼ä¸¤ç§å½¢å¼ã€‚ é€æ˜ç»„åˆæ¨¡å¼ é€æ˜ç»„åˆæ¨¡å¼ä¸­ï¼ŒæŠ½è±¡æ ¹èŠ‚ç‚¹è§’è‰²ä¸­å£°æ˜äº†æ‰€æœ‰ç”¨äºç®¡ç†æˆå‘˜å¯¹è±¡çš„æ–¹æ³•ï¼Œæ¯”å¦‚åœ¨ç¤ºä¾‹ä¸­ MenuComponent å£°æ˜äº† addã€remove ã€getChild æ–¹æ³•ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ç¡®ä¿æ‰€æœ‰çš„æ„ä»¶ç±»éƒ½æœ‰ç›¸åŒçš„æ¥å£ã€‚é€æ˜ç»„åˆæ¨¡å¼ä¹Ÿæ˜¯ç»„åˆæ¨¡å¼çš„æ ‡å‡†å½¢å¼ã€‚ é€æ˜ç»„åˆæ¨¡å¼çš„ç¼ºç‚¹æ˜¯ä¸å¤Ÿå®‰å…¨ï¼Œå› ä¸ºå¶å­å¯¹è±¡å’Œå®¹å™¨å¯¹è±¡åœ¨æœ¬è´¨ä¸Šæ˜¯æœ‰åŒºåˆ«çš„ï¼Œå¶å­å¯¹è±¡ä¸å¯èƒ½æœ‰ä¸‹ä¸€ä¸ªå±‚æ¬¡çš„å¯¹è±¡ï¼Œå³ä¸å¯èƒ½åŒ…å«æˆå‘˜å¯¹è±¡ï¼Œå› æ­¤ä¸ºå…¶æä¾› add()ã€remove() ç­‰æ–¹æ³•æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œè¿™åœ¨ç¼–è¯‘é˜¶æ®µä¸ä¼šå‡ºé”™ï¼Œä½†åœ¨è¿è¡Œé˜¶æ®µå¦‚æœè°ƒç”¨è¿™äº›æ–¹æ³•å¯èƒ½ä¼šå‡ºé”™ï¼ˆå¦‚æœæ²¡æœ‰æä¾›ç›¸åº”çš„é”™è¯¯å¤„ç†ä»£ç ï¼‰ å®‰å…¨ç»„åˆæ¨¡å¼ åœ¨å®‰å…¨ç»„åˆæ¨¡å¼ä¸­ï¼Œåœ¨æŠ½è±¡æ„ä»¶è§’è‰²ä¸­æ²¡æœ‰å£°æ˜ä»»ä½•ç”¨äºç®¡ç†æˆå‘˜å¯¹è±¡çš„æ–¹æ³•ï¼Œè€Œæ˜¯åœ¨æ ‘æèŠ‚ç‚¹ Menu ç±»ä¸­å£°æ˜å¹¶å®ç°è¿™äº›æ–¹æ³•ã€‚å®‰å…¨ç»„åˆæ¨¡å¼çš„ç¼ºç‚¹æ˜¯ä¸å¤Ÿé€æ˜ï¼Œå› ä¸ºå¶å­æ„ä»¶å’Œå®¹å™¨æ„ä»¶å…·æœ‰ä¸åŒçš„æ–¹æ³•ï¼Œä¸”å®¹å™¨æ„ä»¶ä¸­é‚£äº›ç”¨äºç®¡ç†æˆå‘˜å¯¹è±¡çš„æ–¹æ³•æ²¡æœ‰åœ¨æŠ½è±¡æ„ä»¶ç±»ä¸­å®šä¹‰ï¼Œå› æ­¤å®¢æˆ·ç«¯ä¸èƒ½å®Œå…¨é’ˆå¯¹æŠ½è±¡ç¼–ç¨‹ï¼Œå¿…é¡»æœ‰åŒºåˆ«åœ°å¯¹å¾…å¶å­æ„ä»¶å’Œå®¹å™¨æ„ä»¶ã€‚ 5.6.5 ä¼˜ç‚¹ ç»„åˆæ¨¡å¼å¯ä»¥æ¸…æ¥šåœ°å®šä¹‰åˆ†å±‚æ¬¡çš„å¤æ‚å¯¹è±¡ï¼Œè¡¨ç¤ºå¯¹è±¡çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å±‚æ¬¡ï¼Œå®ƒè®©å®¢æˆ·ç«¯å¿½ç•¥äº†å±‚æ¬¡çš„å·®å¼‚ï¼Œæ–¹ä¾¿å¯¹æ•´ä¸ªå±‚æ¬¡ç»“æ„è¿›è¡Œæ§åˆ¶ã€‚ å®¢æˆ·ç«¯å¯ä»¥ä¸€è‡´åœ°ä½¿ç”¨ä¸€ä¸ªç»„åˆç»“æ„æˆ–å…¶ä¸­å•ä¸ªå¯¹è±¡ï¼Œä¸å¿…å…³å¿ƒå¤„ç†çš„æ˜¯å•ä¸ªå¯¹è±¡è¿˜æ˜¯æ•´ä¸ªç»„åˆç»“æ„ï¼Œç®€åŒ–äº†å®¢æˆ·ç«¯ä»£ç ã€‚ åœ¨ç»„åˆæ¨¡å¼ä¸­å¢åŠ æ–°çš„æ ‘æèŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹éƒ½å¾ˆæ–¹ä¾¿ï¼Œæ— é¡»å¯¹ç°æœ‰ç±»åº“è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ã€‚ ç»„åˆæ¨¡å¼ä¸ºæ ‘å½¢ç»“æ„çš„é¢å‘å¯¹è±¡å®ç°æä¾›äº†ä¸€ç§çµæ´»çš„è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡å¶å­èŠ‚ç‚¹å’Œæ ‘æèŠ‚ç‚¹çš„é€’å½’ç»„åˆï¼Œå¯ä»¥å½¢æˆå¤æ‚çš„æ ‘å½¢ç»“æ„ï¼Œä½†å¯¹æ ‘å½¢ç»“æ„çš„æ§åˆ¶å´éå¸¸ç®€å•ã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://breadwinners.top/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[]},{"title":"Clionä¸­è¿œç¨‹è¿æ¥Linuxå¼€å‘é—®é¢˜","slug":"Linux/Clionä¸­è¿œç¨‹è¿æ¥Linuxå¼€å‘é—®é¢˜","date":"2023-03-17T16:00:00.000Z","updated":"2023-07-11T02:01:31.431Z","comments":true,"path":"2023/03/18/Linux/Clionä¸­è¿œç¨‹è¿æ¥Linuxå¼€å‘é—®é¢˜/","link":"","permalink":"http://breadwinners.top/2023/03/18/Linux/Clion%E4%B8%AD%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5Linux%E5%BC%80%E5%8F%91%E9%97%AE%E9%A2%98/","excerpt":"","text":"Clionä¸­è¿œç¨‹è¿æ¥Linuxå¼€å‘é—®é¢˜è¿œç¨‹è¿æ¥è¿œç¨‹ä¸»æœºè®¾ç½®-&gt;å·¥å…·é“¾-&gt;æ·»åŠ è¿œç¨‹ä¸»æœºå¹¶è®¾ç½®ä¸ºé»˜è®¤-&gt;é…ç½®å¥½å¦‚ä¸‹é…ç½® ç›¸å…³Cmakeï¼Œgdbï¼Œgccå®‰è£…å‡çº§å¯å‚è€ƒæˆ‘è¿™ç¯‡åšå®¢ éƒ¨ç½²åˆ°è¿œç¨‹ä¸»æœºçš„å¯¹åº”å·¥ä½œç›®å½•ï¼šå·¥å…·-&gt;éƒ¨ç½²-&gt;é…ç½®-&gt;é€‰æ‹©è¿œç¨‹ä¸»æœº-&gt;æ˜ å°„-&gt;æ·»åŠ å¥½å¯¹åº”çš„å·¥ä½œç›®å½• ä¸€ä¸ªé¡¹ç›®æ–°å»ºå¤šä¸ªc&#x2F;cppæ–‡ä»¶ä¸€ä¸ªé¡¹ç›®ä¸­æ–°å»ºå¤šä¸ªæ–‡ä»¶ï¼Œåœ¨CMakeLists.txtæ–‡ä»¶ä¸­æ·»åŠ ï¼Œæ¯”å¦‚ 1add_executable(test test.cpp) ç¬¬ä¸€é¡¹æ˜¯æœŸæœ›ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶çš„åå­— ç¬¬äºŒé¡¹æ˜¯ä½ æ–°å»ºçš„æ–‡ä»¶å æ³¨æ„ï¼šæœ€å¥½æ˜¯å…ˆå»ºç«‹æ–‡ä»¶åœ¨ä¿®æ”¹CMakeLists.txtæ–‡ä»¶çš„å†…å®¹ï¼Œä¸ç„¶å¯èƒ½ä¼šæç¤ºä¸å±äºä»»ä½•é¡¹ç›®ç›®æ ‡ é“¾æ¥threadè¿è¡Œå¸¦çº¿ç¨‹çš„ç¨‹åºå› ä¸ºpthreadåº“ä¸æ˜¯Linuxç³»ç»Ÿé»˜è®¤çš„åº“ï¼Œæ‰€ä»¥éœ€è¦åœ¨CMakeLists.txtæ–‡ä»¶ä¸­æ·»åŠ  12find_package(Threads REQUIRED)target_link_libraries(é¡¹ç›®åç§° Threads::Threads) å…¶ä¸­ï¼Œtarget_link_librariesçš„ç¬¬ä¸€ä¸ªå‚æ•° é¡¹ç›®åç§° ä¸º add_executable(é¡¹ç›®åç§° ${SOURCE_FILES}) è¯­å¥ä¸­çš„é¡¹ç›®å ä»¥ä¸Šä¸ºä¾‹ï¼Œtest.cppæ–‡ä»¶è¦é“¾æ¥pthreadï¼Œå°±éœ€è¦å†™æˆ target_link_libraries(test Threads::Threads) æˆ‘çš„CMakeLists.txtæ–‡ä»¶å†…å®¹å¦‚ä¸‹ 1234567891011121314cmake_minimum_required(VERSION 3.6)project(thread)find_package(Threads REQUIRED)set(CMAKE_CXX_STANDARD 14)add_executable(thread main.cpp)add_executable(server server.cpp)add_executable(client client.cpp)add_executable(testThread1 testThread1.cpp)add_executable(hh hh.cpp)target_link_libraries(thread Threads::Threads)target_link_libraries(testThread1 Threads::Threads) Clionç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„é—®é¢˜clioné»˜è®¤ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®ä¸C&#x2F;C++æºæ–‡ä»¶çš„ä½ç½®ä¸åŒï¼Œåœ¨æŸäº›æ¶‰åŠåˆ°ç›¸å¯¹è·¯å¾„é—®é¢˜çš„æ—¶å€™ï¼Œå°±å®¹æ˜“å‡ºé”™ï¼Œæ‰€ä»¥æœ‰æ—¶å€™éœ€è¦è®¾ç½®äºŒè€…åŒä¸€è·¯å¾„ï¼Œåªéœ€åœ¨CMakeLists.txtä¸­æ·»åŠ  1set(CMAKE_RUNTIME_OUTPUT_DIRECTORY &quot;$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;&quot;)# è®¾ç½®å¯æ‰§è¡Œæ–‡ä»¶çš„è¾“å‡ºè·¯å¾„ Clionå¸¦å‘½ä»¤è¡Œå‚æ•°è¿è¡Œ æ³¨æ„ï¼šè¦é€‰æ‹©æ­£ç¡®çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œä¸ºmycp","categories":[{"name":"æ£é¼“","slug":"æ£é¼“","permalink":"http://breadwinners.top/categories/%E6%8D%A3%E9%BC%93/"}],"tags":[{"name":"è¿œç¨‹å¼€å‘","slug":"è¿œç¨‹å¼€å‘","permalink":"http://breadwinners.top/tags/%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91/"}]},{"title":"centOS 7å‡çº§gccï¼Œgdb","slug":"Linux/centOS 7å‡çº§gccï¼Œgdb","date":"2023-03-17T16:00:00.000Z","updated":"2023-07-11T01:57:30.072Z","comments":true,"path":"2023/03/18/Linux/centOS 7å‡çº§gccï¼Œgdb/","link":"","permalink":"http://breadwinners.top/2023/03/18/Linux/centOS%207%E5%8D%87%E7%BA%A7gcc%EF%BC%8Cgdb/","excerpt":"","text":"centOS 7å‡çº§gccï¼ŒgdbentOSè‡ªå¸¦çš„gccä¸º4.8ç‰ˆæœ¬ï¼Œè€Œä½¿ç”¨yumä¹Ÿæ— æ³•å®‰è£…æ›´é«˜ç‰ˆæœ¬çš„gcc è·å–gccæºä»£ç  è·å–gccæºä»£ç å¹¶ä¸Šä¼ è‡³è™šæ‹Ÿæœº è§£å‹gcc 1[root@222 ~]# tar -xvf gcc-10.2.0.tar.gz æ‰§è¡Œ./configure/ ä¼šæŠ¥é”™ï¼Œæç¤ºéœ€è¦å®‰è£…å¯¹åº”çš„ä¾èµ– 123456789configure: error: Building GCC requires GMP 4.2+, MPFR 2.4.0+ and MPC 0.8.0+.Try the --with-gmp, --with-mpfr and/or --with-mpc options to specifytheir locations. Source code for these libraries can be found attheir respective hosting sites as well as atftp://gcc.gnu.org/pub/gcc/infrastructure/. See alsohttp://gcc.gnu.org/install/prerequisites.html for additional info. Ifyou obtained GMP, MPFR and/or MPC from a vendor distribution package,make sure that you have installed both the libraries and the headerfiles. They may be located in separate packages. æœ¬æ–‡ä»¥MPCï¼š1.0.3 mpfrï¼š3.1.5 gmpï¼š6.1.2å®‰è£…gcc10.2.0ï¼Œå¯¹åº”çš„æºä»£ç åœ°å€ä¸ºï¼š MPC : http://ftp.gnu.org/gnu/mpc/mpc-1.0.3.tar.gz GMP : http://ftp.gnu.org/gnu/gmp/gmp-6.1.2.tar.xz MPFR : http://ftp.gnu.org/gnu/mpfr/mpfr-3.1.5.tar.gz å®‰è£…GMP1234[root@222 ~]# tar -xvf gmp-6.1.2.tar.gz[root@222 ]# cd gmp-6.1.2/[root@222 gmp-6.1.2]# ../gmp-6.1.2/configure --prefix=/usr/local/gmp-6.1.2[root@222 gmp-6.1.2]# make &amp;&amp; make install å®‰è£…MPFR1234[root@222 ~]# tar -xvf mpfr-3.1.5.tar.gz[root@222 ~]# cd mpfr-3.1.5/[root@222 mpfr-3.1.5]# ./configure --prefix=/usr/local/mpfr-3.1.5 --with-gmp=/usr/local/gmp-6.1.2[root@222 mpfr-3.1.5]# make &amp;&amp; make install å®‰è£…MPC1234[root@222 ~]# tar -xvf mpc-1.0.3.tar.gz[root@222 ~]# cd mpc-1.0.3/[root@222 mpc-1.0.3]# ./configure --prefix=/usr/local/mpc-1.0.3 --with-gmp=/usr/local/gmp-6.1.2--with-mpfr=/usr/local/mpfr-3.1.5[root@222 mpc-1.0.3]# make &amp;&amp; make install å®‰è£…gcc12345[root@222 ~]# cd gcc-10.2.0/[root@222 gcc-10.2.0]# mkdir tmp &amp;&amp; cd tmp[root@222 tmp]# ../configure --prefix=/usr/local/gcc-10.2.0/ --enable-checking=release --enable-languages=c,c++ --disable-multilib --with-gmp=/usr/local/gmp-6.1.2 --with-mpfr=/usr/local/mpfr-3.1.5 --with-mpc=/usr/local/mpc-1.0.3[root@222 tmp]# make &amp;&amp; make install æ³¨ï¼šæœ€ågccç¼–è¯‘å®‰è£…çš„æ—¶é—´å¾ˆé•¿ï¼Œå¯èƒ½éœ€è¦1-2ä¸ªå°æ—¶ï¼Œå»ºè®®åœ¨æ—¶é—´å’Œç½‘ç»œå…è®¸çš„æƒ…å†µä¸‹è¿›è¡Œ å®‰è£…å®Œæˆè¿˜éœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 12345678910mv /usr/bin/gcc /usr/bin/gcc485mv /usr/bin/g++ /usr/bin/g++485mv /usr/bin/c++ /usr/bin/c++485mv /usr/bin/cc /usr/bin/cc485ln -s /usr/local/gcc-10.2.0/bin/gcc /usr/bin/gccln -s /usr/local/gcc-10.2.0/bin/g++ /usr/bin/g++ln -s /usr/local/gcc-10.2.0/bin/c++ /usr/bin/c++ln -s /usr/local/gcc-10.2.0/bin/gcc /usr/bin/ccmv /usr/lib64/libstdc++.so.6 /usr/lib64/libstdc++.so.6.bakln -s /usr/local/gcc-10.2.0/lib64/libstdc++.so.6.0.28 /usr/lib64/libstdc++.so.6 æœ€ågcc -v å°±å¯ä»¥å‘ç°gccå‡çº§æˆåŠŸ ä¸­é€”æŠ¥é”™å¯ä»¥æŸ¥çœ‹è¿™ä½å¤§ä½¬çš„æ–‡ç«  https://blog.csdn.net/Tsuki_jhsyi77/article/details/103111687 è‹¥æœ¬æ–¹æ³•ä¸è¡Œï¼Œä¹Ÿå¯ä»¥å°è¯•è¿™ä½å¤§ä½¬çš„æ–¹æ³• https://blog.csdn.net/b_ingram/article/details/121569398 gdbå‡çº§å®˜ç½‘ï¼šhttps://gcc.gnu.org/ä¸‹è½½é•œåƒï¼šhttps://gcc.gnu.org/mirrors.htmlé€Ÿåº¦æ¯”è¾ƒå¥½çš„ä¸‹è½½é•œåƒï¼šftp://mirrors.ustc.edu.cn/gnu/ä¸‹è½½gdb-8.3.1.tar.gz;å»ºè®®åœ¨å®‰è£…gccå‰ï¼Œå…ˆè£…gdbçš„å‡çº§ï¼Œgdbçš„å‡çº§ä¸èƒ½ç”¨å¤ªé«˜ç‰ˆæœ¬çš„gccç¼–ç»ï¼Œæˆ–è€…åœ¨ç¼–ç»æ—¶æŒ‡å®šä½ç‰ˆæœ¬çš„gccã€‚æœ¬æ¬¡æˆåŠŸç¼–ç»gdbçš„gccç‰ˆæœ¬æ˜¯ï¼šgcc version 4.8.5 20150623 (Red Hat 4.8.5-39) (GCC)ã€‚ç›¸å…³å‘½ä»¤å¦‚ä¸‹ï¼štar -xzvf gdb-8.3.1.tar.gzcd gdb-8.3.1å¦‚æœéœ€è¦æŒ‡å®šç¼–ç»çš„gccç‰ˆæœ¬ï¼Œå¯ä»¥ç”¨ä»¥CCæŒ‡å®šå…·ä½“çš„gccï¼Œå¦‚ä¸‹é¢çš„&#x2F;usr&#x2F;local&#x2F;gcc&#x2F;bin&#x2F;gccå°±æ˜¯gccçš„å®‰è£…ç›®å½•ï¼šCC&#x3D;&#x2F;usr&#x2F;local&#x2F;gcc&#x2F;bin&#x2F;gcc .&#x2F;configureå¦åˆ™å¯ä»¥ç›´æ¥ç¼–ç»:.&#x2F;configuremakemake installåœ¨å®‰è£…å‰ç³»ç»Ÿéœ€è¦å®‰è£…texinfoï¼šyum install texinfoå¦‚æœä¹‹å‰ç³»ç»Ÿæ²¡æœ‰å®‰è£…gccï¼Œå…ˆæ‰§è¡Œï¼šyum install gccyum install gcc-c++ cmakeå‡çº§https://blog.csdn.net/qq_19734597/article/details/104200371","categories":[{"name":"æ£é¼“","slug":"æ£é¼“","permalink":"http://breadwinners.top/categories/%E6%8D%A3%E9%BC%93/"}],"tags":[{"name":"centos","slug":"centos","permalink":"http://breadwinners.top/tags/centos/"},{"name":"gcc","slug":"gcc","permalink":"http://breadwinners.top/tags/gcc/"},{"name":"gdb","slug":"gdb","permalink":"http://breadwinners.top/tags/gdb/"}]},{"title":"Markdown Style test","slug":"markdown","date":"2018-07-24T15:31:06.000Z","updated":"2023-05-02T16:18:22.929Z","comments":true,"path":"2018/07/24/markdown/","link":"","permalink":"http://breadwinners.top/2018/07/24/markdown/","excerpt":"This post is originated from here and is used for testing markdown style. This post contains nearly every markdown usage. Make sure all the markdown elements below show up correctly.","text":"This post is originated from here and is used for testing markdown style. This post contains nearly every markdown usage. Make sure all the markdown elements below show up correctly.","categories":[],"tags":[{"name":"test","slug":"test","permalink":"http://breadwinners.top/tags/test/"}]},{"title":"Tag Plugins","slug":"tag-plugins","date":"2013-12-24T16:14:39.000Z","updated":"2023-04-30T06:59:49.462Z","comments":true,"path":"2013/12/25/tag-plugins/","link":"","permalink":"http://breadwinners.top/2013/12/25/tag-plugins/","excerpt":"","text":"This post is used for testing tag plugins. See docs for more info. Block QuoteNormal blockquote Praesent diam elit, interdum ut pulvinar placerat, imperdiet at magna. Quote from a bookDo not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy. David LevithanWide Awake Quote from TwitterNEW: DevDocs now comes with syntax highlighting. http://devdocs.io @DevDocstwitter.com/devdocs/status/356095192085962752 Quote from an article on the webEvery interaction is both precious and an opportunity to delight. Seth GodinWelcome to Island Marketing Code BlockNormal code block1alert(&#x27;Hello World!&#x27;); With captionArray.map1array.map(callback[, thisArg]) With caption and URL.compactUnderscore.js12.compact([0, 1, false, 2, â€˜â€™, 3]);=&gt; [1, 2, 3] With marked linesLine 1,7-8,10 should be marked with different color. 1234567891011const http = require(&#x27;http&#x27;);const hostname = &#x27;127.0.0.1&#x27;;const port = 1337;http.createServer((req, res) =&gt; &#123; res.writeHead(200, &#123; &#x27;Content-Type&#x27;: &#x27;text/plain&#x27; &#125;); res.end(&#x27;Hello World\\n&#x27;);&#125;).listen(port, hostname, () =&gt; &#123; console.log(`Server running at http://$&#123;hostname&#125;:$&#123;port&#125;/`);&#125;); Note: Themeâ€™s style should support .highlight.line.marked (recommend to use the selection or current line color). Gist jsFiddle PullquoteLeftLorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas tempus molestie arcu, et fringilla mauris placerat ac. Nullam luctus bibendum risus. Ut cursus sed ipsum feugiat egestas. Suspendisse elementum, velit eu consequat consequat, augue lorem dapibus libero, eget pulvinar dolor est sit amet nulla. Suspendisse a porta tortor, et posuere mi. Pellentesque ultricies, mi quis volutpat malesuada, erat felis vulputate nisl, ac congue ante tortor ut ante. Proin aliquam sem vel mauris tincidunt, eget scelerisque tortor euismod. Nulla tincidunt enim nec commodo dictum. Mauris id sapien et orci gravida luctus id ut dui. In vel vulputate odio. Duis vel turpis molestie, scelerisque enim eu, lobortis eros. Cras at ipsum gravida, sagittis ante vel, viverra tellus. Nunc mauris turpis, elementum ullamcorper nisl pretium, ultrices cursus justo. Mauris porttitor commodo eros, ac ornare orci interdum in. Cras fermentum cursus leo sed mattis. In dignissim lorem sem, sit amet elementum mauris venenatis ac. RightLorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed ligula justo, lobortis sit amet semper vel, dignissim sit amet libero. Praesent ac tempus ligula. Maecenas at gravida odio. Etiam tristique volutpat lacus eu faucibus. Donec non tempus arcu. Phasellus adipiscing, mauris nec mollis egestas, ipsum nunc auctor velit, et rhoncus lorem ipsum at ante. Praesent et sem in velit volutpat auctor. Duis vel mauris nulla. Maecenas mattis interdum ante, quis sagittis nibh cursus et. Nulla facilisi. Morbi convallis gravida tortor, ut fermentum enim gravida et. Nunc vel dictum nisl, non ultrices libero. Proin vestibulum felis eget orci consectetur lobortis. Vestibulum augue nulla, iaculis vitae augue vehicula, dignissim ultrices libero. Sed imperdiet urna et quam ultrices tincidunt nec ac magna. Etiam vel pharetra elit.","categories":[],"tags":[]},{"title":"sufingkeyså¸¸ç”¨ä½¿ç”¨è¯´æ˜","slug":"sufingkeyså¸¸ç”¨ä½¿ç”¨è¯´æ˜","date":"2013-12-24T15:30:09.000Z","updated":"2023-04-30T15:56:48.626Z","comments":true,"path":"2013/12/24/sufingkeyså¸¸ç”¨ä½¿ç”¨è¯´æ˜/","link":"","permalink":"http://breadwinners.top/2013/12/24/sufingkeys%E5%B8%B8%E7%94%A8%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/","excerpt":"","text":"normalæ¨¡å¼ æ’å…¥æ¨¡å¼ j å‘ä¸‹æ··åŠ¨ k å‘ä¸Šæ»šåŠ¨ h å‘å·¦æ»šåŠ¨ l å‘å³æ»šåŠ¨ gg å®šä½åˆ°é¡¶éƒ¨ G å®šä½åˆ°åº•éƒ¨ ç©ºæ ¼ å¿«é€Ÿç¿»é¡µ &#x2F; æœç´¢é¡µé¢å†…å®¹ Ctrl+L Alt+d å…‰æ ‡å®šä½åˆ°åœ°å€æ  gi å…‰æ ‡å®šä½åˆ°æœç´¢æ¡† gf åœ¨æ–°æ ‡ç­¾é¡µåå°æ‰“å¼€é“¾æ¥ f å±•ç¤ºé¡µé¢ä¸­æ‰€æœ‰å¯ä»¥ç‚¹å‡»çš„é“¾æ¥ï¼Œè¾“å…¥ç›¸åº”çš„å­—æ¯å›è½¦è¿›è¡Œè·³è½¬ x å…³é—­å½“å‰æ ‡ç­¾ X æ¢å¤ä¸Šä¸€ä¸ªå…³é—­çš„æ ‡ç­¾ E è·³åˆ°å·¦ä¾§æ ‡ç­¾ R è·³åˆ°å³ä¾§æ ‡ç­¾ yt å¤åˆ¶å½“å‰æ ‡ç­¾é¡µ yy å¤åˆ¶å½“å‰åœ°å€ yg æˆªå± T å¿«é€Ÿåˆ‡æ¢æ ‡ç­¾ b æœç´¢ä¹¦ç­¾æ‰“å¼€ n ä¸‹ä¸€å¤„ N ä¸Šä¸€å¤„ on æ‰“å¼€æ–°æ ‡ç­¾ zi æ”¾å¤§ zo ç¼©å° oh æ‰“å¼€æœç´¢æ æŸ¥æ‰¾è®¿é—®å†å² ob æ‰“å¼€ç™¾åº¦æœç´¢æ og æ‰“å¼€è°·æ­Œæœç´¢æ ow æ‰“å¼€å¿…åº”æœç´¢æ  sg ç”¨è°·æ­Œæœç´¢é€‰ä¸­æ–‡æœ¬ sb ç”¨ç™¾åº¦æœç´¢é€‰ä¸­æ–‡æœ¬ sw ç”¨å¿…åº”æœç´¢é€‰ä¸­æ–‡æœ¬ ss ç”¨stackoverflowæœç´¢é€‰ä¸­æ–‡æœ¬ sh ç”¨githubæœç´¢é€‰ä¸­æ–‡æœ¬ gd æ‰“å¼€ä¸‹è½½ gh æ‰“å¼€å†å²è®°å½• cc æ‰“å¼€é€‰ä¸­çš„ç½‘å€æˆ–ç³»ç»Ÿå‰ªè´´æ¿é‡Œçš„ç½‘å€ äº†è§£vimçš„ç¼–è¾‘æ–¹å¼ æŸäº›ç½‘ç«™ç¦ç”¨surfingkeys Alt + s surfingkeys Blacklist","categories":[{"name":"use","slug":"use","permalink":"http://breadwinners.top/categories/use/"}],"tags":[{"name":"æµè§ˆå™¨æ’ä»¶","slug":"æµè§ˆå™¨æ’ä»¶","permalink":"http://breadwinners.top/tags/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6/"}]}],"categories":[{"name":"å°æŠ€å·§","slug":"å°æŠ€å·§","permalink":"http://breadwinners.top/categories/%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"name":"å°åœŸå †pytorch","slug":"å°åœŸå †pytorch","permalink":"http://breadwinners.top/categories/%E5%B0%8F%E5%9C%9F%E5%A0%86pytorch/"},{"name":"å°åœŸå †pytorch## transform","slug":"å°åœŸå †pytorch-transform","permalink":"http://breadwinners.top/categories/%E5%B0%8F%E5%9C%9F%E5%A0%86pytorch-transform/"},{"name":"å´æ©è¾¾æœºå™¨å­¦ä¹ ","slug":"å´æ©è¾¾æœºå™¨å­¦ä¹ ","permalink":"http://breadwinners.top/categories/%E5%90%B4%E6%81%A9%E8%BE%BE%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"},{"name":"pytorch","slug":"pytorch","permalink":"http://breadwinners.top/categories/pytorch/"},{"name":"Linux","slug":"Linux","permalink":"http://breadwinners.top/categories/Linux/"},{"name":"numpy","slug":"numpy","permalink":"http://breadwinners.top/categories/numpy/"},{"name":"pandas","slug":"pandas","permalink":"http://breadwinners.top/categories/pandas/"},{"name":"Python","slug":"Python","permalink":"http://breadwinners.top/categories/Python/"},{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"http://breadwinners.top/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"},{"name":"bugs","slug":"bugs","permalink":"http://breadwinners.top/categories/bugs/"},{"name":"è®ºæ–‡","slug":"è®ºæ–‡","permalink":"http://breadwinners.top/categories/%E8%AE%BA%E6%96%87/"},{"name":"ç®—æ³•","slug":"è®ºæ–‡/ç®—æ³•","permalink":"http://breadwinners.top/categories/%E8%AE%BA%E6%96%87/%E7%AE%97%E6%B3%95/"},{"name":"åˆ†ç±»","slug":"åˆ†ç±»","permalink":"http://breadwinners.top/categories/%E5%88%86%E7%B1%BB/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://breadwinners.top/categories/%E7%AE%97%E6%B3%95/"},{"name":"æ£é¼“","slug":"æ£é¼“","permalink":"http://breadwinners.top/categories/%E6%8D%A3%E9%BC%93/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://breadwinners.top/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"use","slug":"use","permalink":"http://breadwinners.top/categories/use/"}],"tags":[{"name":"_conda","slug":"conda","permalink":"http://breadwinners.top/tags/conda/"},{"name":"ç›‘ç£å­¦ä¹ ","slug":"ç›‘ç£å­¦ä¹ ","permalink":"http://breadwinners.top/tags/%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0/"},{"name":"éç›‘ç£å­¦ä¹ ","slug":"éç›‘ç£å­¦ä¹ ","permalink":"http://breadwinners.top/tags/%E9%9D%9E%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0/"},{"name":"å†³ç­–æ ‘","slug":"å†³ç­–æ ‘","permalink":"http://breadwinners.top/tags/%E5%86%B3%E7%AD%96%E6%A0%91/"},{"name":"cnn","slug":"cnn","permalink":"http://breadwinners.top/tags/cnn/"},{"name":"GoogleNet","slug":"GoogleNet","permalink":"http://breadwinners.top/tags/GoogleNet/"},{"name":"Inception Module","slug":"Inception-Module","permalink":"http://breadwinners.top/tags/Inception-Module/"},{"name":"æ¢¯åº¦æ¶ˆå¤±","slug":"æ¢¯åº¦æ¶ˆå¤±","permalink":"http://breadwinners.top/tags/%E6%A2%AF%E5%BA%A6%E6%B6%88%E5%A4%B1/"},{"name":"Residual Network","slug":"Residual-Network","permalink":"http://breadwinners.top/tags/Residual-Network/"},{"name":"hidden","slug":"hidden","permalink":"http://breadwinners.top/tags/hidden/"},{"name":"rnn","slug":"rnn","permalink":"http://breadwinners.top/tags/rnn/"},{"name":"Nvidia","slug":"Nvidia","permalink":"http://breadwinners.top/tags/Nvidia/"},{"name":"cuda","slug":"cuda","permalink":"http://breadwinners.top/tags/cuda/"},{"name":"cuda12.2","slug":"cuda12-2","permalink":"http://breadwinners.top/tags/cuda12-2/"},{"name":"ç£ç›˜åˆ†åŒº","slug":"ç£ç›˜åˆ†åŒº","permalink":"http://breadwinners.top/tags/%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA/"},{"name":"lsbsk","slug":"lsbsk","permalink":"http://breadwinners.top/tags/lsbsk/"},{"name":"æ¢¯åº¦ä¸‹é™","slug":"æ¢¯åº¦ä¸‹é™","permalink":"http://breadwinners.top/tags/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D/"},{"name":"éšæœºæ¢¯åº¦ä¸‹é™","slug":"éšæœºæ¢¯åº¦ä¸‹é™","permalink":"http://breadwinners.top/tags/%E9%9A%8F%E6%9C%BA%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D/"},{"name":"titanic","slug":"titanic","permalink":"http://breadwinners.top/tags/titanic/"},{"name":"å¤šç»´åº¦ç‰¹å¾","slug":"å¤šç»´åº¦ç‰¹å¾","permalink":"http://breadwinners.top/tags/%E5%A4%9A%E7%BB%B4%E5%BA%A6%E7%89%B9%E5%BE%81/"},{"name":"å¤šåˆ†ç±»","slug":"å¤šåˆ†ç±»","permalink":"http://breadwinners.top/tags/%E5%A4%9A%E5%88%86%E7%B1%BB/"},{"name":"softmax","slug":"softmax","permalink":"http://breadwinners.top/tags/softmax/"},{"name":"ontHot","slug":"ontHot","permalink":"http://breadwinners.top/tags/ontHot/"},{"name":"Linear","slug":"Linear","permalink":"http://breadwinners.top/tags/Linear/"},{"name":"åå‘ä¼ æ’­","slug":"åå‘ä¼ æ’­","permalink":"http://breadwinners.top/tags/%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD/"},{"name":"DataLoader","slug":"DataLoader","permalink":"http://breadwinners.top/tags/DataLoader/"},{"name":"datasets","slug":"datasets","permalink":"http://breadwinners.top/tags/datasets/"},{"name":"ç§‘å¤§æœªæ¥","slug":"ç§‘å¤§æœªæ¥","permalink":"http://breadwinners.top/tags/%E7%A7%91%E5%A4%A7%E6%9C%AA%E6%9D%A5/"},{"name":"axis","slug":"axis","permalink":"http://breadwinners.top/tags/axis/"},{"name":"shape()","slug":"shape","permalink":"http://breadwinners.top/tags/shape/"},{"name":"frp","slug":"frp","permalink":"http://breadwinners.top/tags/frp/"},{"name":"maven","slug":"maven","permalink":"http://breadwinners.top/tags/maven/"},{"name":"æ‰“åŒ…ä¾èµ–","slug":"æ‰“åŒ…ä¾èµ–","permalink":"http://breadwinners.top/tags/%E6%89%93%E5%8C%85%E4%BE%9D%E8%B5%96/"},{"name":"wsl","slug":"wsl","permalink":"http://breadwinners.top/tags/wsl/"},{"name":"wsl2","slug":"wsl2","permalink":"http://breadwinners.top/tags/wsl2/"},{"name":"flume","slug":"flume","permalink":"http://breadwinners.top/tags/flume/"},{"name":"spark","slug":"spark","permalink":"http://breadwinners.top/tags/spark/"},{"name":"sbt","slug":"sbt","permalink":"http://breadwinners.top/tags/sbt/"},{"name":"binç›®å½•","slug":"binç›®å½•","permalink":"http://breadwinners.top/tags/bin%E7%9B%AE%E5%BD%95/"},{"name":".bashrc","slug":"bashrc","permalink":"http://breadwinners.top/tags/bashrc/"},{"name":"redis","slug":"redis","permalink":"http://breadwinners.top/tags/redis/"},{"name":"é™æ€ip","slug":"é™æ€ip","permalink":"http://breadwinners.top/tags/%E9%9D%99%E6%80%81ip/"},{"name":"picgo","slug":"picgo","permalink":"http://breadwinners.top/tags/picgo/"},{"name":"nginx","slug":"nginx","permalink":"http://breadwinners.top/tags/nginx/"},{"name":"è®ºæ–‡","slug":"è®ºæ–‡","permalink":"http://breadwinners.top/tags/%E8%AE%BA%E6%96%87/"},{"name":"mysql","slug":"mysql","permalink":"http://breadwinners.top/tags/mysql/"},{"name":"bash-4.2$","slug":"bash-4-2","permalink":"http://breadwinners.top/tags/bash-4-2/"},{"name":"æ ‡ç­¾å","slug":"æ ‡ç­¾å","permalink":"http://breadwinners.top/tags/%E6%A0%87%E7%AD%BE%E5%90%8D/"},{"name":"æ•°è®º","slug":"æ•°è®º","permalink":"http://breadwinners.top/tags/%E6%95%B0%E8%AE%BA/"},{"name":"ä¸èƒ½å‡‘å‡ºçš„æœ€å¤§æ•´æ•°","slug":"ä¸èƒ½å‡‘å‡ºçš„æœ€å¤§æ•´æ•°","permalink":"http://breadwinners.top/tags/%E4%B8%8D%E8%83%BD%E5%87%91%E5%87%BA%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B4%E6%95%B0/"},{"name":"DP","slug":"DP","permalink":"http://breadwinners.top/tags/DP/"},{"name":"ç¦»æ•£åŒ–","slug":"ç¦»æ•£åŒ–","permalink":"http://breadwinners.top/tags/%E7%A6%BB%E6%95%A3%E5%8C%96/"},{"name":"æ‰‹å†™å †","slug":"æ‰‹å†™å †","permalink":"http://breadwinners.top/tags/%E6%89%8B%E5%86%99%E5%A0%86/"},{"name":"dfs","slug":"dfs","permalink":"http://breadwinners.top/tags/dfs/"},{"name":"å›¾è®º","slug":"å›¾è®º","permalink":"http://breadwinners.top/tags/%E5%9B%BE%E8%AE%BA/"},{"name":"graph","slug":"graph","permalink":"http://breadwinners.top/tags/graph/"},{"name":"bfs","slug":"bfs","permalink":"http://breadwinners.top/tags/bfs/"},{"name":"å‰ç¼€å’Œ","slug":"å‰ç¼€å’Œ","permalink":"http://breadwinners.top/tags/%E5%89%8D%E7%BC%80%E5%92%8C/"},{"name":"å·®åˆ†","slug":"å·®åˆ†","permalink":"http://breadwinners.top/tags/%E5%B7%AE%E5%88%86/"},{"name":"è¿é€šå—","slug":"è¿é€šå—","permalink":"http://breadwinners.top/tags/%E8%BF%9E%E9%80%9A%E5%9D%97/"},{"name":"greedy","slug":"greedy","permalink":"http://breadwinners.top/tags/greedy/"},{"name":"æš´åŠ›","slug":"æš´åŠ›","permalink":"http://breadwinners.top/tags/%E6%9A%B4%E5%8A%9B/"},{"name":"æ¨¡æ‹Ÿ","slug":"æ¨¡æ‹Ÿ","permalink":"http://breadwinners.top/tags/%E6%A8%A1%E6%8B%9F/"},{"name":"sort","slug":"sort","permalink":"http://breadwinners.top/tags/sort/"},{"name":"æ•°ç»„å•é“¾è¡¨","slug":"æ•°ç»„å•é“¾è¡¨","permalink":"http://breadwinners.top/tags/%E6%95%B0%E7%BB%84%E5%8D%95%E9%93%BE%E8%A1%A8/"},{"name":"æ»‘åŠ¨çª—å£","slug":"æ»‘åŠ¨çª—å£","permalink":"http://breadwinners.top/tags/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/"},{"name":"Trie","slug":"Trie","permalink":"http://breadwinners.top/tags/Trie/"},{"name":"è´ªå¿ƒ","slug":"è´ªå¿ƒ","permalink":"http://breadwinners.top/tags/%E8%B4%AA%E5%BF%83/"},{"name":"heap","slug":"heap","permalink":"http://breadwinners.top/tags/heap/"},{"name":"å†…ç½‘ç©¿é€","slug":"å†…ç½‘ç©¿é€","permalink":"http://breadwinners.top/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"},{"name":"bugs","slug":"bugs","permalink":"http://breadwinners.top/tags/bugs/"},{"name":"STL","slug":"STL","permalink":"http://breadwinners.top/tags/STL/"},{"name":"HashMap","slug":"HashMap","permalink":"http://breadwinners.top/tags/HashMap/"},{"name":"åŒæŒ‡é’ˆ","slug":"åŒæŒ‡é’ˆ","permalink":"http://breadwinners.top/tags/%E5%8F%8C%E6%8C%87%E9%92%88/"},{"name":"quick","slug":"quick","permalink":"http://breadwinners.top/tags/quick/"},{"name":"kmp","slug":"kmp","permalink":"http://breadwinners.top/tags/kmp/"},{"name":"äºŒåˆ†","slug":"äºŒåˆ†","permalink":"http://breadwinners.top/tags/%E4%BA%8C%E5%88%86/"},{"name":"cin","slug":"cin","permalink":"http://breadwinners.top/tags/cin/"},{"name":"cout","slug":"cout","permalink":"http://breadwinners.top/tags/cout/"},{"name":"su","slug":"su","permalink":"http://breadwinners.top/tags/su/"},{"name":"sudo","slug":"sudo","permalink":"http://breadwinners.top/tags/sudo/"},{"name":"å®¹å™¨","slug":"å®¹å™¨","permalink":"http://breadwinners.top/tags/%E5%AE%B9%E5%99%A8/"},{"name":"è¿œç¨‹å¼€å‘","slug":"è¿œç¨‹å¼€å‘","permalink":"http://breadwinners.top/tags/%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91/"},{"name":"centos","slug":"centos","permalink":"http://breadwinners.top/tags/centos/"},{"name":"gcc","slug":"gcc","permalink":"http://breadwinners.top/tags/gcc/"},{"name":"gdb","slug":"gdb","permalink":"http://breadwinners.top/tags/gdb/"},{"name":"test","slug":"test","permalink":"http://breadwinners.top/tags/test/"},{"name":"æµè§ˆå™¨æ’ä»¶","slug":"æµè§ˆå™¨æ’ä»¶","permalink":"http://breadwinners.top/tags/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6/"}]}